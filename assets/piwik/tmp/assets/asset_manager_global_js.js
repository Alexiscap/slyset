
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
/*! jQuery UI - v1.10.2 - 2013-03-29
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */

(function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&s(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,a,n=e(this[0]);n.length&&n[0]!==document;){if(s=n.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||s>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?o["inner"+s].call(this):this.each(function(){e(this).css(r,a(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?o["outer"+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;a.length>s;s++)e.options[a[s][0]]&&a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[s]>0?!0:(t[s]=1,a=t[s]>0,t[s]=0,a)}})})(jQuery);(function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(a){}n(t)},e.widget=function(i,s,n){var a,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],a=u+"-"+i,n||(n=s,s=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(n,function(i,n){return e.isFunction(n)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=n.apply(this,arguments),this._super=s,this._superApply=a,i}}(),t):(l[i]=n,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var n,a,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&a!==t&&(i[n]=e.isPlainObject(a)?e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(s=n[r].apply(n,h),s!==n&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},n=i.split("."),i=n.shift(),n.length){for(a=o[i]=e.widget.extend({},this.options[i]),r=0;n.length-1>r;r++)a[n[r]]=a[n[r]]||{},a=a[n[r]];if(i=n.pop(),s===t)return a[i]===t?null:a[i];a[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var a,r=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=a=e(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,a=this.widget()),e.each(n,function(n,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var r,o=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),r=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),r&&e.effects&&e.effects.effect[o]?s[t](n):o!==t&&s[o]?s[o](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})})(jQuery);(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,m,g,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),k={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,m=_.height,g=_.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),a=i(k.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,T=d+_+s(this,"marginBottom")+w.height,C=t.extend({},v),M=i(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=u:"center"===e.my[0]&&(C.left-=u/2),"bottom"===e.my[1]?C.top-=d:"center"===e.my[1]&&(C.top-=d/2),C.left+=M[0],C.top+=M[1],t.support.offsetFractions||(C.left=h(C.left),C.top=h(C.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[x[i]]&&t.ui.position[x[i]][s](C,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:T,offset:[a[0]+M[0],a[1]+M[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=g.left-C.left,s=i+p-u,n=g.top-C.top,a=n+m-d,h={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>m&&m>r(n+a)&&(h.vertical="middle"),h.important=o(r(i),r(s))>o(r(n),r(a))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(C,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-o-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-o-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(s=t.top+p+f+m+e.collisionHeight-o-a,t.top+p+f+m>c&&(0>s||r(c)>s)&&(t.top+=p+f+m)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-h,t.top+p+f+m>u&&(i>0||u>r(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(jQuery);(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i,s=this,n=!1,a=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(a=e.ui.ddmanager.drop(this,t)),this.dropped&&(a=this.dropped,this.dropped=!1),i=this.element[0];i&&(i=i.parentNode);)i===document&&(n=!0);return n||"original"!==this.options.helper?("invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;if("parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=["document"===n.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===n.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===n.containment?0:e(window).scrollLeft())+e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===n.containment?0:e(window).scrollTop())+(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||n.containment.constructor===Array)n.containment.constructor===Array&&(this.containment=n.containment);else{if(i=e(n.containment),s=i[0],!s)return;t="hidden"!==e(s).css("overflow"),this.containment=[(parseInt(e(s).css("borderLeftWidth"),10)||0)+(parseInt(e(s).css("paddingLeft"),10)||0),(parseInt(e(s).css("borderTopWidth"),10)||0)+(parseInt(e(s).css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(e(s).css("borderRightWidth"),10)||0)-(parseInt(e(s).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(e(s).css("borderBottomWidth"),10)||0)-(parseInt(e(s).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName),l=t.pageX,u=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(u=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(u=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,u=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("ui-draggable"),n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var s=e(this).data("ui-draggable"),n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var s=e(this).data("ui-draggable"),n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),s=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(t,i){var s,n,a,o,r,h,l,u,c,d,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,y=i.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)r=p.snapElements[c].left,h=r+p.snapElements[c].width,l=p.snapElements[c].top,u=l+p.snapElements[c].height,g>r-m&&h+m>g&&y>l-m&&u+m>y||g>r-m&&h+m>g&&b>l-m&&u+m>b||v>r-m&&h+m>v&&y>l-m&&u+m>y||v>r-m&&h+m>v&&b>l-m&&u+m>b?("inner"!==f.snapMode&&(s=m>=Math.abs(l-b),n=m>=Math.abs(u-y),a=m>=Math.abs(r-v),o=m>=Math.abs(h-g),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||a||o,"outer"!==f.snapMode&&(s=m>=Math.abs(l-y),n=m>=Math.abs(u-b),a=m>=Math.abs(r-g),o=m>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=s||n||a||o||d):(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,s=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(t=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}})})(jQuery);(function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,s){if(!i.offset)return!1;var n,a,o=(e.positionAbs||e.position.absolute).left,r=o+e.helperProportions.width,h=(e.positionAbs||e.position.absolute).top,l=h+e.helperProportions.height,u=i.offset.left,c=u+i.proportions.width,d=i.offset.top,p=d+i.proportions.height;switch(s){case"fit":return o>=u&&c>=r&&h>=d&&p>=l;case"intersect":return o+e.helperProportions.width/2>u&&c>r-e.helperProportions.width/2&&h+e.helperProportions.height/2>d&&p>l-e.helperProportions.height/2;case"pointer":return n=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,a=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(a,d,i.proportions.height)&&t(n,u,i.proportions.width);case"touch":return(h>=d&&p>=h||l>=d&&p>=l||d>h&&l>p)&&(o>=u&&c>=o||r>=u&&c>=r||u>o&&r>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions.height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions={width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight})}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===n}),a.length&&(s=e.data(a[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}})(jQuery);(function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,a,o=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=t(this.helper.css("left")),n=t(this.helper.css("top")),o.containment&&(s+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,u=this.size.height,c=t.pageX-a.left||0,d=t.pageY-a.top||0,p=this._change[o];return p?(i=p.apply(this,[t,c,d]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==u&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),o.maxWidth>s&&(o.maxWidth=s),o.maxHeight>a&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,s=this.size,n=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(s.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(s.height-e.height),e.left=t.left+(s.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,s=this.axis,n=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,r=i(e.height)&&t.minHeight&&t.minHeight>e.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(s),c=/nw|ne|n/.test(s);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&u&&(e.left=h-t.minWidth),n&&u&&(e.left=h-t.maxWidth),r&&c&&(e.top=l-t.minHeight),a&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,n,a=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&e.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,a,o,r,h,l=e(this).data("ui-resizable"),u=l.options,c=l.element,d=u.containment,p=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;p&&(l.containerElement=e(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){s[e]=t(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,a=l.containerSize.height,o=l.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,h=e.ui.hasScroll(p)?p.scrollHeight:a,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(t){var i,s,n,a,o=e(this).data("ui-resizable"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,c={top:0,left:0},d=o.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(c=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-c.left),u&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?h.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-h.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):e.each(n.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size,n=t.originalSize,a=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,u=Math.round((s.width-n.width)/h)*h,c=Math.round((s.height-n.height)/l)*l,d=n.width+u,p=n.height+c,f=i.maxWidth&&d>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(d+=h),v&&(p+=l),f&&(d-=h),m&&(p-=l),/^(se|s|e)$/.test(o)?(t.size.width=d,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.top=a.top-c):/^(sw)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.left=a.left-u):(t.size.width=d,t.size.height=p,t.position.top=a.top-c,t.position.left=a.left-u)}})})(jQuery);(function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):undefined}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})(jQuery);(function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,a.widgetName+"-item")===a?(s=t(this),!1):undefined}),t.data(e.target,a.widgetName+"-item")===a&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-t(document).scrollTop()<o.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<o.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+o.scrollSpeed)),e.pageX-t(document).scrollLeft()<o.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<o.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+o.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=t.left,o=a+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u=s+l>r&&h>s+l&&e+c>a&&o>e+c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:e+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return n?this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&s||"left"===a&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,n,a,o=[],r=[],h=this._connectWith();if(h&&e)for(i=h.length-1;i>=0;i--)for(n=t(h[i]),s=n.length-1;s>=0;s--)a=t.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&r.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){o.push(this)});return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)a=t.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(u.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],e,{item:this.currentItem}):t(a.options.items,a.element),a]),this.containers.push(a));for(i=u.length-1;i>=0;i--)for(o=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",o),c.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t(e.document[0].createElement(s)).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?n.append("<td colspan='99'>&#160;</td>"):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,a,o,r,h,l,c,u,d,p,f=null,m=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],m=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],a=this.items.length-1;a>=0;a--)t.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height))&&(u=this.items[a].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[a][l]-c)&&(d=!0,u+=this.items[a][l]),o>Math.abs(u-c)&&(o=Math.abs(u-c),r=this.items[a],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[m].element,!0),this._trigger("change",s,this._uiHash()),this.containers[m]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,a=e.pageX,o=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})})(jQuery);(function(t){var e=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),undefined):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e),undefined)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),a=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(t(e.target).attr("tabIndex",-1),t(a).attr("tabIndex",0),a.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),(e.active===!1&&e.collapsible===!0||!this.headers.length)&&(e.active=!1,this.active=t()),e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,s=this.options,n=s.heightStyle,a=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),s=i.attr("id"),n=i.next(),a=n.attr("id");s||(s=o+"-header-"+e,i.attr("id",s)),a||(a=o+"-panel-"+e,n.attr("id",a)),i.attr("aria-controls",a),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(i=a.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?t():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?t():n,newPanel:r};e.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",e,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?t():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var a,o,r,h=this,l=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){h._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(o=d),o=o||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(a=t.show().outerHeight(),e.animate(i,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(s,{duration:r,easing:o,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(a-e.outerHeight()-l),l=0)}}),undefined):e.animate(i,r,o,p):t.animate(s,r,o,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})})(jQuery);(function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,undefined;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,s.preventDefault(),undefined;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:s})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(s){i===t&&e.__response(s),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})})(jQuery);(function(t){var e,i,s,n,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var e=o.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,o.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+o+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(a.inline?e.parent()[0]:a.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.2"}});var a,r="datepicker",o=(new Date).getTime();t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,a;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),a=this._newInst(t(e),n),a.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,a):n&&this._inlineDatepicker(e,a)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,r,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,a,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[o?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:n,title:n}):n)),e[o?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,a=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},a.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,a,o){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],r,p)),n(p.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,r);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,r),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,a){var r,o,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(r=s||{},"string"==typeof s&&(r={},r[s]=a),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,r),null!==h&&r.dateFormat!==e&&r.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),null!==l&&r.dateFormat!==e&&r.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,a=t.datepicker._getInst(e.target),r=!0,o=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv),n[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,n[0]),i=t.datepicker._get(a,"onSelect"),i?(s=t.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,a=t.datepicker._getInst(i.target);return t.datepicker._get(a,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,a,r,o,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),a=s?s.apply(e,[e,i]):{},a!==!1&&(n(i.settings,a),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),o=t.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,a=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],r=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",r*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!==document.activeElement&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-r:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+o?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+o):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,a,o=this._curInst;!o||e&&o!==t.data(e,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(e,i,s,n){var a,r=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(a=this._getInst(r[0]),a.selectedDay=a.currentDay=t("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,a=this._get(e,"altField");a&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(a).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var a,r,o,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,m=(n?n.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,_=-1,b=-1,y=!1,w=function(t){var e=i.length>a+1&&i.charAt(a+1)===t;return e&&a++,e},k=function(t){var e=w(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),a=s.substring(l).match(n);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},x=function(i,n,a){var r=-1,o=t.map(w(i)?a:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(r=i[0],l+=n.length,!1):e}),-1!==r)return r+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;i.length>a;a++)if(y)"'"!==i.charAt(a)||w("'")?D():y=!1;else switch(i.charAt(a)){case"d":_=k("d");break;case"D":x("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,m);break;case"y":g=k("y");break;case"@":h=new Date(k("@")),g=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),g=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":w("'")?D():y=!0;break;default:D()}if(s.length>l&&(o=s.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=g?0:-100)),b>-1)for(v=1,_=b;;){if(r=this._getDaysInMonth(g,v-1),r>=_)break;v++,_-=r}if(h=this._daylightSavingAdjust(new Date(g,v-1,_)),h.getFullYear()!==g||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,a);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),r,o);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),a=n,r=this._getFormatConfig(t);try{a=this.parseDate(i,s,r)||n}catch(o){s=e?"":s}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=s?a.getDate():0,t.currentMonth=s?a.getMonth():0,t.currentYear=s?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),r=n.getMonth(),o=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,r));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,r))}l=h.exec(i)}return new Date(a,r,o)},r=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?s:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),n===t.selectedMonth&&a===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+o].datepicker._adjustDate(s,-i,"M")},next:function(){window["DP_jQuery_"+o].datepicker._adjustDate(s,+i,"M")},hide:function(){window["DP_jQuery_"+o].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+o].datepicker._gotoToday(s)},selectDay:function(){return window["DP_jQuery_"+o].datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+o].datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+o].datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,a,r,o,h,l,c,u,d,p,f,m,g,v,_,b,y,w,k,x,D,T,C,S,M,N,I,P,A,z,H,E,F,O,W,j,R=new Date,L=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),J=this._get(t,"hideIfNoPrevNext"),Q=this._get(t,"navigationAsDateFormat"),K=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),U=this._get(t,"stepMonths"),q=1!==K[0]||1!==K[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),$=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),$)for(e=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=Q?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-U,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=Q?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+U,1)),this._getFormatConfig(t)):n,a=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",r=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?X:L,r=Q?this.formatDate(r,o,this._getFormatConfig(t)):r,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;K[0]>k;k++){for(x="",this.maxRows=4,D=0;K[1]>D;D++){if(T=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),C=" ui-corner-all",S="",q){if(S+="<div class='ui-datepicker-group",K[1]>1)switch(D){case 0:S+=" ui-datepicker-group-first",C=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:S+=" ui-datepicker-group-last",C=" ui-corner-"+(Y?"left":"right");break;default:S+=" ui-datepicker-group-middle",C=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===k?Y?a:s:"")+(/all|right/.test(C)&&0===k?Y?s:a:"")+this._generateMonthYearHeader(t,Z,te,G,$,k>0||D>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)N=(w+c)%7,M+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[N]+"'>"+p[N]+"</span></th>";for(S+=M+"</tr></thead><tbody>",I=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,I)),P=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((P+I)/7),z=q?this.maxRows>A?this.maxRows:A:A,this.maxRows=z,H=this._daylightSavingAdjust(new Date(te,Z,1-P)),E=0;z>E;E++){for(S+="<tr>",F=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(H)+"</td>":"",w=0;7>w;w++)O=g?g.apply(t.input?t.input[0]:null,[H]):[!0,""],W=H.getMonth()!==Z,j=W&&!_||!O[0]||G&&G>H||$&&H>$,F+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(W?" ui-datepicker-other-month":"")+(H.getTime()===T.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===H.getTime()&&b.getTime()===T.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(W&&!v?"":" "+O[1]+(H.getTime()===X.getTime()?" "+this._currentClass:"")+(H.getTime()===L.getTime()?" ui-datepicker-today":""))+"'"+(W&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(W&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===L.getTime()?" ui-state-highlight":"")+(H.getTime()===X.getTime()?" ui-state-active":"")+(W?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);S+=F+"</tr>"}Z++,Z>11&&(Z=0,te++),S+="</tbody></table>"+(q?"</div>"+(K[0]>0&&D===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=S}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,a,r,o){var h,l,c,u,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(a||!g)y+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+o[c]+"</option>");
y+="</select>"}if(_||(b+=y+(!a&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!a&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=null,o=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=s),i[1].match(/[+\-].*/)&&(o+=s)),(!n||e.getTime()>=n.getTime())&&(!a||e.getTime()<=a.getTime())&&(!r||e.getFullYear()>=r)&&(!o||o>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.2",window["DP_jQuery_"+o]=t})(jQuery);(function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,a;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(a).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(a))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,a){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(a))}}).css("position",a)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,a=!1,o={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(a=!0),t in i&&(o[t]=s)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})})(jQuery);(function(t){t.widget("ui.menu",{version:"1.10.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",a=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=o&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(e.keyCode),r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})})(jQuery);(function(t,e){t.widget("ui.progressbar",{version:"1.10.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})})(jQuery);(function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)o.push(a);this.handles=n.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,h,l,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-u.values(e));(n>i||n===i&&(e===u._lastChangedValue||u.values(e)===c.min))&&(n=i,a=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-a.width()/2,top:e.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,a;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,a=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),a!==!1&&this.values(e,i,!0))):i!==this.value()&&(a=this._trigger("slide",t,{handle:this.handles[e],value:i}),a!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,a,o,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(o=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-o)}this._slide(i,r,a)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})})(jQuery);(function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);void 0!==n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,this.element.val(this._format(i)),void 0}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(e(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})})(jQuery);(function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;t.widget("ui.tabs",{version:"1.10.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,a){return t(a).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),a=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:a=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var a,o,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),u=l.attr("aria-controls");s(n)?(a=n.hash,o=e.element.find(e._sanitizeSelector(a))):(r=e._tabId(l),a="#"+r,o=e.element.find(a),o.length||(o=e._createPanel(r),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":a.substring(1),"aria-labelledby":h}),o.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?t():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):t(),u={oldTab:s,oldPanel:l,newTab:r?t():a,newPanel:h};e.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",e,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?t():a,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),e),this._toggle(e,u))},_toggle:function(e,i){function s(){a.running=!1,a._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,a=this.tabs.eq(e),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),h={tab:a,panel:r};s(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,a){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:a},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})})(jQuery);(function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.2",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,a=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=a),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function a(t){l.of=t,o.is(":hidden")||o.position(l)}var o,r,h,l=t.extend({},this.options.position);if(n){if(o=this._find(s),o.length)return o.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),o=this._tooltip(s),e(s,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:a}),a(i)):o.position(t.extend({of:s},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:o}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),a=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),a.stop(!0),this._hide(a,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:a}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})})(jQuery);(function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[c[l].cache]=o[c[l].cache],n=s._rgba=o._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),s):a[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,o,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(o),o=e);var u=this,d=t.type(n),p=this._rgba=[];return o!==e&&(n=[n,o,r,h],d="array"),"string"===d?this.parse(s(n)||a._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var a=s.cache;f(s.props,function(t,e){if(!u[a]&&s.to){if("alpha"===t||null==n[t])return;u[a]=s.to(u._rgba)}u[a][e.idx]=i(n[t],e,!0)}),u[a]&&0>t.inArray(null,u[a].slice(0,3))&&(u[a][3]=1,s.from&&(u._rgba=s.from(u[a])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),a=c[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(t,n){var a=n.idx,o=r[a],l=s[a],c=u[n.type]||{};null!==l&&(null===o?h[a]=l:(c.mod&&(l-o>c.mod/2?o+=c.mod:o-l>c.mod/2&&(o-=c.mod)),h[a]=i((l-o)*e+o,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,o=t[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],a=t[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,e+1/3)),Math.round(255*n(r,o,e)),Math.round(255*n(r,o,e-1/3)),a]},f(c,function(s,n){var a=n.props,o=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===e)return this[o].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[o].slice();return f(a,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[o]=d,n):l(d)},f(a,function(e,i){l.fn[e]||(l.fn[e]=function(n){var a,o=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=t.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,r="";if("transparent"!==n&&("string"!==t.type(n)||(a=s(n)))){if(n=l(a||n),!d.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function s(e,i){var s,n,o={};for(s in i)n=i[s],e[s]!==n&&(a[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,a,o,r){var h=t.speed(a,o,r);return this.queue(function(){var a,o=t(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),a=function(){t.each(n,function(t,i){e[i]&&o[i+"Class"](e[i])})},a(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){a(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,a){return s?t.effects.animateClass.call(this,{add:i},s,n,a):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,a){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,a):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,a,o,r){return"boolean"==typeof n||n===e?a?t.effects.animateClass.call(this,n?{add:s}:{remove:s},a,o,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,a,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.2",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,a;for(a=0;s.length>a;a++)null!==s[a]&&(n=t.data(i+s[a]),n===e&&(n=""),t.css(s[a],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return e.wrap(s),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(a)&&a.call(n[0]),t.isFunction(e)&&e()}var n=t(this),a=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):o.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,a=i.queue,o=t.effects.effect[i.effect];return t.fx.off||!o?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a===!1?this.each(e):this.queue(a||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()})(jQuery);(function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var a,o,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",m=i.test(u),g={},v="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),a=t.effects.createWrapper(h).css({overflow:"hidden"}),o=a[p](),r=parseFloat(a.css(f))||0,g[p]=v?o:0,m||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[f]=v?r:o+r),v&&(a.css(p,0),m||a.css(f,r+o)),a.animate(g,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}})(jQuery);(function(t){t.effects.effect.bounce=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(o,e.mode||"effect"),l="hide"===h,c="show"===h,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||l?1:0),m=e.duration/f,g=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=o.queue(),y=b.length;for((c||l)&&r.push("opacity"),t.effects.save(o,r),o.show(),t.effects.createWrapper(o),d||(d=o["top"===v?"outerHeight":"outerWidth"]()/3),c&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,_?2*-d:2*d).animate(a,m,g)),l&&(d/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(_?"-=":"+=")+d,o.animate(n,m,g).animate(a,m,g),d=l?2*d:d/2;l&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),o.dequeue()}})(jQuery);(function(t){t.effects.effect.clip=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(o,e.mode||"hide"),l="show"===h,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(o,r),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[d](),l&&(n.css(d,0),n.css(p,a/2)),f[d]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}})}})(jQuery);(function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","opacity","height","width"],o=t.effects.setMode(n,e.mode||"hide"),r="show"===o,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,a),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===c?-s:s),u[l]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);(function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),m||p.hide(),i()}var a,o,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(a=0;u>a;a++)for(h=g.top+a*_,c=a-(u-1)/2,o=0;d>o;o++)r=g.left+o*v,l=o-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(m?l*v:0),top:h+(m?c*_:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:c*_),opacity:m?1:0},e.duration||500,e.easing,s)}})(jQuery);(function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}})(jQuery);(function(t){t.effects.effect.fold=function(e,i){var s,n,a=t(this),o=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(a,e.mode||"hide"),h="show"===r,l="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=h!==d,f=p?["width","height"]:["height","width"],m=e.duration/2,g={},v={};t.effects.save(a,o),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[l?0:1]),h&&s.css(d?{height:0,width:c}:{height:c,width:0}),g[f[0]]=h?n[0]:c,v[f[1]]=h?n[1]:0,s.animate(g,m,e.easing).animate(v,m,e.easing,function(){l&&a.hide(),t.effects.restore(a,o),t.effects.removeWrapper(a),i()})}})(jQuery);(function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],a=t.effects.setMode(s,e.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&s.hide(),t.effects.restore(s,n),i()}})}})(jQuery);(function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),a=t.effects.setMode(n,e.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(e.times||5)+(h?1:0),c=e.duration/l,u=0,d=n.queue(),p=d.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;l>s;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,l+1))),n.dequeue()}})(jQuery);(function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),a="hide"===n,o=parseInt(e.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),a=t.effects.setMode(s,e.mode||"effect"),o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===a?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(o,e.mode||"effect"),f=e.restore||"effect"!==p,m=e.scale||"both",g=e.origin||["middle","center"],v=o.css("position"),_=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===e.mode&&"show"===p?(o.from=e.to||b,o.to=e.from||s):(o.from=e.from||("show"===p?b:s),o.to=e.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(_=_.concat(u),o.from=t.effects.setTransition(o,u,a.from.y,o.from),o.to=t.effects.setTransition(o,u,a.to.y,o.to)),a.from.x!==a.to.x&&(_=_.concat(d),o.from=t.effects.setTransition(o,d,a.from.x,o.from),o.to=t.effects.setTransition(o,d,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(_=_.concat(c).concat(l),o.from=t.effects.setTransition(o,c,a.from.y,o.from),o.to=t.effects.setTransition(o,c,a.to.y,o.to)),t.effects.save(o,_),o.show(),t.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=t.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),o.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=t.effects.setTransition(i,u,a.from.y,i.from),i.to=t.effects.setTransition(i,u,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=t.effects.setTransition(i,d,a.from.x,i.from),i.to=t.effects.setTransition(i,d,a.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),t.effects.restore(o,_),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):t.each(["top","left"],function(t,e){o.css(e,function(e,i){var s=parseInt(i,10),n=t?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(o),i()}})}})(jQuery);(function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","height","width"],o=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",h=e.distance||20,l=e.times||3,c=2*l+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),_=v.length;for(t.effects.save(n,a),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+h,m[d]=(p?"+=":"-=")+2*h,g[d]=(p?"-=":"+=")+2*h,n.animate(f,u,e.easing),s=1;l>s;s++)n.animate(m,u,e.easing).animate(g,u,e.easing);n.animate(m,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}})(jQuery);(function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(n,e.mode||"show"),r="show"===o,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,a),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);(function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),a="fixed"===n.css("position"),o=t("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}})(jQuery);
/*! jQuery Browser - v0.1.0 - 3/23/2012
* https://github.com/jquery/jquery-browser
* Copyright (c) 2012 John Resig; Licensed MIT */
(function(a){var b,c=navigator.userAgent||"";a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},b=a.uaMatch(c),a.browser={},b.browser&&(a.browser[b.browser]=!0,a.browser.version=b.version),a.browser.webkit&&(a.browser.safari=!0)})(jQuery)

function str_repeat(i,m){for(var o=[];m>0;o[--m]=i);return o.join('');}
function sprintf(){var i=0,a,f=arguments[i++],o=[],m,p,c,x,s='';while(f){if(m=/^[^\x25]+/.exec(f)){o.push(m[0]);}
else if(m=/^\x25{2}/.exec(f)){o.push('%');}
else if(m=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(f)){if(((a=arguments[m[1]||i++])==null)||(a==undefined)){throw('Too few arguments.');}
if(/[^s]/.test(m[7])&&(typeof(a)!='number')){throw('Expecting number but found '+typeof(a));}
switch(m[7]){case'b':a=a.toString(2);break;case'c':a=String.fromCharCode(a);break;case'd':a=parseInt(a);break;case'e':a=m[6]?a.toExponential(m[6]):a.toExponential();break;case'f':a=m[6]?parseFloat(a).toFixed(m[6]):parseFloat(a);break;case'o':a=a.toString(8);break;case's':a=((a=String(a))&&m[6]?a.substring(0,m[6]):a);break;case'u':a=Math.abs(a);break;case'x':a=a.toString(16);break;case'X':a=a.toString(16).toUpperCase();break;}
a=(/[def]/.test(m[7])&&m[2]&&a>=0?'+'+a:a);c=m[3]?m[3]=='0'?'0':m[3].charAt(1):' ';x=m[5]-String(a).length-s.length;p=m[5]?str_repeat(c,x):'';o.push(s+(m[4]?a+p:p+a));}
else{throw('Huh ?!');}
f=f.substring(m[0].length);}
return o.join('');}

(function($){var locationWrapper={put:function(hash,win){(win||window).location.hash=this.encoder(hash);},get:function(win){var hash=((win||window).location.hash).replace(/^#/,'');try{return $.browser.mozilla?hash:decodeURIComponent(hash);}
catch(error){return hash;}},encoder:encodeURIComponent};var iframeWrapper={id:"__jQuery_history",init:function(){var html='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';$("body").prepend(html);return this;},_document:function(){return $("#"+this.id)[0].contentWindow.document;},put:function(hash){var doc=this._document();doc.open();doc.close();locationWrapper.put(hash,doc);},get:function(){return locationWrapper.get(this._document());}};function initObjects(options){options=$.extend({unescape:false},options||{});locationWrapper.encoder=encoder(options.unescape);function encoder(unescape_){if(unescape_===true){return function(hash){return hash;};}
if(typeof unescape_=="string"&&(unescape_=partialDecoder(unescape_.split("")))||typeof unescape_=="function"){return function(hash){return unescape_(encodeURIComponent(hash));};}
return encodeURIComponent;}
function partialDecoder(chars){var re=new RegExp($.map(chars,encodeURIComponent).join("|"),"ig");return function(enc){return enc.replace(re,decodeURIComponent);};}}
var implementations={};implementations.base={callback:undefined,type:undefined,check:function(){},load:function(hash){},init:function(callback,options){initObjects(options);self.callback=callback;self._options=options;self._init();},_init:function(){},_options:{}};implementations.timer={_appState:undefined,_init:function(){var current_hash=locationWrapper.get();self._appState=current_hash;self.callback(current_hash);setInterval(self.check,100);},check:function(){var current_hash=locationWrapper.get();if(current_hash!=self._appState){self._appState=current_hash;self.callback(current_hash);}},load:function(hash){if(hash!=self._appState){locationWrapper.put(hash);self._appState=hash;}
self.callback(hash);}};implementations.iframeTimer={_appState:undefined,_init:function(){var current_hash=locationWrapper.get();self._appState=current_hash;iframeWrapper.init().put(current_hash);self.callback(current_hash);setInterval(self.check,100);},check:function(){var iframe_hash=iframeWrapper.get(),location_hash=locationWrapper.get();if(location_hash!=iframe_hash){if(location_hash==self._appState){self._appState=iframe_hash;locationWrapper.put(iframe_hash);self.callback(iframe_hash);}else{self._appState=location_hash;iframeWrapper.put(location_hash);self.callback(location_hash);}}},load:function(hash){if(hash!=self._appState){locationWrapper.put(hash);iframeWrapper.put(hash);self._appState=hash;}
self.callback(hash);}};implementations.hashchangeEvent={_init:function(){self.callback(locationWrapper.get());$(window).bind('hashchange',self.check);},check:function(){self.callback(locationWrapper.get());},load:function(hash){if(locationWrapper.get()==hash){self.callback(locationWrapper.get());}else{locationWrapper.put(hash);}}};var self=$.extend({},implementations.base);if($.browser.msie&&($.browser.version<8||document.documentMode<8)){self.type='iframeTimer';}else if("onhashchange"in window){self.type='hashchangeEvent';}else{self.type='timer';}
$.extend(self,implementations[self.type]);$.history=self;})(jQuery);

jQuery.fn.truncate=function(max){return this.each(function(){var trail='...';v=jQuery.trim(jQuery(this).text());while(max<v.length){c=v.charAt(max);newStringTruncated=v.substring(0,max)+trail;charToRemove='"';regExp=new RegExp("["+charToRemove+"]","g");vCleaned=v.replace(regExp,"&amp;quot;").replace(/</g,'&amp;lt;').replace(/>/g,'&amp;gt;');newStringTruncated=newStringTruncated.replace(regExp,"'").replace(/</g,'&lt;').replace(/>/g,'&gt;');html='<span class="truncated" title="'+vCleaned+'">'+newStringTruncated+'</span>';jQuery(this).html(html);break;max--;}});};
/**
 * Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.3.1
 */
;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
(function(e){var b;e.fn.emptyForce=function(){for(var j=0,k;(k=e(this)[j])!=null;j++){if(k.nodeType===1){e.cleanData(k.getElementsByTagName("*"))}if(e.jqplot.use_excanvas){k.outerHTML=""}else{while(k.firstChild){k.removeChild(k.firstChild)}}k=null}return e(this)};e.fn.removeChildForce=function(j){while(j.firstChild){this.removeChildForce(j.firstChild);j.removeChild(j.firstChild)}};e.fn.jqplot=function(){var j=[];var m=[];for(var n=0,k=arguments.length;n<k;n++){if(e.isArray(arguments[n])){j.push(arguments[n])}else{if(e.isPlainObject(arguments[n])){m.push(arguments[n])}}}return this.each(function(p){var u,t,s=e(this),o=j.length,l=m.length,r,q;if(p<o){r=j[p]}else{r=o?j[o-1]:null}if(p<l){q=m[p]}else{q=l?m[l-1]:null}u=s.attr("id");if(u===b){u="jqplot_target_"+e.jqplot.targetCounter++;s.attr("id",u)}t=e.jqplot(u,r,q);s.data("jqplot",t)})};e.jqplot=function(p,m,k){var l=null,j=null;if(arguments.length===3){l=m;j=k}else{if(arguments.length===2){if(e.isArray(m)){l=m}else{if(e.isPlainObject(m)){j=m
}}}}if(l===null&&j!==null&&j.data){l=j.data}var o=new h();e("#"+p).removeClass("jqplot-error");if(e.jqplot.config.catchErrors){try{o.init(p,l,j);o.draw();o.themeEngine.init.call(o);return o}catch(n){var q=e.jqplot.config.errorMessage||n.message;e("#"+p).append('<div class="jqplot-error-message">'+q+"</div>");e("#"+p).addClass("jqplot-error");document.getElementById(p).style.background=e.jqplot.config.errorBackground;document.getElementById(p).style.border=e.jqplot.config.errorBorder;document.getElementById(p).style.fontFamily=e.jqplot.config.errorFontFamily;document.getElementById(p).style.fontSize=e.jqplot.config.errorFontSize;document.getElementById(p).style.fontStyle=e.jqplot.config.errorFontStyle;document.getElementById(p).style.fontWeight=e.jqplot.config.errorFontWeight}}else{o.init(p,l,j);o.draw();o.themeEngine.init.call(o);return o}};e.jqplot.version="@VERSION";e.jqplot.revision="@REVISION";e.jqplot.targetCounter=1;e.jqplot.CanvasManager=function(){if(typeof e.jqplot.CanvasManager.canvases=="undefined"){e.jqplot.CanvasManager.canvases=[];
e.jqplot.CanvasManager.free=[]}var j=[];this.getCanvas=function(){var n;var m=true;if(!e.jqplot.use_excanvas){for(var o=0,k=e.jqplot.CanvasManager.canvases.length;o<k;o++){if(e.jqplot.CanvasManager.free[o]===true){m=false;n=e.jqplot.CanvasManager.canvases[o];e.jqplot.CanvasManager.free[o]=false;j.push(o);break}}}if(m){n=document.createElement("canvas");j.push(e.jqplot.CanvasManager.canvases.length);e.jqplot.CanvasManager.canvases.push(n);e.jqplot.CanvasManager.free.push(false)}return n};this.initCanvas=function(k){if(e.jqplot.use_excanvas){return window.G_vmlCanvasManager.initElement(k)}return k};this.freeAllCanvases=function(){for(var m=0,k=j.length;m<k;m++){this.freeCanvas(j[m])}j=[]};this.freeCanvas=function(k){if(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==b){window.G_vmlCanvasManager.uninitElement(e.jqplot.CanvasManager.canvases[k]);e.jqplot.CanvasManager.canvases[k]=null}else{var l=e.jqplot.CanvasManager.canvases[k];l.getContext("2d").clearRect(0,0,l.width,l.height);
e(l).unbind().removeAttr("class").removeAttr("style");e(l).css({left:"",top:"",position:""});l.width=0;l.height=0;e.jqplot.CanvasManager.free[k]=true}}};e.jqplot.log=function(){if(window.console){window.console.log.apply(window.console,arguments)}};e.jqplot.config={addDomReference:false,enablePlugins:false,defaultHeight:300,defaultWidth:400,UTCAdjust:false,timezoneOffset:new Date(new Date().getTimezoneOffset()*60000),errorMessage:"",errorBackground:"",errorBorder:"",errorFontFamily:"",errorFontSize:"",errorFontStyle:"",errorFontWeight:"",catchErrors:false,defaultTickFormatString:"%.1f",defaultColors:["#4bb2c5","#EAA228","#c5b47f","#579575","#839557","#958c12","#953579","#4b5de4","#d8b83f","#ff5800","#0085cc","#c747a3","#cddf54","#FBD178","#26B4E3","#bd70c7"],defaultNegativeColors:["#498991","#C08840","#9F9274","#546D61","#646C4A","#6F6621","#6E3F5F","#4F64B0","#A89050","#C45923","#187399","#945381","#959E5C","#C7AF7B","#478396","#907294"],dashLength:4,gapLength:4,dotGapLength:2.5,srcLocation:"jqplot/src/",pluginLocation:"jqplot/src/plugins/"};
e.jqplot.arrayMax=function(j){return Math.max.apply(Math,j)};e.jqplot.arrayMin=function(j){return Math.min.apply(Math,j)};e.jqplot.enablePlugins=e.jqplot.config.enablePlugins;e.jqplot.support_canvas=function(){if(typeof e.jqplot.support_canvas.result=="undefined"){e.jqplot.support_canvas.result=!!document.createElement("canvas").getContext}return e.jqplot.support_canvas.result};e.jqplot.support_canvas_text=function(){if(typeof e.jqplot.support_canvas_text.result=="undefined"){if(window.G_vmlCanvasManager!==b&&window.G_vmlCanvasManager._version>887){e.jqplot.support_canvas_text.result=true}else{e.jqplot.support_canvas_text.result=!!(document.createElement("canvas").getContext&&typeof document.createElement("canvas").getContext("2d").fillText=="function")}}return e.jqplot.support_canvas_text.result};e.jqplot.use_excanvas=((!e.support.boxModel||!e.support.objectAll||!$support.leadingWhitespace)&&!e.jqplot.support_canvas())?true:false;e.jqplot.preInitHooks=[];e.jqplot.postInitHooks=[];e.jqplot.preParseOptionsHooks=[];
e.jqplot.postParseOptionsHooks=[];e.jqplot.preDrawHooks=[];e.jqplot.postDrawHooks=[];e.jqplot.preDrawSeriesHooks=[];e.jqplot.postDrawSeriesHooks=[];e.jqplot.preDrawLegendHooks=[];e.jqplot.addLegendRowHooks=[];e.jqplot.preSeriesInitHooks=[];e.jqplot.postSeriesInitHooks=[];e.jqplot.preParseSeriesOptionsHooks=[];e.jqplot.postParseSeriesOptionsHooks=[];e.jqplot.eventListenerHooks=[];e.jqplot.preDrawSeriesShadowHooks=[];e.jqplot.postDrawSeriesShadowHooks=[];e.jqplot.ElemContainer=function(){this._elem;this._plotWidth;this._plotHeight;this._plotDimensions={height:null,width:null}};e.jqplot.ElemContainer.prototype.createElement=function(m,o,k,l,p){this._offsets=o;var j=k||"jqplot";var n=document.createElement(m);this._elem=e(n);this._elem.addClass(j);this._elem.css(l);this._elem.attr(p);n=null;return this._elem};e.jqplot.ElemContainer.prototype.getWidth=function(){if(this._elem){return this._elem.outerWidth(true)}else{return null}};e.jqplot.ElemContainer.prototype.getHeight=function(){if(this._elem){return this._elem.outerHeight(true)
}else{return null}};e.jqplot.ElemContainer.prototype.getPosition=function(){if(this._elem){return this._elem.position()}else{return{top:null,left:null,bottom:null,right:null}}};e.jqplot.ElemContainer.prototype.getTop=function(){return this.getPosition().top};e.jqplot.ElemContainer.prototype.getLeft=function(){return this.getPosition().left};e.jqplot.ElemContainer.prototype.getBottom=function(){return this._elem.css("bottom")};e.jqplot.ElemContainer.prototype.getRight=function(){return this._elem.css("right")};function g(j){e.jqplot.ElemContainer.call(this);this.name=j;this._series=[];this.show=false;this.tickRenderer=e.jqplot.AxisTickRenderer;this.tickOptions={};this.labelRenderer=e.jqplot.AxisLabelRenderer;this.labelOptions={};this.label=null;this.showLabel=true;this.min=null;this.max=null;this.autoscale=false;this.pad=1.2;this.padMax=null;this.padMin=null;this.ticks=[];this.numberTicks;this.tickInterval;this.renderer=e.jqplot.LinearAxisRenderer;this.rendererOptions={};this.showTicks=true;
this.showTickMarks=true;this.showMinorTicks=true;this.drawMajorGridlines=true;this.drawMinorGridlines=false;this.drawMajorTickMarks=true;this.drawMinorTickMarks=true;this.useSeriesColor=false;this.borderWidth=null;this.borderColor=null;this.scaleToHiddenSeries=false;this._dataBounds={min:null,max:null};this._intervalStats=[];this._offsets={min:null,max:null};this._ticks=[];this._label=null;this.syncTicks=null;this.tickSpacing=75;this._min=null;this._max=null;this._tickInterval=null;this._numberTicks=null;this.__ticks=null;this._options={}}g.prototype=new e.jqplot.ElemContainer();g.prototype.constructor=g;g.prototype.init=function(){if(e.isFunction(this.renderer)){this.renderer=new this.renderer()}this.tickOptions.axis=this.name;if(this.tickOptions.showMark==null){this.tickOptions.showMark=this.showTicks}if(this.tickOptions.showMark==null){this.tickOptions.showMark=this.showTickMarks}if(this.tickOptions.showLabel==null){this.tickOptions.showLabel=this.showTicks}if(this.label==null||this.label==""){this.showLabel=false
}else{this.labelOptions.label=this.label}if(this.showLabel==false){this.labelOptions.show=false}if(this.pad==0){this.pad=1}if(this.padMax==0){this.padMax=1}if(this.padMin==0){this.padMin=1}if(this.padMax==null){this.padMax=(this.pad-1)/2+1}if(this.padMin==null){this.padMin=(this.pad-1)/2+1}this.pad=this.padMax+this.padMin-1;if(this.min!=null||this.max!=null){this.autoscale=false}if(this.syncTicks==null&&this.name.indexOf("y")>-1){this.syncTicks=true}else{if(this.syncTicks==null){this.syncTicks=false}}this.renderer.init.call(this,this.rendererOptions)};g.prototype.draw=function(j,k){if(this.__ticks){this.__ticks=null}return this.renderer.draw.call(this,j,k)};g.prototype.set=function(){this.renderer.set.call(this)};g.prototype.pack=function(k,j){if(this.show){this.renderer.pack.call(this,k,j)}if(this._min==null){this._min=this.min;this._max=this.max;this._tickInterval=this.tickInterval;this._numberTicks=this.numberTicks;this.__ticks=this._ticks}};g.prototype.reset=function(){this.renderer.reset.call(this)
};g.prototype.resetScale=function(j){e.extend(true,this,{min:null,max:null,numberTicks:null,tickInterval:null,_ticks:[],ticks:[]},j);this.resetDataBounds()};g.prototype.resetDataBounds=function(){var t=this._dataBounds;t.min=null;t.max=null;var m,u,q;var n=(this.show)?true:false;for(var p=0;p<this._series.length;p++){u=this._series[p];if(u.show||this.scaleToHiddenSeries){q=u._plotData;if(u._type==="line"&&u.renderer.bands.show&&this.name.charAt(0)!=="x"){q=[[0,u.renderer.bands._min],[1,u.renderer.bands._max]]}var k=1,r=1;if(u._type!=null&&u._type=="ohlc"){k=3;r=2}for(var o=0,m=q.length;o<m;o++){if(this.name=="xaxis"||this.name=="x2axis"){if((q[o][0]!=null&&q[o][0]<t.min)||t.min==null){t.min=q[o][0]}if((q[o][0]!=null&&q[o][0]>t.max)||t.max==null){t.max=q[o][0]}}else{if((q[o][k]!=null&&q[o][k]<t.min)||t.min==null){t.min=q[o][k]}if((q[o][r]!=null&&q[o][r]>t.max)||t.max==null){t.max=q[o][r]}}}if(n&&u.renderer.constructor!==e.jqplot.BarRenderer){n=false}else{if(n&&this._options.hasOwnProperty("forceTickAt0")&&this._options.forceTickAt0==false){n=false
}else{if(n&&u.renderer.constructor===e.jqplot.BarRenderer){if(u.barDirection=="vertical"&&this.name!="xaxis"&&this.name!="x2axis"){if(this._options.pad!=null||this._options.padMin!=null){n=false}}else{if(u.barDirection=="horizontal"&&(this.name=="xaxis"||this.name=="x2axis")){if(this._options.pad!=null||this._options.padMin!=null){n=false}}}}}}}}if(n&&this.renderer.constructor===e.jqplot.LinearAxisRenderer&&t.min>=0){this.padMin=1;this.forceTickAt0=true}};function a(j){e.jqplot.ElemContainer.call(this);this.show=false;this.location="ne";this.labels=[];this.showLabels=true;this.showSwatches=true;this.placement="insideGrid";this.xoffset=0;this.yoffset=0;this.border;this.background;this.textColor;this.fontFamily;this.fontSize;this.rowSpacing="0.5em";this.renderer=e.jqplot.TableLegendRenderer;this.rendererOptions={};this.preDraw=false;this.marginTop=null;this.marginRight=null;this.marginBottom=null;this.marginLeft=null;this.escapeHtml=false;this._series=[];e.extend(true,this,j)}a.prototype=new e.jqplot.ElemContainer();
a.prototype.constructor=a;a.prototype.setOptions=function(j){e.extend(true,this,j);if(this.placement=="inside"){this.placement="insideGrid"}if(this.xoffset>0){if(this.placement=="insideGrid"){switch(this.location){case"nw":case"w":case"sw":if(this.marginLeft==null){this.marginLeft=this.xoffset+"px"}this.marginRight="0px";break;case"ne":case"e":case"se":default:if(this.marginRight==null){this.marginRight=this.xoffset+"px"}this.marginLeft="0px";break}}else{if(this.placement=="outside"){switch(this.location){case"nw":case"w":case"sw":if(this.marginRight==null){this.marginRight=this.xoffset+"px"}this.marginLeft="0px";break;case"ne":case"e":case"se":default:if(this.marginLeft==null){this.marginLeft=this.xoffset+"px"}this.marginRight="0px";break}}}this.xoffset=0}if(this.yoffset>0){if(this.placement=="outside"){switch(this.location){case"sw":case"s":case"se":if(this.marginTop==null){this.marginTop=this.yoffset+"px"}this.marginBottom="0px";break;case"ne":case"n":case"nw":default:if(this.marginBottom==null){this.marginBottom=this.yoffset+"px"
}this.marginTop="0px";break}}else{if(this.placement=="insideGrid"){switch(this.location){case"sw":case"s":case"se":if(this.marginBottom==null){this.marginBottom=this.yoffset+"px"}this.marginTop="0px";break;case"ne":case"n":case"nw":default:if(this.marginTop==null){this.marginTop=this.yoffset+"px"}this.marginBottom="0px";break}}}this.yoffset=0}};a.prototype.init=function(){if(e.isFunction(this.renderer)){this.renderer=new this.renderer()}this.renderer.init.call(this,this.rendererOptions)};a.prototype.draw=function(k,l){for(var j=0;j<e.jqplot.preDrawLegendHooks.length;j++){e.jqplot.preDrawLegendHooks[j].call(this,k)}return this.renderer.draw.call(this,k,l)};a.prototype.pack=function(j){this.renderer.pack.call(this,j)};function f(j){e.jqplot.ElemContainer.call(this);this.text=j;this.show=true;this.fontFamily;this.fontSize;this.textAlign;this.textColor;this.renderer=e.jqplot.DivTitleRenderer;this.rendererOptions={};this.escapeHtml=false}f.prototype=new e.jqplot.ElemContainer();f.prototype.constructor=f;
f.prototype.init=function(){if(e.isFunction(this.renderer)){this.renderer=new this.renderer()}this.renderer.init.call(this,this.rendererOptions)};f.prototype.draw=function(j){return this.renderer.draw.call(this,j)};f.prototype.pack=function(){this.renderer.pack.call(this)};function i(j){j=j||{};e.jqplot.ElemContainer.call(this);this.show=true;this.xaxis="xaxis";this._xaxis;this.yaxis="yaxis";this._yaxis;this.gridBorderWidth=2;this.renderer=e.jqplot.LineRenderer;this.rendererOptions={};this.data=[];this.gridData=[];this.label="";this.showLabel=true;this.color;this.negativeColor;this.lineWidth=2.5;this.lineJoin="round";this.lineCap="round";this.linePattern="solid";this.shadow=true;this.shadowAngle=45;this.shadowOffset=1.25;this.shadowDepth=3;this.shadowAlpha="0.1";this.breakOnNull=false;this.markerRenderer=e.jqplot.MarkerRenderer;this.markerOptions={};this.showLine=true;this.showMarker=true;this.index;this.fill=false;this.fillColor;this.fillAlpha;this.fillAndStroke=false;this.disableStack=false;
this._stack=false;this.neighborThreshold=4;this.fillToZero=false;this.fillToValue=0;this.fillAxis="y";this.useNegativeColors=true;this._stackData=[];this._plotData=[];this._plotValues={x:[],y:[]};this._intervals={x:{},y:{}};this._prevPlotData=[];this._prevGridData=[];this._stackAxis="y";this._primaryAxis="_xaxis";this.canvas=new e.jqplot.GenericCanvas();this.shadowCanvas=new e.jqplot.GenericCanvas();this.plugins={};this._sumy=0;this._sumx=0;this._type=""}i.prototype=new e.jqplot.ElemContainer();i.prototype.constructor=i;i.prototype.init=function(n,r,p){this.index=n;this.gridBorderWidth=r;var q=this.data;var m=[],o,j;for(o=0,j=q.length;o<j;o++){if(!this.breakOnNull){if(q[o]==null||q[o][0]==null||q[o][1]==null){continue}else{m.push(q[o])}}else{m.push(q[o])}}this.data=m;if(!this.color){this.color=p.colorGenerator.get(this.index)}if(!this.negativeColor){this.negativeColor=p.negativeColorGenerator.get(this.index)}if(!this.fillColor){this.fillColor=this.color}if(this.fillAlpha){var k=e.jqplot.normalize2rgb(this.fillColor);
var k=e.jqplot.getColorComponents(k);this.fillColor="rgba("+k[0]+","+k[1]+","+k[2]+","+this.fillAlpha+")"}if(e.isFunction(this.renderer)){this.renderer=new this.renderer()}this.renderer.init.call(this,this.rendererOptions,p);this.markerRenderer=new this.markerRenderer();if(!this.markerOptions.color){this.markerOptions.color=this.color}if(this.markerOptions.show==null){this.markerOptions.show=this.showMarker}this.showMarker=this.markerOptions.show;this.markerRenderer.init(this.markerOptions)};i.prototype.draw=function(q,n,p){var l=(n==b)?{}:n;q=(q==b)?this.canvas._ctx:q;var k,o,m;for(k=0;k<e.jqplot.preDrawSeriesHooks.length;k++){e.jqplot.preDrawSeriesHooks[k].call(this,q,l)}if(this.show){this.renderer.setGridData.call(this,p);if(!l.preventJqPlotSeriesDrawTrigger){e(q.canvas).trigger("jqplotSeriesDraw",[this.data,this.gridData])}o=[];if(l.data){o=l.data}else{if(!this._stack){o=this.data}else{o=this._plotData}}m=l.gridData||this.renderer.makeGridData.call(this,o,p);if(this._type==="line"&&this.renderer.smooth&&this.renderer._smoothedData.length){m=this.renderer._smoothedData
}this.renderer.draw.call(this,q,m,l,p)}for(k=0;k<e.jqplot.postDrawSeriesHooks.length;k++){e.jqplot.postDrawSeriesHooks[k].call(this,q,l,p)}q=n=p=k=o=m=null};i.prototype.drawShadow=function(q,n,p){var l=(n==b)?{}:n;q=(q==b)?this.shadowCanvas._ctx:q;var k,o,m;for(k=0;k<e.jqplot.preDrawSeriesShadowHooks.length;k++){e.jqplot.preDrawSeriesShadowHooks[k].call(this,q,l)}if(this.shadow){this.renderer.setGridData.call(this,p);o=[];if(l.data){o=l.data}else{if(!this._stack){o=this.data}else{o=this._plotData}}m=l.gridData||this.renderer.makeGridData.call(this,o,p);this.renderer.drawShadow.call(this,q,m,l,p)}for(k=0;k<e.jqplot.postDrawSeriesShadowHooks.length;k++){e.jqplot.postDrawSeriesShadowHooks[k].call(this,q,l)}q=n=p=k=o=m=null};i.prototype.toggleDisplay=function(k,m){var j,l;if(k.data.series){j=k.data.series}else{j=this}if(k.data.speed){l=k.data.speed}if(l){if(j.canvas._elem.is(":hidden")||!j.show){j.show=true;j.canvas._elem.removeClass("jqplot-series-hidden");if(j.shadowCanvas._elem){j.shadowCanvas._elem.fadeIn(l)
}j.canvas._elem.fadeIn(l,m);j.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+j.index).fadeIn(l)}else{j.show=false;j.canvas._elem.addClass("jqplot-series-hidden");if(j.shadowCanvas._elem){j.shadowCanvas._elem.fadeOut(l)}j.canvas._elem.fadeOut(l,m);j.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+j.index).fadeOut(l)}}else{if(j.canvas._elem.is(":hidden")||!j.show){j.show=true;j.canvas._elem.removeClass("jqplot-series-hidden");if(j.shadowCanvas._elem){j.shadowCanvas._elem.show()}j.canvas._elem.show(0,m);j.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+j.index).show()}else{j.show=false;j.canvas._elem.addClass("jqplot-series-hidden");if(j.shadowCanvas._elem){j.shadowCanvas._elem.hide()}j.canvas._elem.hide(0,m);j.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+j.index).hide()}}};function d(){e.jqplot.ElemContainer.call(this);this.drawGridlines=true;this.gridLineColor="#cccccc";this.gridLineWidth=1;this.background="#fffdf6";this.borderColor="#999999";this.borderWidth=2;
this.drawBorder=true;this.shadow=true;this.shadowAngle=45;this.shadowOffset=1.5;this.shadowWidth=3;this.shadowDepth=3;this.shadowColor=null;this.shadowAlpha="0.07";this._left;this._top;this._right;this._bottom;this._width;this._height;this._axes=[];this.renderer=e.jqplot.CanvasGridRenderer;this.rendererOptions={};this._offsets={top:null,bottom:null,left:null,right:null}}d.prototype=new e.jqplot.ElemContainer();d.prototype.constructor=d;d.prototype.init=function(){if(e.isFunction(this.renderer)){this.renderer=new this.renderer()}this.renderer.init.call(this,this.rendererOptions)};d.prototype.createElement=function(j,k){this._offsets=j;return this.renderer.createElement.call(this,k)};d.prototype.draw=function(){this.renderer.draw.call(this)};e.jqplot.GenericCanvas=function(){e.jqplot.ElemContainer.call(this);this._ctx};e.jqplot.GenericCanvas.prototype=new e.jqplot.ElemContainer();e.jqplot.GenericCanvas.prototype.constructor=e.jqplot.GenericCanvas;e.jqplot.GenericCanvas.prototype.createElement=function(n,l,k,o){this._offsets=n;
var j="jqplot";if(l!=b){j=l}var m;m=o.canvasManager.getCanvas();if(k!=null){this._plotDimensions=k}m.width=this._plotDimensions.width-this._offsets.left-this._offsets.right;m.height=this._plotDimensions.height-this._offsets.top-this._offsets.bottom;this._elem=e(m);this._elem.css({position:"absolute",left:this._offsets.left,top:this._offsets.top});this._elem.addClass(j);m=o.canvasManager.initCanvas(m);m=null;return this._elem};e.jqplot.GenericCanvas.prototype.setContext=function(){this._ctx=this._elem.get(0).getContext("2d");return this._ctx};e.jqplot.GenericCanvas.prototype.resetCanvas=function(){if(this._elem){if(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==b){window.G_vmlCanvasManager.uninitElement(this._elem.get(0))}this._elem.emptyForce()}this._ctx=null};e.jqplot.HooksManager=function(){this.hooks=[];this.args=[]};e.jqplot.HooksManager.prototype.addOnce=function(n,k){k=k||[];var o=false;for(var m=0,j=this.hooks.length;m<j;m++){if(this.hooks[m]==n){o=true}}if(!o){this.hooks.push(n);
this.args.push(k)}};e.jqplot.HooksManager.prototype.add=function(k,j){j=j||[];this.hooks.push(k);this.args.push(j)};e.jqplot.EventListenerManager=function(){this.hooks=[]};e.jqplot.EventListenerManager.prototype.addOnce=function(o,n){var p=false,m,k;for(var k=0,j=this.hooks.length;k<j;k++){m=this.hooks[k];if(m[0]==o&&m[1]==n){p=true}}if(!p){this.hooks.push([o,n])}};e.jqplot.EventListenerManager.prototype.add=function(k,j){this.hooks.push([k,j])};var c=["yMidAxis","xaxis","yaxis","x2axis","y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis"];function h(){this.animate=false;this.animateReplot=false;this.axes={xaxis:new g("xaxis"),yaxis:new g("yaxis"),x2axis:new g("x2axis"),y2axis:new g("y2axis"),y3axis:new g("y3axis"),y4axis:new g("y4axis"),y5axis:new g("y5axis"),y6axis:new g("y6axis"),y7axis:new g("y7axis"),y8axis:new g("y8axis"),y9axis:new g("y9axis"),yMidAxis:new g("yMidAxis")};this.baseCanvas=new e.jqplot.GenericCanvas();this.captureRightClick=false;this.data=[];this.dataRenderer;
this.dataRendererOptions;this.defaults={axesDefaults:{},axes:{xaxis:{},yaxis:{},x2axis:{},y2axis:{},y3axis:{},y4axis:{},y5axis:{},y6axis:{},y7axis:{},y8axis:{},y9axis:{},yMidAxis:{}},seriesDefaults:{},series:[]};this.defaultAxisStart=1;this.drawIfHidden=false;this.eventCanvas=new e.jqplot.GenericCanvas();this.fillBetween={series1:null,series2:null,color:null,baseSeries:0,fill:true};this.fontFamily;this.fontSize;this.grid=new d();this.legend=new a();this.negativeSeriesColors=e.jqplot.config.defaultNegativeColors;this.noDataIndicator={show:false,indicator:"Loading Data...",axes:{xaxis:{min:0,max:10,tickInterval:2,show:true},yaxis:{min:0,max:12,tickInterval:3,show:true}}};this.options={};this.previousSeriesStack=[];this.plugins={};this.series=[];this.seriesStack=[];this.seriesColors=e.jqplot.config.defaultColors;this.sortData=true;this.stackSeries=false;this.syncXTicks=true;this.syncYTicks=true;this.target=null;this.targetId=null;this.textColor;this.title=new f();this._drawCount=0;this._sumy=0;
this._sumx=0;this._stackData=[];this._plotData=[];this._width=null;this._height=null;this._plotDimensions={height:null,width:null};this._gridPadding={top:null,right:null,bottom:null,left:null};this._defaultGridPadding={top:10,right:10,bottom:23,left:10};this._addDomReference=e.jqplot.config.addDomReference;this.preInitHooks=new e.jqplot.HooksManager();this.postInitHooks=new e.jqplot.HooksManager();this.preParseOptionsHooks=new e.jqplot.HooksManager();this.postParseOptionsHooks=new e.jqplot.HooksManager();this.preDrawHooks=new e.jqplot.HooksManager();this.postDrawHooks=new e.jqplot.HooksManager();this.preDrawSeriesHooks=new e.jqplot.HooksManager();this.postDrawSeriesHooks=new e.jqplot.HooksManager();this.preDrawLegendHooks=new e.jqplot.HooksManager();this.addLegendRowHooks=new e.jqplot.HooksManager();this.preSeriesInitHooks=new e.jqplot.HooksManager();this.postSeriesInitHooks=new e.jqplot.HooksManager();this.preParseSeriesOptionsHooks=new e.jqplot.HooksManager();this.postParseSeriesOptionsHooks=new e.jqplot.HooksManager();
this.eventListenerHooks=new e.jqplot.EventListenerManager();this.preDrawSeriesShadowHooks=new e.jqplot.HooksManager();this.postDrawSeriesShadowHooks=new e.jqplot.HooksManager();this.colorGenerator=new e.jqplot.ColorGenerator();this.negativeColorGenerator=new e.jqplot.ColorGenerator();this.canvasManager=new e.jqplot.CanvasManager();this.themeEngine=new e.jqplot.ThemeEngine();var l=0;this.init=function(x,t,z){z=z||{};for(var u=0;u<e.jqplot.preInitHooks.length;u++){e.jqplot.preInitHooks[u].call(this,x,t,z)}for(var u=0;u<this.preInitHooks.hooks.length;u++){this.preInitHooks.hooks[u].call(this,x,t,z)}this.targetId="#"+x;this.target=e("#"+x);if(this._addDomReference){this.target.data("jqplot",this)}this.target.removeClass("jqplot-error");if(!this.target.get(0)){throw"No plot target specified"}if(this.target.css("position")=="static"){this.target.css("position","relative")}if(!this.target.hasClass("jqplot-target")){this.target.addClass("jqplot-target")}if(!this.target.height()){var v;if(z&&z.height){v=parseInt(z.height,10)
}else{if(this.target.attr("data-height")){v=parseInt(this.target.attr("data-height"),10)}else{v=parseInt(e.jqplot.config.defaultHeight,10)}}this._height=v;this.target.css("height",v+"px")}else{this._height=v=this.target.height()}if(!this.target.width()){var y;if(z&&z.width){y=parseInt(z.width,10)}else{if(this.target.attr("data-width")){y=parseInt(this.target.attr("data-width"),10)}else{y=parseInt(e.jqplot.config.defaultWidth,10)}}this._width=y;this.target.css("width",y+"px")}else{this._width=y=this.target.width()}for(var u=0,r=c.length;u<r;u++){this.axes[c[u]]=new g(c[u])}this._plotDimensions.height=this._height;this._plotDimensions.width=this._width;this.grid._plotDimensions=this._plotDimensions;this.title._plotDimensions=this._plotDimensions;this.baseCanvas._plotDimensions=this._plotDimensions;this.eventCanvas._plotDimensions=this._plotDimensions;this.legend._plotDimensions=this._plotDimensions;if(this._height<=0||this._width<=0||!this._height||!this._width){throw"Canvas dimension not set"
}if(z.dataRenderer&&e.isFunction(z.dataRenderer)){if(z.dataRendererOptions){this.dataRendererOptions=z.dataRendererOptions}this.dataRenderer=z.dataRenderer;t=this.dataRenderer(t,this,this.dataRendererOptions)}if(z.noDataIndicator&&e.isPlainObject(z.noDataIndicator)){e.extend(true,this.noDataIndicator,z.noDataIndicator)}if(t==null||e.isArray(t)==false||t.length==0||e.isArray(t[0])==false||t[0].length==0){if(this.noDataIndicator.show==false){throw"No Data"}else{for(var n in this.noDataIndicator.axes){for(var p in this.noDataIndicator.axes[n]){this.axes[n][p]=this.noDataIndicator.axes[n][p]}}this.postDrawHooks.add(function(){var E=this.eventCanvas.getHeight();var B=this.eventCanvas.getWidth();var A=e('<div class="jqplot-noData-container" style="position:absolute;"></div>');this.target.append(A);A.height(E);A.width(B);A.css("top",this.eventCanvas._offsets.top);A.css("left",this.eventCanvas._offsets.left);var D=e('<div class="jqplot-noData-contents" style="text-align:center; position:relative; margin-left:auto; margin-right:auto;"></div>');
A.append(D);D.html(this.noDataIndicator.indicator);var C=D.height();var w=D.width();D.height(C);D.width(w);D.css("top",(E-C)/2+"px")})}}this.data=e.extend(true,[],t);this.parseOptions(z);if(this.textColor){this.target.css("color",this.textColor)}if(this.fontFamily){this.target.css("font-family",this.fontFamily)}if(this.fontSize){this.target.css("font-size",this.fontSize)}this.title.init();this.legend.init();this._sumy=0;this._sumx=0;this.computePlotData();for(var u=0;u<this.series.length;u++){this.seriesStack.push(u);this.previousSeriesStack.push(u);this.series[u].shadowCanvas._plotDimensions=this._plotDimensions;this.series[u].canvas._plotDimensions=this._plotDimensions;for(var s=0;s<e.jqplot.preSeriesInitHooks.length;s++){e.jqplot.preSeriesInitHooks[s].call(this.series[u],x,this.data,this.options.seriesDefaults,this.options.series[u],this)}for(var s=0;s<this.preSeriesInitHooks.hooks.length;s++){this.preSeriesInitHooks.hooks[s].call(this.series[u],x,this.data,this.options.seriesDefaults,this.options.series[u],this)
}this.series[u]._plotDimensions=this._plotDimensions;this.series[u].init(u,this.grid.borderWidth,this);for(var s=0;s<e.jqplot.postSeriesInitHooks.length;s++){e.jqplot.postSeriesInitHooks[s].call(this.series[u],x,this.data,this.options.seriesDefaults,this.options.series[u],this)}for(var s=0;s<this.postSeriesInitHooks.hooks.length;s++){this.postSeriesInitHooks.hooks[s].call(this.series[u],x,this.data,this.options.seriesDefaults,this.options.series[u],this)}this._sumy+=this.series[u]._sumy;this._sumx+=this.series[u]._sumx}var o,q;for(var u=0,r=c.length;u<r;u++){o=c[u];q=this.axes[o];q._plotDimensions=this._plotDimensions;q.init();if(this.axes[o].borderColor==null){if(o.charAt(0)!=="x"&&q.useSeriesColor===true&&q.show){q.borderColor=q._series[0].color}else{q.borderColor=this.grid.borderColor}}}if(this.sortData){j(this.series)}this.grid.init();this.grid._axes=this.axes;this.legend._series=this.series;for(var u=0;u<e.jqplot.postInitHooks.length;u++){e.jqplot.postInitHooks[u].call(this,x,this.data,z)
}for(var u=0;u<this.postInitHooks.hooks.length;u++){this.postInitHooks.hooks[u].call(this,x,this.data,z)}};this.resetAxesScale=function(s,o){var q=o||{};var r=s||this.axes;if(r===true){r=this.axes}if(e.isArray(r)){for(var p=0;p<r.length;p++){this.axes[r[p]].resetScale(q[r[p]])}}else{if(typeof(r)==="object"){for(var n in r){this.axes[n].resetScale(q[n])}}}};this.reInitialize=function(w,n){var A=e.extend(true,{},this.options,n);var y=this.targetId.substr(1);var u=(w==null)?this.data:w;for(var x=0;x<e.jqplot.preInitHooks.length;x++){e.jqplot.preInitHooks[x].call(this,y,u,A)}for(var x=0;x<this.preInitHooks.hooks.length;x++){this.preInitHooks.hooks[x].call(this,y,u,A)}this._height=this.target.height();this._width=this.target.width();if(this._height<=0||this._width<=0||!this._height||!this._width){throw"Target dimension not set"}this._plotDimensions.height=this._height;this._plotDimensions.width=this._width;this.grid._plotDimensions=this._plotDimensions;this.title._plotDimensions=this._plotDimensions;
this.baseCanvas._plotDimensions=this._plotDimensions;this.eventCanvas._plotDimensions=this._plotDimensions;this.legend._plotDimensions=this._plotDimensions;var o,z,v,q;for(var x=0,s=c.length;x<s;x++){o=c[x];q=this.axes[o];z=q._ticks;for(var v=0,r=z.length;v<r;v++){var p=z[v]._elem;if(p){if(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==b){window.G_vmlCanvasManager.uninitElement(p.get(0))}p.emptyForce();p=null;z._elem=null}}z=null;delete q.ticks;delete q._ticks;this.axes[o]=new g(o);this.axes[o]._plotWidth=this._width;this.axes[o]._plotHeight=this._height}if(w){if(A.dataRenderer&&e.isFunction(A.dataRenderer)){if(A.dataRendererOptions){this.dataRendererOptions=A.dataRendererOptions}this.dataRenderer=A.dataRenderer;w=this.dataRenderer(w,this,this.dataRendererOptions)}this.data=e.extend(true,[],w)}if(n){this.parseOptions(A)}this.title._plotWidth=this._width;if(this.textColor){this.target.css("color",this.textColor)}if(this.fontFamily){this.target.css("font-family",this.fontFamily)
}if(this.fontSize){this.target.css("font-size",this.fontSize)}this.title.init();this.legend.init();this._sumy=0;this._sumx=0;this.seriesStack=[];this.previousSeriesStack=[];this.computePlotData();for(var x=0,s=this.series.length;x<s;x++){this.seriesStack.push(x);this.previousSeriesStack.push(x);this.series[x].shadowCanvas._plotDimensions=this._plotDimensions;this.series[x].canvas._plotDimensions=this._plotDimensions;for(var v=0;v<e.jqplot.preSeriesInitHooks.length;v++){e.jqplot.preSeriesInitHooks[v].call(this.series[x],y,this.data,this.options.seriesDefaults,this.options.series[x],this)}for(var v=0;v<this.preSeriesInitHooks.hooks.length;v++){this.preSeriesInitHooks.hooks[v].call(this.series[x],y,this.data,this.options.seriesDefaults,this.options.series[x],this)}this.series[x]._plotDimensions=this._plotDimensions;this.series[x].init(x,this.grid.borderWidth,this);for(var v=0;v<e.jqplot.postSeriesInitHooks.length;v++){e.jqplot.postSeriesInitHooks[v].call(this.series[x],y,this.data,this.options.seriesDefaults,this.options.series[x],this)
}for(var v=0;v<this.postSeriesInitHooks.hooks.length;v++){this.postSeriesInitHooks.hooks[v].call(this.series[x],y,this.data,this.options.seriesDefaults,this.options.series[x],this)}this._sumy+=this.series[x]._sumy;this._sumx+=this.series[x]._sumx}for(var x=0,s=c.length;x<s;x++){o=c[x];q=this.axes[o];q._plotDimensions=this._plotDimensions;q.init();if(q.borderColor==null){if(o.charAt(0)!=="x"&&q.useSeriesColor===true&&q.show){q.borderColor=q._series[0].color}else{q.borderColor=this.grid.borderColor}}}if(this.sortData){j(this.series)}this.grid.init();this.grid._axes=this.axes;this.legend._series=this.series;for(var x=0,s=e.jqplot.postInitHooks.length;x<s;x++){e.jqplot.postInitHooks[x].call(this,y,this.data,A)}for(var x=0,s=this.postInitHooks.hooks.length;x<s;x++){this.postInitHooks.hooks[x].call(this,y,this.data,A)}};this.quickInit=function(){this._height=this.target.height();this._width=this.target.width();if(this._height<=0||this._width<=0||!this._height||!this._width){throw"Target dimension not set"
}this._plotDimensions.height=this._height;this._plotDimensions.width=this._width;this.grid._plotDimensions=this._plotDimensions;this.title._plotDimensions=this._plotDimensions;this.baseCanvas._plotDimensions=this._plotDimensions;this.eventCanvas._plotDimensions=this._plotDimensions;this.legend._plotDimensions=this._plotDimensions;for(var u in this.axes){this.axes[u]._plotWidth=this._width;this.axes[u]._plotHeight=this._height}this.title._plotWidth=this._width;if(this.textColor){this.target.css("color",this.textColor)}if(this.fontFamily){this.target.css("font-family",this.fontFamily)}if(this.fontSize){this.target.css("font-size",this.fontSize)}this._sumy=0;this._sumx=0;this.computePlotData();for(var r=0;r<this.series.length;r++){if(this.series[r]._type==="line"&&this.series[r].renderer.bands.show){this.series[r].renderer.initBands.call(this.series[r],this.series[r].renderer.options,this)}this.series[r]._plotDimensions=this._plotDimensions;this.series[r].canvas._plotDimensions=this._plotDimensions;
this._sumy+=this.series[r]._sumy;this._sumx+=this.series[r]._sumx}var p;for(var o=0;o<12;o++){p=c[o];var q=this.axes[p]._ticks;for(var r=0;r<q.length;r++){var s=q[r]._elem;if(s){if(e.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==b){window.G_vmlCanvasManager.uninitElement(s.get(0))}s.emptyForce();s=null;q._elem=null}}q=null;this.axes[p]._plotDimensions=this._plotDimensions;this.axes[p]._ticks=[]}if(this.sortData){j(this.series)}this.grid._axes=this.axes;this.legend._series=this.series};function j(s){var w,x,y,o,v;for(var t=0;t<s.length;t++){var p;var u=[s[t].data,s[t]._stackData,s[t]._plotData,s[t]._prevPlotData];for(var q=0;q<4;q++){p=true;w=u[q];if(s[t]._stackAxis=="x"){for(var r=0;r<w.length;r++){if(typeof(w[r][1])!="number"){p=false;break}}if(p){w.sort(function(z,n){return z[1]-n[1]})}}else{for(var r=0;r<w.length;r++){if(typeof(w[r][0])!="number"){p=false;break}}if(p){w.sort(function(z,n){return z[0]-n[0]})}}}}}this.computePlotData=function(){this._plotData=[];this._stackData=[];
var u,v,q;for(v=0,q=this.series.length;v<q;v++){u=this.series[v];this._plotData.push([]);this._stackData.push([]);var o=u.data;this._plotData[v]=e.extend(true,[],o);this._stackData[v]=e.extend(true,[],o);u._plotData=this._plotData[v];u._stackData=this._stackData[v];var y={x:[],y:[]};if(this.stackSeries&&!u.disableStack){u._stack=true;var w=(u._stackAxis==="x")?0:1;for(var r=0,n=o.length;r<n;r++){var x=o[r][w];if(x==null){x=0}this._plotData[v][r][w]=x;this._stackData[v][r][w]=x;if(v>0){for(var s=v;s--;){var p=this._plotData[s][r][w];if(x*p>=0){this._plotData[v][r][w]+=p;this._stackData[v][r][w]+=p;break}}}}}else{for(var t=0;t<u.data.length;t++){y.x.push(u.data[t][0]);y.y.push(u.data[t][1])}this._stackData.push(u.data);this.series[v]._stackData=u.data;this._plotData.push(u.data);u._plotData=u.data;u._plotValues=y}if(v>0){u._prevPlotData=this.series[v-1]._plotData}u._sumy=0;u._sumx=0;for(t=u.data.length-1;t>-1;t--){u._sumy+=u.data[t][1];u._sumx+=u.data[t][0]}}};this.populatePlotData=function(v,w){this._plotData=[];
this._stackData=[];v._stackData=[];v._plotData=[];var z={x:[],y:[]};if(this.stackSeries&&!v.disableStack){v._stack=true;var y=(v._stackAxis==="x")?0:1;var A=e.extend(true,[],v.data);var B=e.extend(true,[],v.data);var p,o,q,x,n;for(var t=0;t<w;t++){var r=this.series[t].data;for(var s=0;s<r.length;s++){q=r[s];p=(q[0]!=null)?q[0]:0;o=(q[1]!=null)?q[1]:0;A[s][0]+=p;A[s][1]+=o;x=(y)?o:p;if(v.data[s][y]*x>=0){B[s][y]+=x}}}for(var u=0;u<B.length;u++){z.x.push(B[u][0]);z.y.push(B[u][1])}this._plotData.push(B);this._stackData.push(A);v._stackData=A;v._plotData=B;v._plotValues=z}else{for(var u=0;u<v.data.length;u++){z.x.push(v.data[u][0]);z.y.push(v.data[u][1])}this._stackData.push(v.data);this.series[w]._stackData=v.data;this._plotData.push(v.data);v._plotData=v.data;v._plotValues=z}if(w>0){v._prevPlotData=this.series[w-1]._plotData}v._sumy=0;v._sumx=0;for(u=v.data.length-1;u>-1;u--){v._sumy+=v.data[u][1];v._sumx+=v.data[u][0]}};this.getNextSeriesColor=(function(o){var n=0;var p=o.seriesColors;return function(){if(n<p.length){return p[n++]
}else{n=0;return p[n++]}}})(this);this.parseOptions=function(A){for(var v=0;v<this.preParseOptionsHooks.hooks.length;v++){this.preParseOptionsHooks.hooks[v].call(this,A)}for(var v=0;v<e.jqplot.preParseOptionsHooks.length;v++){e.jqplot.preParseOptionsHooks[v].call(this,A)}this.options=e.extend(true,{},this.defaults,A);var p=this.options;this.animate=p.animate;this.animateReplot=p.animateReplot;this.stackSeries=p.stackSeries;if(e.isPlainObject(p.fillBetween)){var z=["series1","series2","color","baseSeries","fill"],w;for(var v=0,t=z.length;v<t;v++){w=z[v];if(p.fillBetween[w]!=null){this.fillBetween[w]=p.fillBetween[w]}}}if(p.seriesColors){this.seriesColors=p.seriesColors}if(p.negativeSeriesColors){this.negativeSeriesColors=p.negativeSeriesColors}if(p.captureRightClick){this.captureRightClick=p.captureRightClick}this.defaultAxisStart=(A&&A.defaultAxisStart!=null)?A.defaultAxisStart:this.defaultAxisStart;this.colorGenerator.setColors(this.seriesColors);this.negativeColorGenerator.setColors(this.negativeSeriesColors);
e.extend(true,this._gridPadding,p.gridPadding);this.sortData=(p.sortData!=null)?p.sortData:this.sortData;for(var v=0;v<12;v++){var q=c[v];var s=this.axes[q];s._options=e.extend(true,{},p.axesDefaults,p.axes[q]);e.extend(true,s,p.axesDefaults,p.axes[q]);s._plotWidth=this._width;s._plotHeight=this._height}var y=function(E,C,F){var B=[];var D,n;C=C||"vertical";if(!e.isArray(E[0])){for(D=0,n=E.length;D<n;D++){if(C=="vertical"){B.push([F+D,E[D]])}else{B.push([E[D],F+D])}}}else{e.extend(true,B,E)}return B};var x=0;this.series=[];for(var v=0;v<this.data.length;v++){var o=e.extend(true,{index:v},{seriesColors:this.seriesColors,negativeSeriesColors:this.negativeSeriesColors},this.options.seriesDefaults,this.options.series[v],{rendererOptions:{animation:{show:this.animate}}});var z=new i(o);for(var u=0;u<e.jqplot.preParseSeriesOptionsHooks.length;u++){e.jqplot.preParseSeriesOptionsHooks[u].call(z,this.options.seriesDefaults,this.options.series[v])}for(var u=0;u<this.preParseSeriesOptionsHooks.hooks.length;
u++){this.preParseSeriesOptionsHooks.hooks[u].call(z,this.options.seriesDefaults,this.options.series[v])}e.extend(true,z,o);var r="vertical";if(z.renderer===e.jqplot.BarRenderer&&z.rendererOptions&&z.rendererOptions.barDirection=="horizontal"){r="horizontal";z._stackAxis="x";z._primaryAxis="_yaxis"}z.data=y(this.data[v],r,this.defaultAxisStart);switch(z.xaxis){case"xaxis":z._xaxis=this.axes.xaxis;break;case"x2axis":z._xaxis=this.axes.x2axis;break;default:break}z._yaxis=this.axes[z.yaxis];z._xaxis._series.push(z);z._yaxis._series.push(z);if(z.show){z._xaxis.show=true;z._yaxis.show=true}else{if(z._xaxis.scaleToHiddenSeries){z._xaxis.show=true}if(z._yaxis.scaleToHiddenSeries){z._yaxis.show=true}}if(!z.label){z.label="Series "+(v+1).toString()}this.series.push(z);for(var u=0;u<e.jqplot.postParseSeriesOptionsHooks.length;u++){e.jqplot.postParseSeriesOptionsHooks[u].call(this.series[v],this.options.seriesDefaults,this.options.series[v])}for(var u=0;u<this.postParseSeriesOptionsHooks.hooks.length;
u++){this.postParseSeriesOptionsHooks.hooks[u].call(this.series[v],this.options.seriesDefaults,this.options.series[v])}}e.extend(true,this.grid,this.options.grid);for(var v=0,t=c.length;v<t;v++){var q=c[v];var s=this.axes[q];if(s.borderWidth==null){s.borderWidth=this.grid.borderWidth}}if(typeof this.options.title=="string"){this.title.text=this.options.title}else{if(typeof this.options.title=="object"){e.extend(true,this.title,this.options.title)}}this.title._plotWidth=this._width;this.legend.setOptions(this.options.legend);for(var v=0;v<e.jqplot.postParseOptionsHooks.length;v++){e.jqplot.postParseOptionsHooks[v].call(this,A)}for(var v=0;v<this.postParseOptionsHooks.hooks.length;v++){this.postParseOptionsHooks.hooks[v].call(this,A)}};this.destroy=function(){this.canvasManager.freeAllCanvases();if(this.eventCanvas&&this.eventCanvas._elem){this.eventCanvas._elem.unbind()}this.target.empty();this.target[0].innerHTML=""};this.replot=function(o){var p=o||{};var r=p.data||null;var n=(p.clear===false)?false:true;
var q=p.resetAxes||false;delete p.data;delete p.clear;delete p.resetAxes;this.target.trigger("jqplotPreReplot");if(n){this.destroy()}if(r||!e.isEmptyObject(p)){this.reInitialize(r,p)}else{this.quickInit()}if(q){this.resetAxesScale(q,p.axes)}this.draw();this.target.trigger("jqplotPostReplot")};this.redraw=function(n){n=(n!=null)?n:true;this.target.trigger("jqplotPreRedraw");if(n){this.canvasManager.freeAllCanvases();this.eventCanvas._elem.unbind();this.target.empty()}for(var p in this.axes){this.axes[p]._ticks=[]}this.computePlotData();this._sumy=0;this._sumx=0;for(var o=0,q=this.series.length;o<q;o++){this._sumy+=this.series[o]._sumy;this._sumx+=this.series[o]._sumx}this.draw();this.target.trigger("jqplotPostRedraw")};this.draw=function(){if(this.drawIfHidden||this.target.is(":visible")){this.target.trigger("jqplotPreDraw");var I,G,F,r;for(I=0,F=e.jqplot.preDrawHooks.length;I<F;I++){e.jqplot.preDrawHooks[I].call(this)}for(I=0,F=this.preDrawHooks.length;I<F;I++){this.preDrawHooks.hooks[I].apply(this,this.preDrawSeriesHooks.args[I])
}this.target.append(this.baseCanvas.createElement({left:0,right:0,top:0,bottom:0},"jqplot-base-canvas",null,this));this.baseCanvas.setContext();this.target.append(this.title.draw());this.title.pack({top:0,left:0});var M=this.legend.draw({},this);var o={top:0,left:0,bottom:0,right:0};if(this.legend.placement=="outsideGrid"){this.target.append(M);switch(this.legend.location){case"n":o.top+=this.legend.getHeight();break;case"s":o.bottom+=this.legend.getHeight();break;case"ne":case"e":case"se":o.right+=this.legend.getWidth();break;case"nw":case"w":case"sw":o.left+=this.legend.getWidth();break;default:o.right+=this.legend.getWidth();break}M=M.detach()}var u=this.axes;var N;for(I=0;I<12;I++){N=c[I];this.target.append(u[N].draw(this.baseCanvas._ctx,this));u[N].set()}if(u.yaxis.show){o.left+=u.yaxis.getWidth()}var H=["y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis"];var A=[0,0,0,0,0,0,0,0];var D=0;var C;for(C=0;C<8;C++){if(u[H[C]].show){D+=u[H[C]].getWidth();A[C]=D}}o.right+=D;
if(u.x2axis.show){o.top+=u.x2axis.getHeight()}if(this.title.show){o.top+=this.title.getHeight()}if(u.xaxis.show){o.bottom+=u.xaxis.getHeight()}if(this.options.gridDimensions&&e.isPlainObject(this.options.gridDimensions)){var v=parseInt(this.options.gridDimensions.width,10)||0;var J=parseInt(this.options.gridDimensions.height,10)||0;var q=(this._width-o.left-o.right-v)/2;var L=(this._height-o.top-o.bottom-J)/2;if(L>=0&&q>=0){o.top+=L;o.bottom+=L;o.left+=q;o.right+=q}}var p=["top","bottom","left","right"];for(var C in p){if(this._gridPadding[p[C]]==null&&o[p[C]]>0){this._gridPadding[p[C]]=o[p[C]]}else{if(this._gridPadding[p[C]]==null){this._gridPadding[p[C]]=this._defaultGridPadding[p[C]]}}}var B=this._gridPadding;if(this.legend.placement==="outsideGrid"){B={top:this.title.getHeight(),left:0,right:0,bottom:0};if(this.legend.location==="s"){B.left=this._gridPadding.left;B.right=this._gridPadding.right}}u.xaxis.pack({position:"absolute",bottom:this._gridPadding.bottom-u.xaxis.getHeight(),left:0,width:this._width},{min:this._gridPadding.left,max:this._width-this._gridPadding.right});
u.yaxis.pack({position:"absolute",top:0,left:this._gridPadding.left-u.yaxis.getWidth(),height:this._height},{min:this._height-this._gridPadding.bottom,max:this._gridPadding.top});u.x2axis.pack({position:"absolute",top:this._gridPadding.top-u.x2axis.getHeight(),left:0,width:this._width},{min:this._gridPadding.left,max:this._width-this._gridPadding.right});for(I=8;I>0;I--){u[H[I-1]].pack({position:"absolute",top:0,right:this._gridPadding.right-A[I-1]},{min:this._height-this._gridPadding.bottom,max:this._gridPadding.top})}var w=(this._width-this._gridPadding.left-this._gridPadding.right)/2+this._gridPadding.left-u.yMidAxis.getWidth()/2;u.yMidAxis.pack({position:"absolute",top:0,left:w,zIndex:9,textAlign:"center"},{min:this._height-this._gridPadding.bottom,max:this._gridPadding.top});this.target.append(this.grid.createElement(this._gridPadding,this));this.grid.draw();var t=this.series;var K=t.length;for(I=0,F=K;I<F;I++){G=this.seriesStack[I];this.target.append(t[G].shadowCanvas.createElement(this._gridPadding,"jqplot-series-shadowCanvas",null,this));
t[G].shadowCanvas.setContext();t[G].shadowCanvas._elem.data("seriesIndex",G)}for(I=0,F=K;I<F;I++){G=this.seriesStack[I];this.target.append(t[G].canvas.createElement(this._gridPadding,"jqplot-series-canvas",null,this));t[G].canvas.setContext();t[G].canvas._elem.data("seriesIndex",G)}this.target.append(this.eventCanvas.createElement(this._gridPadding,"jqplot-event-canvas",null,this));this.eventCanvas.setContext();this.eventCanvas._ctx.fillStyle="rgba(0,0,0,0)";this.eventCanvas._ctx.fillRect(0,0,this.eventCanvas._ctx.canvas.width,this.eventCanvas._ctx.canvas.height);this.bindCustomEvents();if(this.legend.preDraw){this.eventCanvas._elem.before(M);this.legend.pack(B);if(this.legend._elem){this.drawSeries({legendInfo:{location:this.legend.location,placement:this.legend.placement,width:this.legend.getWidth(),height:this.legend.getHeight(),xoffset:this.legend.xoffset,yoffset:this.legend.yoffset}})}else{this.drawSeries()}}else{this.drawSeries();if(K){e(t[K-1].canvas._elem).after(M)}this.legend.pack(B)
}for(var I=0,F=e.jqplot.eventListenerHooks.length;I<F;I++){this.eventCanvas._elem.bind(e.jqplot.eventListenerHooks[I][0],{plot:this},e.jqplot.eventListenerHooks[I][1])}for(var I=0,F=this.eventListenerHooks.hooks.length;I<F;I++){this.eventCanvas._elem.bind(this.eventListenerHooks.hooks[I][0],{plot:this},this.eventListenerHooks.hooks[I][1])}var z=this.fillBetween;if(z.fill&&z.series1!==z.series2&&z.series1<K&&z.series2<K&&t[z.series1]._type==="line"&&t[z.series2]._type==="line"){this.doFillBetweenLines()}for(var I=0,F=e.jqplot.postDrawHooks.length;I<F;I++){e.jqplot.postDrawHooks[I].call(this)}for(var I=0,F=this.postDrawHooks.hooks.length;I<F;I++){this.postDrawHooks.hooks[I].apply(this,this.postDrawHooks.args[I])}if(this.target.is(":visible")){this._drawCount+=1}var x,y,E,s;for(I=0,F=K;I<F;I++){x=t[I];y=x.renderer;E=".jqplot-point-label.jqplot-series-"+I;if(y.animation&&y.animation._supported&&y.animation.show&&(this._drawCount<2||this.animateReplot)){s=this.target.find(E);s.stop(true,true).hide();
x.canvas._elem.stop(true,true).hide();x.shadowCanvas._elem.stop(true,true).hide();x.canvas._elem.jqplotEffect("blind",{mode:"show",direction:y.animation.direction},y.animation.speed);x.shadowCanvas._elem.jqplotEffect("blind",{mode:"show",direction:y.animation.direction},y.animation.speed);s.fadeIn(y.animation.speed*0.8)}}s=null;this.target.trigger("jqplotPostDraw",[this])}};h.prototype.doFillBetweenLines=function(){var p=this.fillBetween;var y=p.series1;var w=p.series2;var x=(y<w)?y:w;var v=(w>y)?w:y;var t=this.series[x];var s=this.series[v];if(s.renderer.smooth){var r=s.renderer._smoothedData.slice(0).reverse()}else{var r=s.gridData.slice(0).reverse()}if(t.renderer.smooth){var u=t.renderer._smoothedData.concat(r)}else{var u=t.gridData.concat(r)}var q=(p.color!==null)?p.color:this.series[y].fillColor;var z=(p.baseSeries!==null)?p.baseSeries:x;var o=this.series[z].renderer.shapeRenderer;var n={fillStyle:q,fill:true,closePath:true};o.draw(t.shadowCanvas._ctx,u,n)};this.bindCustomEvents=function(){this.eventCanvas._elem.bind("click",{plot:this},this.onClick);
this.eventCanvas._elem.bind("dblclick",{plot:this},this.onDblClick);this.eventCanvas._elem.bind("mousedown",{plot:this},this.onMouseDown);this.eventCanvas._elem.bind("mousemove",{plot:this},this.onMouseMove);this.eventCanvas._elem.bind("mouseenter",{plot:this},this.onMouseEnter);this.eventCanvas._elem.bind("mouseleave",{plot:this},this.onMouseLeave);if(this.captureRightClick){this.eventCanvas._elem.bind("mouseup",{plot:this},this.onRightClick);this.eventCanvas._elem.get(0).oncontextmenu=function(){return false}}else{this.eventCanvas._elem.bind("mouseup",{plot:this},this.onMouseUp)}};function k(w){var v=w.data.plot;var r=v.eventCanvas._elem.offset();var u={x:w.pageX-r.left,y:w.pageY-r.top};var s={xaxis:null,yaxis:null,x2axis:null,y2axis:null,y3axis:null,y4axis:null,y5axis:null,y6axis:null,y7axis:null,y8axis:null,y9axis:null,yMidAxis:null};var t=["xaxis","yaxis","x2axis","y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis","yMidAxis"];var o=v.axes;var p,q;for(p=11;p>0;p--){q=t[p-1];
if(o[q].show){s[q]=o[q].series_p2u(u[q.charAt(0)])}}return{offsets:r,gridPos:u,dataPos:s}}function m(n,o){var z=o.series;var ae,ac,ab,W,X,R,Q,E,C,H,I,S;var aa,af,Y,A,P,U,ad;var q,V;for(ab=o.seriesStack.length-1;ab>=0;ab--){ae=o.seriesStack[ab];W=z[ae];ad=W._highlightThreshold;switch(W.renderer.constructor){case e.jqplot.BarRenderer:R=n.x;Q=n.y;for(ac=0;ac<W._barPoints.length;ac++){P=W._barPoints[ac];Y=W.gridData[ac];if(R>P[0][0]&&R<P[2][0]&&Q>P[2][1]&&Q<P[0][1]){return{seriesIndex:W.index,pointIndex:ac,gridData:Y,data:W.data[ac],points:W._barPoints[ac]}}}break;case e.jqplot.PyramidRenderer:R=n.x;Q=n.y;for(ac=0;ac<W._barPoints.length;ac++){P=W._barPoints[ac];Y=W.gridData[ac];if(R>P[0][0]+ad[0][0]&&R<P[2][0]+ad[2][0]&&Q>P[2][1]&&Q<P[0][1]){return{seriesIndex:W.index,pointIndex:ac,gridData:Y,data:W.data[ac],points:W._barPoints[ac]}}}break;case e.jqplot.DonutRenderer:H=W.startAngle/180*Math.PI;R=n.x-W._center[0];Q=n.y-W._center[1];X=Math.sqrt(Math.pow(R,2)+Math.pow(Q,2));if(R>0&&-Q>=0){E=2*Math.PI-Math.atan(-Q/R)
}else{if(R>0&&-Q<0){E=-Math.atan(-Q/R)}else{if(R<0){E=Math.PI-Math.atan(-Q/R)}else{if(R==0&&-Q>0){E=3*Math.PI/2}else{if(R==0&&-Q<0){E=Math.PI/2}else{if(R==0&&Q==0){E=0}}}}}}if(H){E-=H;if(E<0){E+=2*Math.PI}else{if(E>2*Math.PI){E-=2*Math.PI}}}C=W.sliceMargin/180*Math.PI;if(X<W._radius&&X>W._innerRadius){for(ac=0;ac<W.gridData.length;ac++){I=(ac>0)?W.gridData[ac-1][1]+C:C;S=W.gridData[ac][1];if(E>I&&E<S){return{seriesIndex:W.index,pointIndex:ac,gridData:W.gridData[ac],data:W.data[ac]}}}}break;case e.jqplot.PieRenderer:H=W.startAngle/180*Math.PI;R=n.x-W._center[0];Q=n.y-W._center[1];X=Math.sqrt(Math.pow(R,2)+Math.pow(Q,2));if(R>0&&-Q>=0){E=2*Math.PI-Math.atan(-Q/R)}else{if(R>0&&-Q<0){E=-Math.atan(-Q/R)}else{if(R<0){E=Math.PI-Math.atan(-Q/R)}else{if(R==0&&-Q>0){E=3*Math.PI/2}else{if(R==0&&-Q<0){E=Math.PI/2}else{if(R==0&&Q==0){E=0}}}}}}if(H){E-=H;if(E<0){E+=2*Math.PI}else{if(E>2*Math.PI){E-=2*Math.PI}}}C=W.sliceMargin/180*Math.PI;if(X<W._radius){for(ac=0;ac<W.gridData.length;ac++){I=(ac>0)?W.gridData[ac-1][1]+C:C;
S=W.gridData[ac][1];if(E>I&&E<S){return{seriesIndex:W.index,pointIndex:ac,gridData:W.gridData[ac],data:W.data[ac]}}}}break;case e.jqplot.BubbleRenderer:R=n.x;Q=n.y;var N=null;if(W.show){for(var ac=0;ac<W.gridData.length;ac++){Y=W.gridData[ac];af=Math.sqrt((R-Y[0])*(R-Y[0])+(Q-Y[1])*(Q-Y[1]));if(af<=Y[2]&&(af<=aa||aa==null)){aa=af;N={seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}}}if(N!=null){return N}}break;case e.jqplot.FunnelRenderer:R=n.x;Q=n.y;var T=W._vertices,w=T[0],u=T[T.length-1],B,M,G;function Z(s,v,t){var r=(v[1]-t[1])/(v[0]-t[0]);var p=v[1]-r*v[0];var x=s+v[1];return[(x-p)/r,x]}B=Z(Q,w[0],u[3]);M=Z(Q,w[1],u[2]);for(ac=0;ac<T.length;ac++){G=T[ac];if(Q>=G[0][1]&&Q<=G[3][1]&&R>=B[0]&&R<=M[0]){return{seriesIndex:W.index,pointIndex:ac,gridData:null,data:W.data[ac]}}}break;case e.jqplot.LineRenderer:R=n.x;Q=n.y;X=W.renderer;if(W.show){if((W.fill||(W.renderer.bands.show&&W.renderer.bands.fill))&&(!o.plugins.highlighter||!o.plugins.highlighter.show)){var F=false;if(R>W._boundingBox[0][0]&&R<W._boundingBox[1][0]&&Q>W._boundingBox[1][1]&&Q<W._boundingBox[0][1]){var L=W._areaPoints.length;
var O;var ac=L-1;for(var O=0;O<L;O++){var K=[W._areaPoints[O][0],W._areaPoints[O][1]];var J=[W._areaPoints[ac][0],W._areaPoints[ac][1]];if(K[1]<Q&&J[1]>=Q||J[1]<Q&&K[1]>=Q){if(K[0]+(Q-K[1])/(J[1]-K[1])*(J[0]-K[0])<R){F=!F}}ac=O}}if(F){return{seriesIndex:ae,pointIndex:null,gridData:W.gridData,data:W.data,points:W._areaPoints}}break}else{V=W.markerRenderer.size/2+W.neighborThreshold;q=(V>0)?V:0;for(var ac=0;ac<W.gridData.length;ac++){Y=W.gridData[ac];if(X.constructor==e.jqplot.OHLCRenderer){if(X.candleStick){var D=W._yaxis.series_u2p;if(R>=Y[0]-X._bodyWidth/2&&R<=Y[0]+X._bodyWidth/2&&Q>=D(W.data[ac][2])&&Q<=D(W.data[ac][3])){return{seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}}}else{if(!X.hlc){var D=W._yaxis.series_u2p;if(R>=Y[0]-X._tickLength&&R<=Y[0]+X._tickLength&&Q>=D(W.data[ac][2])&&Q<=D(W.data[ac][3])){return{seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}}}else{var D=W._yaxis.series_u2p;if(R>=Y[0]-X._tickLength&&R<=Y[0]+X._tickLength&&Q>=D(W.data[ac][1])&&Q<=D(W.data[ac][2])){return{seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}
}}}}else{if(Y[0]!=null&&Y[1]!=null){af=Math.sqrt((R-Y[0])*(R-Y[0])+(Q-Y[1])*(Q-Y[1]));if(af<=q&&(af<=aa||aa==null)){aa=af;return{seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}}}}}}}break;default:R=n.x;Q=n.y;X=W.renderer;if(W.show){V=W.markerRenderer.size/2+W.neighborThreshold;q=(V>0)?V:0;for(var ac=0;ac<W.gridData.length;ac++){Y=W.gridData[ac];if(X.constructor==e.jqplot.OHLCRenderer){if(X.candleStick){var D=W._yaxis.series_u2p;if(R>=Y[0]-X._bodyWidth/2&&R<=Y[0]+X._bodyWidth/2&&Q>=D(W.data[ac][2])&&Q<=D(W.data[ac][3])){return{seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}}}else{if(!X.hlc){var D=W._yaxis.series_u2p;if(R>=Y[0]-X._tickLength&&R<=Y[0]+X._tickLength&&Q>=D(W.data[ac][2])&&Q<=D(W.data[ac][3])){return{seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}}}else{var D=W._yaxis.series_u2p;if(R>=Y[0]-X._tickLength&&R<=Y[0]+X._tickLength&&Q>=D(W.data[ac][1])&&Q<=D(W.data[ac][2])){return{seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}}}}}else{af=Math.sqrt((R-Y[0])*(R-Y[0])+(Q-Y[1])*(Q-Y[1]));
if(af<=q&&(af<=aa||aa==null)){aa=af;return{seriesIndex:ae,pointIndex:ac,gridData:Y,data:W.data[ac]}}}}}break}}return null}this.onClick=function(q){var o=k(q);var s=q.data.plot;var r=m(o.gridPos,s);var n=e.Event("jqplotClick");n.pageX=q.pageX;n.pageY=q.pageY;e(this).trigger(n,[o.gridPos,o.dataPos,r,s])};this.onDblClick=function(q){var o=k(q);var s=q.data.plot;var r=m(o.gridPos,s);var n=e.Event("jqplotDblClick");n.pageX=q.pageX;n.pageY=q.pageY;e(this).trigger(n,[o.gridPos,o.dataPos,r,s])};this.onMouseDown=function(q){var o=k(q);var s=q.data.plot;var r=m(o.gridPos,s);var n=e.Event("jqplotMouseDown");n.pageX=q.pageX;n.pageY=q.pageY;e(this).trigger(n,[o.gridPos,o.dataPos,r,s])};this.onMouseUp=function(p){var o=k(p);var n=e.Event("jqplotMouseUp");n.pageX=p.pageX;n.pageY=p.pageY;e(this).trigger(n,[o.gridPos,o.dataPos,null,p.data.plot])};this.onRightClick=function(q){var o=k(q);var s=q.data.plot;var r=m(o.gridPos,s);if(s.captureRightClick){if(q.which==3){var n=e.Event("jqplotRightClick");n.pageX=q.pageX;
n.pageY=q.pageY;e(this).trigger(n,[o.gridPos,o.dataPos,r,s])}else{var n=e.Event("jqplotMouseUp");n.pageX=q.pageX;n.pageY=q.pageY;e(this).trigger(n,[o.gridPos,o.dataPos,r,s])}}};this.onMouseMove=function(q){var o=k(q);var s=q.data.plot;var r=m(o.gridPos,s);var n=e.Event("jqplotMouseMove");n.pageX=q.pageX;n.pageY=q.pageY;e(this).trigger(n,[o.gridPos,o.dataPos,r,s])};this.onMouseEnter=function(q){var o=k(q);var r=q.data.plot;var n=e.Event("jqplotMouseEnter");n.pageX=q.pageX;n.pageY=q.pageY;n.relatedTarget=q.relatedTarget;e(this).trigger(n,[o.gridPos,o.dataPos,null,r])};this.onMouseLeave=function(q){var o=k(q);var r=q.data.plot;var n=e.Event("jqplotMouseLeave");n.pageX=q.pageX;n.pageY=q.pageY;n.relatedTarget=q.relatedTarget;e(this).trigger(n,[o.gridPos,o.dataPos,null,r])};this.drawSeries=function(p,n){var r,q,o;n=(typeof(p)==="number"&&n==null)?p:n;p=(typeof(p)==="object")?p:{};if(n!=b){q=this.series[n];o=q.shadowCanvas._ctx;o.clearRect(0,0,o.canvas.width,o.canvas.height);q.drawShadow(o,p,this);
o=q.canvas._ctx;o.clearRect(0,0,o.canvas.width,o.canvas.height);q.draw(o,p,this);if(q.renderer.constructor==e.jqplot.BezierCurveRenderer){if(n<this.series.length-1){this.drawSeries(n+1)}}}else{for(r=0;r<this.series.length;r++){q=this.series[r];o=q.shadowCanvas._ctx;o.clearRect(0,0,o.canvas.width,o.canvas.height);q.drawShadow(o,p,this);o=q.canvas._ctx;o.clearRect(0,0,o.canvas.width,o.canvas.height);q.draw(o,p,this)}}p=n=r=q=o=null};this.moveSeriesToFront=function(o){o=parseInt(o,10);var r=e.inArray(o,this.seriesStack);if(r==-1){return}if(r==this.seriesStack.length-1){this.previousSeriesStack=this.seriesStack.slice(0);return}var n=this.seriesStack[this.seriesStack.length-1];var q=this.series[o].canvas._elem.detach();var p=this.series[o].shadowCanvas._elem.detach();this.series[n].shadowCanvas._elem.after(p);this.series[n].canvas._elem.after(q);this.previousSeriesStack=this.seriesStack.slice(0);this.seriesStack.splice(r,1);this.seriesStack.push(o)};this.moveSeriesToBack=function(o){o=parseInt(o,10);
var r=e.inArray(o,this.seriesStack);if(r==0||r==-1){return}var n=this.seriesStack[0];var q=this.series[o].canvas._elem.detach();var p=this.series[o].shadowCanvas._elem.detach();this.series[n].shadowCanvas._elem.before(p);this.series[n].canvas._elem.before(q);this.previousSeriesStack=this.seriesStack.slice(0);this.seriesStack.splice(r,1);this.seriesStack.unshift(o)};this.restorePreviousSeriesOrder=function(){var t,s,r,q,p,n,o;if(this.seriesStack==this.previousSeriesStack){return}for(t=1;t<this.previousSeriesStack.length;t++){n=this.previousSeriesStack[t];o=this.previousSeriesStack[t-1];r=this.series[n].canvas._elem.detach();q=this.series[n].shadowCanvas._elem.detach();this.series[o].shadowCanvas._elem.after(q);this.series[o].canvas._elem.after(r)}p=this.seriesStack.slice(0);this.seriesStack=this.previousSeriesStack.slice(0);this.previousSeriesStack=p};this.restoreOriginalSeriesOrder=function(){var r,q,n=[],p,o;for(r=0;r<this.series.length;r++){n.push(r)}if(this.seriesStack==n){return}this.previousSeriesStack=this.seriesStack.slice(0);
this.seriesStack=n;for(r=1;r<this.seriesStack.length;r++){p=this.series[r].canvas._elem.detach();o=this.series[r].shadowCanvas._elem.detach();this.series[r-1].shadowCanvas._elem.after(o);this.series[r-1].canvas._elem.after(p)}};this.activateTheme=function(n){this.themeEngine.activate(this,n)}}e.jqplot.computeHighlightColors=function(l){var n;if(e.isArray(l)){n=[];for(var p=0;p<l.length;p++){var o=e.jqplot.getColorComponents(l[p]);var k=[o[0],o[1],o[2]];var q=k[0]+k[1]+k[2];for(var m=0;m<3;m++){k[m]=(q>660)?k[m]*0.85:0.73*k[m]+90;k[m]=parseInt(k[m],10);(k[m]>255)?255:k[m]}k[3]=0.3+0.35*o[3];n.push("rgba("+k[0]+","+k[1]+","+k[2]+","+k[3]+")")}}else{var o=e.jqplot.getColorComponents(l);var k=[o[0],o[1],o[2]];var q=k[0]+k[1]+k[2];for(var m=0;m<3;m++){k[m]=(q>660)?k[m]*0.85:0.73*k[m]+90;k[m]=parseInt(k[m],10);(k[m]>255)?255:k[m]}k[3]=0.3+0.35*o[3];n="rgba("+k[0]+","+k[1]+","+k[2]+","+k[3]+")"}return n};e.jqplot.ColorGenerator=function(k){k=k||e.jqplot.config.defaultColors;var j=0;this.next=function(){if(j<k.length){return k[j++]
}else{j=0;return k[j++]}};this.previous=function(){if(j>0){return k[j--]}else{j=k.length-1;return k[j]}};this.get=function(m){var l=m-k.length*Math.floor(m/k.length);return k[l]};this.setColors=function(l){k=l};this.reset=function(){j=0};this.getIndex=function(){return j};this.setIndex=function(l){j=l}};e.jqplot.hex2rgb=function(l,j){l=l.replace("#","");if(l.length==3){l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)}var k;k="rgba("+parseInt(l.slice(0,2),16)+", "+parseInt(l.slice(2,4),16)+", "+parseInt(l.slice(4,6),16);if(j){k+=", "+j}k+=")";return k};e.jqplot.rgb2hex=function(p){var l=/rgba?\( *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *(?:, *[0-9.]*)?\)/;var j=p.match(l);var o="#";for(var n=1;n<4;n++){var k;if(j[n].search(/%/)!=-1){k=parseInt(255*j[n]/100,10).toString(16);if(k.length==1){k="0"+k}}else{k=parseInt(j[n],10).toString(16);if(k.length==1){k="0"+k}}o+=k}return o};e.jqplot.normalize2rgb=function(k,j){if(k.search(/^ *rgba?\(/)!=-1){return k
}else{if(k.search(/^ *#?[0-9a-fA-F]?[0-9a-fA-F]/)!=-1){return e.jqplot.hex2rgb(k,j)}else{throw"invalid color spec"}}};e.jqplot.getColorComponents=function(p){p=e.jqplot.colorKeywordMap[p]||p;var n=e.jqplot.normalize2rgb(p);var l=/rgba?\( *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *,? *([0-9.]* *)?\)/;var j=n.match(l);var k=[];for(var o=1;o<4;o++){if(j[o].search(/%/)!=-1){k[o-1]=parseInt(255*j[o]/100,10)}else{k[o-1]=parseInt(j[o],10)}}k[3]=parseFloat(j[4])?parseFloat(j[4]):1;return k};e.jqplot.colorKeywordMap={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",aqua:"rgb( 0, 255, 255)",aquamarine:"rgb(127, 255, 212)",azure:"rgb(240, 255, 255)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",black:"rgb( 0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb( 0, 0, 255)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",burlywood:"rgb(222, 184, 135)",cadetblue:"rgb( 95, 158, 160)",chartreuse:"rgb(127, 255, 0)",chocolate:"rgb(210, 105, 30)",coral:"rgb(255, 127, 80)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",crimson:"rgb(220, 20, 60)",cyan:"rgb( 0, 255, 255)",darkblue:"rgb( 0, 0, 139)",darkcyan:"rgb( 0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgray:"rgb(169, 169, 169)",darkgreen:"rgb( 0, 100, 0)",darkgrey:"rgb(169, 169, 169)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb( 85, 107, 47)",darkorange:"rgb(255, 140, 0)",darkorchid:"rgb(153, 50, 204)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkslateblue:"rgb( 72, 61, 139)",darkslategray:"rgb( 47, 79, 79)",darkslategrey:"rgb( 47, 79, 79)",darkturquoise:"rgb( 0, 206, 209)",darkviolet:"rgb(148, 0, 211)",deeppink:"rgb(255, 20, 147)",deepskyblue:"rgb( 0, 191, 255)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb( 30, 144, 255)",firebrick:"rgb(178, 34, 34)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb( 34, 139, 34)",fuchsia:"rgb(255, 0, 255)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",goldenrod:"rgb(218, 165, 32)",gray:"rgb(128, 128, 128)",grey:"rgb(128, 128, 128)",green:"rgb( 0, 128, 0)",greenyellow:"rgb(173, 255, 47)",honeydew:"rgb(240, 255, 240)",hotpink:"rgb(255, 105, 180)",indianred:"rgb(205, 92, 92)",indigo:"rgb( 75, 0, 130)",ivory:"rgb(255, 255, 240)",khaki:"rgb(240, 230, 140)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lightblue:"rgb(173, 216, 230)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgray:"rgb(211, 211, 211)",lightgreen:"rgb(144, 238, 144)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightsalmon:"rgb(255, 160, 122)",lightseagreen:"rgb( 32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightyellow:"rgb(255, 255, 224)",lime:"rgb( 0, 255, 0)",limegreen:"rgb( 50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",maroon:"rgb(128, 0, 0)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb( 0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumpurple:"rgb(147, 112, 219)",mediumseagreen:"rgb( 60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb( 0, 250, 154)",mediumturquoise:"rgb( 72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb( 25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navy:"rgb( 0, 0, 128)",oldlace:"rgb(253, 245, 230)",olive:"rgb(128, 128, 0)",olivedrab:"rgb(107, 142, 35)",orange:"rgb(255, 165, 0)",orangered:"rgb(255, 69, 0)",orchid:"rgb(218, 112, 214)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",paleturquoise:"rgb(175, 238, 238)",palevioletred:"rgb(219, 112, 147)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",plum:"rgb(221, 160, 221)",powderblue:"rgb(176, 224, 230)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",rosybrown:"rgb(188, 143, 143)",royalblue:"rgb( 65, 105, 225)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb( 46, 139, 87)",seashell:"rgb(255, 245, 238)",sienna:"rgb(160, 82, 45)",silver:"rgb(192, 192, 192)",skyblue:"rgb(135, 206, 235)",slateblue:"rgb(106, 90, 205)",slategray:"rgb(112, 128, 144)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",springgreen:"rgb( 0, 255, 127)",steelblue:"rgb( 70, 130, 180)",tan:"rgb(210, 180, 140)",teal:"rgb( 0, 128, 128)",thistle:"rgb(216, 191, 216)",tomato:"rgb(255, 99, 71)",turquoise:"rgb( 64, 224, 208)",violet:"rgb(238, 130, 238)",wheat:"rgb(245, 222, 179)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellowgreen:"rgb(154, 205, 50)"}
})(jQuery);(function(a){a.jqplot.LinearAxisRenderer=function(){};a.jqplot.LinearAxisRenderer.prototype.init=function(b){this.breakPoints=null;this.breakTickLabel="&asymp;";this.drawBaseline=true;this.baselineWidth=null;this.baselineColor=null;this.forceTickAt0=false;this.forceTickAt100=false;this.tickInset=0;this.minorTicks=0;this.alignTicks=false;this._autoFormatString="";this._overrideFormatString=false;this._scalefact=1;a.extend(true,this,b);if(this.breakPoints){if(!a.isArray(this.breakPoints)){this.breakPoints=null}else{if(this.breakPoints.length<2||this.breakPoints[1]<=this.breakPoints[0]){this.breakPoints=null}}}if(this.numberTicks!=null&&this.numberTicks<2){this.numberTicks=2}this.resetDataBounds()};a.jqplot.LinearAxisRenderer.prototype.draw=function(b,j){if(this.show){this.renderer.createTicks.call(this,j);var h=0;var c;if(this._elem){this._elem.emptyForce();this._elem=null}this._elem=a(document.createElement("div"));this._elem.addClass("jqplot-axis jqplot-"+this.name);this._elem.css("position","absolute");
if(this.name=="xaxis"||this.name=="x2axis"){this._elem.width(this._plotDimensions.width)}else{this._elem.height(this._plotDimensions.height)}this.labelOptions.axis=this.name;this._label=new this.labelRenderer(this.labelOptions);if(this._label.show){var g=this._label.draw(b,j);g.appendTo(this._elem);g=null}var f=this._ticks;var e;for(var d=0;d<f.length;d++){e=f[d];if(e.show&&e.showLabel&&(!e.isMinorTick||this.showMinorTicks)){this._elem.append(e.draw(b,j))}}e=null;f=null}return this._elem};a.jqplot.LinearAxisRenderer.prototype.reset=function(){this.min=this._options.min;this.max=this._options.max;this.tickInterval=this._options.tickInterval;this.numberTicks=this._options.numberTicks;this._autoFormatString="";if(this._overrideFormatString&&this.tickOptions&&this.tickOptions.formatString){this.tickOptions.formatString=""}};a.jqplot.LinearAxisRenderer.prototype.set=function(){var k=0;var d;var c=0;var j=0;var b=(this._label==null)?false:this._label.show;if(this.show){var g=this._ticks;var f;
for(var e=0;e<g.length;e++){f=g[e];if(!f._breakTick&&f.show&&f.showLabel&&(!f.isMinorTick||this.showMinorTicks)){if(this.name=="xaxis"||this.name=="x2axis"){d=f._elem.outerHeight(true)}else{d=f._elem.outerWidth(true)}if(d>k){k=d}}}f=null;g=null;if(b){c=this._label._elem.outerWidth(true);j=this._label._elem.outerHeight(true)}if(this.name=="xaxis"){k=k+j;this._elem.css({height:k+"px",left:"0px",bottom:"0px"})}else{if(this.name=="x2axis"){k=k+j;this._elem.css({height:k+"px",left:"0px",top:"0px"})}else{if(this.name=="yaxis"){k=k+c;this._elem.css({width:k+"px",left:"0px",top:"0px"});if(b&&this._label.constructor==a.jqplot.AxisLabelRenderer){this._label._elem.css("width",c+"px")}}else{k=k+c;this._elem.css({width:k+"px",right:"0px",top:"0px"});if(b&&this._label.constructor==a.jqplot.AxisLabelRenderer){this._label._elem.css("width",c+"px")}}}}}};a.jqplot.LinearAxisRenderer.prototype.createTicks=function(d){var S=this._ticks;var J=this.ticks;var y=this.name;var A=this._dataBounds;var b=(this.name.charAt(0)==="x")?this._plotDimensions.width:this._plotDimensions.height;
var h;var af,H;var l,k;var ad,Z;var G=this.min;var ae=this.max;var V=this.numberTicks;var aj=this.tickInterval;var g=30;this._scalefact=(Math.max(b,g+1)-g)/300;if(J.length){for(Z=0;Z<J.length;Z++){var N=J[Z];var T=new this.tickRenderer(this.tickOptions);if(a.isArray(N)){T.value=N[0];if(this.breakPoints){if(N[0]==this.breakPoints[0]){T.label=this.breakTickLabel;T._breakTick=true;T.showGridline=false;T.showMark=false}else{if(N[0]>this.breakPoints[0]&&N[0]<=this.breakPoints[1]){T.show=false;T.showGridline=false;T.label=N[1]}else{T.label=N[1]}}}else{T.label=N[1]}T.setTick(N[0],this.name);this._ticks.push(T)}else{if(a.isPlainObject(N)){a.extend(true,T,N);T.axis=this.name;this._ticks.push(T)}else{T.value=N;if(this.breakPoints){if(N==this.breakPoints[0]){T.label=this.breakTickLabel;T._breakTick=true;T.showGridline=false;T.showMark=false}else{if(N>this.breakPoints[0]&&N<=this.breakPoints[1]){T.show=false;T.showGridline=false}}}T.setTick(N,this.name);this._ticks.push(T)}}}this.numberTicks=J.length;
this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value;this.tickInterval=(this.max-this.min)/(this.numberTicks-1)}else{if(y=="xaxis"||y=="x2axis"){b=this._plotDimensions.width}else{b=this._plotDimensions.height}var w=this.numberTicks;if(this.alignTicks){if(this.name==="x2axis"&&d.axes.xaxis.show){w=d.axes.xaxis.numberTicks}else{if(this.name.charAt(0)==="y"&&this.name!=="yaxis"&&this.name!=="yMidAxis"&&d.axes.yaxis.show){w=d.axes.yaxis.numberTicks}}}af=((this.min!=null)?this.min:A.min);H=((this.max!=null)?this.max:A.max);var u=H-af;var R,x;var q;if(this.tickOptions==null||!this.tickOptions.formatString){this._overrideFormatString=true}if(this.min==null||this.max==null&&this.tickInterval==null&&!this.autoscale){if(this.forceTickAt0){if(af>0){af=0}if(H<0){H=0}}if(this.forceTickAt100){if(af>100){af=100}if(H<100){H=100}}var D=false,aa=false;if(this.min!=null){D=true}else{if(this.max!=null){aa=true}}var O=a.jqplot.LinearTickGenerator(af,H,this._scalefact,w,D,aa);var v=(this.min!=null)?af:af+u*(this.padMin-1);
var P=(this.max!=null)?H:H-u*(this.padMax-1);if(af<v||H>P){v=(this.min!=null)?af:af-u*(this.padMin-1);P=(this.max!=null)?H:H+u*(this.padMax-1);O=a.jqplot.LinearTickGenerator(v,P,this._scalefact,w,D,aa)}this.min=O[0];this.max=O[1];this.numberTicks=O[2];this._autoFormatString=O[3];this.tickInterval=O[4]}else{if(af==H){var c=0.05;if(af>0){c=Math.max(Math.log(af)/Math.LN10,0.05)}af-=c;H+=c}if(this.autoscale&&this.min==null&&this.max==null){var e,f,p;var B=false;var M=false;var z={min:null,max:null,average:null,stddev:null};for(var Z=0;Z<this._series.length;Z++){var U=this._series[Z];var C=(U.fillAxis=="x")?U._xaxis.name:U._yaxis.name;if(this.name==C){var Q=U._plotValues[U.fillAxis];var F=Q[0];var ab=Q[0];for(var Y=1;Y<Q.length;Y++){if(Q[Y]<F){F=Q[Y]}else{if(Q[Y]>ab){ab=Q[Y]}}}var r=(ab-F)/ab;if(U.renderer.constructor==a.jqplot.BarRenderer){if(F>=0&&(U.fillToZero||r>0.1)){B=true}else{B=false;if(U.fill&&U.fillToZero&&F<0&&ab>0){M=true}else{M=false}}}else{if(U.fill){if(F>=0&&(U.fillToZero||r>0.1)){B=true
}else{if(F<0&&ab>0&&U.fillToZero){B=false;M=true}else{B=false;M=false}}}else{if(F<0){B=false}}}}}if(B){this.numberTicks=2+Math.ceil((b-(this.tickSpacing-1))/this.tickSpacing);this.min=0;G=0;f=H/(this.numberTicks-1);q=Math.pow(10,Math.abs(Math.floor(Math.log(f)/Math.LN10)));if(f/q==parseInt(f/q,10)){f+=q}this.tickInterval=Math.ceil(f/q)*q;this.max=this.tickInterval*(this.numberTicks-1)}else{if(M){this.numberTicks=2+Math.ceil((b-(this.tickSpacing-1))/this.tickSpacing);var I=Math.ceil(Math.abs(af)/u*(this.numberTicks-1));var ai=this.numberTicks-1-I;f=Math.max(Math.abs(af/I),Math.abs(H/ai));q=Math.pow(10,Math.abs(Math.floor(Math.log(f)/Math.LN10)));this.tickInterval=Math.ceil(f/q)*q;this.max=this.tickInterval*ai;this.min=-this.tickInterval*I}else{if(this.numberTicks==null){if(this.tickInterval){this.numberTicks=3+Math.ceil(u/this.tickInterval)}else{this.numberTicks=2+Math.ceil((b-(this.tickSpacing-1))/this.tickSpacing)}}if(this.tickInterval==null){f=u/(this.numberTicks-1);if(f<1){q=Math.pow(10,Math.abs(Math.floor(Math.log(f)/Math.LN10)))
}else{q=1}this.tickInterval=Math.ceil(f*q*this.pad)/q}else{q=1/this.tickInterval}e=this.tickInterval*(this.numberTicks-1);p=(e-u)/2;if(this.min==null){this.min=Math.floor(q*(af-p))/q}if(this.max==null){this.max=this.min+e}}}var E=a.jqplot.getSignificantFigures(this.tickInterval);var L;if(E.digitsLeft>=E.significantDigits){L="%d"}else{var q=Math.max(0,5-E.digitsLeft);q=Math.min(q,E.digitsRight);L="%."+q+"f"}this._autoFormatString=L}else{R=(this.min!=null)?this.min:af-u*(this.padMin-1);x=(this.max!=null)?this.max:H+u*(this.padMax-1);u=x-R;if(this.numberTicks==null){if(this.tickInterval!=null){this.numberTicks=Math.ceil((x-R)/this.tickInterval)+1}else{if(b>100){this.numberTicks=parseInt(3+(b-100)/75,10)}else{this.numberTicks=2}}}if(this.tickInterval==null){this.tickInterval=u/(this.numberTicks-1)}if(this.max==null){x=R+this.tickInterval*(this.numberTicks-1)}if(this.min==null){R=x-this.tickInterval*(this.numberTicks-1)}var E=a.jqplot.getSignificantFigures(this.tickInterval);var L;if(E.digitsLeft>=E.significantDigits){L="%d"
}else{var q=Math.max(0,5-E.digitsLeft);q=Math.min(q,E.digitsRight);L="%."+q+"f"}this._autoFormatString=L;this.min=R;this.max=x}if(this.renderer.constructor==a.jqplot.LinearAxisRenderer&&this._autoFormatString==""){u=this.max-this.min;var ag=new this.tickRenderer(this.tickOptions);var K=ag.formatString||a.jqplot.config.defaultTickFormatString;var K=K.match(a.jqplot.sprintf.regex)[0];var ac=0;if(K){if(K.search(/[fFeEgGpP]/)>-1){var X=K.match(/\%\.(\d{0,})?[eEfFgGpP]/);if(X){ac=parseInt(X[1],10)}else{ac=6}}else{if(K.search(/[di]/)>-1){ac=0}}var o=Math.pow(10,-ac);if(this.tickInterval<o){if(V==null&&aj==null){this.tickInterval=o;if(ae==null&&G==null){this.min=Math.floor(this._dataBounds.min/o)*o;if(this.min==this._dataBounds.min){this.min=this._dataBounds.min-this.tickInterval}this.max=Math.ceil(this._dataBounds.max/o)*o;if(this.max==this._dataBounds.max){this.max=this._dataBounds.max+this.tickInterval}var W=(this.max-this.min)/this.tickInterval;W=W.toFixed(11);W=Math.ceil(W);this.numberTicks=W+1
}else{if(ae==null){var W=(this._dataBounds.max-this.min)/this.tickInterval;W=W.toFixed(11);this.numberTicks=Math.ceil(W)+2;this.max=this.min+this.tickInterval*(this.numberTicks-1)}else{if(G==null){var W=(this.max-this._dataBounds.min)/this.tickInterval;W=W.toFixed(11);this.numberTicks=Math.ceil(W)+2;this.min=this.max-this.tickInterval*(this.numberTicks-1)}else{this.numberTicks=Math.ceil((ae-G)/this.tickInterval)+1;this.min=Math.floor(G*Math.pow(10,ac))/Math.pow(10,ac);this.max=Math.ceil(ae*Math.pow(10,ac))/Math.pow(10,ac);this.numberTicks=Math.ceil((this.max-this.min)/this.tickInterval)+1}}}}}}}}if(this._overrideFormatString&&this._autoFormatString!=""){this.tickOptions=this.tickOptions||{};this.tickOptions.formatString=this._autoFormatString}var T,ah;for(var Z=0;Z<this.numberTicks;Z++){ad=this.min+Z*this.tickInterval;T=new this.tickRenderer(this.tickOptions);T.setTick(ad,this.name);this._ticks.push(T);if(Z<this.numberTicks-1){for(var Y=0;Y<this.minorTicks;Y++){ad+=this.tickInterval/(this.minorTicks+1);
ah=a.extend(true,{},this.tickOptions,{name:this.name,value:ad,label:"",isMinorTick:true});T=new this.tickRenderer(ah);this._ticks.push(T)}}T=null}}if(this.tickInset){this.min=this.min-this.tickInset*this.tickInterval;this.max=this.max+this.tickInset*this.tickInterval}S=null};a.jqplot.LinearAxisRenderer.prototype.resetTickValues=function(d){if(a.isArray(d)&&d.length==this._ticks.length){var c;for(var b=0;b<d.length;b++){c=this._ticks[b];c.value=d[b];c.label=c.formatter(c.formatString,d[b]);c.label=c.prefix+c.label;c._elem.html(c.label)}c=null;this.min=a.jqplot.arrayMin(d);this.max=a.jqplot.arrayMax(d);this.pack()}};a.jqplot.LinearAxisRenderer.prototype.pack=function(d,c){d=d||{};c=c||this._offsets;var v=this._ticks;var q=this.max;var o=this.min;var k=c.max;var g=c.min;var m=(this._label==null)?false:this._label.show;for(var n in d){this._elem.css(n,d[n])}this._offsets=c;var e=k-g;var f=q-o;if(this.breakPoints){f=f-this.breakPoints[1]+this.breakPoints[0];this.p2u=function(h){return(h-g)*f/e+o
};this.u2p=function(h){if(h>this.breakPoints[0]&&h<this.breakPoints[1]){h=this.breakPoints[0]}if(h<=this.breakPoints[0]){return(h-o)*e/f+g}else{return(h-this.breakPoints[1]+this.breakPoints[0]-o)*e/f+g}};if(this.name.charAt(0)=="x"){this.series_u2p=function(h){if(h>this.breakPoints[0]&&h<this.breakPoints[1]){h=this.breakPoints[0]}if(h<=this.breakPoints[0]){return(h-o)*e/f}else{return(h-this.breakPoints[1]+this.breakPoints[0]-o)*e/f}};this.series_p2u=function(h){return h*f/e+o}}else{this.series_u2p=function(h){if(h>this.breakPoints[0]&&h<this.breakPoints[1]){h=this.breakPoints[0]}if(h>=this.breakPoints[1]){return(h-q)*e/f}else{return(h+this.breakPoints[1]-this.breakPoints[0]-q)*e/f}};this.series_p2u=function(h){return h*f/e+q}}}else{this.p2u=function(h){return(h-g)*f/e+o};this.u2p=function(h){return(h-o)*e/f+g};if(this.name=="xaxis"||this.name=="x2axis"){this.series_u2p=function(h){return(h-o)*e/f};this.series_p2u=function(h){return h*f/e+o}}else{this.series_u2p=function(h){return(h-q)*e/f
};this.series_p2u=function(h){return h*f/e+q}}}if(this.show){if(this.name=="xaxis"||this.name=="x2axis"){for(var r=0;r<v.length;r++){var l=v[r];if(l.show&&l.showLabel){var b;if(l.constructor==a.jqplot.CanvasAxisTickRenderer&&l.angle){var u=(this.name=="xaxis")?1:-1;switch(l.labelPosition){case"auto":if(u*l.angle<0){b=-l.getWidth()+l._textRenderer.height*Math.sin(-l._textRenderer.angle)/2}else{b=-l._textRenderer.height*Math.sin(l._textRenderer.angle)/2}break;case"end":b=-l.getWidth()+l._textRenderer.height*Math.sin(-l._textRenderer.angle)/2;break;case"start":b=-l._textRenderer.height*Math.sin(l._textRenderer.angle)/2;break;case"middle":b=-l.getWidth()/2+l._textRenderer.height*Math.sin(-l._textRenderer.angle)/2;break;default:b=-l.getWidth()/2+l._textRenderer.height*Math.sin(-l._textRenderer.angle)/2;break}}else{b=-l.getWidth()/2}var x=this.u2p(l.value)+b+"px";l._elem.css("left",x);l.pack()}}if(m){var j=this._label._elem.outerWidth(true);this._label._elem.css("left",g+e/2-j/2+"px");if(this.name=="xaxis"){this._label._elem.css("bottom","0px")
}else{this._label._elem.css("top","0px")}this._label.pack()}}else{for(var r=0;r<v.length;r++){var l=v[r];if(l.show&&l.showLabel){var b;if(l.constructor==a.jqplot.CanvasAxisTickRenderer&&l.angle){var u=(this.name=="yaxis")?1:-1;switch(l.labelPosition){case"auto":case"end":if(u*l.angle<0){b=-l._textRenderer.height*Math.cos(-l._textRenderer.angle)/2}else{b=-l.getHeight()+l._textRenderer.height*Math.cos(l._textRenderer.angle)/2}break;case"start":if(l.angle>0){b=-l._textRenderer.height*Math.cos(-l._textRenderer.angle)/2}else{b=-l.getHeight()+l._textRenderer.height*Math.cos(l._textRenderer.angle)/2}break;case"middle":b=-l.getHeight()/2;break;default:b=-l.getHeight()/2;break}}else{b=-l.getHeight()/2}var x=this.u2p(l.value)+b+"px";l._elem.css("top",x);l.pack()}}if(m){var s=this._label._elem.outerHeight(true);this._label._elem.css("top",k-e/2-s/2+"px");if(this.name=="yaxis"){this._label._elem.css("left","0px")}else{this._label._elem.css("right","0px")}this._label.pack()}}}v=null}})(jQuery);(function(a){a.jqplot.AxisTickRenderer=function(b){a.jqplot.ElemContainer.call(this);
this.mark="outside";this.axis;this.showMark=true;this.showGridline=true;this.isMinorTick=false;this.size=4;this.markSize=6;this.show=true;this.showLabel=true;this.label=null;this.value=null;this._styles={};this.formatter=a.jqplot.DefaultTickFormatter;this.prefix="";this.suffix="";this.formatString="";this.fontFamily;this.fontSize;this.textColor;this.escapeHTML=false;this._elem;this._breakTick=false;a.extend(true,this,b)};a.jqplot.AxisTickRenderer.prototype.init=function(b){a.extend(true,this,b)};a.jqplot.AxisTickRenderer.prototype=new a.jqplot.ElemContainer();a.jqplot.AxisTickRenderer.prototype.constructor=a.jqplot.AxisTickRenderer;a.jqplot.AxisTickRenderer.prototype.setTick=function(b,d,c){this.value=b;this.axis=d;if(c){this.isMinorTick=true}return this};a.jqplot.AxisTickRenderer.prototype.draw=function(){if(this.label===null){this.label=this.prefix+this.formatter(this.formatString,this.value)+this.suffix}var c={position:"absolute"};if(Number(this.label)){c.whitSpace="nowrap"}if(this._elem){this._elem.emptyForce();
this._elem=null}this._elem=a(document.createElement("div"));this._elem.addClass("jqplot-"+this.axis+"-tick");if(!this.escapeHTML){this._elem.html(this.label)}else{this._elem.text(this.label)}this._elem.css(c);for(var b in this._styles){this._elem.css(b,this._styles[b])}if(this.fontFamily){this._elem.css("font-family",this.fontFamily)}if(this.fontSize){this._elem.css("font-size",this.fontSize)}if(this.textColor){this._elem.css("color",this.textColor)}if(this._breakTick){this._elem.addClass("jqplot-breakTick")}return this._elem};a.jqplot.DefaultTickFormatter=function(b,c){if(typeof c=="number"){if(!b){b=a.jqplot.config.defaultTickFormatString}return a.jqplot.sprintf(b,c)}else{return String(c)}};a.jqplot.PercentTickFormatter=function(b,c){if(typeof c=="number"){c=100*c;if(!b){b=a.jqplot.config.defaultTickFormatString}return a.jqplot.sprintf(b,c)}else{return String(c)}};a.jqplot.AxisTickRenderer.prototype.pack=function(){}})(jQuery);(function(a){a.jqplot.AxisLabelRenderer=function(b){a.jqplot.ElemContainer.call(this);
this.axis;this.show=true;this.label="";this.fontFamily=null;this.fontSize=null;this.textColor=null;this._elem;this.escapeHTML=false;a.extend(true,this,b)};a.jqplot.AxisLabelRenderer.prototype=new a.jqplot.ElemContainer();a.jqplot.AxisLabelRenderer.prototype.constructor=a.jqplot.AxisLabelRenderer;a.jqplot.AxisLabelRenderer.prototype.init=function(b){a.extend(true,this,b)};a.jqplot.AxisLabelRenderer.prototype.draw=function(b,c){if(this._elem){this._elem.emptyForce();this._elem=null}this._elem=a('<div style="position:absolute;" class="jqplot-'+this.axis+'-label"></div>');if(Number(this.label)){this._elem.css("white-space","nowrap")}if(!this.escapeHTML){this._elem.html(this.label)}else{this._elem.text(this.label)}if(this.fontFamily){this._elem.css("font-family",this.fontFamily)}if(this.fontSize){this._elem.css("font-size",this.fontSize)}if(this.textColor){this._elem.css("color",this.textColor)}return this._elem};a.jqplot.AxisLabelRenderer.prototype.pack=function(){}})(jQuery);(function(a){a.jqplot.TableLegendRenderer=function(){};
a.jqplot.TableLegendRenderer.prototype.init=function(b){a.extend(true,this,b)};a.jqplot.TableLegendRenderer.prototype.addrow=function(k,e,b,i){var f=(b)?this.rowSpacing+"px":"0px";var j;var d;var c;var h;var g;c=document.createElement("tr");j=a(c);j.addClass("jqplot-table-legend");c=null;if(i){j.prependTo(this._elem)}else{j.appendTo(this._elem)}if(this.showSwatches){d=a(document.createElement("td"));d.addClass("jqplot-table-legend jqplot-table-legend-swatch");d.css({textAlign:"center",paddingTop:f});h=a(document.createElement("div"));h.addClass("jqplot-table-legend-swatch-outline");g=a(document.createElement("div"));g.addClass("jqplot-table-legend-swatch");g.css({backgroundColor:e,borderColor:e});j.append(d.append(h.append(g)))}if(this.showLabels){d=a(document.createElement("td"));d.addClass("jqplot-table-legend jqplot-table-legend-label");d.css("paddingTop",f);j.append(d);if(this.escapeHtml){d.text(k)}else{d.html(k)}}d=null;h=null;g=null;j=null;c=null};a.jqplot.TableLegendRenderer.prototype.draw=function(){if(this._elem){this._elem.emptyForce();
this._elem=null}if(this.show){var g=this._series;var c=document.createElement("table");this._elem=a(c);this._elem.addClass("jqplot-table-legend");var n={position:"absolute"};if(this.background){n.background=this.background}if(this.border){n.border=this.border}if(this.fontSize){n.fontSize=this.fontSize}if(this.fontFamily){n.fontFamily=this.fontFamily}if(this.textColor){n.textColor=this.textColor}if(this.marginTop!=null){n.marginTop=this.marginTop}if(this.marginBottom!=null){n.marginBottom=this.marginBottom}if(this.marginLeft!=null){n.marginLeft=this.marginLeft}if(this.marginRight!=null){n.marginRight=this.marginRight}var b=false,k=false,m;for(var h=0;h<g.length;h++){m=g[h];if(m._stack||m.renderer.constructor==a.jqplot.BezierCurveRenderer){k=true}if(m.show&&m.showLabel){var f=this.labels[h]||m.label.toString();if(f){var d=m.color;if(k&&h<g.length-1){b=true}else{if(k&&h==g.length-1){b=false}}this.renderer.addrow.call(this,f,d,b,k);b=true}for(var e=0;e<a.jqplot.addLegendRowHooks.length;e++){var l=a.jqplot.addLegendRowHooks[e].call(this,m);
if(l){this.renderer.addrow.call(this,l.label,l.color,b);b=true}}f=null}}}return this._elem};a.jqplot.TableLegendRenderer.prototype.pack=function(e){if(this.show){if(this.placement=="insideGrid"){switch(this.location){case"nw":var d=e.left;var c=e.top;this._elem.css("left",d);this._elem.css("top",c);break;case"n":var d=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2;var c=e.top;this._elem.css("left",d);this._elem.css("top",c);break;case"ne":var d=e.right;var c=e.top;this._elem.css({right:d,top:c});break;case"e":var d=e.right;var c=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({right:d,top:c});break;case"se":var d=e.right;var c=e.bottom;this._elem.css({right:d,bottom:c});break;case"s":var d=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2;var c=e.bottom;this._elem.css({left:d,bottom:c});break;case"sw":var d=e.left;var c=e.bottom;this._elem.css({left:d,bottom:c});break;case"w":var d=e.left;var c=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;
this._elem.css({left:d,top:c});break;default:var d=e.right;var c=e.bottom;this._elem.css({right:d,bottom:c});break}}else{if(this.placement=="outside"){switch(this.location){case"nw":var d=this._plotDimensions.width-e.left;var c=e.top;this._elem.css("right",d);this._elem.css("top",c);break;case"n":var d=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2;var c=this._plotDimensions.height-e.top;this._elem.css("left",d);this._elem.css("bottom",c);break;case"ne":var d=this._plotDimensions.width-e.right;var c=e.top;this._elem.css({left:d,top:c});break;case"e":var d=this._plotDimensions.width-e.right;var c=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({left:d,top:c});break;case"se":var d=this._plotDimensions.width-e.right;var c=e.bottom;this._elem.css({left:d,bottom:c});break;case"s":var d=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2;var c=this._plotDimensions.height-e.bottom;this._elem.css({left:d,top:c});break;case"sw":var d=this._plotDimensions.width-e.left;
var c=e.bottom;this._elem.css({right:d,bottom:c});break;case"w":var d=this._plotDimensions.width-e.left;var c=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({right:d,top:c});break;default:var d=e.right;var c=e.bottom;this._elem.css({right:d,bottom:c});break}}else{switch(this.location){case"nw":this._elem.css({left:0,top:e.top});break;case"n":var d=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2;this._elem.css({left:d,top:e.top});break;case"ne":this._elem.css({right:0,top:e.top});break;case"e":var c=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;this._elem.css({right:e.right,top:c});break;case"se":this._elem.css({right:e.right,bottom:e.bottom});break;case"s":var d=(e.left+(this._plotDimensions.width-e.right))/2-this.getWidth()/2;this._elem.css({left:d,bottom:e.bottom});break;case"sw":this._elem.css({left:e.left,bottom:e.bottom});break;case"w":var c=(e.top+(this._plotDimensions.height-e.bottom))/2-this.getHeight()/2;
this._elem.css({left:e.left,top:c});break;default:this._elem.css({right:e.right,bottom:e.bottom});break}}}}}})(jQuery);(function(h){h.jqplot.LineRenderer=function(){this.shapeRenderer=new h.jqplot.ShapeRenderer();this.shadowRenderer=new h.jqplot.ShadowRenderer()};h.jqplot.LineRenderer.prototype.init=function(q,v){q=q||{};this._type="line";this.renderer.animation={show:false,direction:"left",speed:2500,_supported:true};this.renderer.smooth=false;this.renderer.tension=null;this.renderer.constrainSmoothing=true;this.renderer._smoothedData=[];this.renderer._smoothedPlotData=[];this.renderer._hiBandGridData=[];this.renderer._lowBandGridData=[];this.renderer._hiBandSmoothedData=[];this.renderer._lowBandSmoothedData=[];this.renderer.bandData=[];this.renderer.bands={show:false,hiData:[],lowData:[],color:this.color,showLines:false,fill:true,fillColor:null,_min:null,_max:null,interval:"3%"};var t={highlightMouseOver:q.highlightMouseOver,highlightMouseDown:q.highlightMouseDown,highlightColor:q.highlightColor};
delete (q.highlightMouseOver);delete (q.highlightMouseDown);delete (q.highlightColor);h.extend(true,this.renderer,q);this.renderer.options=q;if(this.renderer.bandData.length>1&&(!q.bands||q.bands.show==null)){this.renderer.bands.show=true}else{if(q.bands&&q.bands.show==null&&q.bands.interval!=null){this.renderer.bands.show=true}}if(this.fill){this.renderer.bands.show=false}if(this.renderer.bands.show){this.renderer.initBands.call(this,this.renderer.options,v)}if(this._stack){this.renderer.smooth=false}var u={lineJoin:this.lineJoin,lineCap:this.lineCap,fill:this.fill,isarc:false,strokeStyle:this.color,fillStyle:this.fillColor,lineWidth:this.lineWidth,linePattern:this.linePattern,closePath:this.fill};this.renderer.shapeRenderer.init(u);var r=q.shadowOffset;if(r==null){if(this.lineWidth>2.5){r=1.25*(1+(Math.atan((this.lineWidth/2.5))/0.785398163-1)*0.6)}else{r=1.25*Math.atan((this.lineWidth/2.5))/0.785398163}}var p={lineJoin:this.lineJoin,lineCap:this.lineCap,fill:this.fill,isarc:false,angle:this.shadowAngle,offset:r,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.lineWidth,linePattern:this.linePattern,closePath:this.fill};
this.renderer.shadowRenderer.init(p);this._areaPoints=[];this._boundingBox=[[],[]];if(!this.isTrendline&&this.fill||this.renderer.bands.show){this.highlightMouseOver=true;this.highlightMouseDown=false;this.highlightColor=null;if(t.highlightMouseDown&&t.highlightMouseOver==null){t.highlightMouseOver=false}h.extend(true,this,{highlightMouseOver:t.highlightMouseOver,highlightMouseDown:t.highlightMouseDown,highlightColor:t.highlightColor});if(!this.highlightColor){var s=(this.renderer.bands.show)?this.renderer.bands.fillColor:this.fillColor;this.highlightColor=h.jqplot.computeHighlightColors(s)}if(this.highlighter){this.highlighter.show=false}}if(!this.isTrendline&&v){v.plugins.lineRenderer={};v.postInitHooks.addOnce(j);v.postDrawHooks.addOnce(l);v.eventListenerHooks.addOnce("jqplotMouseMove",b);v.eventListenerHooks.addOnce("jqplotMouseDown",a);v.eventListenerHooks.addOnce("jqplotMouseUp",n);v.eventListenerHooks.addOnce("jqplotClick",i);v.eventListenerHooks.addOnce("jqplotRightClick",o)}};h.jqplot.LineRenderer.prototype.initBands=function(t,D){var u=t.bandData||[];
var w=this.renderer.bands;w.hiData=[];w.lowData=[];var J=this.data;w._max=null;w._min=null;if(u.length==2){if(h.isArray(u[0][0])){var x;var q=0,A=0;for(var E=0,B=u[0].length;E<B;E++){x=u[0][E];if((x[1]!=null&&x[1]>w._max)||w._max==null){w._max=x[1]}if((x[1]!=null&&x[1]<w._min)||w._min==null){w._min=x[1]}}for(var E=0,B=u[1].length;E<B;E++){x=u[1][E];if((x[1]!=null&&x[1]>w._max)||w._max==null){w._max=x[1];A=1}if((x[1]!=null&&x[1]<w._min)||w._min==null){w._min=x[1];q=1}}if(A===q){w.show=false}w.hiData=u[A];w.lowData=u[q]}else{if(u[0].length===J.length&&u[1].length===J.length){var s=(u[0][0]>u[1][0])?0:1;var K=(s)?0:1;for(var E=0,B=J.length;E<B;E++){w.hiData.push([J[E][0],u[s][E]]);w.lowData.push([J[E][0],u[K][E]])}}else{w.show=false}}}else{if(u.length>2&&!h.isArray(u[0][0])){var s=(u[0][0]>u[0][1])?0:1;var K=(s)?0:1;for(var E=0,B=u.length;E<B;E++){w.hiData.push([J[E][0],u[E][s]]);w.lowData.push([J[E][0],u[E][K]])}}else{var z=w.interval;var I=null;var H=null;var r=null;var C=null;if(h.isArray(z)){I=z[0];
H=z[1]}else{I=z}if(isNaN(I)){if(I.charAt(I.length-1)==="%"){r="multiply";I=parseFloat(I)/100+1}}else{I=parseFloat(I);r="add"}if(H!==null&&isNaN(H)){if(H.charAt(H.length-1)==="%"){C="multiply";H=parseFloat(H)/100+1}}else{if(H!==null){H=parseFloat(H);C="add"}}if(I!==null){if(H===null){H=-I;C=r;if(C==="multiply"){H+=2}}if(I<H){var F=I;I=H;H=F;F=r;r=C;C=F}for(var E=0,B=J.length;E<B;E++){switch(r){case"add":w.hiData.push([J[E][0],J[E][1]+I]);break;case"multiply":w.hiData.push([J[E][0],J[E][1]*I]);break}switch(C){case"add":w.lowData.push([J[E][0],J[E][1]+H]);break;case"multiply":w.lowData.push([J[E][0],J[E][1]*H]);break}}}else{w.show=false}}}var v=w.hiData;var y=w.lowData;for(var E=0,B=v.length;E<B;E++){if((v[E][1]!=null&&v[E][1]>w._max)||w._max==null){w._max=v[E][1]}}for(var E=0,B=y.length;E<B;E++){if((y[E][1]!=null&&y[E][1]<w._min)||w._min==null){w._min=y[E][1]}}if(w.fillColor===null){var G=h.jqplot.getColorComponents(w.color);G[3]=G[3]*0.5;w.fillColor="rgba("+G[0]+", "+G[1]+", "+G[2]+", "+G[3]+")"
}};function f(q,p){return(3.4182054+p)*Math.pow(q,-0.3534992)}function g(r,q){var p=Math.sqrt(Math.pow((q[0]-r[0]),2)+Math.pow((q[1]-r[1]),2));return 5.7648*Math.log(p)+7.4456}function c(p){var q=(Math.exp(2*p)-1)/(Math.exp(2*p)+1);return q}function e(U){var E=this.renderer.smooth;var O=this.canvas.getWidth();var v=this._xaxis.series_p2u;var R=this._yaxis.series_p2u;var Q=null;var u=null;var K=U.length/O;var r=[];var J=[];if(!isNaN(parseFloat(E))){Q=parseFloat(E)}else{Q=f(K,0.5)}var H=[];var s=[];for(var P=0,L=U.length;P<L;P++){H.push(U[P][1]);s.push(U[P][0])}function G(A,B){if(A-B==0){return Math.pow(10,10)}else{return A-B}}var I,z,y,x;var p=U.length-1;for(var t=1,M=U.length;t<M;t++){var q=[];var F=[];for(var N=0;N<2;N++){var P=t-1+N;if(P==0||P==p){q[N]=Math.pow(10,10)}else{if(H[P+1]-H[P]==0||H[P]-H[P-1]==0){q[N]=0}else{if(((s[P+1]-s[P])/(H[P+1]-H[P])+(s[P]-s[P-1])/(H[P]-H[P-1]))==0){q[N]=0}else{if((H[P+1]-H[P])*(H[P]-H[P-1])<0){q[N]=0}else{q[N]=2/(G(s[P+1],s[P])/(H[P+1]-H[P])+G(s[P],s[P-1])/(H[P]-H[P-1]))
}}}}}if(t==1){q[0]=3/2*(H[1]-H[0])/G(s[1],s[0])-q[1]/2}else{if(t==p){q[1]=3/2*(H[p]-H[p-1])/G(s[p],s[p-1])-q[0]/2}}F[0]=-2*(q[1]+2*q[0])/G(s[t],s[t-1])+6*(H[t]-H[t-1])/Math.pow(G(s[t],s[t-1]),2);F[1]=2*(2*q[1]+q[0])/G(s[t],s[t-1])-6*(H[t]-H[t-1])/Math.pow(G(s[t],s[t-1]),2);x=1/6*(F[1]-F[0])/G(s[t],s[t-1]);y=1/2*(s[t]*F[0]-s[t-1]*F[1])/G(s[t],s[t-1]);z=(H[t]-H[t-1]-y*(Math.pow(s[t],2)-Math.pow(s[t-1],2))-x*(Math.pow(s[t],3)-Math.pow(s[t-1],3)))/G(s[t],s[t-1]);I=H[t-1]-z*s[t-1]-y*Math.pow(s[t-1],2)-x*Math.pow(s[t-1],3);var T=(s[t]-s[t-1])/Q;var S,w;for(var N=0,L=Q;N<L;N++){S=[];w=s[t-1]+N*T;S.push(w);S.push(I+z*w+y*Math.pow(w,2)+x*Math.pow(w,3));r.push(S);J.push([v(S[0]),R(S[1])])}}r.push(U[P]);J.push([v(U[P][0]),R(U[P][1])]);return[r,J]}function k(A){var z=this.renderer.smooth;var ae=this.renderer.tension;var q=this.canvas.getWidth();var R=this._xaxis.series_p2u;var B=this._yaxis.series_p2u;var S=null;var T=null;var ad=null;var Y=null;var W=null;var D=null;var ab=null;var x=null;var U,V,N,M,K,I;
var v,r,F,E;var L,J,X;var G=[];var u=[];var w=A.length/q;var ac,H,P,Q,O;var C=[];var y=[];if(!isNaN(parseFloat(z))){S=parseFloat(z)}else{S=f(w,0.5)}if(!isNaN(parseFloat(ae))){ae=parseFloat(ae)}for(var aa=0,Z=A.length-1;aa<Z;aa++){if(ae===null){D=Math.abs((A[aa+1][1]-A[aa][1])/(A[aa+1][0]-A[aa][0]));ac=0.3;H=0.6;P=(H-ac)/2;Q=2.5;O=-1.4;x=D/Q+O;Y=P*c(x)-P*c(O)+ac;if(aa>0){ab=Math.abs((A[aa][1]-A[aa-1][1])/(A[aa][0]-A[aa-1][0]))}x=ab/Q+O;W=P*c(x)-P*c(O)+ac;ad=(Y+W)/2}else{ad=ae}for(U=0;U<S;U++){V=U/S;N=(1+2*V)*Math.pow((1-V),2);M=V*Math.pow((1-V),2);K=Math.pow(V,2)*(3-2*V);I=Math.pow(V,2)*(V-1);if(A[aa-1]){v=ad*(A[aa+1][0]-A[aa-1][0]);r=ad*(A[aa+1][1]-A[aa-1][1])}else{v=ad*(A[aa+1][0]-A[aa][0]);r=ad*(A[aa+1][1]-A[aa][1])}if(A[aa+2]){F=ad*(A[aa+2][0]-A[aa][0]);E=ad*(A[aa+2][1]-A[aa][1])}else{F=ad*(A[aa+1][0]-A[aa][0]);E=ad*(A[aa+1][1]-A[aa][1])}L=N*A[aa][0]+K*A[aa+1][0]+M*v+I*F;J=N*A[aa][1]+K*A[aa+1][1]+M*r+I*E;X=[L,J];C.push(X);y.push([R(L),B(J)])}}C.push(A[Z]);y.push([R(A[Z][0]),B(A[Z][1])]);
return[C,y]}h.jqplot.LineRenderer.prototype.setGridData=function(x){var t=this._xaxis.series_u2p;var p=this._yaxis.series_u2p;var u=this._plotData;var y=this._prevPlotData;this.gridData=[];this._prevGridData=[];this.renderer._smoothedData=[];this.renderer._smoothedPlotData=[];this.renderer._hiBandGridData=[];this.renderer._lowBandGridData=[];this.renderer._hiBandSmoothedData=[];this.renderer._lowBandSmoothedData=[];var s=this.renderer.bands;var q=false;for(var v=0,r=u.length;v<r;v++){if(u[v][0]!=null&&u[v][1]!=null){this.gridData.push([t.call(this._xaxis,u[v][0]),p.call(this._yaxis,u[v][1])])}else{if(u[v][0]==null){q=true;this.gridData.push([null,p.call(this._yaxis,u[v][1])])}else{if(u[v][1]==null){q=true;this.gridData.push([t.call(this._xaxis,u[v][0]),null])}}}if(y[v]!=null&&y[v][0]!=null&&y[v][1]!=null){this._prevGridData.push([t.call(this._xaxis,y[v][0]),p.call(this._yaxis,y[v][1])])}else{if(y[v]!=null&&y[v][0]==null){this._prevGridData.push([null,p.call(this._yaxis,y[v][1])])}else{if(y[v]!=null&&y[v][0]!=null&&y[v][1]==null){this._prevGridData.push([t.call(this._xaxis,y[v][0]),null])
}}}}if(q){this.renderer.smooth=false;if(this._type==="line"){s.show=false}}if(this._type==="line"&&s.show){for(var v=0,r=s.hiData.length;v<r;v++){this.renderer._hiBandGridData.push([t.call(this._xaxis,s.hiData[v][0]),p.call(this._yaxis,s.hiData[v][1])])}for(var v=0,r=s.lowData.length;v<r;v++){this.renderer._lowBandGridData.push([t.call(this._xaxis,s.lowData[v][0]),p.call(this._yaxis,s.lowData[v][1])])}}if(this._type==="line"&&this.renderer.smooth&&this.gridData.length>2){var w;if(this.renderer.constrainSmoothing){w=e.call(this,this.gridData);this.renderer._smoothedData=w[0];this.renderer._smoothedPlotData=w[1];if(s.show){w=e.call(this,this.renderer._hiBandGridData);this.renderer._hiBandSmoothedData=w[0];w=e.call(this,this.renderer._lowBandGridData);this.renderer._lowBandSmoothedData=w[0]}w=null}else{w=k.call(this,this.gridData);this.renderer._smoothedData=w[0];this.renderer._smoothedPlotData=w[1];if(s.show){w=k.call(this,this.renderer._hiBandGridData);this.renderer._hiBandSmoothedData=w[0];
w=k.call(this,this.renderer._lowBandGridData);this.renderer._lowBandSmoothedData=w[0]}w=null}}};h.jqplot.LineRenderer.prototype.makeGridData=function(w,y){var u=this._xaxis.series_u2p;var p=this._yaxis.series_u2p;var z=[];var r=[];this.renderer._smoothedData=[];this.renderer._smoothedPlotData=[];this.renderer._hiBandGridData=[];this.renderer._lowBandGridData=[];this.renderer._hiBandSmoothedData=[];this.renderer._lowBandSmoothedData=[];var t=this.renderer.bands;var q=false;for(var v=0;v<w.length;v++){if(w[v][0]!=null&&w[v][1]!=null){z.push([u.call(this._xaxis,w[v][0]),p.call(this._yaxis,w[v][1])])}else{if(w[v][0]==null){q=true;z.push([null,p.call(this._yaxis,w[v][1])])}else{if(w[v][1]==null){q=true;z.push([u.call(this._xaxis,w[v][0]),null])}}}}if(q){this.renderer.smooth=false;if(this._type==="line"){t.show=false}}if(this._type==="line"&&t.show){for(var v=0,s=t.hiData.length;v<s;v++){this.renderer._hiBandGridData.push([u.call(this._xaxis,t.hiData[v][0]),p.call(this._yaxis,t.hiData[v][1])])
}for(var v=0,s=t.lowData.length;v<s;v++){this.renderer._lowBandGridData.push([u.call(this._xaxis,t.lowData[v][0]),p.call(this._yaxis,t.lowData[v][1])])}}if(this._type==="line"&&this.renderer.smooth&&z.length>2){var x;if(this.renderer.constrainSmoothing){x=e.call(this,z);this.renderer._smoothedData=x[0];this.renderer._smoothedPlotData=x[1];if(t.show){x=e.call(this,this.renderer._hiBandGridData);this.renderer._hiBandSmoothedData=x[0];x=e.call(this,this.renderer._lowBandGridData);this.renderer._lowBandSmoothedData=x[0]}x=null}else{x=k.call(this,z);this.renderer._smoothedData=x[0];this.renderer._smoothedPlotData=x[1];if(t.show){x=k.call(this,this.renderer._hiBandGridData);this.renderer._hiBandSmoothedData=x[0];x=k.call(this,this.renderer._lowBandGridData);this.renderer._lowBandSmoothedData=x[0]}x=null}}return z};h.jqplot.LineRenderer.prototype.draw=function(F,Q,r,J){var K;var z=h.extend(true,{},r);var t=(z.shadow!=undefined)?z.shadow:this.shadow;var R=(z.showLine!=undefined)?z.showLine:this.showLine;
var I=(z.fill!=undefined)?z.fill:this.fill;var q=(z.fillAndStroke!=undefined)?z.fillAndStroke:this.fillAndStroke;var A,G,D,M;F.save();if(Q.length){if(R){if(I){if(this.fillToZero){var N=this.negativeColor;if(!this.useNegativeColors){N=z.fillStyle}var x=false;var y=z.fillStyle;if(q){var P=Q.slice(0)}if(this.index==0||!this._stack){var E=[];var T=(this.renderer.smooth)?this.renderer._smoothedPlotData:this._plotData;this._areaPoints=[];var O=this._yaxis.series_u2p(this.fillToValue);var s=this._xaxis.series_u2p(this.fillToValue);z.closePath=true;if(this.fillAxis=="y"){E.push([Q[0][0],O]);this._areaPoints.push([Q[0][0],O]);for(var K=0;K<Q.length-1;K++){E.push(Q[K]);this._areaPoints.push(Q[K]);if(T[K][1]*T[K+1][1]<0){if(T[K][1]<0){x=true;z.fillStyle=N}else{x=false;z.fillStyle=y}var w=Q[K][0]+(Q[K+1][0]-Q[K][0])*(O-Q[K][1])/(Q[K+1][1]-Q[K][1]);E.push([w,O]);this._areaPoints.push([w,O]);if(t){this.renderer.shadowRenderer.draw(F,E,z)}this.renderer.shapeRenderer.draw(F,E,z);E=[[w,O]]}}if(T[Q.length-1][1]<0){x=true;
z.fillStyle=N}else{x=false;z.fillStyle=y}E.push(Q[Q.length-1]);this._areaPoints.push(Q[Q.length-1]);E.push([Q[Q.length-1][0],O]);this._areaPoints.push([Q[Q.length-1][0],O])}if(t){this.renderer.shadowRenderer.draw(F,E,z)}this.renderer.shapeRenderer.draw(F,E,z)}else{var C=this._prevGridData;for(var K=C.length;K>0;K--){Q.push(C[K-1])}if(t){this.renderer.shadowRenderer.draw(F,Q,z)}this._areaPoints=Q;this.renderer.shapeRenderer.draw(F,Q,z)}}else{if(q){var P=Q.slice(0)}if(this.index==0||!this._stack){var u=F.canvas.height;Q.unshift([Q[0][0],u]);var L=Q.length;Q.push([Q[L-1][0],u])}else{var C=this._prevGridData;for(var K=C.length;K>0;K--){Q.push(C[K-1])}}this._areaPoints=Q;if(t){this.renderer.shadowRenderer.draw(F,Q,z)}this.renderer.shapeRenderer.draw(F,Q,z)}if(q){var H=h.extend(true,{},z,{fill:false,closePath:false});this.renderer.shapeRenderer.draw(F,P,H);if(this.markerRenderer.show){if(this.renderer.smooth){P=this.gridData}for(K=0;K<P.length;K++){this.markerRenderer.draw(P[K][0],P[K][1],F,z.markerOptions)
}}}}else{if(this.renderer.bands.show){var v;var S=h.extend(true,{},z);if(this.renderer.bands.showLines){v=(this.renderer.smooth)?this.renderer._hiBandSmoothedData:this.renderer._hiBandGridData;this.renderer.shapeRenderer.draw(F,v,z);v=(this.renderer.smooth)?this.renderer._lowBandSmoothedData:this.renderer._lowBandGridData;this.renderer.shapeRenderer.draw(F,v,S)}if(this.renderer.bands.fill){if(this.renderer.smooth){v=this.renderer._hiBandSmoothedData.concat(this.renderer._lowBandSmoothedData.reverse())}else{v=this.renderer._hiBandGridData.concat(this.renderer._lowBandGridData.reverse())}this._areaPoints=v;S.closePath=true;S.fill=true;S.fillStyle=this.renderer.bands.fillColor;this.renderer.shapeRenderer.draw(F,v,S)}}if(t){this.renderer.shadowRenderer.draw(F,Q,z)}this.renderer.shapeRenderer.draw(F,Q,z)}}var A=D=G=M=null;for(K=0;K<this._areaPoints.length;K++){var B=this._areaPoints[K];if(A>B[0]||A==null){A=B[0]}if(M<B[1]||M==null){M=B[1]}if(D<B[0]||D==null){D=B[0]}if(G>B[1]||G==null){G=B[1]
}}if(this.type==="line"&&this.renderer.bands.show){M=this._yaxis.series_u2p(this.renderer.bands._min);G=this._yaxis.series_u2p(this.renderer.bands._max)}this._boundingBox=[[A,M],[D,G]];if(this.markerRenderer.show&&!I){if(this.renderer.smooth){Q=this.gridData}for(K=0;K<Q.length;K++){if(Q[K][0]!=null&&Q[K][1]!=null){this.markerRenderer.draw(Q[K][0],Q[K][1],F,z.markerOptions)}}}}F.restore()};h.jqplot.LineRenderer.prototype.drawShadow=function(p,r,q){};function j(s,r,p){for(var q=0;q<this.series.length;q++){if(this.series[q].renderer.constructor==h.jqplot.LineRenderer){if(this.series[q].highlightMouseOver){this.series[q].highlightMouseDown=false}}}}function l(){if(this.plugins.lineRenderer&&this.plugins.lineRenderer.highlightCanvas){this.plugins.lineRenderer.highlightCanvas.resetCanvas();this.plugins.lineRenderer.highlightCanvas=null}this.plugins.lineRenderer.highlightedSeriesIndex=null;this.plugins.lineRenderer.highlightCanvas=new h.jqplot.GenericCanvas();this.eventCanvas._elem.before(this.plugins.lineRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-lineRenderer-highlight-canvas",this._plotDimensions,this));
this.plugins.lineRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(p){m(p.data.plot)})}function d(w,v,t,r){var q=w.series[v];var p=w.plugins.lineRenderer.highlightCanvas;p._ctx.clearRect(0,0,p._ctx.canvas.width,p._ctx.canvas.height);q._highlightedPoint=t;w.plugins.lineRenderer.highlightedSeriesIndex=v;var u={fillStyle:q.highlightColor};if(q.type==="line"&&q.renderer.bands.show){u.fill=true;u.closePath=true}q.renderer.shapeRenderer.draw(p._ctx,r,u);p=null}function m(r){var p=r.plugins.lineRenderer.highlightCanvas;p._ctx.clearRect(0,0,p._ctx.canvas.width,p._ctx.canvas.height);for(var q=0;q<r.series.length;q++){r.series[q]._highlightedPoint=null}r.plugins.lineRenderer.highlightedSeriesIndex=null;r.target.trigger("jqplotDataUnhighlight");p=null}function b(t,s,w,v,u){if(v){var r=[v.seriesIndex,v.pointIndex,v.data];var q=jQuery.Event("jqplotDataMouseOver");q.pageX=t.pageX;q.pageY=t.pageY;u.target.trigger(q,r);if(u.series[r[0]].highlightMouseOver&&!(r[0]==u.plugins.lineRenderer.highlightedSeriesIndex)){var p=jQuery.Event("jqplotDataHighlight");
p.which=t.which;p.pageX=t.pageX;p.pageY=t.pageY;u.target.trigger(p,r);d(u,v.seriesIndex,v.pointIndex,v.points)}}else{if(v==null){m(u)}}}function a(s,r,v,u,t){if(u){var q=[u.seriesIndex,u.pointIndex,u.data];if(t.series[q[0]].highlightMouseDown&&!(q[0]==t.plugins.lineRenderer.highlightedSeriesIndex)){var p=jQuery.Event("jqplotDataHighlight");p.which=s.which;p.pageX=s.pageX;p.pageY=s.pageY;t.target.trigger(p,q);d(t,u.seriesIndex,u.pointIndex,u.points)}}else{if(u==null){m(t)}}}function n(r,q,u,t,s){var p=s.plugins.lineRenderer.highlightedSeriesIndex;if(p!=null&&s.series[p].highlightMouseDown){m(s)}}function i(s,r,v,u,t){if(u){var q=[u.seriesIndex,u.pointIndex,u.data];var p=jQuery.Event("jqplotDataClick");p.which=s.which;p.pageX=s.pageX;p.pageY=s.pageY;t.target.trigger(p,q)}}function o(t,s,w,v,u){if(v){var r=[v.seriesIndex,v.pointIndex,v.data];var p=u.plugins.lineRenderer.highlightedSeriesIndex;if(p!=null&&u.series[p].highlightMouseDown){m(u)}var q=jQuery.Event("jqplotDataRightClick");q.which=t.which;
q.pageX=t.pageX;q.pageY=t.pageY;u.target.trigger(q,r)}}})(jQuery);(function(b){var a=0.1;b.jqplot.LinePattern=function(r,m){var l={dotted:[a,b.jqplot.config.dotGapLength],dashed:[b.jqplot.config.dashLength,b.jqplot.config.gapLength],solid:null};if(typeof m==="string"){if(m[0]==="."||m[0]==="-"){var t=m;m=[];for(var k=0,g=t.length;k<g;k++){if(t[k]==="."){m.push(a)}else{if(t[k]==="-"){m.push(b.jqplot.config.dashLength)}else{continue}}m.push(b.jqplot.config.gapLength)}}else{m=l[m]}}if(!(m&&m.length)){return r}var f=0;var n=m[0];var p=0;var o=0;var j=0;var c=0;var q=function(i,s){r.moveTo(i,s);p=i;o=s;j=i;c=s};var e=function(i,A){var w=r.lineWidth;var u=i-p;var s=A-o;var v=Math.sqrt(u*u+s*s);if((v>0)&&(w>0)){u/=v;s/=v;while(true){var z=w*n;if(z<v){p+=z*u;o+=z*s;if((f&1)==0){r.lineTo(p,o)}else{r.moveTo(p,o)}v-=z;f++;if(f>=m.length){f=0}n=m[f]}else{p=i;o=A;if((f&1)==0){r.lineTo(p,o)}else{r.moveTo(p,o)}n-=v/w;break}}}};var d=function(){r.beginPath()};var h=function(){e(j,c)};return{moveTo:q,lineTo:e,beginPath:d,closePath:h}
}})(jQuery);(function(a){a.jqplot.MarkerRenderer=function(b){this.show=true;this.style="filledCircle";this.lineWidth=2;this.size=9;this.color="#666666";this.shadow=true;this.shadowAngle=45;this.shadowOffset=1;this.shadowDepth=3;this.shadowAlpha="0.07";this.shadowRenderer=new a.jqplot.ShadowRenderer();this.shapeRenderer=new a.jqplot.ShapeRenderer();a.extend(true,this,b)};a.jqplot.MarkerRenderer.prototype.init=function(b){a.extend(true,this,b);var d={angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,lineWidth:this.lineWidth,depth:this.shadowDepth,closePath:true};if(this.style.indexOf("filled")!=-1){d.fill=true}if(this.style.indexOf("ircle")!=-1){d.isarc=true;d.closePath=false}this.shadowRenderer.init(d);var c={fill:false,isarc:false,strokeStyle:this.color,fillStyle:this.color,lineWidth:this.lineWidth,closePath:true};if(this.style.indexOf("filled")!=-1){c.fill=true}if(this.style.indexOf("ircle")!=-1){c.isarc=true;c.closePath=false}this.shapeRenderer.init(c)};a.jqplot.MarkerRenderer.prototype.drawDiamond=function(d,c,g,f,i){var b=1.2;
var j=this.size/2/b;var h=this.size/2*b;var e=[[d-j,c],[d,c+h],[d+j,c],[d,c-h]];if(this.shadow){this.shadowRenderer.draw(g,e)}this.shapeRenderer.draw(g,e,i)};a.jqplot.MarkerRenderer.prototype.drawPlus=function(e,d,h,g,k){var c=1;var l=this.size/2*c;var i=this.size/2*c;var j=[[e,d-i],[e,d+i]];var f=[[e+l,d],[e-l,d]];var b=a.extend(true,{},this.options,{closePath:false});if(this.shadow){this.shadowRenderer.draw(h,j,{closePath:false});this.shadowRenderer.draw(h,f,{closePath:false})}this.shapeRenderer.draw(h,j,b);this.shapeRenderer.draw(h,f,b)};a.jqplot.MarkerRenderer.prototype.drawX=function(e,d,h,g,k){var c=1;var l=this.size/2*c;var i=this.size/2*c;var b=a.extend(true,{},this.options,{closePath:false});var j=[[e-l,d-i],[e+l,d+i]];var f=[[e-l,d+i],[e+l,d-i]];if(this.shadow){this.shadowRenderer.draw(h,j,{closePath:false});this.shadowRenderer.draw(h,f,{closePath:false})}this.shapeRenderer.draw(h,j,b);this.shapeRenderer.draw(h,f,b)};a.jqplot.MarkerRenderer.prototype.drawDash=function(d,c,g,f,i){var b=1;
var j=this.size/2*b;var h=this.size/2*b;var e=[[d-j,c],[d+j,c]];if(this.shadow){this.shadowRenderer.draw(g,e)}this.shapeRenderer.draw(g,e,i)};a.jqplot.MarkerRenderer.prototype.drawLine=function(g,f,b,e,c){var d=[g,f];if(this.shadow){this.shadowRenderer.draw(b,d)}this.shapeRenderer.draw(b,d,c)};a.jqplot.MarkerRenderer.prototype.drawSquare=function(d,c,g,f,i){var b=1;var j=this.size/2/b;var h=this.size/2*b;var e=[[d-j,c-h],[d-j,c+h],[d+j,c+h],[d+j,c-h]];if(this.shadow){this.shadowRenderer.draw(g,e)}this.shapeRenderer.draw(g,e,i)};a.jqplot.MarkerRenderer.prototype.drawCircle=function(c,i,e,h,f){var b=this.size/2;var d=2*Math.PI;var g=[c,i,b,0,d,true];if(this.shadow){this.shadowRenderer.draw(e,g)}this.shapeRenderer.draw(e,g,f)};a.jqplot.MarkerRenderer.prototype.draw=function(b,e,c,d){d=d||{};if(d.show==null||d.show!=false){if(d.color&&!d.fillStyle){d.fillStyle=d.color}if(d.color&&!d.strokeStyle){d.strokeStyle=d.color}switch(this.style){case"diamond":this.drawDiamond(b,e,c,false,d);break;case"filledDiamond":this.drawDiamond(b,e,c,true,d);
break;case"circle":this.drawCircle(b,e,c,false,d);break;case"filledCircle":this.drawCircle(b,e,c,true,d);break;case"square":this.drawSquare(b,e,c,false,d);break;case"filledSquare":this.drawSquare(b,e,c,true,d);break;case"x":this.drawX(b,e,c,true,d);break;case"plus":this.drawPlus(b,e,c,true,d);break;case"dash":this.drawDash(b,e,c,true,d);break;case"line":this.drawLine(b,e,c,false,d);break;default:this.drawDiamond(b,e,c,false,d);break}}}})(jQuery);(function(a){a.jqplot.DivTitleRenderer=function(){};a.jqplot.DivTitleRenderer.prototype.init=function(b){a.extend(true,this,b)};a.jqplot.DivTitleRenderer.prototype.draw=function(){if(this._elem){this._elem.emptyForce();this._elem=null}var e=this.renderer;var d=document.createElement("div");this._elem=a(d);this._elem.addClass("jqplot-title");if(!this.text){this.show=false;this._elem.height(0);this._elem.width(0)}else{if(this.text){var b;if(this.color){b=this.color}else{if(this.textColor){b=this.textColor}}var c={position:"absolute",top:"0px",left:"0px"};
if(this._plotWidth){c.width=this._plotWidth+"px"}if(this.fontSize){c.fontSize=this.fontSize}if(typeof this.textAlign==="string"){c.textAlign=this.textAlign}else{c.textAlign="center"}if(b){c.color=b}if(this.paddingBottom){c.paddingBottom=this.paddingBottom}if(this.fontFamily){c.fontFamily=this.fontFamily}this._elem.css(c);if(this.escapeHtml){this._elem.text(this.text)}else{this._elem.html(this.text)}}}d=null;return this._elem};a.jqplot.DivTitleRenderer.prototype.pack=function(){}})(jQuery);(function(a){a.jqplot.CanvasGridRenderer=function(){this.shadowRenderer=new a.jqplot.ShadowRenderer()};a.jqplot.CanvasGridRenderer.prototype.init=function(c){this._ctx;a.extend(true,this,c);var b={lineJoin:"miter",lineCap:"round",fill:false,isarc:false,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.shadowWidth,closePath:false,strokeStyle:this.shadowColor};this.renderer.shadowRenderer.init(b)};a.jqplot.CanvasGridRenderer.prototype.createElement=function(e){var d;
if(this._elem){if(a.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==undefined){d=this._elem.get(0);window.G_vmlCanvasManager.uninitElement(d);d=null}this._elem.emptyForce();this._elem=null}d=e.canvasManager.getCanvas();var b=this._plotDimensions.width;var c=this._plotDimensions.height;d.width=b;d.height=c;this._elem=a(d);this._elem.addClass("jqplot-grid-canvas");this._elem.css({position:"absolute",left:0,top:0});d=e.canvasManager.initCanvas(d);this._top=this._offsets.top;this._bottom=c-this._offsets.bottom;this._left=this._offsets.left;this._right=b-this._offsets.right;this._width=this._right-this._left;this._height=this._bottom-this._top;d=null;return this._elem};a.jqplot.CanvasGridRenderer.prototype.draw=function(){this._ctx=this._elem.get(0).getContext("2d");var r=this._ctx;var w=this._axes;r.save();r.clearRect(0,0,this._plotDimensions.width,this._plotDimensions.height);r.fillStyle=this.backgroundColor||this.background;r.fillRect(this._left,this._top,this._width,this._height);
r.save();r.lineJoin="miter";r.lineCap="butt";r.lineWidth=this.gridLineWidth;r.strokeStyle=this.gridLineColor;var z,y,o,p;var k=["xaxis","yaxis","x2axis","y2axis"];for(var x=4;x>0;x--){var C=k[x-1];var c=w[C];var A=c._ticks;var q=A.length;if(c.show){if(c.drawBaseline){var B={};if(c.baselineWidth!==null){B.lineWidth=c.baselineWidth}if(c.baselineColor!==null){B.strokeStyle=c.baselineColor}switch(C){case"xaxis":n(this._left,this._bottom,this._right,this._bottom,B);break;case"yaxis":n(this._left,this._bottom,this._left,this._top,B);break;case"x2axis":n(this._left,this._bottom,this._right,this._bottom,B);break;case"y2axis":n(this._right,this._bottom,this._right,this._top,B);break}}for(var u=q;u>0;u--){var l=A[u-1];if(l.show){var g=Math.round(c.u2p(l.value))+0.5;switch(C){case"xaxis":if(l.showGridline&&this.drawGridlines&&((!l.isMinorTick&&c.drawMajorGridlines)||(l.isMinorTick&&c.drawMinorGridlines))){n(g,this._top,g,this._bottom)}if(l.showMark&&l.mark&&((!l.isMinorTick&&c.drawMajorTickMarks)||(l.isMinorTick&&c.drawMinorTickMarks))){o=l.markSize;
p=l.mark;var g=Math.round(c.u2p(l.value))+0.5;switch(p){case"outside":z=this._bottom;y=this._bottom+o;break;case"inside":z=this._bottom-o;y=this._bottom;break;case"cross":z=this._bottom-o;y=this._bottom+o;break;default:z=this._bottom;y=this._bottom+o;break}if(this.shadow){this.renderer.shadowRenderer.draw(r,[[g,z],[g,y]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:this.gridLineWidth*0.75,depth:2,fill:false,closePath:false})}n(g,z,g,y)}break;case"yaxis":if(l.showGridline&&this.drawGridlines&&((!l.isMinorTick&&c.drawMajorGridlines)||(l.isMinorTick&&c.drawMinorGridlines))){n(this._right,g,this._left,g)}if(l.showMark&&l.mark&&((!l.isMinorTick&&c.drawMajorTickMarks)||(l.isMinorTick&&c.drawMinorTickMarks))){o=l.markSize;p=l.mark;var g=Math.round(c.u2p(l.value))+0.5;switch(p){case"outside":z=this._left-o;y=this._left;break;case"inside":z=this._left;y=this._left+o;break;case"cross":z=this._left-o;y=this._left+o;break;default:z=this._left-o;y=this._left;break}if(this.shadow){this.renderer.shadowRenderer.draw(r,[[z,g],[y,g]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})
}n(z,g,y,g,{strokeStyle:c.borderColor})}break;case"x2axis":if(l.showGridline&&this.drawGridlines&&((!l.isMinorTick&&c.drawMajorGridlines)||(l.isMinorTick&&c.drawMinorGridlines))){n(g,this._bottom,g,this._top)}if(l.showMark&&l.mark&&((!l.isMinorTick&&c.drawMajorTickMarks)||(l.isMinorTick&&c.drawMinorTickMarks))){o=l.markSize;p=l.mark;var g=Math.round(c.u2p(l.value))+0.5;switch(p){case"outside":z=this._top-o;y=this._top;break;case"inside":z=this._top;y=this._top+o;break;case"cross":z=this._top-o;y=this._top+o;break;default:z=this._top-o;y=this._top;break}if(this.shadow){this.renderer.shadowRenderer.draw(r,[[g,z],[g,y]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:this.gridLineWidth*0.75,depth:2,fill:false,closePath:false})}n(g,z,g,y)}break;case"y2axis":if(l.showGridline&&this.drawGridlines&&((!l.isMinorTick&&c.drawMajorGridlines)||(l.isMinorTick&&c.drawMinorGridlines))){n(this._left,g,this._right,g)}if(l.showMark&&l.mark&&((!l.isMinorTick&&c.drawMajorTickMarks)||(l.isMinorTick&&c.drawMinorTickMarks))){o=l.markSize;
p=l.mark;var g=Math.round(c.u2p(l.value))+0.5;switch(p){case"outside":z=this._right;y=this._right+o;break;case"inside":z=this._right-o;y=this._right;break;case"cross":z=this._right-o;y=this._right+o;break;default:z=this._right;y=this._right+o;break}if(this.shadow){this.renderer.shadowRenderer.draw(r,[[z,g],[y,g]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}n(z,g,y,g,{strokeStyle:c.borderColor})}break;default:break}}}l=null}c=null;A=null}k=["y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis","yMidAxis"];for(var x=7;x>0;x--){var c=w[k[x-1]];var A=c._ticks;if(c.show){var d=A[c.numberTicks-1];var h=A[0];var f=c.getLeft();var v=[[f,d.getTop()+d.getHeight()/2],[f,h.getTop()+h.getHeight()/2+1]];if(this.shadow){this.renderer.shadowRenderer.draw(r,v,{lineCap:"butt",fill:false,closePath:false})}n(v[0][0],v[0][1],v[1][0],v[1][1],{lineCap:"butt",strokeStyle:c.borderColor,lineWidth:c.borderWidth});for(var u=A.length;u>0;u--){var l=A[u-1];
o=l.markSize;p=l.mark;var g=Math.round(c.u2p(l.value))+0.5;if(l.showMark&&l.mark){switch(p){case"outside":z=f;y=f+o;break;case"inside":z=f-o;y=f;break;case"cross":z=f-o;y=f+o;break;default:z=f;y=f+o;break}v=[[z,g],[y,g]];if(this.shadow){this.renderer.shadowRenderer.draw(r,v,{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}n(z,g,y,g,{strokeStyle:c.borderColor})}l=null}h=null}c=null;A=null}r.restore();function n(m,j,e,b,i){r.save();i=i||{};if(i.lineWidth==null||i.lineWidth!=0){a.extend(true,r,i);r.beginPath();r.moveTo(m,j);r.lineTo(e,b);r.stroke();r.restore()}}if(this.shadow){var v=[[this._left,this._bottom],[this._right,this._bottom],[this._right,this._top]];this.renderer.shadowRenderer.draw(r,v)}if(this.borderWidth!=0&&this.drawBorder){n(this._left,this._top,this._right,this._top,{lineCap:"round",strokeStyle:w.x2axis.borderColor,lineWidth:w.x2axis.borderWidth});n(this._right,this._top,this._right,this._bottom,{lineCap:"round",strokeStyle:w.y2axis.borderColor,lineWidth:w.y2axis.borderWidth});
n(this._right,this._bottom,this._left,this._bottom,{lineCap:"round",strokeStyle:w.xaxis.borderColor,lineWidth:w.xaxis.borderWidth});n(this._left,this._bottom,this._left,this._top,{lineCap:"round",strokeStyle:w.yaxis.borderColor,lineWidth:w.yaxis.borderWidth})}r.restore();r=null;w=null}})(jQuery);(function(a){a.jqplot.ShadowRenderer=function(b){this.angle=45;this.offset=1;this.alpha=0.07;this.lineWidth=1.5;this.lineJoin="miter";this.lineCap="round";this.closePath=false;this.fill=false;this.depth=3;this.strokeStyle="rgba(0,0,0,0.1)";this.isarc=false;a.extend(true,this,b)};a.jqplot.ShadowRenderer.prototype.init=function(b){a.extend(true,this,b)};a.jqplot.ShadowRenderer.prototype.draw=function(q,o,s){q.save();var b=(s!=null)?s:{};var p=(b.fill!=null)?b.fill:this.fill;var l=(b.fillRect!=null)?b.fillRect:this.fillRect;var k=(b.closePath!=null)?b.closePath:this.closePath;var f=(b.offset!=null)?b.offset:this.offset;var d=(b.alpha!=null)?b.alpha:this.alpha;var h=(b.depth!=null)?b.depth:this.depth;
var r=(b.isarc!=null)?b.isarc:this.isarc;var m=(b.linePattern!=null)?b.linePattern:this.linePattern;q.lineWidth=(b.lineWidth!=null)?b.lineWidth:this.lineWidth;q.lineJoin=(b.lineJoin!=null)?b.lineJoin:this.lineJoin;q.lineCap=(b.lineCap!=null)?b.lineCap:this.lineCap;q.strokeStyle=b.strokeStyle||this.strokeStyle||"rgba(0,0,0,"+d+")";q.fillStyle=b.fillStyle||this.fillStyle||"rgba(0,0,0,"+d+")";for(var e=0;e<h;e++){var n=a.jqplot.LinePattern(q,m);q.translate(Math.cos(this.angle*Math.PI/180)*f,Math.sin(this.angle*Math.PI/180)*f);n.beginPath();if(r){q.arc(o[0],o[1],o[2],o[3],o[4],true)}else{if(l){if(l){q.fillRect(o[0],o[1],o[2],o[3])}}else{if(o&&o.length){var c=true;for(var g=0;g<o.length;g++){if(o[g][0]!=null&&o[g][1]!=null){if(c){n.moveTo(o[g][0],o[g][1]);c=false}else{n.lineTo(o[g][0],o[g][1])}}else{c=true}}}}}if(k){n.closePath()}if(p){q.fill()}else{q.stroke()}}q.restore()}})(jQuery);(function(a){a.jqplot.ShapeRenderer=function(b){this.lineWidth=1.5;this.linePattern="solid";this.lineJoin="miter";
this.lineCap="round";this.closePath=false;this.fill=false;this.isarc=false;this.fillRect=false;this.strokeRect=false;this.clearRect=false;this.strokeStyle="#999999";this.fillStyle="#999999";a.extend(true,this,b)};a.jqplot.ShapeRenderer.prototype.init=function(b){a.extend(true,this,b)};a.jqplot.ShapeRenderer.prototype.draw=function(n,l,p){n.save();var b=(p!=null)?p:{};var m=(b.fill!=null)?b.fill:this.fill;var g=(b.closePath!=null)?b.closePath:this.closePath;var h=(b.fillRect!=null)?b.fillRect:this.fillRect;var e=(b.strokeRect!=null)?b.strokeRect:this.strokeRect;var c=(b.clearRect!=null)?b.clearRect:this.clearRect;var o=(b.isarc!=null)?b.isarc:this.isarc;var j=(b.linePattern!=null)?b.linePattern:this.linePattern;var k=a.jqplot.LinePattern(n,j);n.lineWidth=b.lineWidth||this.lineWidth;n.lineJoin=b.lineJoin||this.lineJoin;n.lineCap=b.lineCap||this.lineCap;n.strokeStyle=(b.strokeStyle||b.color)||this.strokeStyle;n.fillStyle=b.fillStyle||this.fillStyle;n.beginPath();if(o){n.arc(l[0],l[1],l[2],l[3],l[4],true);
if(g){n.closePath()}if(m){n.fill()}else{n.stroke()}n.restore();return}else{if(c){n.clearRect(l[0],l[1],l[2],l[3]);n.restore();return}else{if(h||e){if(h){n.fillRect(l[0],l[1],l[2],l[3])}if(e){n.strokeRect(l[0],l[1],l[2],l[3]);n.restore();return}}else{if(l&&l.length){var d=true;for(var f=0;f<l.length;f++){if(l[f][0]!=null&&l[f][1]!=null){if(d){k.moveTo(l[f][0],l[f][1]);d=false}else{k.lineTo(l[f][0],l[f][1])}}else{d=true}}if(g){k.closePath()}if(m){n.fill()}else{n.stroke()}}}}}n.restore()}})(jQuery);(function(a){a.jqplot.sprintf=function(){function h(n,i,k,m){var l=(n.length>=i)?"":Array(1+i-n.length>>>0).join(k);return m?n+l:l+n}function e(m){var l=new String(m);for(var k=10;k>0;k--){if(l==(l=l.replace(/^(\d+)(\d{3})/,"$1"+a.jqplot.sprintf.thousandsSeparator+"$2"))){break}}return l}function d(o,n,q,l,m,k){var p=l-o.length;if(p>0){var i=" ";if(k){i="&nbsp;"}if(q||!m){o=h(o,l,i,q)}else{o=o.slice(0,n.length)+h("",p,"0",true)+o.slice(n.length)}}return o}function j(r,k,p,l,i,o,q,n){var m=r>>>0;
p=p&&m&&{"2":"0b","8":"0","16":"0x"}[k]||"";r=p+h(m.toString(k),o||0,"0",false);return d(r,p,l,i,q,n)}function b(n,o,l,i,m,k){if(i!=null){n=n.slice(0,i)}return d(n,"",o,l,m,k)}var c=arguments,f=0,g=c[f++];return g.replace(a.jqplot.sprintf.regex,function(F,q,r,u,H,C,o){if(F=="%%"){return"%"}var w=false,s="",t=false,E=false,p=false,n=false;for(var B=0;r&&B<r.length;B++){switch(r.charAt(B)){case" ":s=" ";break;case"+":s="+";break;case"-":w=true;break;case"0":t=true;break;case"#":E=true;break;case"&":p=true;break;case"'":n=true;break}}if(!u){u=0}else{if(u=="*"){u=+c[f++]}else{if(u.charAt(0)=="*"){u=+c[u.slice(1,-1)]}else{u=+u}}}if(u<0){u=-u;w=true}if(!isFinite(u)){throw new Error("$.jqplot.sprintf: (minimum-)width must be finite")}if(!C){C="fFeE".indexOf(o)>-1?6:(o=="d")?0:void (0)}else{if(C=="*"){C=+c[f++]}else{if(C.charAt(0)=="*"){C=+c[C.slice(1,-1)]}else{C=+C}}}var y=q?c[q.slice(0,-1)]:c[f++];switch(o){case"s":if(y==null){return""}return b(String(y),w,u,C,t,p);case"c":return b(String.fromCharCode(+y),w,u,C,t,p);
case"b":return j(y,2,E,w,u,C,t,p);case"o":return j(y,8,E,w,u,C,t,p);case"x":return j(y,16,E,w,u,C,t,p);case"X":return j(y,16,E,w,u,C,t,p).toUpperCase();case"u":return j(y,10,E,w,u,C,t,p);case"i":var l=parseInt(+y,10);if(isNaN(l)){return""}var A=l<0?"-":s;var D=n?e(String(Math.abs(l))):String(Math.abs(l));y=A+h(D,C,"0",false);return d(y,A,w,u,t,p);case"d":var l=Math.round(+y);if(isNaN(l)){return""}var A=l<0?"-":s;var D=n?e(String(Math.abs(l))):String(Math.abs(l));y=A+h(D,C,"0",false);return d(y,A,w,u,t,p);case"e":case"E":case"f":case"F":case"g":case"G":var l=+y;if(isNaN(l)){return""}var A=l<0?"-":s;var m=["toExponential","toFixed","toPrecision"]["efg".indexOf(o.toLowerCase())];var G=["toString","toUpperCase"]["eEfFgG".indexOf(o)%2];var D=Math.abs(l)[m](C);D=n?e(D):D;y=A+D;var v=d(y,A,w,u,t,p)[G]();if(a.jqplot.sprintf.decimalMark!=="."&&a.jqplot.sprintf.decimalMark!==a.jqplot.sprintf.thousandsSeparator){return v.replace(/\./,a.jqplot.sprintf.decimalMark)}else{return v}case"p":case"P":var l=+y;
if(isNaN(l)){return""}var A=l<0?"-":s;var x=String(Number(Math.abs(l)).toExponential()).split(/e|E/);var k=(x[0].indexOf(".")!=-1)?x[0].length-1:x[0].length;var z=(x[1]<0)?-x[1]-1:0;if(Math.abs(l)<1){if(k+z<=C){y=A+Math.abs(l).toPrecision(k)}else{if(k<=C-1){y=A+Math.abs(l).toExponential(k-1)}else{y=A+Math.abs(l).toExponential(C-1)}}}else{var i=(k<=C)?k:C;y=A+Math.abs(l).toPrecision(i)}var G=["toString","toUpperCase"]["pP".indexOf(o)%2];return d(y,A,w,u,t,p)[G]();case"n":return"";default:return F}})};a.jqplot.sprintf.thousandsSeparator=",";a.jqplot.sprintf.decimalMark=".";a.jqplot.sprintf.regex=/%%|%(\d+\$)?([-+#0&\' ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([nAscboxXuidfegpEGP])/g;a.jqplot.getSignificantFigures=function(f){var h=String(Number(Math.abs(f)).toExponential()).split(/e|E/);var g=(h[0].indexOf(".")!=-1)?h[0].length-1:h[0].length;var c=(h[1]<0)?-h[1]-1:0;var b=parseInt(h[1],10);var d=(b+1>0)?b+1:0;var e=(g<=d)?0:g-b-1;return{significantDigits:g,digitsLeft:d,digitsRight:e,zeros:c,exponent:b}
};a.jqplot.getPrecision=function(b){return a.jqplot.getSignificantFigures(b).digitsRight}})(jQuery);(function(g){g.jqplot.ThemeEngine=function(){this.themes={};this.activeTheme=null};g.jqplot.ThemeEngine.prototype.init=function(){var r=new g.jqplot.Theme({_name:"Default"});var v,p,u;for(v in r.target){if(v=="textColor"){r.target[v]=this.target.css("color")}else{r.target[v]=this.target.css(v)}}if(this.title.show&&this.title._elem){for(v in r.title){if(v=="textColor"){r.title[v]=this.title._elem.css("color")}else{r.title[v]=this.title._elem.css(v)}}}for(v in r.grid){r.grid[v]=this.grid[v]}if(r.grid.backgroundColor==null&&this.grid.background!=null){r.grid.backgroundColor=this.grid.background}if(this.legend.show&&this.legend._elem){for(v in r.legend){if(v=="textColor"){r.legend[v]=this.legend._elem.css("color")}else{r.legend[v]=this.legend._elem.css(v)}}}var q;for(p=0;p<this.series.length;p++){q=this.series[p];if(q.renderer.constructor==g.jqplot.LineRenderer){r.series.push(new h())}else{if(q.renderer.constructor==g.jqplot.BarRenderer){r.series.push(new a())
}else{if(q.renderer.constructor==g.jqplot.PieRenderer){r.series.push(new b())}else{if(q.renderer.constructor==g.jqplot.DonutRenderer){r.series.push(new c())}else{if(q.renderer.constructor==g.jqplot.FunnelRenderer){r.series.push(new j())}else{if(q.renderer.constructor==g.jqplot.MeterGaugeRenderer){r.series.push(new m())}else{r.series.push({})}}}}}}for(v in r.series[p]){r.series[p][v]=q[v]}}var o,t;for(v in this.axes){t=this.axes[v];o=r.axes[v]=new d();o.borderColor=t.borderColor;o.borderWidth=t.borderWidth;if(t._ticks&&t._ticks[0]){for(u in o.ticks){if(t._ticks[0].hasOwnProperty(u)){o.ticks[u]=t._ticks[0][u]}else{if(t._ticks[0]._elem){o.ticks[u]=t._ticks[0]._elem.css(u)}}}}if(t._label&&t._label.show){for(u in o.label){if(t._label[u]){o.label[u]=t._label[u]}else{if(t._label._elem){if(u=="textColor"){o.label[u]=t._label._elem.css("color")}else{o.label[u]=t._label._elem.css(u)}}}}}}this.themeEngine._add(r);this.themeEngine.activeTheme=this.themeEngine.themes[r._name]};g.jqplot.ThemeEngine.prototype.get=function(o){if(!o){return this.activeTheme
}else{return this.themes[o]}};function i(p,o){return p-o}g.jqplot.ThemeEngine.prototype.getThemeNames=function(){var o=[];for(var p in this.themes){o.push(p)}return o.sort(i)};g.jqplot.ThemeEngine.prototype.getThemes=function(){var p=[];var o=[];for(var r in this.themes){p.push(r)}p.sort(i);for(var q=0;q<p.length;q++){o.push(this.themes[p[q]])}return o};g.jqplot.ThemeEngine.prototype.activate=function(B,G){var o=false;if(!G&&this.activeTheme&&this.activeTheme._name){G=this.activeTheme._name}if(!this.themes.hasOwnProperty(G)){throw new Error("No theme of that name")}else{var t=this.themes[G];this.activeTheme=t;var F,z=false,y=false;var p=["xaxis","x2axis","yaxis","y2axis"];for(C=0;C<p.length;C++){var u=p[C];if(t.axesStyles.borderColor!=null){B.axes[u].borderColor=t.axesStyles.borderColor}if(t.axesStyles.borderWidth!=null){B.axes[u].borderWidth=t.axesStyles.borderWidth}}for(var E in B.axes){var r=B.axes[E];if(r.show){var x=t.axes[E]||{};var v=t.axesStyles;var s=g.jqplot.extend(true,{},x,v);
F=(t.axesStyles.borderColor!=null)?t.axesStyles.borderColor:s.borderColor;if(s.borderColor!=null){r.borderColor=s.borderColor;o=true}F=(t.axesStyles.borderWidth!=null)?t.axesStyles.borderWidth:s.borderWidth;if(s.borderWidth!=null){r.borderWidth=s.borderWidth;o=true}if(r._ticks&&r._ticks[0]){for(var q in s.ticks){F=s.ticks[q];if(F!=null){r.tickOptions[q]=F;r._ticks=[];o=true}}}if(r._label&&r._label.show){for(var q in s.label){F=s.label[q];if(F!=null){r.labelOptions[q]=F;o=true}}}}}for(var A in t.grid){if(t.grid[A]!=null){B.grid[A]=t.grid[A]}}if(!o){B.grid.draw()}if(B.legend.show){for(A in t.legend){if(t.legend[A]!=null){B.legend[A]=t.legend[A]}}}if(B.title.show){for(A in t.title){if(t.title[A]!=null){B.title[A]=t.title[A]}}}var C;for(C=0;C<t.series.length;C++){var w={};var D=false;for(A in t.series[C]){F=(t.seriesStyles[A]!=null)?t.seriesStyles[A]:t.series[C][A];if(F!=null){w[A]=F;if(A=="color"){B.series[C].renderer.shapeRenderer.fillStyle=F;B.series[C].renderer.shapeRenderer.strokeStyle=F;
B.series[C][A]=F}else{if((A=="lineWidth")||(A=="linePattern")){B.series[C].renderer.shapeRenderer[A]=F;B.series[C][A]=F}else{if(A=="markerOptions"){l(B.series[C].markerOptions,F);l(B.series[C].markerRenderer,F)}else{B.series[C][A]=F}}}o=true}}}if(o){B.target.empty();B.draw()}for(A in t.target){if(t.target[A]!=null){B.target.css(A,t.target[A])}}}};g.jqplot.ThemeEngine.prototype._add=function(p,o){if(o){p._name=o}if(!p._name){p._name=Date.parse(new Date())}if(!this.themes.hasOwnProperty(p._name)){this.themes[p._name]=p}else{throw new Error("jqplot.ThemeEngine Error: Theme already in use")}};g.jqplot.ThemeEngine.prototype.remove=function(o){if(o=="Default"){return false}return delete this.themes[o]};g.jqplot.ThemeEngine.prototype.newTheme=function(o,q){if(typeof(o)=="object"){q=q||o;o=null}if(q&&q._name){o=q._name}else{o=o||Date.parse(new Date())}var p=this.copy(this.themes.Default._name,o);g.jqplot.extend(p,q);return p};function k(q){if(q==null||typeof(q)!="object"){return q}var o=new q.constructor();
for(var p in q){o[p]=k(q[p])}return o}g.jqplot.clone=k;function l(q,p){if(p==null||typeof(p)!="object"){return}for(var o in p){if(o=="highlightColors"){q[o]=k(p[o])}if(p[o]!=null&&typeof(p[o])=="object"){if(!q.hasOwnProperty(o)){q[o]={}}l(q[o],p[o])}else{q[o]=p[o]}}}g.jqplot.merge=l;g.jqplot.extend=function(){var t=arguments[0]||{},r=1,s=arguments.length,o=false,q;if(typeof t==="boolean"){o=t;t=arguments[1]||{};r=2}if(typeof t!=="object"&&!toString.call(t)==="[object Function]"){t={}}for(;r<s;r++){if((q=arguments[r])!=null){for(var p in q){var u=t[p],v=q[p];if(t===v){continue}if(o&&v&&typeof v==="object"&&!v.nodeType){t[p]=g.jqplot.extend(o,u||(v.length!=null?[]:{}),v)}else{if(v!==undefined){t[p]=v}}}}}return t};g.jqplot.ThemeEngine.prototype.rename=function(p,o){if(p=="Default"||o=="Default"){throw new Error("jqplot.ThemeEngine Error: Cannot rename from/to Default")}if(this.themes.hasOwnProperty(o)){throw new Error("jqplot.ThemeEngine Error: New name already in use.")}else{if(this.themes.hasOwnProperty(p)){var q=this.copy(p,o);
this.remove(p);return q}}throw new Error("jqplot.ThemeEngine Error: Old name or new name invalid")};g.jqplot.ThemeEngine.prototype.copy=function(o,q,t){if(q=="Default"){throw new Error("jqplot.ThemeEngine Error: Cannot copy over Default theme")}if(!this.themes.hasOwnProperty(o)){var p="jqplot.ThemeEngine Error: Source name invalid";throw new Error(p)}if(this.themes.hasOwnProperty(q)){var p="jqplot.ThemeEngine Error: Target name invalid";throw new Error(p)}else{var r=k(this.themes[o]);r._name=q;g.jqplot.extend(true,r,t);this._add(r);return r}};g.jqplot.Theme=function(o,p){if(typeof(o)=="object"){p=p||o;o=null}o=o||Date.parse(new Date());this._name=o;this.target={backgroundColor:null};this.legend={textColor:null,fontFamily:null,fontSize:null,border:null,background:null};this.title={textColor:null,fontFamily:null,fontSize:null,textAlign:null};this.seriesStyles={};this.series=[];this.grid={drawGridlines:null,gridLineColor:null,gridLineWidth:null,backgroundColor:null,borderColor:null,borderWidth:null,shadow:null};
this.axesStyles={label:{},ticks:{}};this.axes={};if(typeof(p)=="string"){this._name=p}else{if(typeof(p)=="object"){g.jqplot.extend(true,this,p)}}};var d=function(){this.borderColor=null;this.borderWidth=null;this.ticks=new f();this.label=new e()};var f=function(){this.show=null;this.showGridline=null;this.showLabel=null;this.showMark=null;this.size=null;this.textColor=null;this.whiteSpace=null;this.fontSize=null;this.fontFamily=null};var e=function(){this.textColor=null;this.whiteSpace=null;this.fontSize=null;this.fontFamily=null;this.fontWeight=null};var h=function(){this.color=null;this.lineWidth=null;this.linePattern=null;this.shadow=null;this.fillColor=null;this.showMarker=null;this.markerOptions=new n()};var n=function(){this.show=null;this.style=null;this.lineWidth=null;this.size=null;this.color=null;this.shadow=null};var a=function(){this.color=null;this.seriesColors=null;this.lineWidth=null;this.shadow=null;this.barPadding=null;this.barMargin=null;this.barWidth=null;this.highlightColors=null
};var b=function(){this.seriesColors=null;this.padding=null;this.sliceMargin=null;this.fill=null;this.shadow=null;this.startAngle=null;this.lineWidth=null;this.highlightColors=null};var c=function(){this.seriesColors=null;this.padding=null;this.sliceMargin=null;this.fill=null;this.shadow=null;this.startAngle=null;this.lineWidth=null;this.innerDiameter=null;this.thickness=null;this.ringMargin=null;this.highlightColors=null};var j=function(){this.color=null;this.lineWidth=null;this.shadow=null;this.padding=null;this.sectionMargin=null;this.seriesColors=null;this.highlightColors=null};var m=function(){this.padding=null;this.backgroundColor=null;this.ringColor=null;this.tickColor=null;this.ringWidth=null;this.intervalColors=null;this.intervalInnerRadius=null;this.intervalOuterRadius=null;this.hubRadius=null;this.needleThickness=null;this.needlePad=null}})(jQuery);(function(e){e.jqplot.PieRenderer=function(){e.jqplot.LineRenderer.call(this)};e.jqplot.PieRenderer.prototype=new e.jqplot.LineRenderer();
e.jqplot.PieRenderer.prototype.constructor=e.jqplot.PieRenderer;e.jqplot.PieRenderer.prototype.init=function(q,u){this.diameter=null;this.padding=20;this.sliceMargin=0;this.fill=true;this.shadowOffset=2;this.shadowAlpha=0.07;this.shadowDepth=5;this.highlightMouseOver=true;this.highlightMouseDown=false;this.highlightColors=[];this.dataLabels="percent";this.showDataLabels=false;this.dataLabelFormatString=null;this.dataLabelThreshold=3;this.dataLabelPositionFactor=0.52;this.dataLabelNudge=2;this.dataLabelCenterOn=true;this.startAngle=0;this.tickRenderer=e.jqplot.PieTickRenderer;this._drawData=true;this._type="pie";if(q.highlightMouseDown&&q.highlightMouseOver==null){q.highlightMouseOver=false}e.extend(true,this,q);if(this.sliceMargin<0){this.sliceMargin=0}this._diameter=null;this._radius=null;this._sliceAngles=[];this._highlightedPoint=null;if(this.highlightColors.length==0){for(var s=0;s<this.seriesColors.length;s++){var r=e.jqplot.getColorComponents(this.seriesColors[s]);var o=[r[0],r[1],r[2]];
var t=o[0]+o[1]+o[2];for(var p=0;p<3;p++){o[p]=(t>570)?o[p]*0.8:o[p]+0.3*(255-o[p]);o[p]=parseInt(o[p],10)}this.highlightColors.push("rgb("+o[0]+","+o[1]+","+o[2]+")")}}this.highlightColorGenerator=new e.jqplot.ColorGenerator(this.highlightColors);u.postParseOptionsHooks.addOnce(m);u.postInitHooks.addOnce(g);u.eventListenerHooks.addOnce("jqplotMouseMove",b);u.eventListenerHooks.addOnce("jqplotMouseDown",a);u.eventListenerHooks.addOnce("jqplotMouseUp",l);u.eventListenerHooks.addOnce("jqplotClick",f);u.eventListenerHooks.addOnce("jqplotRightClick",n);u.postDrawHooks.addOnce(i)};e.jqplot.PieRenderer.prototype.setGridData=function(t){var p=[];var u=[];var o=this.startAngle/180*Math.PI;var s=0;this._drawData=false;for(var r=0;r<this.data.length;r++){if(this.data[r][1]!=0){this._drawData=true}p.push(this.data[r][1]);u.push([this.data[r][0]]);if(r>0){p[r]+=p[r-1]}s+=this.data[r][1]}var q=Math.PI*2/p[p.length-1];for(var r=0;r<p.length;r++){u[r][1]=p[r]*q;u[r][2]=this.data[r][1]/s}this.gridData=u
};e.jqplot.PieRenderer.prototype.makeGridData=function(t,u){var p=[];var v=[];var s=0;var o=this.startAngle/180*Math.PI;this._drawData=false;for(var r=0;r<t.length;r++){if(this.data[r][1]!=0){this._drawData=true}p.push(t[r][1]);v.push([t[r][0]]);if(r>0){p[r]+=p[r-1]}s+=t[r][1]}var q=Math.PI*2/p[p.length-1];for(var r=0;r<p.length;r++){v[r][1]=p[r]*q;v[r][2]=t[r][1]/s}return v};function h(o){return Math.sin((o-(o-Math.PI)/8/Math.PI)/2)}function j(u,t,o,v,r){var w=0;var q=t-u;var s=Math.abs(q);var p=o;if(v==false){p+=r}if(p>0&&s>0.01&&s<6.282){w=parseFloat(p)/2/h(q)}return w}e.jqplot.PieRenderer.prototype.drawSlice=function(B,z,y,u,w){if(this._drawData){var p=this._radius;var A=this.fill;var x=this.lineWidth;var s=this.sliceMargin;if(this.fill==false){s+=this.lineWidth}B.save();B.translate(this._center[0],this._center[1]);var D=j(z,y,this.sliceMargin,this.fill,this.lineWidth);var o=D*Math.cos((z+y)/2);var C=D*Math.sin((z+y)/2);if((y-z)<=Math.PI){p-=D}else{p+=D}B.translate(o,C);if(w){for(var v=0,t=this.shadowDepth;
v<t;v++){B.save();B.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI));q(p)}for(var v=0,t=this.shadowDepth;v<t;v++){B.restore()}}else{q(p)}B.restore()}function q(r){if(y>6.282+this.startAngle){y=6.282+this.startAngle;if(z>y){z=6.281+this.startAngle}}if(z>=y){return}B.beginPath();B.fillStyle=u;B.strokeStyle=u;B.lineWidth=x;B.arc(0,0,r,z,y,false);B.lineTo(0,0);B.closePath();if(A){B.fill()}else{B.stroke()}}};e.jqplot.PieRenderer.prototype.draw=function(B,z,E,o){var W;var H=(E!=undefined)?E:{};var t=0;var s=0;var N=1;var L=new e.jqplot.ColorGenerator(this.seriesColors);if(E.legendInfo&&E.legendInfo.placement=="insideGrid"){var J=E.legendInfo;switch(J.location){case"nw":t=J.width+J.xoffset;break;case"w":t=J.width+J.xoffset;break;case"sw":t=J.width+J.xoffset;break;case"ne":t=J.width+J.xoffset;N=-1;break;case"e":t=J.width+J.xoffset;N=-1;break;case"se":t=J.width+J.xoffset;N=-1;break;case"n":s=J.height+J.yoffset;break;case"s":s=J.height+J.yoffset;
N=-1;break;default:break}}var K=(H.shadow!=undefined)?H.shadow:this.shadow;var A=(H.fill!=undefined)?H.fill:this.fill;var C=B.canvas.width;var I=B.canvas.height;var Q=C-t-2*this.padding;var X=I-s-2*this.padding;var M=Math.min(Q,X);var Y=M;this._sliceAngles=[];var v=this.sliceMargin;if(this.fill==false){v+=this.lineWidth}var q;var G=0;var R,aa,Z,ab;var D=this.startAngle/180*Math.PI;for(var W=0,V=z.length;W<V;W++){aa=(W==0)?D:z[W-1][1]+D;Z=z[W][1]+D;this._sliceAngles.push([aa,Z]);q=j(aa,Z,this.sliceMargin,this.fill,this.lineWidth);if(Math.abs(Z-aa)>Math.PI){G=Math.max(q,G)}}if(this.diameter!=null&&this.diameter>0){this._diameter=this.diameter-2*G}else{this._diameter=Y-2*G}if(this._diameter<6){e.jqplot.log("Diameter of pie too small, not rendering.");return}var S=this._radius=this._diameter/2;this._center=[(C-N*t)/2+N*t+G*Math.cos(D),(I-N*s)/2+N*s+G*Math.sin(D)];if(this.shadow){for(var W=0,V=z.length;W<V;W++){ab="rgba(0,0,0,"+this.shadowAlpha+")";this.renderer.drawSlice.call(this,B,this._sliceAngles[W][0],this._sliceAngles[W][1],ab,true)
}}for(var W=0;W<z.length;W++){this.renderer.drawSlice.call(this,B,this._sliceAngles[W][0],this._sliceAngles[W][1],L.next(),false);if(this.showDataLabels&&z[W][2]*100>=this.dataLabelThreshold){var F,U=(this._sliceAngles[W][0]+this._sliceAngles[W][1])/2,T;if(this.dataLabels=="label"){F=this.dataLabelFormatString||"%s";T=e.jqplot.sprintf(F,z[W][0])}else{if(this.dataLabels=="value"){F=this.dataLabelFormatString||"%d";T=e.jqplot.sprintf(F,this.data[W][1])}else{if(this.dataLabels=="percent"){F=this.dataLabelFormatString||"%d%%";T=e.jqplot.sprintf(F,z[W][2]*100)}else{if(this.dataLabels.constructor==Array){F=this.dataLabelFormatString||"%s";T=e.jqplot.sprintf(F,this.dataLabels[W])}}}}var p=(this._radius)*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge;var P=this._center[0]+Math.cos(U)*p+this.canvas._offsets.left;var O=this._center[1]+Math.sin(U)*p+this.canvas._offsets.top;var u=e('<div class="jqplot-pie-series jqplot-data-label" style="position:absolute;">'+T+"</div>").insertBefore(o.eventCanvas._elem);
if(this.dataLabelCenterOn){P-=u.width()/2;O-=u.height()/2}else{P-=u.width()*Math.sin(U/2);O-=u.height()/2}P=Math.round(P);O=Math.round(O);u.css({left:P,top:O})}}};e.jqplot.PieAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this)};e.jqplot.PieAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer();e.jqplot.PieAxisRenderer.prototype.constructor=e.jqplot.PieAxisRenderer;e.jqplot.PieAxisRenderer.prototype.init=function(o){this.tickRenderer=e.jqplot.PieTickRenderer;e.extend(true,this,o);this._dataBounds={min:0,max:100};this.min=0;this.max=100;this.showTicks=false;this.ticks=[];this.showMark=false;this.show=false};e.jqplot.PieLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)};e.jqplot.PieLegendRenderer.prototype=new e.jqplot.TableLegendRenderer();e.jqplot.PieLegendRenderer.prototype.constructor=e.jqplot.PieLegendRenderer;e.jqplot.PieLegendRenderer.prototype.init=function(o){this.numberRows=null;this.numberColumns=null;e.extend(true,this,o)};e.jqplot.PieLegendRenderer.prototype.draw=function(){var r=this;
if(this.show){var B=this._series;this._elem=e(document.createElement("table"));this._elem.addClass("jqplot-table-legend");var E={position:"absolute"};if(this.background){E.background=this.background}if(this.border){E.border=this.border}if(this.fontSize){E.fontSize=this.fontSize}if(this.fontFamily){E.fontFamily=this.fontFamily}if(this.textColor){E.textColor=this.textColor}if(this.marginTop!=null){E.marginTop=this.marginTop}if(this.marginBottom!=null){E.marginBottom=this.marginBottom}if(this.marginLeft!=null){E.marginLeft=this.marginLeft}if(this.marginRight!=null){E.marginRight=this.marginRight}this._elem.css(E);var I=false,A=false,o,y;var C=B[0];var p=new e.jqplot.ColorGenerator(C.seriesColors);if(C.show){var J=C.data;if(this.numberRows){o=this.numberRows;if(!this.numberColumns){y=Math.ceil(J.length/o)}else{y=this.numberColumns}}else{if(this.numberColumns){y=this.numberColumns;o=Math.ceil(J.length/this.numberColumns)}else{o=J.length;y=1}}var H,G;var q,w,v;var x,z,F;var D=0;var u,t;for(H=0;
H<o;H++){q=e(document.createElement("tr"));q.addClass("jqplot-table-legend");if(A){q.prependTo(this._elem)}else{q.appendTo(this._elem)}for(G=0;G<y;G++){if(D<J.length){x=this.labels[D]||J[D][0].toString();F=p.next();if(!A){if(H>0){I=true}else{I=false}}else{if(H==o-1){I=false}else{I=true}}z=(I)?this.rowSpacing:"0";w=e(document.createElement("td"));w.addClass("jqplot-table-legend jqplot-table-legend-swatch");w.css({textAlign:"center",paddingTop:z});u=e(document.createElement("div"));u.addClass("jqplot-table-legend-swatch-outline");t=e(document.createElement("div"));t.addClass("jqplot-table-legend-swatch");t.css({backgroundColor:F,borderColor:F});w.append(u.append(t));v=e(document.createElement("td"));v.addClass("jqplot-table-legend jqplot-table-legend-label");v.css("paddingTop",z);if(this.escapeHtml){v.text(x)}else{v.html(x)}if(A){v.prependTo(q);w.prependTo(q)}else{w.appendTo(q);v.appendTo(q)}I=true}D++}}}}return this._elem};e.jqplot.PieRenderer.prototype.handleMove=function(q,p,t,s,r){if(s){var o=[s.seriesIndex,s.pointIndex,s.data];
r.target.trigger("jqplotDataMouseOver",o);if(r.series[o[0]].highlightMouseOver&&!(o[0]==r.plugins.pieRenderer.highlightedSeriesIndex&&o[1]==r.series[o[0]]._highlightedPoint)){r.target.trigger("jqplotDataHighlight",o);d(r,o[0],o[1])}}else{if(s==null){k(r)}}};function c(s,r,p){p=p||{};p.axesDefaults=p.axesDefaults||{};p.legend=p.legend||{};p.seriesDefaults=p.seriesDefaults||{};var o=false;if(p.seriesDefaults.renderer==e.jqplot.PieRenderer){o=true}else{if(p.series){for(var q=0;q<p.series.length;q++){if(p.series[q].renderer==e.jqplot.PieRenderer){o=true}}}}if(o){p.axesDefaults.renderer=e.jqplot.PieAxisRenderer;p.legend.renderer=e.jqplot.PieLegendRenderer;p.legend.preDraw=true;p.seriesDefaults.pointLabels={show:false}}}function g(r,q,o){for(var p=0;p<this.series.length;p++){if(this.series[p].renderer.constructor==e.jqplot.PieRenderer){if(this.series[p].highlightMouseOver){this.series[p].highlightMouseDown=false}}}}function m(o){for(var p=0;p<this.series.length;p++){this.series[p].seriesColors=this.seriesColors;
this.series[p].colorGenerator=e.jqplot.colorGenerator}}function d(t,r,q){var p=t.series[r];var o=t.plugins.pieRenderer.highlightCanvas;o._ctx.clearRect(0,0,o._ctx.canvas.width,o._ctx.canvas.height);p._highlightedPoint=q;t.plugins.pieRenderer.highlightedSeriesIndex=r;p.renderer.drawSlice.call(p,o._ctx,p._sliceAngles[q][0],p._sliceAngles[q][1],p.highlightColorGenerator.get(q),false)}function k(q){var o=q.plugins.pieRenderer.highlightCanvas;o._ctx.clearRect(0,0,o._ctx.canvas.width,o._ctx.canvas.height);for(var p=0;p<q.series.length;p++){q.series[p]._highlightedPoint=null}q.plugins.pieRenderer.highlightedSeriesIndex=null;q.target.trigger("jqplotDataUnhighlight")}function b(s,r,v,u,t){if(u){var q=[u.seriesIndex,u.pointIndex,u.data];var p=jQuery.Event("jqplotDataMouseOver");p.pageX=s.pageX;p.pageY=s.pageY;t.target.trigger(p,q);if(t.series[q[0]].highlightMouseOver&&!(q[0]==t.plugins.pieRenderer.highlightedSeriesIndex&&q[1]==t.series[q[0]]._highlightedPoint)){var o=jQuery.Event("jqplotDataHighlight");
o.which=s.which;o.pageX=s.pageX;o.pageY=s.pageY;t.target.trigger(o,q);d(t,q[0],q[1])}}else{if(u==null){k(t)}}}function a(r,q,u,t,s){if(t){var p=[t.seriesIndex,t.pointIndex,t.data];if(s.series[p[0]].highlightMouseDown&&!(p[0]==s.plugins.pieRenderer.highlightedSeriesIndex&&p[1]==s.series[p[0]]._highlightedPoint)){var o=jQuery.Event("jqplotDataHighlight");o.which=r.which;o.pageX=r.pageX;o.pageY=r.pageY;s.target.trigger(o,p);d(s,p[0],p[1])}}else{if(t==null){k(s)}}}function l(q,p,t,s,r){var o=r.plugins.pieRenderer.highlightedSeriesIndex;if(o!=null&&r.series[o].highlightMouseDown){k(r)}}function f(r,q,u,t,s){if(t){var p=[t.seriesIndex,t.pointIndex,t.data];var o=jQuery.Event("jqplotDataClick");o.which=r.which;o.pageX=r.pageX;o.pageY=r.pageY;s.target.trigger(o,p)}}function n(s,r,v,u,t){if(u){var q=[u.seriesIndex,u.pointIndex,u.data];var o=t.plugins.pieRenderer.highlightedSeriesIndex;if(o!=null&&t.series[o].highlightMouseDown){k(t)}var p=jQuery.Event("jqplotDataRightClick");p.which=s.which;p.pageX=s.pageX;
p.pageY=s.pageY;t.target.trigger(p,q)}}function i(){if(this.plugins.pieRenderer&&this.plugins.pieRenderer.highlightCanvas){this.plugins.pieRenderer.highlightCanvas.resetCanvas();this.plugins.pieRenderer.highlightCanvas=null}this.plugins.pieRenderer={highlightedSeriesIndex:null};this.plugins.pieRenderer.highlightCanvas=new e.jqplot.GenericCanvas();var p=e(this.targetId+" .jqplot-data-label");if(p.length){e(p[0]).before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this))}else{this.eventCanvas._elem.before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this))}var o=this.plugins.pieRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(q){k(q.data.plot)})}e.jqplot.preInitHooks.push(c);e.jqplot.PieTickRenderer=function(){e.jqplot.AxisTickRenderer.call(this)};e.jqplot.PieTickRenderer.prototype=new e.jqplot.AxisTickRenderer();
e.jqplot.PieTickRenderer.prototype.constructor=e.jqplot.PieTickRenderer})(jQuery);(function(d){d.jqplot.BarRenderer=function(){d.jqplot.LineRenderer.call(this)};d.jqplot.BarRenderer.prototype=new d.jqplot.LineRenderer();d.jqplot.BarRenderer.prototype.constructor=d.jqplot.BarRenderer;d.jqplot.BarRenderer.prototype.init=function(o,q){this.barPadding=8;this.barMargin=10;this.barDirection="vertical";this.barWidth=null;this.shadowOffset=2;this.shadowDepth=5;this.shadowAlpha=0.08;this.waterfall=false;this.groups=1;this.varyBarColor=false;this.highlightMouseOver=true;this.highlightMouseDown=false;this.highlightColors=[];this.transposedData=true;this.renderer.animation={show:false,direction:"down",speed:3000,_supported:true};this._type="bar";if(o.highlightMouseDown&&o.highlightMouseOver==null){o.highlightMouseOver=false}d.extend(true,this,o);d.extend(true,this.renderer,o);this.fill=true;if(this.barDirection==="horizontal"&&this.rendererOptions.animation&&this.rendererOptions.animation.direction==null){this.renderer.animation.direction="left"
}if(this.waterfall){this.fillToZero=false;this.disableStack=true}if(this.barDirection=="vertical"){this._primaryAxis="_xaxis";this._stackAxis="y";this.fillAxis="y"}else{this._primaryAxis="_yaxis";this._stackAxis="x";this.fillAxis="x"}this._highlightedPoint=null;this._plotSeriesInfo=null;this._dataColors=[];this._barPoints=[];var p={lineJoin:"miter",lineCap:"round",fill:true,isarc:false,strokeStyle:this.color,fillStyle:this.color,closePath:this.fill};this.renderer.shapeRenderer.init(p);var n={lineJoin:"miter",lineCap:"round",fill:true,isarc:false,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,closePath:this.fill};this.renderer.shadowRenderer.init(n);q.postInitHooks.addOnce(h);q.postDrawHooks.addOnce(j);q.eventListenerHooks.addOnce("jqplotMouseMove",b);q.eventListenerHooks.addOnce("jqplotMouseDown",a);q.eventListenerHooks.addOnce("jqplotMouseUp",l);q.eventListenerHooks.addOnce("jqplotClick",e);q.eventListenerHooks.addOnce("jqplotRightClick",m)
};function g(t,p,o,w){if(this.rendererOptions.barDirection=="horizontal"){this._stackAxis="x";this._primaryAxis="_yaxis"}if(this.rendererOptions.waterfall==true){this._data=d.extend(true,[],this.data);var s=0;var u=(!this.rendererOptions.barDirection||this.rendererOptions.barDirection==="vertical"||this.transposedData===false)?1:0;for(var q=0;q<this.data.length;q++){s+=this.data[q][u];if(q>0){this.data[q][u]+=this.data[q-1][u]}}this.data[this.data.length]=(u==1)?[this.data.length+1,s]:[s,this.data.length+1];this._data[this._data.length]=(u==1)?[this._data.length+1,s]:[s,this._data.length+1]}if(this.rendererOptions.groups>1){this.breakOnNull=true;var n=this.data.length;var v=parseInt(n/this.rendererOptions.groups,10);var r=0;for(var q=v;q<n;q+=v){this.data.splice(q+r,0,[null,null]);this._plotData.splice(q+r,0,[null,null]);this._stackData.splice(q+r,0,[null,null]);r++}for(q=0;q<this.data.length;q++){if(this._primaryAxis=="_xaxis"){this.data[q][0]=q+1;this._plotData[q][0]=q+1;this._stackData[q][0]=q+1
}else{this.data[q][1]=q+1;this._plotData[q][1]=q+1;this._stackData[q][1]=q+1}}}}d.jqplot.preSeriesInitHooks.push(g);d.jqplot.BarRenderer.prototype.calcSeriesNumbers=function(){var r=0;var t=0;var q=this[this._primaryAxis];var p,o,u;for(var n=0;n<q._series.length;n++){o=q._series[n];if(o===this){u=n}if(o.renderer.constructor==d.jqplot.BarRenderer){r+=o.data.length;t+=1}}return[r,t,u]};d.jqplot.BarRenderer.prototype.setBarWidth=function(){var q;var n=0;var o=0;var t=this[this._primaryAxis];var x,r,v;var w=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this);n=w[0];o=w[1];var u=t.numberTicks;var p=(u-1)/2;if(t.name=="xaxis"||t.name=="x2axis"){if(this._stack){this.barWidth=(t._offsets.max-t._offsets.min)/n*o-this.barMargin}else{this.barWidth=((t._offsets.max-t._offsets.min)/p-this.barPadding*(o-1)-this.barMargin*2)/o}}else{if(this._stack){this.barWidth=(t._offsets.min-t._offsets.max)/n*o-this.barMargin}else{this.barWidth=((t._offsets.min-t._offsets.max)/p-this.barPadding*(o-1)-this.barMargin*2)/o
}}return[n,o]};function f(o){var q=[];for(var s=0;s<o.length;s++){var r=d.jqplot.getColorComponents(o[s]);var n=[r[0],r[1],r[2]];var t=n[0]+n[1]+n[2];for(var p=0;p<3;p++){n[p]=(t>570)?n[p]*0.8:n[p]+0.3*(255-n[p]);n[p]=parseInt(n[p],10)}q.push("rgb("+n[0]+","+n[1]+","+n[2]+")")}return q}function i(v,u,s,t,o){var q=v,w=v-1,n,p,r=(o==="x")?0:1;if(q>0){p=t.series[w]._plotData[u][r];if((s*p)<0){n=i(w,u,s,t,o)}else{n=t.series[w].gridData[u][r]}}else{n=(r===0)?t.series[q]._xaxis.series_u2p(0):t.series[q]._yaxis.series_u2p(0)}return n}d.jqplot.BarRenderer.prototype.draw=function(E,L,q,G){var I;var A=d.extend({},q);var w=(A.shadow!=undefined)?A.shadow:this.shadow;var O=(A.showLine!=undefined)?A.showLine:this.showLine;var F=(A.fill!=undefined)?A.fill:this.fill;var p=this.xaxis;var J=this.yaxis;var y=this._xaxis.series_u2p;var K=this._yaxis.series_u2p;var D,C;this._dataColors=[];this._barPoints=[];if(this.barWidth==null){this.renderer.setBarWidth.call(this)}var N=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this);
var x=N[0];var v=N[1];var s=N[2];var H=[];if(this._stack){this._barNudge=0}else{this._barNudge=(-Math.abs(v/2-0.5)+s)*(this.barWidth+this.barPadding)}if(O){var u=new d.jqplot.ColorGenerator(this.negativeSeriesColors);var B=new d.jqplot.ColorGenerator(this.seriesColors);var M=u.get(this.index);if(!this.useNegativeColors){M=A.fillStyle}var t=A.fillStyle;var r;var P;var o;if(this.barDirection=="vertical"){for(var I=0;I<L.length;I++){if(!this._stack&&this.data[I][1]==null){continue}H=[];r=L[I][0]+this._barNudge;if(this._stack&&this._prevGridData.length){o=i(this.index,I,this._plotData[I][1],G,"y")}else{if(this.fillToZero){o=this._yaxis.series_u2p(0)}else{if(this.waterfall&&I>0&&I<this.gridData.length-1){o=this.gridData[I-1][1]}else{if(this.waterfall&&I==0&&I<this.gridData.length-1){if(this._yaxis.min<=0&&this._yaxis.max>=0){o=this._yaxis.series_u2p(0)}else{if(this._yaxis.min>0){o=E.canvas.height}else{o=0}}}else{if(this.waterfall&&I==this.gridData.length-1){if(this._yaxis.min<=0&&this._yaxis.max>=0){o=this._yaxis.series_u2p(0)
}else{if(this._yaxis.min>0){o=E.canvas.height}else{o=0}}}else{o=E.canvas.height}}}}}if((this.fillToZero&&this._plotData[I][1]<0)||(this.waterfall&&this._data[I][1]<0)){if(this.varyBarColor&&!this._stack){if(this.useNegativeColors){A.fillStyle=u.next()}else{A.fillStyle=B.next()}}else{A.fillStyle=M}}else{if(this.varyBarColor&&!this._stack){A.fillStyle=B.next()}else{A.fillStyle=t}}if(!this.fillToZero||this._plotData[I][1]>=0){H.push([r-this.barWidth/2,o]);H.push([r-this.barWidth/2,L[I][1]]);H.push([r+this.barWidth/2,L[I][1]]);H.push([r+this.barWidth/2,o])}else{H.push([r-this.barWidth/2,L[I][1]]);H.push([r-this.barWidth/2,o]);H.push([r+this.barWidth/2,o]);H.push([r+this.barWidth/2,L[I][1]])}this._barPoints.push(H);if(w&&!this._stack){var z=d.extend(true,{},A);delete z.fillStyle;this.renderer.shadowRenderer.draw(E,H,z)}var n=A.fillStyle||this.color;this._dataColors.push(n);this.renderer.shapeRenderer.draw(E,H,A)}}else{if(this.barDirection=="horizontal"){for(var I=0;I<L.length;I++){if(!this._stack&&this.data[I][0]==null){continue
}H=[];r=L[I][1]-this._barNudge;P;if(this._stack&&this._prevGridData.length){P=i(this.index,I,this._plotData[I][0],G,"x")}else{if(this.fillToZero){P=this._xaxis.series_u2p(0)}else{if(this.waterfall&&I>0&&I<this.gridData.length-1){P=this.gridData[I-1][0]}else{if(this.waterfall&&I==0&&I<this.gridData.length-1){if(this._xaxis.min<=0&&this._xaxis.max>=0){P=this._xaxis.series_u2p(0)}else{if(this._xaxis.min>0){P=0}else{P=0}}}else{if(this.waterfall&&I==this.gridData.length-1){if(this._xaxis.min<=0&&this._xaxis.max>=0){P=this._xaxis.series_u2p(0)}else{if(this._xaxis.min>0){P=0}else{P=E.canvas.width}}}else{P=0}}}}}if((this.fillToZero&&this._plotData[I][1]<0)||(this.waterfall&&this._data[I][1]<0)){if(this.varyBarColor&&!this._stack){if(this.useNegativeColors){A.fillStyle=u.next()}else{A.fillStyle=B.next()}}}else{if(this.varyBarColor&&!this._stack){A.fillStyle=B.next()}else{A.fillStyle=t}}if(!this.fillToZero||this._plotData[I][0]>=0){H.push([P,r+this.barWidth/2]);H.push([P,r-this.barWidth/2]);H.push([L[I][0],r-this.barWidth/2]);
H.push([L[I][0],r+this.barWidth/2])}else{H.push([L[I][0],r+this.barWidth/2]);H.push([L[I][0],r-this.barWidth/2]);H.push([P,r-this.barWidth/2]);H.push([P,r+this.barWidth/2])}this._barPoints.push(H);if(w&&!this._stack){var z=d.extend(true,{},A);delete z.fillStyle;this.renderer.shadowRenderer.draw(E,H,z)}var n=A.fillStyle||this.color;this._dataColors.push(n);this.renderer.shapeRenderer.draw(E,H,A)}}}}if(this.highlightColors.length==0){this.highlightColors=d.jqplot.computeHighlightColors(this._dataColors)}else{if(typeof(this.highlightColors)=="string"){var N=this.highlightColors;this.highlightColors=[];for(var I=0;I<this._dataColors.length;I++){this.highlightColors.push(N)}}}};d.jqplot.BarRenderer.prototype.drawShadow=function(z,G,p,B){var D;var w=(p!=undefined)?p:{};var t=(w.shadow!=undefined)?w.shadow:this.shadow;var I=(w.showLine!=undefined)?w.showLine:this.showLine;var A=(w.fill!=undefined)?w.fill:this.fill;var o=this.xaxis;var E=this.yaxis;var v=this._xaxis.series_u2p;var F=this._yaxis.series_u2p;
var y,C,x,u,s,r;if(this._stack&&this.shadow){if(this.barWidth==null){this.renderer.setBarWidth.call(this)}var H=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this);u=H[0];s=H[1];r=H[2];if(this._stack){this._barNudge=0}else{this._barNudge=(-Math.abs(s/2-0.5)+r)*(this.barWidth+this.barPadding)}if(I){if(this.barDirection=="vertical"){for(var D=0;D<G.length;D++){if(this.data[D][1]==null){continue}C=[];var q=G[D][0]+this._barNudge;var n;if(this._stack&&this._prevGridData.length){n=i(this.index,D,this._plotData[D][1],B,"y")}else{if(this.fillToZero){n=this._yaxis.series_u2p(0)}else{n=z.canvas.height}}C.push([q-this.barWidth/2,n]);C.push([q-this.barWidth/2,G[D][1]]);C.push([q+this.barWidth/2,G[D][1]]);C.push([q+this.barWidth/2,n]);this.renderer.shadowRenderer.draw(z,C,w)}}else{if(this.barDirection=="horizontal"){for(var D=0;D<G.length;D++){if(this.data[D][0]==null){continue}C=[];var q=G[D][1]-this._barNudge;var J;if(this._stack&&this._prevGridData.length){J=i(this.index,D,this._plotData[D][0],B,"x")
}else{if(this.fillToZero){J=this._xaxis.series_u2p(0)}else{J=0}}C.push([J,q+this.barWidth/2]);C.push([G[D][0],q+this.barWidth/2]);C.push([G[D][0],q-this.barWidth/2]);C.push([J,q-this.barWidth/2]);this.renderer.shadowRenderer.draw(z,C,w)}}}}}};function h(q,p,n){for(var o=0;o<this.series.length;o++){if(this.series[o].renderer.constructor==d.jqplot.BarRenderer){if(this.series[o].highlightMouseOver){this.series[o].highlightMouseDown=false}}}}function j(){if(this.plugins.barRenderer&&this.plugins.barRenderer.highlightCanvas){this.plugins.barRenderer.highlightCanvas.resetCanvas();this.plugins.barRenderer.highlightCanvas=null}this.plugins.barRenderer={highlightedSeriesIndex:null};this.plugins.barRenderer.highlightCanvas=new d.jqplot.GenericCanvas();this.eventCanvas._elem.before(this.plugins.barRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-barRenderer-highlight-canvas",this._plotDimensions,this));this.plugins.barRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(n){k(n.data.plot)
})}function c(u,t,q,p){var o=u.series[t];var n=u.plugins.barRenderer.highlightCanvas;n._ctx.clearRect(0,0,n._ctx.canvas.width,n._ctx.canvas.height);o._highlightedPoint=q;u.plugins.barRenderer.highlightedSeriesIndex=t;var r={fillStyle:o.highlightColors[q]};o.renderer.shapeRenderer.draw(n._ctx,p,r);n=null}function k(p){var n=p.plugins.barRenderer.highlightCanvas;n._ctx.clearRect(0,0,n._ctx.canvas.width,n._ctx.canvas.height);for(var o=0;o<p.series.length;o++){p.series[o]._highlightedPoint=null}p.plugins.barRenderer.highlightedSeriesIndex=null;p.target.trigger("jqplotDataUnhighlight");n=null}function b(r,q,u,t,s){if(t){var p=[t.seriesIndex,t.pointIndex,t.data];var o=jQuery.Event("jqplotDataMouseOver");o.pageX=r.pageX;o.pageY=r.pageY;s.target.trigger(o,p);if(s.series[p[0]].highlightMouseOver&&!(p[0]==s.plugins.barRenderer.highlightedSeriesIndex&&p[1]==s.series[p[0]]._highlightedPoint)){var n=jQuery.Event("jqplotDataHighlight");n.which=r.which;n.pageX=r.pageX;n.pageY=r.pageY;s.target.trigger(n,p);
c(s,t.seriesIndex,t.pointIndex,t.points)}}else{if(t==null){k(s)}}}function a(q,p,t,s,r){if(s){var o=[s.seriesIndex,s.pointIndex,s.data];if(r.series[o[0]].highlightMouseDown&&!(o[0]==r.plugins.barRenderer.highlightedSeriesIndex&&o[1]==r.series[o[0]]._highlightedPoint)){var n=jQuery.Event("jqplotDataHighlight");n.which=q.which;n.pageX=q.pageX;n.pageY=q.pageY;r.target.trigger(n,o);c(r,s.seriesIndex,s.pointIndex,s.points)}}else{if(s==null){k(r)}}}function l(p,o,s,r,q){var n=q.plugins.barRenderer.highlightedSeriesIndex;if(n!=null&&q.series[n].highlightMouseDown){k(q)}}function e(q,p,t,s,r){if(s){var o=[s.seriesIndex,s.pointIndex,s.data];var n=jQuery.Event("jqplotDataClick");n.which=q.which;n.pageX=q.pageX;n.pageY=q.pageY;r.target.trigger(n,o)}}function m(r,q,u,t,s){if(t){var p=[t.seriesIndex,t.pointIndex,t.data];var n=s.plugins.barRenderer.highlightedSeriesIndex;if(n!=null&&s.series[n].highlightMouseDown){k(s)}var o=jQuery.Event("jqplotDataRightClick");o.which=r.which;o.pageX=r.pageX;o.pageY=r.pageY;
s.target.trigger(o,p)}}})(jQuery);(function(a){a.jqplot.CategoryAxisRenderer=function(b){a.jqplot.LinearAxisRenderer.call(this);this.sortMergedLabels=false};a.jqplot.CategoryAxisRenderer.prototype=new a.jqplot.LinearAxisRenderer();a.jqplot.CategoryAxisRenderer.prototype.constructor=a.jqplot.CategoryAxisRenderer;a.jqplot.CategoryAxisRenderer.prototype.init=function(e){this.groups=1;this.groupLabels=[];this._groupLabels=[];this._grouped=false;this._barsPerGroup=null;this.reverse=false;a.extend(true,this,{tickOptions:{formatString:"%d"}},e);var b=this._dataBounds;for(var f=0;f<this._series.length;f++){var g=this._series[f];if(g.groups){this.groups=g.groups}var h=g.data;for(var c=0;c<h.length;c++){if(this.name=="xaxis"||this.name=="x2axis"){if(h[c][0]<b.min||b.min==null){b.min=h[c][0]}if(h[c][0]>b.max||b.max==null){b.max=h[c][0]}}else{if(h[c][1]<b.min||b.min==null){b.min=h[c][1]}if(h[c][1]>b.max||b.max==null){b.max=h[c][1]}}}}if(this.groupLabels.length){this.groups=this.groupLabels.length}};
a.jqplot.CategoryAxisRenderer.prototype.createTicks=function(){var D=this._ticks;var z=this.ticks;var F=this.name;var C=this._dataBounds;var v,A;var q,w;var d,c;var b,x;if(z.length){if(this.groups>1&&!this._grouped){var r=z.length;var p=parseInt(r/this.groups,10);var e=0;for(var x=p;x<r;x+=p){z.splice(x+e,0," ");e++}this._grouped=true}this.min=0.5;this.max=z.length+0.5;var m=this.max-this.min;this.numberTicks=2*z.length+1;for(x=0;x<z.length;x++){b=this.min+2*x*m/(this.numberTicks-1);var h=new this.tickRenderer(this.tickOptions);h.showLabel=false;h.setTick(b,this.name);this._ticks.push(h);var h=new this.tickRenderer(this.tickOptions);h.label=z[x];h.showMark=false;h.showGridline=false;h.setTick(b+0.5,this.name);this._ticks.push(h)}var h=new this.tickRenderer(this.tickOptions);h.showLabel=false;h.setTick(b+1,this.name);this._ticks.push(h)}else{if(F=="xaxis"||F=="x2axis"){v=this._plotDimensions.width}else{v=this._plotDimensions.height}if(this.min!=null&&this.max!=null&&this.numberTicks!=null){this.tickInterval=null
}if(this.min!=null&&this.max!=null&&this.tickInterval!=null){if(parseInt((this.max-this.min)/this.tickInterval,10)!=(this.max-this.min)/this.tickInterval){this.tickInterval=null}}var y=[];var B=0;var q=0.5;var w,E;var f=false;for(var x=0;x<this._series.length;x++){var k=this._series[x];for(var u=0;u<k.data.length;u++){if(this.name=="xaxis"||this.name=="x2axis"){E=k.data[u][0]}else{E=k.data[u][1]}if(a.inArray(E,y)==-1){f=true;B+=1;y.push(E)}}}if(f&&this.sortMergedLabels){y.sort(function(j,i){return j-i})}this.ticks=y;for(var x=0;x<this._series.length;x++){var k=this._series[x];for(var u=0;u<k.data.length;u++){if(this.name=="xaxis"||this.name=="x2axis"){E=k.data[u][0]}else{E=k.data[u][1]}var n=a.inArray(E,y)+1;if(this.name=="xaxis"||this.name=="x2axis"){k.data[u][0]=n}else{k.data[u][1]=n}}}if(this.groups>1&&!this._grouped){var r=y.length;var p=parseInt(r/this.groups,10);var e=0;for(var x=p;x<r;x+=p+1){y[x]=" "}this._grouped=true}w=B+0.5;if(this.numberTicks==null){this.numberTicks=2*B+1}var m=w-q;
this.min=q;this.max=w;var o=0;var g=parseInt(3+v/10,10);var p=parseInt(B/g,10);if(this.tickInterval==null){this.tickInterval=m/(this.numberTicks-1)}for(var x=0;x<this.numberTicks;x++){b=this.min+x*this.tickInterval;var h=new this.tickRenderer(this.tickOptions);if(x/2==parseInt(x/2,10)){h.showLabel=false;h.showMark=true}else{if(p>0&&o<p){h.showLabel=false;o+=1}else{h.showLabel=true;o=0}h.label=h.formatter(h.formatString,y[(x-1)/2]);h.showMark=false;h.showGridline=false}h.setTick(b,this.name);this._ticks.push(h)}}};a.jqplot.CategoryAxisRenderer.prototype.draw=function(b,j){if(this.show){this.renderer.createTicks.call(this);var h=0;var c;if(this._elem){this._elem.emptyForce()}this._elem=this._elem||a('<div class="jqplot-axis jqplot-'+this.name+'" style="position:absolute;"></div>');if(this.name=="xaxis"||this.name=="x2axis"){this._elem.width(this._plotDimensions.width)}else{this._elem.height(this._plotDimensions.height)}this.labelOptions.axis=this.name;this._label=new this.labelRenderer(this.labelOptions);
if(this._label.show){var g=this._label.draw(b,j);g.appendTo(this._elem)}var f=this._ticks;for(var e=0;e<f.length;e++){var d=f[e];if(d.showLabel&&(!d.isMinorTick||this.showMinorTicks)){var g=d.draw(b,j);g.appendTo(this._elem)}}this._groupLabels=[];for(var e=0;e<this.groupLabels.length;e++){var g=a('<div style="position:absolute;" class="jqplot-'+this.name+'-groupLabel"></div>');g.html(this.groupLabels[e]);this._groupLabels.push(g);g.appendTo(this._elem)}}return this._elem};a.jqplot.CategoryAxisRenderer.prototype.set=function(){var e=0;var m;var k=0;var f=0;var d=(this._label==null)?false:this._label.show;if(this.show){var n=this._ticks;for(var c=0;c<n.length;c++){var g=n[c];if(g.showLabel&&(!g.isMinorTick||this.showMinorTicks)){if(this.name=="xaxis"||this.name=="x2axis"){m=g._elem.outerHeight(true)}else{m=g._elem.outerWidth(true)}if(m>e){e=m}}}var j=0;for(var c=0;c<this._groupLabels.length;c++){var b=this._groupLabels[c];if(this.name=="xaxis"||this.name=="x2axis"){m=b.outerHeight(true)}else{m=b.outerWidth(true)
}if(m>j){j=m}}if(d){k=this._label._elem.outerWidth(true);f=this._label._elem.outerHeight(true)}if(this.name=="xaxis"){e+=j+f;this._elem.css({height:e+"px",left:"0px",bottom:"0px"})}else{if(this.name=="x2axis"){e+=j+f;this._elem.css({height:e+"px",left:"0px",top:"0px"})}else{if(this.name=="yaxis"){e+=j+k;this._elem.css({width:e+"px",left:"0px",top:"0px"});if(d&&this._label.constructor==a.jqplot.AxisLabelRenderer){this._label._elem.css("width",k+"px")}}else{e+=j+k;this._elem.css({width:e+"px",right:"0px",top:"0px"});if(d&&this._label.constructor==a.jqplot.AxisLabelRenderer){this._label._elem.css("width",k+"px")}}}}}};a.jqplot.CategoryAxisRenderer.prototype.pack=function(e,c){var C=this._ticks;var v=this.max;var s=this.min;var n=c.max;var l=c.min;var q=(this._label==null)?false:this._label.show;var x;for(var r in e){this._elem.css(r,e[r])}this._offsets=c;var g=n-l;var k=v-s;if(!this.reverse){this.u2p=function(h){return(h-s)*g/k+l};this.p2u=function(h){return(h-l)*k/g+s};if(this.name=="xaxis"||this.name=="x2axis"){this.series_u2p=function(h){return(h-s)*g/k
};this.series_p2u=function(h){return h*k/g+s}}else{this.series_u2p=function(h){return(h-v)*g/k};this.series_p2u=function(h){return h*k/g+v}}}else{this.u2p=function(h){return l+(v-h)*g/k};this.p2u=function(h){return s+(h-l)*k/g};if(this.name=="xaxis"||this.name=="x2axis"){this.series_u2p=function(h){return(v-h)*g/k};this.series_p2u=function(h){return h*k/g+v}}else{this.series_u2p=function(h){return(s-h)*g/k};this.series_p2u=function(h){return h*k/g+s}}}if(this.show){if(this.name=="xaxis"||this.name=="x2axis"){for(x=0;x<C.length;x++){var o=C[x];if(o.show&&o.showLabel){var b;if(o.constructor==a.jqplot.CanvasAxisTickRenderer&&o.angle){var A=(this.name=="xaxis")?1:-1;switch(o.labelPosition){case"auto":if(A*o.angle<0){b=-o.getWidth()+o._textRenderer.height*Math.sin(-o._textRenderer.angle)/2}else{b=-o._textRenderer.height*Math.sin(o._textRenderer.angle)/2}break;case"end":b=-o.getWidth()+o._textRenderer.height*Math.sin(-o._textRenderer.angle)/2;break;case"start":b=-o._textRenderer.height*Math.sin(o._textRenderer.angle)/2;
break;case"middle":b=-o.getWidth()/2+o._textRenderer.height*Math.sin(-o._textRenderer.angle)/2;break;default:b=-o.getWidth()/2+o._textRenderer.height*Math.sin(-o._textRenderer.angle)/2;break}}else{b=-o.getWidth()/2}var D=this.u2p(o.value)+b+"px";o._elem.css("left",D);o.pack()}}var z=["bottom",0];if(q){var m=this._label._elem.outerWidth(true);this._label._elem.css("left",l+g/2-m/2+"px");if(this.name=="xaxis"){this._label._elem.css("bottom","0px");z=["bottom",this._label._elem.outerHeight(true)]}else{this._label._elem.css("top","0px");z=["top",this._label._elem.outerHeight(true)]}this._label.pack()}var d=parseInt(this._ticks.length/this.groups,10);for(x=0;x<this._groupLabels.length;x++){var B=0;var f=0;for(var u=x*d;u<=(x+1)*d;u++){if(this._ticks[u]._elem&&this._ticks[u].label!=" "){var o=this._ticks[u]._elem;var r=o.position();B+=r.left+o.outerWidth(true)/2;f++}}B=B/f;this._groupLabels[x].css({left:(B-this._groupLabels[x].outerWidth(true)/2)});this._groupLabels[x].css(z[0],z[1])}}else{for(x=0;
x<C.length;x++){var o=C[x];if(o.show&&o.showLabel){var b;if(o.constructor==a.jqplot.CanvasAxisTickRenderer&&o.angle){var A=(this.name=="yaxis")?1:-1;switch(o.labelPosition){case"auto":case"end":if(A*o.angle<0){b=-o._textRenderer.height*Math.cos(-o._textRenderer.angle)/2}else{b=-o.getHeight()+o._textRenderer.height*Math.cos(o._textRenderer.angle)/2}break;case"start":if(o.angle>0){b=-o._textRenderer.height*Math.cos(-o._textRenderer.angle)/2}else{b=-o.getHeight()+o._textRenderer.height*Math.cos(o._textRenderer.angle)/2}break;case"middle":b=-o.getHeight()/2;break;default:b=-o.getHeight()/2;break}}else{b=-o.getHeight()/2}var D=this.u2p(o.value)+b+"px";o._elem.css("top",D);o.pack()}}var z=["left",0];if(q){var y=this._label._elem.outerHeight(true);this._label._elem.css("top",n-g/2-y/2+"px");if(this.name=="yaxis"){this._label._elem.css("left","0px");z=["left",this._label._elem.outerWidth(true)]}else{this._label._elem.css("right","0px");z=["right",this._label._elem.outerWidth(true)]}this._label.pack()
}var d=parseInt(this._ticks.length/this.groups,10);for(x=0;x<this._groupLabels.length;x++){var B=0;var f=0;for(var u=x*d;u<=(x+1)*d;u++){if(this._ticks[u]._elem&&this._ticks[u].label!=" "){var o=this._ticks[u]._elem;var r=o.position();B+=r.top+o.outerHeight()/2;f++}}B=B/f;this._groupLabels[x].css({top:B-this._groupLabels[x].outerHeight()/2});this._groupLabels[x].css(z[0],z[1])}}}}})(jQuery);(function(a){a.jqplot.CanvasTextRenderer=function(b){this.fontStyle="normal";this.fontVariant="normal";this.fontWeight="normal";this.fontSize="10px";this.fontFamily="sans-serif";this.fontStretch=1;this.fillStyle="#666666";this.angle=0;this.textAlign="start";this.textBaseline="alphabetic";this.text;this.width;this.height;this.pt2px=1.28;a.extend(true,this,b);this.normalizedFontSize=this.normalizeFontSize(this.fontSize);this.setHeight()};a.jqplot.CanvasTextRenderer.prototype.init=function(b){a.extend(true,this,b);this.normalizedFontSize=this.normalizeFontSize(this.fontSize);this.setHeight()};a.jqplot.CanvasTextRenderer.prototype.normalizeFontSize=function(b){b=String(b);
var c=parseFloat(b);if(b.indexOf("px")>-1){return c/this.pt2px}else{if(b.indexOf("pt")>-1){return c}else{if(b.indexOf("em")>-1){return c*12}else{if(b.indexOf("%")>-1){return c*12/100}else{return c/this.pt2px}}}}};a.jqplot.CanvasTextRenderer.prototype.fontWeight2Float=function(b){if(Number(b)){return b/400}else{switch(b){case"normal":return 1;break;case"bold":return 1.75;break;case"bolder":return 2.25;break;case"lighter":return 0.75;break;default:return 1;break}}};a.jqplot.CanvasTextRenderer.prototype.getText=function(){return this.text};a.jqplot.CanvasTextRenderer.prototype.setText=function(c,b){this.text=c;this.setWidth(b);return this};a.jqplot.CanvasTextRenderer.prototype.getWidth=function(b){return this.width};a.jqplot.CanvasTextRenderer.prototype.setWidth=function(c,b){if(!b){this.width=this.measure(c,this.text)}else{this.width=b}return this};a.jqplot.CanvasTextRenderer.prototype.getHeight=function(b){return this.height};a.jqplot.CanvasTextRenderer.prototype.setHeight=function(b){if(!b){this.height=this.normalizedFontSize*this.pt2px
}else{this.height=b}return this};a.jqplot.CanvasTextRenderer.prototype.letter=function(b){return this.letters[b]};a.jqplot.CanvasTextRenderer.prototype.ascent=function(){return this.normalizedFontSize};a.jqplot.CanvasTextRenderer.prototype.descent=function(){return 7*this.normalizedFontSize/25};a.jqplot.CanvasTextRenderer.prototype.measure=function(d,g){var f=0;var b=g.length;for(var e=0;e<b;e++){var h=this.letter(g.charAt(e));if(h){f+=h.width*this.normalizedFontSize/25*this.fontStretch}}return f};a.jqplot.CanvasTextRenderer.prototype.draw=function(s,n){var r=0;var o=this.height*0.72;var p=0;var l=n.length;var k=this.normalizedFontSize/25;s.save();var h,f;if((-Math.PI/2<=this.angle&&this.angle<=0)||(Math.PI*3/2<=this.angle&&this.angle<=Math.PI*2)){h=0;f=-Math.sin(this.angle)*this.width}else{if((0<this.angle&&this.angle<=Math.PI/2)||(-Math.PI*2<=this.angle&&this.angle<=-Math.PI*3/2)){h=Math.sin(this.angle)*this.height;f=0}else{if((-Math.PI<this.angle&&this.angle<-Math.PI/2)||(Math.PI<=this.angle&&this.angle<=Math.PI*3/2)){h=-Math.cos(this.angle)*this.width;
f=-Math.sin(this.angle)*this.width-Math.cos(this.angle)*this.height}else{if((-Math.PI*3/2<this.angle&&this.angle<Math.PI)||(Math.PI/2<this.angle&&this.angle<Math.PI)){h=Math.sin(this.angle)*this.height-Math.cos(this.angle)*this.width;f=-Math.cos(this.angle)*this.height}}}}s.strokeStyle=this.fillStyle;s.fillStyle=this.fillStyle;s.translate(h,f);s.rotate(this.angle);s.lineCap="round";var t=(this.normalizedFontSize>30)?2:2+(30-this.normalizedFontSize)/20;s.lineWidth=t*k*this.fontWeight2Float(this.fontWeight);for(var g=0;g<l;g++){var m=this.letter(n.charAt(g));if(!m){continue}s.beginPath();var e=1;var b=0;for(var d=0;d<m.points.length;d++){var q=m.points[d];if(q[0]==-1&&q[1]==-1){e=1;continue}if(e){s.moveTo(r+q[0]*k*this.fontStretch,o-q[1]*k);e=false}else{s.lineTo(r+q[0]*k*this.fontStretch,o-q[1]*k)}}s.stroke();r+=m.width*k*this.fontStretch}s.restore();return p};a.jqplot.CanvasTextRenderer.prototype.letters={" ":{width:16,points:[]},"!":{width:10,points:[[5,21],[5,7],[-1,-1],[5,2],[4,1],[5,0],[6,1],[5,2]]},'"':{width:16,points:[[4,21],[4,14],[-1,-1],[12,21],[12,14]]},"#":{width:21,points:[[11,25],[4,-7],[-1,-1],[17,25],[10,-7],[-1,-1],[4,12],[18,12],[-1,-1],[3,6],[17,6]]},"$":{width:20,points:[[8,25],[8,-4],[-1,-1],[12,25],[12,-4],[-1,-1],[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},"%":{width:24,points:[[21,21],[3,0],[-1,-1],[8,21],[10,19],[10,17],[9,15],[7,14],[5,14],[3,16],[3,18],[4,20],[6,21],[8,21],[10,20],[13,19],[16,19],[19,20],[21,21],[-1,-1],[17,7],[15,6],[14,4],[14,2],[16,0],[18,0],[20,1],[21,3],[21,5],[19,7],[17,7]]},"&":{width:26,points:[[23,12],[23,13],[22,14],[21,14],[20,13],[19,11],[17,6],[15,3],[13,1],[11,0],[7,0],[5,1],[4,2],[3,4],[3,6],[4,8],[5,9],[12,13],[13,14],[14,16],[14,18],[13,20],[11,21],[9,20],[8,18],[8,16],[9,13],[11,10],[16,3],[18,1],[20,0],[22,0],[23,1],[23,2]]},"'":{width:10,points:[[5,19],[4,20],[5,21],[6,20],[6,18],[5,16],[4,15]]},"(":{width:14,points:[[11,25],[9,23],[7,20],[5,16],[4,11],[4,7],[5,2],[7,-2],[9,-5],[11,-7]]},")":{width:14,points:[[3,25],[5,23],[7,20],[9,16],[10,11],[10,7],[9,2],[7,-2],[5,-5],[3,-7]]},"*":{width:16,points:[[8,21],[8,9],[-1,-1],[3,18],[13,12],[-1,-1],[13,18],[3,12]]},"+":{width:26,points:[[13,18],[13,0],[-1,-1],[4,9],[22,9]]},",":{width:10,points:[[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"-":{width:18,points:[[6,9],[12,9]]},".":{width:10,points:[[5,2],[4,1],[5,0],[6,1],[5,2]]},"/":{width:22,points:[[20,25],[2,-7]]},"0":{width:20,points:[[9,21],[6,20],[4,17],[3,12],[3,9],[4,4],[6,1],[9,0],[11,0],[14,1],[16,4],[17,9],[17,12],[16,17],[14,20],[11,21],[9,21]]},"1":{width:20,points:[[6,17],[8,18],[11,21],[11,0]]},"2":{width:20,points:[[4,16],[4,17],[5,19],[6,20],[8,21],[12,21],[14,20],[15,19],[16,17],[16,15],[15,13],[13,10],[3,0],[17,0]]},"3":{width:20,points:[[5,21],[16,21],[10,13],[13,13],[15,12],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},"4":{width:20,points:[[13,21],[3,7],[18,7],[-1,-1],[13,21],[13,0]]},"5":{width:20,points:[[15,21],[5,21],[4,12],[5,13],[8,14],[11,14],[14,13],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},"6":{width:20,points:[[16,18],[15,20],[12,21],[10,21],[7,20],[5,17],[4,12],[4,7],[5,3],[7,1],[10,0],[11,0],[14,1],[16,3],[17,6],[17,7],[16,10],[14,12],[11,13],[10,13],[7,12],[5,10],[4,7]]},"7":{width:20,points:[[17,21],[7,0],[-1,-1],[3,21],[17,21]]},"8":{width:20,points:[[8,21],[5,20],[4,18],[4,16],[5,14],[7,13],[11,12],[14,11],[16,9],[17,7],[17,4],[16,2],[15,1],[12,0],[8,0],[5,1],[4,2],[3,4],[3,7],[4,9],[6,11],[9,12],[13,13],[15,14],[16,16],[16,18],[15,20],[12,21],[8,21]]},"9":{width:20,points:[[16,14],[15,11],[13,9],[10,8],[9,8],[6,9],[4,11],[3,14],[3,15],[4,18],[6,20],[9,21],[10,21],[13,20],[15,18],[16,14],[16,9],[15,4],[13,1],[10,0],[8,0],[5,1],[4,3]]},":":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],[-1,-1],[5,2],[4,1],[5,0],[6,1],[5,2]]},";":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],[-1,-1],[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"<":{width:24,points:[[20,18],[4,9],[20,0]]},"=":{width:26,points:[[4,12],[22,12],[-1,-1],[4,6],[22,6]]},">":{width:24,points:[[4,18],[20,9],[4,0]]},"?":{width:18,points:[[3,16],[3,17],[4,19],[5,20],[7,21],[11,21],[13,20],[14,19],[15,17],[15,15],[14,13],[13,12],[9,10],[9,7],[-1,-1],[9,2],[8,1],[9,0],[10,1],[9,2]]},"@":{width:27,points:[[18,13],[17,15],[15,16],[12,16],[10,15],[9,14],[8,11],[8,8],[9,6],[11,5],[14,5],[16,6],[17,8],[-1,-1],[12,16],[10,14],[9,11],[9,8],[10,6],[11,5],[-1,-1],[18,16],[17,8],[17,6],[19,5],[21,5],[23,7],[24,10],[24,12],[23,15],[22,17],[20,19],[18,20],[15,21],[12,21],[9,20],[7,19],[5,17],[4,15],[3,12],[3,9],[4,6],[5,4],[7,2],[9,1],[12,0],[15,0],[18,1],[20,2],[21,3],[-1,-1],[19,16],[18,8],[18,6],[19,5]]},A:{width:18,points:[[9,21],[1,0],[-1,-1],[9,21],[17,0],[-1,-1],[4,7],[14,7]]},B:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],[-1,-1],[4,11],[13,11],[16,10],[17,9],[18,7],[18,4],[17,2],[16,1],[13,0],[4,0]]},C:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5]]},D:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[11,21],[14,20],[16,18],[17,16],[18,13],[18,8],[17,5],[16,3],[14,1],[11,0],[4,0]]},E:{width:19,points:[[4,21],[4,0],[-1,-1],[4,21],[17,21],[-1,-1],[4,11],[12,11],[-1,-1],[4,0],[17,0]]},F:{width:18,points:[[4,21],[4,0],[-1,-1],[4,21],[17,21],[-1,-1],[4,11],[12,11]]},G:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[18,8],[-1,-1],[13,8],[18,8]]},H:{width:22,points:[[4,21],[4,0],[-1,-1],[18,21],[18,0],[-1,-1],[4,11],[18,11]]},I:{width:8,points:[[4,21],[4,0]]},J:{width:16,points:[[12,21],[12,5],[11,2],[10,1],[8,0],[6,0],[4,1],[3,2],[2,5],[2,7]]},K:{width:21,points:[[4,21],[4,0],[-1,-1],[18,21],[4,7],[-1,-1],[9,12],[18,0]]},L:{width:17,points:[[4,21],[4,0],[-1,-1],[4,0],[16,0]]},M:{width:24,points:[[4,21],[4,0],[-1,-1],[4,21],[12,0],[-1,-1],[20,21],[12,0],[-1,-1],[20,21],[20,0]]},N:{width:22,points:[[4,21],[4,0],[-1,-1],[4,21],[18,0],[-1,-1],[18,21],[18,0]]},O:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21]]},P:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,14],[17,12],[16,11],[13,10],[4,10]]},Q:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21],[-1,-1],[12,4],[18,-2]]},R:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],[4,11],[-1,-1],[11,11],[18,0]]},S:{width:20,points:[[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},T:{width:16,points:[[8,21],[8,0],[-1,-1],[1,21],[15,21]]},U:{width:22,points:[[4,21],[4,6],[5,3],[7,1],[10,0],[12,0],[15,1],[17,3],[18,6],[18,21]]},V:{width:18,points:[[1,21],[9,0],[-1,-1],[17,21],[9,0]]},W:{width:24,points:[[2,21],[7,0],[-1,-1],[12,21],[7,0],[-1,-1],[12,21],[17,0],[-1,-1],[22,21],[17,0]]},X:{width:20,points:[[3,21],[17,0],[-1,-1],[17,21],[3,0]]},Y:{width:18,points:[[1,21],[9,11],[9,0],[-1,-1],[17,21],[9,11]]},Z:{width:20,points:[[17,21],[3,0],[-1,-1],[3,21],[17,21],[-1,-1],[3,0],[17,0]]},"[":{width:14,points:[[4,25],[4,-7],[-1,-1],[5,25],[5,-7],[-1,-1],[4,25],[11,25],[-1,-1],[4,-7],[11,-7]]},"\\":{width:14,points:[[0,21],[14,-3]]},"]":{width:14,points:[[9,25],[9,-7],[-1,-1],[10,25],[10,-7],[-1,-1],[3,25],[10,25],[-1,-1],[3,-7],[10,-7]]},"^":{width:16,points:[[6,15],[8,18],[10,15],[-1,-1],[3,12],[8,17],[13,12],[-1,-1],[8,17],[8,0]]},_:{width:16,points:[[0,-2],[16,-2]]},"`":{width:10,points:[[6,21],[5,20],[4,18],[4,16],[5,15],[6,16],[5,17]]},a:{width:19,points:[[15,14],[15,0],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},b:{width:19,points:[[4,21],[4,0],[-1,-1],[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},c:{width:18,points:[[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},d:{width:19,points:[[15,21],[15,0],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},e:{width:18,points:[[3,8],[15,8],[15,10],[14,12],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},f:{width:12,points:[[10,21],[8,21],[6,20],[5,17],[5,0],[-1,-1],[2,14],[9,14]]},g:{width:19,points:[[15,14],[15,-2],[14,-5],[13,-6],[11,-7],[8,-7],[6,-6],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},h:{width:19,points:[[4,21],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},i:{width:8,points:[[3,21],[4,20],[5,21],[4,22],[3,21],[-1,-1],[4,14],[4,0]]},j:{width:10,points:[[5,21],[6,20],[7,21],[6,22],[5,21],[-1,-1],[6,14],[6,-3],[5,-6],[3,-7],[1,-7]]},k:{width:17,points:[[4,21],[4,0],[-1,-1],[14,14],[4,4],[-1,-1],[8,8],[15,0]]},l:{width:8,points:[[4,21],[4,0]]},m:{width:30,points:[[4,14],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0],[-1,-1],[15,10],[18,13],[20,14],[23,14],[25,13],[26,10],[26,0]]},n:{width:19,points:[[4,14],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},o:{width:19,points:[[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3],[16,6],[16,8],[15,11],[13,13],[11,14],[8,14]]},p:{width:19,points:[[4,14],[4,-7],[-1,-1],[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},q:{width:19,points:[[15,14],[15,-7],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},r:{width:13,points:[[4,14],[4,0],[-1,-1],[4,8],[5,11],[7,13],[9,14],[12,14]]},s:{width:17,points:[[14,11],[13,13],[10,14],[7,14],[4,13],[3,11],[4,9],[6,8],[11,7],[13,6],[14,4],[14,3],[13,1],[10,0],[7,0],[4,1],[3,3]]},t:{width:12,points:[[5,21],[5,4],[6,1],[8,0],[10,0],[-1,-1],[2,14],[9,14]]},u:{width:19,points:[[4,14],[4,4],[5,1],[7,0],[10,0],[12,1],[15,4],[-1,-1],[15,14],[15,0]]},v:{width:16,points:[[2,14],[8,0],[-1,-1],[14,14],[8,0]]},w:{width:22,points:[[3,14],[7,0],[-1,-1],[11,14],[7,0],[-1,-1],[11,14],[15,0],[-1,-1],[19,14],[15,0]]},x:{width:17,points:[[3,14],[14,0],[-1,-1],[14,14],[3,0]]},y:{width:16,points:[[2,14],[8,0],[-1,-1],[14,14],[8,0],[6,-4],[4,-6],[2,-7],[1,-7]]},z:{width:17,points:[[14,14],[3,0],[-1,-1],[3,14],[14,14],[-1,-1],[3,0],[14,0]]},"{":{width:14,points:[[9,25],[7,24],[6,23],[5,21],[5,19],[6,17],[7,16],[8,14],[8,12],[6,10],[-1,-1],[7,24],[6,22],[6,20],[7,18],[8,17],[9,15],[9,13],[8,11],[4,9],[8,7],[9,5],[9,3],[8,1],[7,0],[6,-2],[6,-4],[7,-6],[-1,-1],[6,8],[8,6],[8,4],[7,2],[6,1],[5,-1],[5,-3],[6,-5],[7,-6],[9,-7]]},"|":{width:8,points:[[4,25],[4,-7]]},"}":{width:14,points:[[5,25],[7,24],[8,23],[9,21],[9,19],[8,17],[7,16],[6,14],[6,12],[8,10],[-1,-1],[7,24],[8,22],[8,20],[7,18],[6,17],[5,15],[5,13],[6,11],[10,9],[6,7],[5,5],[5,3],[6,1],[7,0],[8,-2],[8,-4],[7,-6],[-1,-1],[8,8],[6,6],[6,4],[7,2],[8,1],[9,-1],[9,-3],[8,-5],[7,-6],[5,-7]]},"~":{width:24,points:[[3,6],[3,8],[4,11],[6,12],[8,12],[10,11],[14,8],[16,7],[18,7],[20,8],[21,10],[-1,-1],[3,8],[4,10],[6,11],[8,11],[10,10],[14,7],[16,6],[18,6],[20,7],[21,10],[21,12]]}};
a.jqplot.CanvasFontRenderer=function(b){b=b||{};if(!b.pt2px){b.pt2px=1.5}a.jqplot.CanvasTextRenderer.call(this,b)};a.jqplot.CanvasFontRenderer.prototype=new a.jqplot.CanvasTextRenderer({});a.jqplot.CanvasFontRenderer.prototype.constructor=a.jqplot.CanvasFontRenderer;a.jqplot.CanvasFontRenderer.prototype.measure=function(c,e){var d=this.fontSize+" "+this.fontFamily;c.save();c.font=d;var b=c.measureText(e).width;c.restore();return b};a.jqplot.CanvasFontRenderer.prototype.draw=function(e,g){var c=0;var h=this.height*0.72;e.save();var d,b;if((-Math.PI/2<=this.angle&&this.angle<=0)||(Math.PI*3/2<=this.angle&&this.angle<=Math.PI*2)){d=0;b=-Math.sin(this.angle)*this.width}else{if((0<this.angle&&this.angle<=Math.PI/2)||(-Math.PI*2<=this.angle&&this.angle<=-Math.PI*3/2)){d=Math.sin(this.angle)*this.height;b=0}else{if((-Math.PI<this.angle&&this.angle<-Math.PI/2)||(Math.PI<=this.angle&&this.angle<=Math.PI*3/2)){d=-Math.cos(this.angle)*this.width;b=-Math.sin(this.angle)*this.width-Math.cos(this.angle)*this.height
}else{if((-Math.PI*3/2<this.angle&&this.angle<Math.PI)||(Math.PI/2<this.angle&&this.angle<Math.PI)){d=Math.sin(this.angle)*this.height-Math.cos(this.angle)*this.width;b=-Math.cos(this.angle)*this.height}}}}e.strokeStyle=this.fillStyle;e.fillStyle=this.fillStyle;var f=this.fontSize+" "+this.fontFamily;e.font=f;e.translate(d,b);e.rotate(this.angle);e.fillText(g,c,h);e.restore()}})(jQuery);(function(a){a.jqplot.CanvasAxisTickRenderer=function(b){this.mark="outside";this.showMark=true;this.showGridline=true;this.isMinorTick=false;this.angle=0;this.markSize=4;this.show=true;this.showLabel=true;this.labelPosition="auto";this.label="";this.value=null;this._styles={};this.formatter=a.jqplot.DefaultTickFormatter;this.formatString="";this.prefix="";this.fontFamily='"Trebuchet MS", Arial, Helvetica, sans-serif';this.fontSize="10pt";this.fontWeight="normal";this.fontStretch=1;this.textColor="#666666";this.enableFontSupport=true;this.pt2px=null;this._elem;this._ctx;this._plotWidth;this._plotHeight;this._plotDimensions={height:null,width:null};
a.extend(true,this,b);var c={fontSize:this.fontSize,fontWeight:this.fontWeight,fontStretch:this.fontStretch,fillStyle:this.textColor,angle:this.getAngleRad(),fontFamily:this.fontFamily};if(this.pt2px){c.pt2px=this.pt2px}if(this.enableFontSupport){if(a.jqplot.support_canvas_text()){this._textRenderer=new a.jqplot.CanvasFontRenderer(c)}else{this._textRenderer=new a.jqplot.CanvasTextRenderer(c)}}else{this._textRenderer=new a.jqplot.CanvasTextRenderer(c)}};a.jqplot.CanvasAxisTickRenderer.prototype.init=function(b){a.extend(true,this,b);this._textRenderer.init({fontSize:this.fontSize,fontWeight:this.fontWeight,fontStretch:this.fontStretch,fillStyle:this.textColor,angle:this.getAngleRad(),fontFamily:this.fontFamily})};a.jqplot.CanvasAxisTickRenderer.prototype.getWidth=function(d){if(this._elem){return this._elem.outerWidth(true)}else{var f=this._textRenderer;var c=f.getWidth(d);var e=f.getHeight(d);var b=Math.abs(Math.sin(f.angle)*e)+Math.abs(Math.cos(f.angle)*c);return b}};a.jqplot.CanvasAxisTickRenderer.prototype.getHeight=function(d){if(this._elem){return this._elem.outerHeight(true)
}else{var f=this._textRenderer;var c=f.getWidth(d);var e=f.getHeight(d);var b=Math.abs(Math.cos(f.angle)*e)+Math.abs(Math.sin(f.angle)*c);return b}};a.jqplot.CanvasAxisTickRenderer.prototype.getAngleRad=function(){var b=this.angle*Math.PI/180;return b};a.jqplot.CanvasAxisTickRenderer.prototype.setTick=function(b,d,c){this.value=b;if(c){this.isMinorTick=true}return this};a.jqplot.CanvasAxisTickRenderer.prototype.draw=function(c,f){if(!this.label){this.label=this.prefix+this.formatter(this.formatString,this.value)}if(this._elem){if(a.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement!==undefined){window.G_vmlCanvasManager.uninitElement(this._elem.get(0))}this._elem.emptyForce();this._elem=null}var e=f.canvasManager.getCanvas();this._textRenderer.setText(this.label,c);var b=this.getWidth(c);var d=this.getHeight(c);e.width=b;e.height=d;e.style.width=b;e.style.height=d;e.style.textAlign="left";e.style.position="absolute";e=f.canvasManager.initCanvas(e);this._elem=a(e);this._elem.css(this._styles);
this._elem.addClass("jqplot-"+this.axis+"-tick");e=null;return this._elem};a.jqplot.CanvasAxisTickRenderer.prototype.pack=function(){this._textRenderer.draw(this._elem.get(0).getContext("2d"),this.label)}})(jQuery);
var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());

var piwikHelper={htmlDecode:function(value)
{return $('<div/>').html(value).text();},log:function(){try{console.log.apply(console,arguments);}catch(e){try{opera.postError.apply(opera,arguments);}catch(f){}}},error:function(){try{console.error.apply(console,arguments);}catch(e){try{opera.postError.apply(opera,arguments);}catch(f){alert(Array.prototype.join.call(arguments,' '));}}},htmlEntities:function(value)
{var findReplace=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"]];for(var item in findReplace){value=value.replace(findReplace[item][0],findReplace[item][1]);}
return value;},addBreakpoints:function(text,breakpointMarkup)
{return text.replace(/([\/&=?\.%#:_-])/g,'$1'+
(typeof breakpointMarkup=='undefined'?'<wbr>&#8203;':breakpointMarkup));},addBreakpointsToUrl:function(url)
{try{url=decodeURIComponent(url);}catch(e){}
url=piwikHelper.addBreakpoints(url,'|||');url=$(document.createElement('p')).text(url).html();url=url.replace(/\|\|\|/g,'<wbr />&#8203;');return url;},modalConfirm:function(domSelector,handles)
{var domElem=$(domSelector);var buttons={};$('[role]',domElem).each(function(){var role=$(this).attr('role');var text=$(this).val();if(typeof handles[role]=='function'){buttons[text]=function(){$(this).dialog("close");handles[role].apply()};}else{buttons[text]=function(){$(this).dialog("close");};}
$(this).hide();});domElem.dialog({resizable:false,modal:true,buttons:buttons,width:650,position:['center',90]});},getQueryStringWithParametersModified:function(queryString,newParameters){if(queryString!=''){var r,i,keyvalue,keysvalues=newParameters.split('&');var appendUrl='';for(i=0;i<keysvalues.length;i++){keyvalue=keysvalues[i].split('=');r=new RegExp('(^|[?&])'+keyvalue[0]+'=[^&]*');queryString=queryString.replace(r,'');if(keyvalue[1].length==0){continue;}
appendUrl+='&'+keyvalue[0]+'='+keyvalue[1];}
queryString+=appendUrl;if(queryString[0]=='&'){queryString='?'+queryString.substring(1);}}else{queryString='?'+newParameters;}
return queryString;},getCurrentQueryStringWithParametersModified:function(newparams)
{var queryString=String(window.location.search);if(newparams){queryString=this.getQueryStringWithParametersModified(queryString,newparams);}
var value=String(window.location.pathname)+queryString;return value;},getArrayFromQueryString:function(query){var params={};var vars=query.split("&");for(var i=0;i<vars.length;i++){var keyValue=vars[i].split("=");var rawValue=decodeURIComponent(keyValue[1]);params[keyValue[0]]=rawValue;}
return params;},getQueryStringFromParameters:function(parameters)
{var queryString='';if(!parameters||parameters.length==0){return queryString;}
for(var name in parameters){var value=parameters[name];if(typeof value=='object'){for(var i in value){queryString+=name+'[]='+value[i]+'&';}}else{queryString+=name+'='+value+'&';}}
return queryString.substring(0,queryString.length-1);},showAjaxError:function(message,errorDivID)
{errorDivID=errorDivID||'ajaxError';$('#'+errorDivID).html(message).show();},hideAjaxError:function(errorDivID)
{errorDivID=errorDivID||'ajaxError';$('#'+errorDivID).hide();},showAjaxLoading:function(loadingDivID)
{loadingDivID=loadingDivID||'ajaxLoading';$('#'+loadingDivID).show();},hideAjaxLoading:function(loadingDivID)
{loadingDivID=loadingDivID||'ajaxLoading';$('#'+loadingDivID).hide();},getStandardAjaxConf:function(loadingDivID,errorDivID,params)
{piwikHelper.showAjaxLoading(loadingDivID);piwikHelper.hideAjaxError(errorDivID);var ajaxRequest={};ajaxRequest.type='GET';ajaxRequest.url='index.php';ajaxRequest.dataType='json';ajaxRequest.error=piwikHelper.ajaxHandleError;ajaxRequest.success=function(response){piwikHelper.ajaxHandleResponse(response,loadingDivID,errorDivID,params);};return ajaxRequest;},refreshAfter:function(timeoutPeriod)
{if(timeoutPeriod==0){location.reload();}else{setTimeout("location.reload();",timeoutPeriod);}},redirectToUrl:function(url)
{window.location=url;},ajaxHandleError:function(deferred,status)
{if(status=='abort'){return;}
$('#loadingError').show();setTimeout(function(){$('#loadingError').fadeOut('slow');},2000);},ajaxHandleResponse:function(response,loadingDivID,errorDivID,params)
{if(response.result=="error")
{piwikHelper.hideAjaxLoading(loadingDivID);piwikHelper.showAjaxError(response.message,errorDivID);}
else
{var urlToRedirect=piwikHelper.getCurrentQueryStringWithParametersModified(params);var updatedUrl=new RegExp('&updated=([0-9]+)');var updatedCounter=updatedUrl.exec(urlToRedirect);if(!updatedCounter)
{urlToRedirect+='&updated=1';}
else
{updatedCounter=1+parseInt(updatedCounter[1]);urlToRedirect=urlToRedirect.replace(new RegExp('(&updated=[0-9]+)'),'&updated='+updatedCounter);}
var currentHashStr=window.location.hash;if(currentHashStr.length>0){urlToRedirect+=currentHashStr;}
piwikHelper.redirectToUrl(urlToRedirect);}},lazyScrollTo:function(elem,time)
{var elemTop=$(elem).offset().top;if(elemTop<$(window).scrollTop()||elemTop>$(window).scrollTop()+$(window).height())
{$.scrollTo(elem,time);}},getApiFormatTextarea:function(textareaContent)
{if(typeof textareaContent=='undefined'){return'';}
return textareaContent.trim().split("\n").join(',');}};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};function isEnterKey(e)
{return(window.event?window.event.keyCode:e.which)==13;}
(function($){try{var oldArc=CanvasRenderingContext2D.prototype.arc;CanvasRenderingContext2D.prototype.arc=function(x,y,r,sAngle,eAngle,clockwise){if(Math.abs(eAngle-sAngle-Math.PI*2)<0.000001&&!clockwise)
eAngle-=0.000001;oldArc.call(this,x,y,r,sAngle,eAngle,clockwise);};}catch(e){}}(jQuery));

var globalAjaxQueue=new Array();globalAjaxQueue.push=function(){for(var i=this.length;i--;){if(!this[i]||this[i].readyState==4){this.splice(i,1);}}
return Array.prototype.push.apply(this,arguments);};globalAjaxQueue.abort=function(){for(var i=this.length;i--;){this[i]&&this[i].abort&&this[i].abort();}
this.splice(0,this.length);};function ajaxHelper(){this.format='json';this.async=true;this.callback=function(){};this.useRegularCallbackInCaseOfError=false;this.errorCallback=this.defaultErrorCallback;this.getParams={};this.postParams={};this.loadingElement=null;this.errorElement='#ajaxError';this.requestHandle=null;this.addParams=function(params,type){for(var key in params){if(type.toLowerCase()=='get'){this.getParams[key]=params[key];}else if(type.toLowerCase()=='post'){this.postParams[key]=params[key];}}};this.setBulkRequests=function(){var urls=[];for(var i=0;i!=arguments.length;++i){urls.push($.param(arguments[i]));}
this.addParams({module:'API',method:'API.getBulkRequest',urls:urls,format:'json'},'post');};this.setCallback=function(callback){this.callback=callback;};this.useCallbackInCaseOfError=function(){this.useRegularCallbackInCaseOfError=true;};this.redirectOnSuccess=function(params){this.setCallback(function(response){if(typeof params=='object'){params=piwikHelper.getQueryStringFromParameters(params);}
var urlToRedirect=piwikHelper.getCurrentQueryStringWithParametersModified(params);var updatedUrl=new RegExp('&updated=([0-9]+)');var updatedCounter=updatedUrl.exec(urlToRedirect);if(!updatedCounter){urlToRedirect+='&updated=1';}else{updatedCounter=1+parseInt(updatedCounter[1]);urlToRedirect=urlToRedirect.replace(new RegExp('(&updated=[0-9]+)'),'&updated='+updatedCounter);}
var currentHashStr=window.location.hash;if(currentHashStr.length>0){urlToRedirect+=currentHashStr;}
piwikHelper.redirectToUrl(urlToRedirect);});};this.setErrorCallback=function(callback){this.errorCallback=callback;};this.defaultErrorCallback=function(deferred,status)
{if(status=='abort'){return;}
$('#loadingError').show();setTimeout(function(){$('#loadingError').fadeOut('slow');},2000);};this.setFormat=function(format){this.format=format;};this.setLoadingElement=function(element){if(!element){element='#ajaxLoading';}
this.loadingElement=element;};this.setErrorElement=function(element){if(!element){return;}
this.errorElement=element;};this.send=function(sync){if(sync===true){this.async=false;}
if($(this.errorElement).length){$(this.errorElement).hide();}
if(this.loadingElement){$(this.loadingElement).fadeIn();}
this.requestHandle=this._buildAjaxCall();globalAjaxQueue.push(this.requestHandle);};this.abort=function(){if(this.requestHandle&&typeof this.requestHandle.abort=='function'){this.requestHandle.abort();this.requestHandle=null;}};this._buildAjaxCall=function(){var that=this;var parameters=this._mixinDefaultGetParams(this.getParams);var url='index.php?';if(parameters['segment']){url+='segment='+parameters['segment']+'&';delete parameters['segment'];}
if(parameters['date']){url+='date='+decodeURIComponent(parameters['date'])+'&';delete parameters['date'];}
url+=$.param(parameters);var ajaxCall={type:'POST',async:this.async!==false,url:url,dataType:this.format||'json',error:this.errorCallback,success:function(response){if(that.loadingElement){$(that.loadingElement).hide();}
if(response&&response.result=='error'&&!that.useRegularCallbackInCaseOfError){if($(that.errorElement).length&&response.message){$(that.errorElement).html(response.message).fadeIn();piwikHelper.lazyScrollTo(that.errorElement,250);}
return;}
that.callback(response);},data:this._mixinDefaultPostParams(this.postParams)};return $.ajax(ajaxCall);};this._mixinDefaultPostParams=function(params){var defaultParams={token_auth:piwik.token_auth};for(var index in defaultParams){if(!params[index]){params[index]=defaultParams[index];}}
return params;};this._mixinDefaultGetParams=function(params){var defaultParams={idSite:piwik.idSite||broadcast.getValueFromUrl('idSite'),period:piwik.period||broadcast.getValueFromUrl('period'),segment:broadcast.getValueFromHash('segment',window.location.href.split('#')[1])};if(params.token_auth){params.token_auth=null;delete params.token_auth;}
for(var key in defaultParams){if(!params[key]&&!this.postParams[key]&&defaultParams[key]){params[key]=defaultParams[key];}}
if(!params.date&&!this.postParams.date){params.date=piwik.currentDateString||broadcast.getValueFromUrl('date');if(params.period=='range'&&piwik.currentDateString){params.date=piwik.startDateString+','+params.date;}}
return params;};return this;}

var broadcast={_isInit:false,currentHashUrl:false,currentPopoverParameter:false,popoverHandlers:[],forceReload:false,updateHashOnly:false,init:function(noLoadingMessage){if(broadcast._isInit){return;}
broadcast._isInit=true;$.history.init(broadcast.pageload,{unescape:true});if(noLoadingMessage!=true){piwikHelper.showAjaxLoading();}},pageload:function(hash){broadcast.init();$(window).off('resize');if(broadcast.updateHashOnly){broadcast.updateHashOnly=false;return;}
if(hash){if(/^popover=/.test(hash)){var hashParts=['',hash.replace(/^popover=/,'')];}else{var hashParts=hash.split('&popover=');}
var hashUrl=hashParts[0];var popoverParam='';if(hashParts.length>1){popoverParam=hashParts[1];popoverParam=decodeURIComponent(popoverParam);popoverParam=popoverParam.replace(/\$/g,'%');popoverParam=decodeURIComponent(popoverParam);}
var pageUrlUpdated=(popoverParam==''||(broadcast.currentHashUrl!==false&&broadcast.currentHashUrl!=hashUrl));var popoverParamUpdated=(popoverParam!=''&&hashUrl==broadcast.currentHashUrl);if(broadcast.currentHashUrl===false){pageUrlUpdated=true;popoverParamUpdated=(popoverParam!='');}
if(pageUrlUpdated||broadcast.forceReload){Piwik_Popover.close();if(hashUrl!=broadcast.currentHashUrl||broadcast.forceReload){broadcast.loadAjaxContent(hashUrl);$('#dashboardSettings').remove();$('#dashboardWidgetsArea').dashboard('destroy');}}
broadcast.forceReload=false;broadcast.currentHashUrl=hashUrl;broadcast.currentPopoverParameter=popoverParam;if(popoverParamUpdated&&popoverParam==''){Piwik_Popover.close();}else if(popoverParamUpdated){var popoverParamParts=popoverParam.split(':');var handlerName=popoverParamParts[0];popoverParamParts.shift();var param=popoverParamParts.join(':');if(typeof broadcast.popoverHandlers[handlerName]!='undefined'){broadcast.popoverHandlers[handlerName](param);}}}else{Piwik_Popover.close();$('#content').empty();}},propagateAjax:function(ajaxUrl,disableHistory){broadcast.init();globalAjaxQueue.abort();var currentHashStr=broadcast.getHash();ajaxUrl=ajaxUrl.replace(/^\?|&#/,'');var params_vals=ajaxUrl.split("&");for(var i=0;i<params_vals.length;i++){currentHashStr=broadcast.updateParamValue(params_vals[i],currentHashStr);}
var action=broadcast.getParamValue('action',currentHashStr);if(action!='goalReport'&&action!='ecommerceReport'){currentHashStr=broadcast.updateParamValue('idGoal=',currentHashStr);}
var module=broadcast.getParamValue('module',currentHashStr);if(module!='Dashboard'){currentHashStr=broadcast.updateParamValue('idDashboard=',currentHashStr);}
if(disableHistory){var newLocation=window.location.href.split('#')[0]+'#'+currentHashStr;window.location.replace(newLocation);}
else{broadcast.forceReload=true;$.history.load(currentHashStr);}},propagateNewPage:function(str,showAjaxLoading){globalAjaxQueue.abort();if(typeof showAjaxLoading==='undefined'||showAjaxLoading){piwikHelper.showAjaxLoading();}
var params_vals=str.split("&");var currentSearchStr=window.location.search;var currentHashStr=broadcast.getHashFromUrl();var oldUrl=currentSearchStr+currentHashStr;for(var i=0;i<params_vals.length;i++){currentSearchStr=broadcast.updateParamValue(params_vals[i],currentSearchStr);if(currentHashStr.length!=0){currentHashStr=broadcast.updateParamValue(params_vals[i],currentHashStr);}}
var newUrl=currentSearchStr+currentHashStr;if(oldUrl==newUrl){window.location.reload();}else{this.forceReload=true;window.location.href=newUrl;}
return false;},updateParamValue:function(newParamValue,urlStr){var p_v=newParamValue.split("=");var paramName=p_v[0];var valFromUrl=broadcast.getParamValue(paramName,urlStr);var paramValue=p_v[1];if(paramValue==''){newParamValue='';}
var getQuotedRegex=function(str){return(str+'').replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");};if(valFromUrl!=''){valFromUrl=getQuotedRegex(valFromUrl);var regToBeReplace=new RegExp(paramName+'='+valFromUrl,'ig');if(newParamValue==''){regToBeReplace=new RegExp('[\&]?'+paramName+'='+valFromUrl,'ig');}
urlStr=urlStr.replace(regToBeReplace,newParamValue);}else if(newParamValue!=''){urlStr+=(urlStr=='')?newParamValue:'&'+newParamValue;}
return urlStr;},propagateNewPopoverParameter:function(handlerName,value){broadcast.init(true);var hash=broadcast.getHashFromUrl(window.location.href);var popover='';if(handlerName){popover=handlerName+':'+value;popover=encodeURIComponent(popover);popover=popover.replace(/%/g,'\$');}
if(''==value||'undefined'==typeof value){var newHash=hash.replace(/(&?popover=.*)/,'');}else if(broadcast.getParamValue('popover',hash)){var newHash=broadcast.updateParamValue('popover='+popover,hash);}else if(hash&&hash!='#'){var newHash=hash+'&popover='+popover}else{var newHash='#popover='+popover;}
if(''==newHash){newHash='#';}
window.location.href='index.php'+window.location.search+newHash;},addPopoverHandler:function(handlerName,callback){broadcast.popoverHandlers[handlerName]=callback;},loadAjaxContent:function(urlAjax){piwikMenu.activateMenu(broadcast.getParamValue('module',urlAjax),broadcast.getParamValue('action',urlAjax),broadcast.getParamValue('idGoal',urlAjax)||broadcast.getParamValue('idDashboard',urlAjax));piwikHelper.hideAjaxError('loadingError');piwikHelper.showAjaxLoading();$('#content').hide();$("object").remove();urlAjax=urlAjax.match(/^\?/)?urlAjax:"?"+urlAjax;broadcast.lastUrlRequested=urlAjax;function sectionLoaded(content){var htmlDocType='<!DOCTYPE';if(content.substring(0,htmlDocType.length)==htmlDocType){return;}
if(urlAjax==broadcast.lastUrlRequested){$('#content').html(content).show();piwikHelper.hideAjaxLoading();broadcast.lastUrlRequested=null;}}
var ajaxRequest={type:'POST',url:urlAjax,dataType:'html',async:true,error:broadcast.customAjaxHandleError,success:sectionLoaded,data:{}};globalAjaxQueue.push($.ajax(ajaxRequest));return false;},customAjaxHandleError:function(deferred,status){broadcast.lastUrlRequested=null;piwikHelper.ajaxHandleError(deferred,status);},isHashExists:function(){var hashStr=broadcast.getHashFromUrl();if(hashStr!=""){return hashStr;}else{return false;}},getHashFromUrl:function(url){var hashStr="";if(url&&url.match('#')){hashStr=url.substring(url.indexOf("#"),url.length);}
else{locationSplit=location.href.split('#');if(typeof locationSplit[1]!='undefined'){hashStr='#'+locationSplit[1];}}
return hashStr;},getSearchFromUrl:function(url){var searchStr="";if(url&&url.match(/\?/)){searchStr=url.substring(url.indexOf("?"),url.length);}else{searchStr=location.search;}
return searchStr;},extractKeyValuePairsFromQueryString:function(queryString){var pairs=queryString.split('&');var result={};for(var i=0;i!=pairs.length;++i){var pair=pairs[i].split('=');var key=pair.shift();result[key]=pair.join('=');}
return result;},getValuesFromUrl:function(url){var searchString=this._removeHashFromUrl(url).split('?')[1]||'';return this.extractKeyValuePairsFromQueryString(searchString);},getValueFromUrl:function(param,url){var searchString=this._removeHashFromUrl(url);return broadcast.getParamValue(param,searchString);},getValueFromHash:function(param,url){var hashStr=broadcast.getHashFromUrl(url);if(hashStr.substr(0,1)=='#'){hashStr=hashStr.substr(1);}
hashStr=hashStr.split('#')[0];return broadcast.getParamValue(param,hashStr);},getParamValue:function(param,url){var lookFor=param+'=';var startStr=url.indexOf(lookFor);if(startStr>=0){var endStr=url.indexOf("&",startStr);if(endStr==-1){endStr=url.length;}
var value=url.substring(startStr+param.length+1,endStr);if(param!='segment'){value=value.replace(/[^_%~\*\+\-\<\>!@\$\.()=,;0-9a-zA-Z]/gi,'');}
return value;}else{return'';}},getHash:function(){return broadcast.getHashFromUrl().replace(/^#/,'').split('#')[0];},_removeHashFromUrl:function(url){var searchString='';if(url){var urlParts=url.split('#');searchString=urlParts[0];}else{searchString=location.search;}
return searchString;}};

function sendGeneralSettingsAJAX(){var enableBrowserTriggerArchiving=$('input[name=enableBrowserTriggerArchiving]:checked').val();var enableBetaReleaseCheck=$('input[name=enableBetaReleaseCheck]:checked').val();var todayArchiveTimeToLive=$('#todayArchiveTimeToLive').val();var trustedHosts=[];$('input[name=trusted_host]').each(function(){trustedHosts.push($(this).val());});var ajaxHandler=new ajaxHelper();ajaxHandler.setLoadingElement();ajaxHandler.addParams({format:'json',enableBrowserTriggerArchiving:enableBrowserTriggerArchiving,enableBetaReleaseCheck:enableBetaReleaseCheck,todayArchiveTimeToLive:todayArchiveTimeToLive,mailUseSmtp:isSmtpEnabled(),mailPort:$('#mailPort').val(),mailHost:$('#mailHost').val(),mailType:$('#mailType').val(),mailUsername:$('#mailUsername').val(),mailPassword:$('#mailPassword').val(),mailEncryption:$('#mailEncryption').val(),useCustomLogo:isCustomLogoEnabled(),trustedHosts:JSON.stringify(trustedHosts)},'POST');ajaxHandler.addParams({module:'CoreAdminHome',action:'setGeneralSettings'},'GET');ajaxHandler.redirectOnSuccess();ajaxHandler.send(true);}
function showSmtpSettings(value){$('#smtpSettings').toggle(value==1);}
function isSmtpEnabled(){return $('input[name="mailUseSmtp"]:checked').val();}
function showCustomLogoSettings(value){$('#logoSettings').toggle(value==1);}
function isCustomLogoEnabled(){return $('input[name="useCustomLogo"]:checked').val();}
function refreshCustomLogo(){var imageDiv=$("#currentLogo");if(imageDiv&&imageDiv.attr("src")){var logoUrl=imageDiv.attr("src").split("?")[0];imageDiv.attr("src",logoUrl+"?"+(new Date()).getTime());}}
$(document).ready(function(){var originalTrustedHostCount=$('input[name=trusted_host]').length;showSmtpSettings(isSmtpEnabled());showCustomLogoSettings(isCustomLogoEnabled());$('#generalSettingsSubmit').click(function(){var doSubmit=function(){sendGeneralSettingsAJAX();};var hasTrustedHostsChanged=false,hosts=$('input[name=trusted_host]');if(hosts.length!=originalTrustedHostCount){hasTrustedHostsChanged=true;}
else{hosts.each(function(){hasTrustedHostsChanged|=this.defaultValue!=this.value;});}
if(hasTrustedHostsChanged){piwikHelper.modalConfirm('#confirmTrustedHostChange',{yes:doSubmit});}
else{doSubmit();}});$('input[name=mailUseSmtp]').click(function(){showSmtpSettings($(this).val());});$('input[name=useCustomLogo]').click(function(){refreshCustomLogo();showCustomLogoSettings($(this).val());});$('input').keypress(function(e){var key=e.keyCode||e.which;if(key==13){$('#generalSettingsSubmit').click();}});$("#logoUploadForm").submit(function(data){var submittingForm=$(this);var frameName="upload"+(new Date()).getTime();var uploadFrame=$("<iframe name=\""+frameName+"\" />");uploadFrame.css("display","none");uploadFrame.load(function(data){setTimeout(function(){refreshCustomLogo();uploadFrame.remove();},1000);});$("body:first").append(uploadFrame);submittingForm.attr("target",frameName);});$('#customLogo').change(function(){$("#logoUploadForm").submit()});var trustedHostSettings=$('#trustedHostSettings');trustedHostSettings.find('.adminTable').on('click','.remove-trusted-host',function(e){e.preventDefault();$(this).parent().parent().remove();return false;});trustedHostSettings.find('.add-trusted-host').click(function(e){e.preventDefault();$('#trustedHostSettings').find('tbody').append('<tr>'
+'<td><input name="trusted_host" type="text" value=""/></td>'
+'<td><a href="#" class="remove-trusted-host">x</a></td>'
+'</tr>');return false;});});

(function($){$(document).ready(function(){var donateAmounts=[0,30,60,90,120];var getTickWidth=function(slider){var effectiveSliderWidth=$('.slider-range',slider).width()-$('.slider-position',slider).width();return effectiveSliderWidth/(donateAmounts.length-1);};var getPositionFromPageCoord=function(slider,pageX){return Math.round((pageX-$('.slider-range',slider).offset().left)/getTickWidth(slider));};var setSmileyFaceAndAmount=function(slider,pos){$('.slider-donate-amount',slider).text('$'+donateAmounts[pos]+'/'+_pk_translate('General_YearShort_js'));$('.slider-smiley-face').attr('src','themes/default/images/smileyprog_'+pos+'.png');var option=Math.max(1,pos);$('.piwik-donate-call input[name=os0]').val("Option "+option);};var moveSliderPosition=function(slider,to){if(to<0){to=0;}
else if(to>=donateAmounts.length){to=donateAmounts.length-1;}
var left=to*getTickWidth(slider);if(left==0){left=-1;}
$('.slider-position',slider).css({left:left+'px'});setSmileyFaceAndAmount(slider,to);};$('body').on('click','.piwik-donate-slider>.slider-range',function(e){var slider=$(this).parent(),currentPageX=$('.slider-position',this).offset().left,currentPos=getPositionFromPageCoord(slider,currentPageX),pos=getPositionFromPageCoord(slider,e.pageX);if(currentPos==pos){if(e.pageX>currentPageX){++pos;}
else{--pos;}}
moveSliderPosition(slider,pos);});$('body').on('click','.piwik-donate-slider .slider-smiley-face,.piwik-donate-slider .slider-donate-amount',function(e){var slider=$(this).closest('.piwik-donate-slider'),currentPageX=$('.slider-position',slider).offset().left,currentPos=getPositionFromPageCoord(slider,currentPageX);moveSliderPosition(slider,currentPos+1);});var draggingSlider=false;$('body').on('mousedown','.piwik-donate-slider .slider-position',function(){draggingSlider=$(this).parent().parent();});$('body').on('mousemove',function(e){if(draggingSlider){var slider=draggingSlider.find('.slider-range'),sliderPos=slider.find('.slider-position'),left=e.pageX-slider.offset().left;if(left<=slider.width()-sliderPos.width()+2&&left>=-2){sliderPos.css({left:left+'px'});var closestPos=Math.round(left/getTickWidth(draggingSlider));setSmileyFaceAndAmount(draggingSlider,closestPos);}}});$('body').on('mouseup',function(){if(draggingSlider){var sliderPos=$('.slider-position',draggingSlider),slider=sliderPos.parent();if(sliderPos.length){var pos=getPositionFromPageCoord(draggingSlider,sliderPos.offset().left);moveSliderPosition(draggingSlider,pos);}
draggingSlider=false;}});$('body').on('piwik:changePosition','.piwik-donate-slider',function(e,data){moveSliderPosition(this,data.position);});});}(jQuery));

function dataTable(){this.param={};}
dataTable.prototype={init:function(workingDivId,domElem){if(typeof domElem=="undefined"){domElem=$('#'+workingDivId);}
this.workingDivId=workingDivId;this.loadedSubDataTable={};this.isEmpty=$('.pk-emptyDataTable',domElem).length>0;this.bindEventsAndApplyStyle(domElem);this.initialized=true;domElem.data('piwikDataTable',this);},onClickSort:function(domElem){var self=this;var newColumnToSort=$(domElem).attr('id');if(self.param.filter_sort_column==newColumnToSort){if(this.param.filter_sort_order=='asc'){self.param.filter_sort_order='desc';}
else{self.param.filter_sort_order='asc';}}
self.param.filter_offset=0;self.param.filter_sort_column=newColumnToSort;self.reloadAjaxDataTable();},setGraphedColumn:function(columnName){this.param.columns=columnName;},resetAllFilters:function(){var self=this;var FiltersToRestore=[];var filters=['filter_column','filter_pattern','filter_column_recursive','filter_pattern_recursive','enable_filter_excludelowpop','filter_offset','filter_sort_column','filter_sort_order','disable_generic_filters','columns','flat','include_aggregate_rows','totalRows'];for(var key in filters){var value=filters[key];FiltersToRestore[value]=self.param[value];delete self.param[value];}
return FiltersToRestore;},restoreAllFilters:function(FiltersToRestore){var self=this;for(var key in FiltersToRestore){self.param[key]=FiltersToRestore[key];}},cleanParams:function(){var self=this;for(var key in self.param){if(self.param[key]=='true')self.param[key]=true;if(self.param[key]=='false')self.param[key]=false;}},reloadAjaxDataTable:function(displayLoading,callbackSuccess){var self=this;if(typeof displayLoading=="undefined"){displayLoading=true;}
if(typeof callbackSuccess=="undefined"){callbackSuccess=function(response){self.dataTableLoaded(response,self.workingDivId);};}
if(displayLoading){$('#'+self.workingDivId+' .loadingPiwik').last().css('display','block');}
if(self.param.viewDataTable&&self.param.viewDataTable.indexOf('graph')===0){delete self.param.filter_offset;delete self.param.filter_limit;}
var container=$('#'+self.workingDivId+' .piwik-graph');var params={};for(var key in self.param){if(typeof self.param[key]!="undefined"&&self.param[key]!='')
params[key]=self.param[key];}
var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(params,'get');ajaxRequest.setCallback(function(response){container.trigger('piwikDestroyPlot');container.off('piwikDestroyPlot');callbackSuccess(response);});ajaxRequest.setFormat('html');ajaxRequest.send(false);},dataTableLoaded:function(response,workingDivId){var content=$(response);var idToReplace=workingDivId||$(content).attr('id');var dataTableSel=$('#'+idToReplace);var oldReportsElem=$('.datatableRelatedReports',dataTableSel);$('.datatableRelatedReports',content).replaceWith(oldReportsElem);table=$(content).parents('table.dataTable');if(dataTableSel.parents('.dataTable').is('table')){$(content).find('table.dataTable').addClass('subDataTable');$(content).find('.dataTableFeatures').addClass('subDataTable');dataTableSel.replaceWith(content);}
else{dataTableSel.find('object').remove();dataTableSel.replaceWith(content);}
piwikHelper.lazyScrollTo(content[0],400);return content;},bindEventsAndApplyStyle:function(domElem){var self=this;self.cleanParams();self.handleSort(domElem);self.handleLimit(domElem);self.handleSearchBox(domElem);self.handleOffsetInformation(domElem);self.handleAnnotationsButton(domElem);self.handleEvolutionAnnotations(domElem);self.handleExportBox(domElem);self.applyCosmetics(domElem);self.handleSubDataTable(domElem);self.handleConfigurationBox(domElem);self.handleColumnDocumentation(domElem);self.handleReportDocumentation(domElem);self.handleRowActions(domElem);self.handleCellTooltips(domElem);self.handleRelatedReports(domElem);self.handleTriggeredEvents(domElem);},handleLimit:function(domElem){var tableRowLimits=[5,10,25,50,100,250,500],evolutionLimits={day:[30,60,90,180,365,500],week:[4,12,26,52,104,500],month:[3,6,12,24,36,120],year:[3,5,10]};var self=this;if(typeof self.parentId!="undefined"&&self.parentId!=''){$('.limitSelection',domElem).remove();return;}
var setLimitValue,numbers,limitParamName;if(self.param.viewDataTable=='graphEvolution'){limitParamName='evolution_'+self.param.period+'_last_n';numbers=evolutionLimits[self.param.period]||tableRowLimits;setLimitValue=function(params,limit){params[limitParamName]=limit;};}
else{numbers=tableRowLimits;limitParamName='filter_limit';setLimitValue=function(params,value){params.filter_limit=value;params.filter_offset=0;};}
$('.limitSelection',domElem).append('<div><span>'+self.param[limitParamName]+'</span></div><ul></ul>');if(self.param.viewDataTable=='table'||self.param.viewDataTable=='tableAllColumns'||self.param.viewDataTable=='tableGoals'||self.param.viewDataTable=='ecommerceOrder'||self.param.viewDataTable=='ecommerceAbandonedCart'||self.param.viewDataTable=='graphEvolution'){$('.limitSelection ul',domElem).hide();for(var i=0;i<numbers.length;i++){$('.limitSelection ul',domElem).append('<li value="'+numbers[i]+'"><span>'+numbers[i]+'</span></li>');}
$('.limitSelection ul li:last',domElem).addClass('last');if(!self.isEmpty){var show=function(){$('.limitSelection ul',domElem).show();$('.limitSelection',domElem).addClass('visible');$(document).on('mouseup.limitSelection',function(e){if((!$(e.target).parents('.limitSelection').length||$(e.target).parents('.limitSelection')!=$('.limitSelection',domElem))&&!$(e.target).is('.limitSelection')){hide();}});}
var hide=function(){$('.limitSelection ul',domElem).hide();$('.limitSelection',domElem).removeClass('visible');$(document).off('mouseup.limitSelection');}
$('.limitSelection div',domElem).on('click',function(){$('.limitSelection',domElem).is('.visible')?hide():show();});$('.limitSelection ul li',domElem).on('click',function(event){var limit=parseInt($(event.target).text());hide();if(limit!=self.param[limitParamName]){setLimitValue(self.param,limit);$('.limitSelection>div>span',domElem).text(limit);self.reloadAjaxDataTable();var data={};data[limitParamName]=self.param[limitParamName];self.notifyWidgetParametersChange(domElem,data);}});}
else{$('.limitSelection',domElem).toggleClass('disabled');}}
else{$('.limitSelection',domElem).hide();}},handleSort:function(domElem){var self=this;function getSortImageSrc(){var imageSortSrc=false;if(currentIsSubDataTable){if(self.param.filter_sort_order=='asc'){imageSortSrc='themes/default/images/sort_subtable_asc.png';}else{imageSortSrc='themes/default/images/sort_subtable_desc.png';}}else{if(self.param.filter_sort_order=='asc'){imageSortSrc='themes/default/images/sortasc.png';}else{imageSortSrc='themes/default/images/sortdesc.png';}}
return imageSortSrc;}
if(self.param.enable_sort){$('.sortable',domElem).off('click.dataTableSort').on('click.dataTableSort',function(){$(this).off('click.dataTableSort');self.onClickSort(this);});if(self.param.filter_sort_column!=''){var currentIsSubDataTable=$(domElem).parent().hasClass('cellSubDataTable');var imageSortSrc=getSortImageSrc();var imageSortWidth=16;var imageSortHeight=16;$(".sortable#"+self.param.filter_sort_column+' #thDIV',domElem).parent().addClass('columnSorted').prepend('<div id="sortIconContainer"><img id="sortIcon" width="'+imageSortWidth+'" height="'+imageSortHeight+'" src="'+imageSortSrc+'" /></div>');}}},handleSearchBox:function(domElem,callbackSuccess){var self=this;var currentPattern=self.param.filter_pattern;if(typeof self.param.filter_pattern!="undefined"&&self.param.filter_pattern.length>0){currentPattern=self.param.filter_pattern;}
else if(typeof self.param.filter_pattern_recursive!="undefined"&&self.param.filter_pattern_recursive.length>0){currentPattern=self.param.filter_pattern_recursive;}
else{currentPattern='';}
currentPattern=piwikHelper.htmlDecode(currentPattern);$('.dataTableSearchPattern',domElem).show().each(function(){$('#keyword',this).on("keyup",function(e){if(isEnterKey(e)){$(this).siblings(':submit').submit();}}).val(currentPattern);$(':submit',this).submit(function(){var keyword=$(this).siblings('#keyword').val();self.param.filter_offset=0;if(self.param.search_recursive){self.param.filter_column_recursive='label';self.param.filter_pattern_recursive=keyword;}
else{self.param.filter_column='label';self.param.filter_pattern=keyword;}
delete self.param.totalRows;self.reloadAjaxDataTable(true,callbackSuccess);});$(':submit',this).click(function(){$(this).submit();});if(currentPattern){var target=this;var clearImg=$('<span style="position: relative;">\
       <img src="plugins/CoreHome/templates/images/reset_search.png" style="position: absolute; top: 4px; left: -15px; cursor: pointer; display: inline;" title="Clear" />\
       </span>').click(function(){$('#keyword',target).val('');$(':submit',target).submit();});$('#keyword',this).after(clearImg);}});},handleOffsetInformation:function(domElem){var self=this;$('.dataTablePages',domElem).each(function(){var offset=1+Number(self.param.filter_offset);var offsetEnd=Number(self.param.filter_offset)+Number(self.param.filter_limit);var totalRows=Number(self.param.totalRows);var offsetEndDisp=offsetEnd;if(self.param.keep_summary_row==1)--totalRows;if(offsetEnd>totalRows)offsetEndDisp=totalRows;if(totalRows!=0){var str=sprintf(_pk_translate('CoreHome_PageOf_js'),offset+'-'+offsetEndDisp,totalRows);$(this).text(str);}});$('.dataTableNext',domElem).each(function(){var offsetEnd=Number(self.param.filter_offset)
+Number(self.param.filter_limit);var totalRows=Number(self.param.totalRows);if(self.param.keep_summary_row==1)--totalRows;if(offsetEnd<totalRows){$(this).css('display','inline');}}).click(function(){$(this).off('click');self.param.filter_offset=Number(self.param.filter_offset)+Number(self.param.filter_limit);self.reloadAjaxDataTable();});$('.dataTablePrevious',domElem).each(function(){var offset=1+Number(self.param.filter_offset);if(offset!=1){$(this).css('display','inline');}}).click(function(){$(this).off('click');var offset=Number(self.param.filter_offset)-Number(self.param.filter_limit);if(offset<0){offset=0;}
self.param.filter_offset=offset;self.param.previous=1;self.reloadAjaxDataTable();});},handleEvolutionAnnotations:function(domElem){var self=this;if(self.param.viewDataTable=='graphEvolution'&&$('.annotationView',domElem).length>0){piwik.annotations.api.getEvolutionIcons(self.param.idSite,self.param.date,self.param.period,self.param['evolution_'+self.param.period+'_last_n'],function(response){var annotations=$(response),datatableFeatures=$('.dataTableFeatures',domElem),noteSize=16,annotationAxisHeight=30;annotations.css({top:-datatableFeatures.height()-annotationAxisHeight+noteSize/2,left:6});piwik.annotations.placeEvolutionIcons(annotations,domElem);datatableFeatures.append(annotations);$('.piwik-graph',domElem).on('resizeGraph',function(){piwik.annotations.placeEvolutionIcons(annotations,domElem);});$('span',annotations).hover(function(){$(this).css('opacity',1);},function(){if($(this).attr('data-count')==0)
{$(this).css('opacity',0);}});$('span',annotations).click(function(){var spanSelf=$(this),date=spanSelf.attr('data-date'),oldDate=$('.annotation-manager',domElem).attr('data-date');if(date){var period=self.param.period;if(period=='range'){period='day';}
piwik.annotations.showAnnotationViewer(domElem,self.param.idSite,date,period,undefined,function(manager){manager.attr('data-is-range',0);$('.annotationView img',domElem).attr('title',_pk_translate('Annotations_IconDesc_js'));var viewAndAdd=_pk_translate('Annotations_ViewAndAddAnnotations_js'),hideNotes=_pk_translate('Annotations_HideAnnotationsFor_js');if(oldDate){$('span',annotations).each(function(){if($(this).attr('data-date')==oldDate){$(this).attr('title',viewAndAdd.replace("%s",oldDate));return false;}});}
if(manager.is(':hidden')){spanSelf.attr('title',viewAndAdd.replace("%s",date));}
else{spanSelf.attr('title',hideNotes.replace("%s",date));}});}});var runningAnimation=null;domElem.on('mouseenter','.annotation',function(e){var date=$(this).attr('data-date');var icon=$();$('span',annotations).each(function(){if($(this).attr('data-date')==date){icon=$('img',this);return false;}});if(icon[0]==runningAnimation)
{return;}
$('span',annotations).each(function(){$('img',this).removeAttr('style');});icon.effect("bounce",{times:1,distance:10},1000);runningAnimation=icon[0];});domElem.on('mouseleave','.annotations',function(e){runningAnimation=null;});});}},handleAnnotationsButton:function(domElem){var self=this;if(self.param.idSubtable)
{return;}
$('.annotationView',domElem).click(function(){var annotationManager=$('.annotation-manager',domElem);if(annotationManager.length>0&&annotationManager.attr('data-is-range')==1){if(annotationManager.is(':hidden')){annotationManager.slideDown('slow');$('img',this).attr('title',_pk_translate('Annotations_IconDescHideNotes_js'));}
else{annotationManager.slideUp('slow');$('img',this).attr('title',_pk_translate('Annotations_IconDesc_js'));}}
else{var lastN=self.param['evolution_'+self.param.period+'_last_n'];piwik.annotations.showAnnotationViewer(domElem,self.param.idSite,self.param.date,self.param.period,lastN,function(manager){manager.attr('data-is-range',1);});$('img',this).attr('title',_pk_translate('Annotations_IconDescHideNotes_js'));}});},handleExportBox:function(domElem){var self=this;if(self.param.idSubtable){return;}
$('.dataTableFooterIconsShow',domElem).show().hover(function(){$(this).fadeOut('slow');$('.exportToFormatIcons',$(this).parent()).show('slow');},function(){});self.jsViewDataTable=$('.dataTableFooterWrap',domElem).attr('var');$('.tableAllColumnsSwitch a',domElem).show().click(function(){self.setActiveIcon(this,domElem);var viewDataTable=$(this).attr('format');self.param.viewDataTable=viewDataTable;delete self.param.enable_filter_excludelowpop;delete self.param.filter_sort_column;delete self.param.filter_sort_order;delete columns;self.reloadAjaxDataTable();self.notifyWidgetParametersChange($(this),{viewDataTable:self.param.viewDataTable});})
$('.tableGraphViews a',domElem).click(function(){var viewDataTable=$(this).attr('format');self.setActiveIcon(this,domElem);var filters=self.resetAllFilters();self.param.flat=filters.flat;self.param.columns=filters.columns;self.param.viewDataTable=viewDataTable;self.reloadAjaxDataTable();self.notifyWidgetParametersChange($(this),{viewDataTable:self.param.viewDataTable});});self.currentGraphViewIcon=0;self.graphViewEnabled=0;self.graphViewStartingThreads=0;self.graphViewStartingKeep=false;$('.tableGraphCollapsed a',domElem).each(function(i){if(self.jsViewDataTable==$(this).attr('var')){self.currentGraphViewIcon=i;self.graphViewEnabled=true;}}).each(function(i){if(self.currentGraphViewIcon!=i)$(this).hide();});$('.tableGraphCollapsed',domElem).hover(function(){if(self.graphViewStartingThreads>0)return self.graphViewStartingKeep=true;$(this).addClass('tableIconsGroupActive');$('a',this).each(function(i){if(self.currentGraphViewIcon!=i||self.graphViewEnabled){self.graphViewStartingThreads++;}
if(self.currentGraphViewIcon!=i){$(this).show('fast',function(){self.graphViewStartingThreads--});}
else if(self.graphViewEnabled){$('.dataTableFooterActiveItem',domElem).animate({left:$(this).parent().position().left+i*(this.offsetWidth+1)},"fast",function(){self.graphViewStartingThreads--});}});self.exportToFormatHide(domElem);},function(){if(self.graphViewStartingKeep)return self.graphViewStartingKeep=false;$('a',this).each(function(i){if(self.currentGraphViewIcon!=i){$(this).hide('fast');}
else if(self.graphViewEnabled){$('.dataTableFooterActiveItem',domElem).animate({left:$(this).parent().position().left},"fast");}});$(this).removeClass('tableIconsGroupActive');});self.exportToFormat=null;$('.exportToFormatIcons a',domElem).click(function(){self.exportToFormat={};self.exportToFormat.lastActiveIcon=self.setActiveIcon(this,domElem);self.exportToFormat.target=$(this).parent().siblings('.exportToFormatItems').show('fast');self.exportToFormat.obj=$(this).hide();});$('body').on('mouseup',function(e){if(self.exportToFormat){self.exportToFormatHide(domElem);}});$('.exportToFormatItems a',domElem).click(function(){$(this).attr('href',function(){return $(this).attr('href')+'&token_auth='+piwik.token_auth;})}).attr('href',function(){var format=$(this).attr('format');var method=$(this).attr('methodToCall');var filter_limit=$(this).attr('filter_limit');var segment=self.param.segment;var label=self.param.label;var idGoal=self.param.idGoal;var param_date=self.param.date;var date=$(this).attr('date');if(typeof date!='undefined'){param_date=date;}
if(typeof self.param.dateUsedInGraph!='undefined'){param_date=self.param.dateUsedInGraph;}
var period=self.param.period;if(format=='RSS'&&self.param.period=='range'){period='day';}
var str='index.php?module=API'
+'&method='+method
+'&format='+format
+'&idSite='+self.param.idSite
+'&period='+period
+'&date='+param_date
+(typeof self.param.filter_pattern!="undefined"?'&filter_pattern='+self.param.filter_pattern:'')
+(typeof self.param.filter_pattern_recursive!="undefined"?'&filter_pattern_recursive='+self.param.filter_pattern_recursive:'');if(typeof self.param.flat!="undefined"){str+='&flat='+(self.param.flat==0?'0':'1');if(typeof self.param.include_aggregate_rows!="undefined"&&self.param.include_aggregate_rows){str+='&include_aggregate_rows=1';}}else{str+='&expanded=1';}
if(format=='CSV'||format=='TSV'||format=='RSS'){str+='&translateColumnNames=1&language='+piwik.language;}
if(typeof segment!='undefined'){str+='&segment='+segment;}
if(typeof idGoal!='undefined'&&idGoal!='-1'){str+='&idGoal='+idGoal;}
if(filter_limit){str+='&filter_limit='+filter_limit;}
if(label){if(self.param.is_multi_evolution){label=label.split(',');}
if(label instanceof Array){for(var i=0;i!=label.length;++i){str+='&label[]='+encodeURIComponent(label[i]);}}else{str+='&label='+encodeURIComponent(label);}}
return str;});$('.dataTableFooterWrap a.tableIcon',domElem).each(function(){if(self.jsViewDataTable==$(this).attr('var'))self.setActiveIcon(this,domElem);});},exportToFormatHide:function(domElem,noAnimation){var self=this;if(self.exportToFormat){self.setActiveIcon(self.exportToFormat.lastActiveIcon,domElem);var animationSpeed=noAnimation?0:'fast';self.exportToFormat.target.hide(animationSpeed);self.exportToFormat.obj.show(animationSpeed);self.exportToFormat=null;}},handleConfigurationBox:function(domElem,callbackSuccess){var self=this;if(typeof self.parentId!="undefined"&&self.parentId!=''){return;}
if((typeof self.numberOfSubtables=='undefined'||self.numberOfSubtables==0)&&(typeof self.param.flat=='undefined'||self.param.flat!=1)){$('.dataTableFlatten',domElem).parent().remove();}
var ul=$('div.tableConfiguration ul',domElem);function hideConfigurationIcon(){$('div.tableConfiguration',domElem).remove();}
if(ul.find('li').size()==0){hideConfigurationIcon();return;}
var icon=$('a.tableConfigurationIcon',domElem);icon.click(function(){return false;});var iconHighlighted=false;ul.find('li:first').addClass('first');ul.find('li:last').addClass('last');ul.prepend('<li class="firstDummy"></li>');var open=function(){self.exportToFormatHide(domElem,true);ul.addClass('open');icon.css('opacity',1);};var close=function(){ul.removeClass('open');icon.css('opacity',icon.hasClass('highlighted')?.85:.6);};$('div.tableConfiguration',domElem).hover(open,close);var generateClickCallback=function(paramName,callbackAfterToggle){return function(){close();self.param[paramName]=1-self.param[paramName];self.param.filter_offset=0;delete self.param.totalRows;if(callbackAfterToggle)callbackAfterToggle();self.reloadAjaxDataTable(true,callbackSuccess);var data={};data[paramName]=self.param[paramName];self.notifyWidgetParametersChange(domElem,data);};};var getText=function(text,addDefault){text=_pk_translate(text);if(text.indexOf('%s')>0){text=text.replace('%s','<br /><span class="action">&raquo; ');if(addDefault)text+=' ('+_pk_translate('CoreHome_Default_js')+')';text+='</span>';}
return text;};var setText=function(el,paramName,textA,textB){if(typeof self.param[paramName]!='undefined'&&self.param[paramName]==1){$(el).html(getText(textA,true));iconHighlighted=true;}
else{self.param[paramName]=0;$(el).html(getText(textB));}};$('.dataTableExcludeLowPopulation',domElem).each(function(){if(typeof self.param.enable_filter_excludelowpop=='undefined'){self.param.enable_filter_excludelowpop=0;}
if(Number(self.param.enable_filter_excludelowpop)!=0){var string=getText('CoreHome_IncludeRowsWithLowPopulation_js',true);self.param.enable_filter_excludelowpop=1;iconHighlighted=true;}
else{var string=getText('CoreHome_ExcludeRowsWithLowPopulation_js');self.param.enable_filter_excludelowpop=0;}
$(this).html(string);}).click(generateClickCallback('enable_filter_excludelowpop'));$('.dataTableFlatten',domElem).each(function(){setText(this,'flat','CoreHome_UnFlattenDataTable_js','CoreHome_FlattenDataTable_js');}).click(generateClickCallback('flat'));$('.dataTableIncludeAggregateRows',domElem).each(function(){setText(this,'include_aggregate_rows','CoreHome_DataTableExcludeAggregateRows_js','CoreHome_DataTableIncludeAggregateRows_js');}).click(generateClickCallback('include_aggregate_rows',function(){if(self.param.include_aggregate_rows==1){self.param.filter_sort_column='';self.notifyWidgetParametersChange(domElem,{filter_sort_column:''});}}));if(iconHighlighted){icon.addClass('highlighted');}
close();if(!iconHighlighted&&!(self.param.viewDataTable=='table'||self.param.viewDataTable=='tableAllColumns'||self.param.viewDataTable=='tableGoals')){hideConfigurationIcon();return;}
if(document.all&&!window.opera&&window.XMLHttpRequest){window.setTimeout(function(){open();var width=0;ul.find('li').each(function(){width=Math.max(width,$(this).width());}).width(width);close();},400);}},setActiveIcon:function(obj,domElem){if(!obj)return false;var lastActiveIcon=this.lastActiveIcon;if(lastActiveIcon){$(lastActiveIcon).removeClass("activeIcon");}
$(obj).addClass("activeIcon");this.lastActiveIcon=obj;var target=$('.dataTableFooterActiveItem',domElem);setTimeout(function(){target.css({left:$(obj).position().left});},100);return lastActiveIcon;},notifyWidgetParametersChange:function(domWidget,parameters){var widget=$(domWidget).parents('[widgetId]');widget.trigger('setParameters',parameters);},truncate:function(domElemToTruncate,truncationOffset){var self=this;domElemToTruncate=$(domElemToTruncate);if(typeof domElemToTruncate.data('originalText')!='undefined'){return;}
domElemToTruncate.data('originalText',domElemToTruncate.text());if(typeof truncationOffset=='undefined'){truncationOffset=0;}
var truncationLimit=50;if(typeof self.param.idSubtable=='undefined'&&self.param.viewDataTable=='tableAllColumns'){truncationLimit=25;}
truncationLimit+=truncationOffset;domElemToTruncate.truncate(truncationLimit);var tooltipElem=$('.truncated',domElemToTruncate),customToolTipText=domElemToTruncate.attr('title');if(customToolTipText){if(tooltipElem[0]){tooltipElem.removeAttr('title');}
tooltipElem=domElemToTruncate;tooltipElem.attr('title',customToolTipText);}
tooltipElem.tooltip({track:true,show:false,hide:false});},applyCosmetics:function(domElem){var self=this;$("th:first-child",domElem).addClass('label');$("td:first-child:odd",domElem).addClass('label labeleven');$("td:first-child:even",domElem).addClass('label labelodd');$("tr:odd td",domElem).slice(1).addClass('columnodd');$("tr:even td",domElem).slice(1).addClass('columneven');$('td span.label',domElem).each(function(){self.truncate($(this));});},handleSubDataTable:function(domElem){var self=this;this.numberOfSubtables=$('tr.subDataTable',domElem).click(function(){var idSubTable=$(this).attr('id');var divIdToReplaceWithSubTable='subDataTable_'+idSubTable;if(typeof self.loadedSubDataTable[divIdToReplaceWithSubTable]=="undefined"){var numberOfColumns=$(this).children().length;$(this).after('<tr>'+'<td colspan="'+numberOfColumns+'" class="cellSubDataTable">'+'<div id="'+divIdToReplaceWithSubTable+'">'+'<span class="loadingPiwik" style="display:inline"><img src="themes/default/images/loading-blue.gif" />'+_pk_translate('General_Loading_js')+'</span>'+'</div>'+'</td>'+'</tr>');var savedActionVariable=self.param.action;var filtersToRestore=self.resetAllFilters();self.param.enable_filter_excludelowpop=filtersToRestore.enable_filter_excludelowpop;self.param.idSubtable=idSubTable;self.param.action=self.param.controllerActionCalledWhenRequestSubTable;delete self.param.totalRows;self.reloadAjaxDataTable(false,function(response){self.dataTableLoaded(response,divIdToReplaceWithSubTable);});self.param.action=savedActionVariable;delete self.param.idSubtable;self.restoreAllFilters(filtersToRestore);self.loadedSubDataTable[divIdToReplaceWithSubTable]=true;$(this).next().toggle();$(this).find('div.dataTableRowActions').hide();}
$(this).next().toggle();self.repositionRowActions($(this));}).size();},handleColumnDocumentation:function(domElem){if($('#dashboard').size()>0){return;}
var self=this;$('th:has(.columnDocumentation)',domElem).each(function(){var th=$(this);var tooltip=th.find('.columnDocumentation');tooltip.next().hover(function(){var left=(-1*tooltip.outerWidth()/2)+th.width()/2;var top=-1*(tooltip.outerHeight()+10);if(th.next().size()==0){left=(-1*tooltip.outerWidth())+th.width()+
parseInt(th.css('padding-right'),10);}
tooltip.css({marginLeft:left,marginTop:top});tooltip.stop(true,true).fadeIn(250);},function(){$(this).prev().stop(true,true).fadeOut(400);});});},handleReportDocumentation:function(domElem){if($('#dashboard').size()>0||$('.widgetContent').size()>0||$('.widget').size()>0){return;}
domElem=$(domElem);var doc=domElem.find('.reportDocumentation');var h2=this._findReportHeader(domElem);if(doc.size()==0||doc.children().size()==0)
{if(h2&&h2.size()>0){h2.find('a.reportDocumentationIcon').addClass('hidden');}
return;}
var icon=$('<a href="#"></a>');var docShown=false;icon.click(function(){if(docShown){doc.stop(true,true).fadeOut(250);}
else{var widthOrientation=domElem.find('table, canvas, object').eq(0);if(widthOrientation.size()>0){var width=Math.min(widthOrientation.width(),doc.parent().innerWidth());doc.css('width',(width-2)+'px');}
doc.stop(true,true).fadeIn(250);}
docShown=!docShown;return false;});icon.addClass('reportDocumentationIcon');if(h2&&h2.size()>0){var existingIcon=h2.find('a.reportDocumentationIcon');if(existingIcon.size()>0){existingIcon.replaceWith(icon);}
else{h2.append('&nbsp;&nbsp;&nbsp;');h2.append(icon);h2.hover(function(){$(this).find('a.reportDocumentationIcon').show();},function(){$(this).find('a.reportDocumentationIcon').hide();}).click(function(){$(this).find('a.reportDocumentationIcon').click();}).css('cursor','pointer');}}
else{}},handleRowActions:function(domElem){this.doHandleRowActions(domElem.find('table > tbody > tr'));},handleCellTooltips:function(domElem){domElem.find('span.cell-tooltip').tooltip({track:true,items:'span',content:function(){return $(this).data('tooltip');},show:false,hide:false,tooltipClass:'small'});},handleRelatedReports:function(domElem){var self=this,hideShowRelatedReports=function(thisReport){$('span',$(thisReport).parent().parent()).each(function(){if(thisReport==this)
$(this).hide();else
$(this).show();});},thisReport=$('.datatableRelatedReports span:hidden',domElem)[0];hideShowRelatedReports(thisReport);$('.datatableRelatedReports span',domElem).each(function(){var clicked=this;$(this).unbind('click').click(function(e){var url=$(this).attr('href');var menuItem=null;$("#root").find(">ul.nav a").each(function(){if($(this).attr('href')==url){menuItem=this;return false}});if(menuItem){$(menuItem).click();return;}
self.resetAllFilters();var newParams=broadcast.getValuesFromUrl(url);for(var key in newParams){self.param[key]=decodeURIComponent(newParams[key]);}
self.reloadAjaxDataTable(true,function(newReport){var newDomElem=self.dataTableLoaded(newReport,self.workingDivId);hideShowRelatedReports(clicked);var h2=self._findReportHeader(newDomElem);if(h2)
h2.text($(clicked).text());});});});},handleTriggeredEvents:function(domElem){var self=this;$(domElem).bind('reload',function(e,paramOverride){paramOverride=paramOverride||{};for(var name in paramOverride){self.param[name]=paramOverride[name];};self.reloadAjaxDataTable(true);});},doHandleRowActions:function(trs){var self=this;var availableActionsForReport=DataTable_RowActions_Registry.getAvailableActionsForReport(self.param);if(availableActionsForReport.length==0){return;}
var actionInstances={};for(var i=0;i<availableActionsForReport.length;i++){var action=availableActionsForReport[i];actionInstances[action.name]=action.createInstance(self);}
trs.each(function(){var tr=$(this);var td=tr.find('td:first');for(var i=0;i<availableActionsForReport.length;i++){var action=availableActionsForReport[i];actionInstances[action.name].initTr(tr);}
td.css('minWidth','145px');var actionsDom=null;tr.hover(function(){if(actionsDom===null){actionsDom=self.createRowActions(availableActionsForReport,tr,actionInstances);td.prepend(actionsDom);}
self.repositionRowActions(tr);if($(window).width()>=600){actionsDom.show();}},function(){if(actionsDom!==null){actionsDom.hide();}});});},createRowActions:function(availableActionsForReport,tr,actionInstances){var container=$(document.createElement('div')).addClass('dataTableRowActions');for(var i=availableActionsForReport.length-1;i>=0;i--){var action=availableActionsForReport[i];if(!action.isAvailableOnRow(this.param,tr)){continue;}
var actionEl=$(document.createElement('a')).attr({href:'#'}).addClass('action'+action.name);actionEl.append($(document.createElement('img')).attr({src:action.dataTableIcon}));container.append(actionEl);if(i==availableActionsForReport.length-1){actionEl.addClass('leftmost');}
if(i==0){actionEl.addClass('rightmost');}
actionEl.click((function(action,el){return function(e){$(this).blur().tooltip('close');container.hide();if(typeof actionInstances[action.name].onClick=='function'){return actionInstances[action.name].onClick(el,tr,e);}
actionInstances[action.name].trigger(tr,e);return false;}})(action,actionEl));if(typeof action.dataTableIconHover!='undefined'){actionEl.append($(document.createElement('img')).attr({src:action.dataTableIconHover}).hide());actionEl.hover(function(){var img=$(this).find('img');img.eq(0).hide();img.eq(1).show();},function(){var img=$(this).find('img');img.eq(1).hide();img.eq(0).show();});}
if(typeof action.dataTableIconTooltip!='undefined'){actionEl.tooltip({track:true,items:'a',content:'<h3>'+action.dataTableIconTooltip[0]+'</h3>'+action.dataTableIconTooltip[1],tooltipClass:'rowActionTooltip',show:false,hide:false});}}
return container;},repositionRowActions:function(tr){var td=tr.find('td:first');var actions=tr.find('div.dataTableRowActions');actions.height(tr.innerHeight()-2);actions.css('marginLeft',(td.width()+5-actions.outerWidth())+'px');},_findReportHeader:function(domElem){var h2=false;if(domElem.prev().is('h2')){h2=domElem.prev();}
else if(this.param.viewDataTable=='tableGoals'){h2=$('#titleGoalsByDimension');}
else if($('h2',domElem)){h2=$('h2',domElem);}
return h2;}};actionDataTable.prototype=new dataTable;actionDataTable.prototype.constructor=actionDataTable;function actionDataTable(){dataTable.call(this);this.parentAttributeParent='';this.parentId='';this.disabledRowDom={};}
actionDataTable.prototype={cleanParams:dataTable.prototype.cleanParams,reloadAjaxDataTable:dataTable.prototype.reloadAjaxDataTable,handleConfigurationBox:dataTable.prototype.handleConfigurationBox,handleSearchBox:dataTable.prototype.handleSearchBox,handleAnnotationsButton:dataTable.prototype.handleAnnotationsButton,handleExportBox:dataTable.prototype.handleExportBox,handleSort:dataTable.prototype.handleSort,handleColumnDocumentation:dataTable.prototype.handleColumnDocumentation,handleReportDocumentation:dataTable.prototype.handleReportDocumentation,doHandleRowActions:dataTable.prototype.doHandleRowActions,createRowActions:dataTable.prototype.createRowActions,repositionRowActions:dataTable.prototype.repositionRowActions,onClickSort:dataTable.prototype.onClickSort,truncate:dataTable.prototype.truncate,handleOffsetInformation:dataTable.prototype.handleOffsetInformation,setActiveIcon:dataTable.prototype.setActiveIcon,resetAllFilters:dataTable.prototype.resetAllFilters,restoreAllFilters:dataTable.prototype.restoreAllFilters,exportToFormatHide:dataTable.prototype.exportToFormatHide,handleLimit:dataTable.prototype.handleLimit,notifyWidgetParametersChange:dataTable.prototype.notifyWidgetParametersChange,handleRelatedReports:dataTable.prototype.handleRelatedReports,handleTriggeredEvents:dataTable.prototype.handleTriggeredEvents,handleCellTooltips:dataTable.prototype.handleCellTooltips,_findReportHeader:dataTable.prototype._findReportHeader,init:function(workingDivId,domElem){if(typeof domElem=="undefined"||domElem.length==0)
{domElem=$('#'+workingDivId);}
this.workingDivId=workingDivId;this.bindEventsAndApplyStyle(domElem);this.initialized=true;domElem.data('piwikDataTable',this);},bindEventsAndApplyStyle:function(domElem){var self=this;self.cleanParams();if(!self.param.filter_pattern_recursive){self.numberOfSubtables=$('tr.subActionsDataTable.rowToProcess').click(function(){self.onClickActionSubDataTable(this)}).size();}
self.applyCosmetics(domElem);self.handleRowActions(domElem);self.handleLimit(domElem);self.handleAnnotationsButton(domElem);self.handleExportBox(domElem);self.handleSort(domElem);self.handleOffsetInformation(domElem);if(self.workingDivId!=undefined){var dataTableLoadedProxy=function(response){self.dataTableLoaded(response,self.workingDivId);};self.handleSearchBox(domElem,dataTableLoadedProxy);self.handleConfigurationBox(domElem,dataTableLoadedProxy);}
self.handleColumnDocumentation(domElem);self.handleReportDocumentation(domElem);self.handleRelatedReports(domElem);self.handleTriggeredEvents(domElem);self.handleCellTooltips(domElem);},applyCosmetics:function(domElem){var self=this;$('tr.subActionsDataTable.rowToProcess').css('font-weight','bold');$("th:first-child",domElem).addClass('label');$('td span.label',domElem).each(function(){self.truncate($(this));});var imagePlusMinusWidth=12;var imagePlusMinusHeight=12;$('tr.subActionsDataTable.rowToProcess td:first-child').each(function(){$(this).prepend('<img width="'+imagePlusMinusWidth+'" height="'+imagePlusMinusHeight+'" class="plusMinus" src="" />');if(self.param.filter_pattern_recursive){setImageMinus(this);}
else{setImagePlus(this);}});$('tr.rowToProcess').each(function(){var style=$(this).prev().attr('class');var currentStyle=$(this).attr('class');if((typeof currentStyle!='undefined')&&currentStyle.indexOf('level')>=0){}
else{var level=getNextLevelFromClass(style);$(this).addClass('level'+level);}
$(this).prop('parent',function(){return self.parentAttributeParent+' '+self.parentId;});$("td:first-child:odd",this).addClass('label labeleven');$("td:first-child:even",this).addClass('label labelodd');});},handleRowActions:function(domElem){var rowsToProcess=$('tr.rowToProcess').removeClass('rowToProcess');this.doHandleRowActions(rowsToProcess);},onClickActionSubDataTable:function(domElem){var self=this;var idSubTable=$(domElem).attr('id');var divIdToReplaceWithSubTable='subDataTable_'+idSubTable;var NextStyle=$(domElem).next().attr('class');var CurrentStyle=$(domElem).attr('class');var currentRowLevel=getLevelFromClass(CurrentStyle);var nextRowLevel=getLevelFromClass(NextStyle);if(currentRowLevel>=nextRowLevel){$(domElem).off('click');self.disabledRowDom=$(domElem);var numberOfColumns=$(domElem).children().length;$(domElem).after('\
   <tr id="'+divIdToReplaceWithSubTable+'" class="cellSubDataTable">\
    <td colspan="'+numberOfColumns+'">\
      <span class="loadingPiwik" style="display:inline"><img src="themes/default/images/loading-blue.gif" /> Loading...</span>\
    </td>\
   </tr>\
   ');var savedActionVariable=self.param.action;var filtersToRestore=self.resetAllFilters();this.param['filter_sort_column']=filtersToRestore['filter_sort_column'];this.param['filter_sort_order']=filtersToRestore['filter_sort_order'];this.param['enable_filter_excludelowpop']=filtersToRestore['enable_filter_excludelowpop'];self.param.idSubtable=idSubTable;self.param.action=self.param.controllerActionCalledWhenRequestSubTable;self.reloadAjaxDataTable(false,function(resp){self.actionsSubDataTableLoaded(resp);self.repositionRowActions($(domElem));});self.param.action=savedActionVariable;self.restoreAllFilters(filtersToRestore);delete self.param.idSubtable;}
else{var plusDetected=$('td img.plusMinus',domElem).attr('src').indexOf('plus')>=0;$(domElem).siblings().each(function(){var parents=$(this).prop('parent').split(' ');if(parents){if(parents.indexOf(idSubTable)>=0||parents.indexOf('subDataTable_'+idSubTable)>=0){if(plusDetected){$(this).css('display','');var NextStyle=$(this).next().attr('class');var CurrentStyle=$(this).attr('class');var currentRowLevel=getLevelFromClass(CurrentStyle);var nextRowLevel=getLevelFromClass(NextStyle);if(currentRowLevel<nextRowLevel)
setImageMinus(this);}
else{$(this).css('display','none');}
self.repositionRowActions($(domElem));}}});}
var plusDetected=$('td img.plusMinus',domElem).attr('src').indexOf('plus')>=0;if(plusDetected){setImageMinus(domElem);}
else{setImagePlus(domElem);}},dataTableLoaded:function(response,workingDivId){var content=$(response);var idToReplace=workingDivId||$(content).attr('id');self.parentAttributeParent='';self.parentId='';var dataTableSel=$('#'+idToReplace);var oldReportsElem=$('.datatableRelatedReports',dataTableSel);$('.datatableRelatedReports',content).replaceWith(oldReportsElem);dataTableSel.replaceWith(content);piwikHelper.lazyScrollTo(content[0],400);return content;},actionsSubDataTableLoaded:function(response){var self=this;var idToReplace=$(response).attr('id');var response=$(response).filter('tr').slice(1).addClass('rowToProcess');self.parentAttributeParent=$('tr#'+idToReplace).prev().prop('parent');self.parentId=idToReplace;$('tr#'+idToReplace).after(response).remove();var missingColumns=(response.prev().find('td').size()-response.find('td').size());for(var i=0;i<missingColumns;i++){response.append('<td>-</td>');}
var re=/subDataTable_(\d+)/;var ok=re.exec(self.parentId);if(ok){self.parentId=ok[1];}
self.init(self.workingDivId,$('#'+idToReplace));self.disabledRowDom.click(function(){self.onClickActionSubDataTable(this)});}};function getLevelFromClass(style){if(!style||typeof style=="undefined")return 0;var currentLevelIndex=style.indexOf('level');var currentLevel=0;if(currentLevelIndex>=0){currentLevel=Number(style.substr(currentLevelIndex+5,1));}
return currentLevel;}
function getNextLevelFromClass(style){if(!style||typeof style=="undefined")return 0;var currentLevel=getLevelFromClass(style);var newLevel=currentLevel;if(style.indexOf('rowToProcess')<0){newLevel=currentLevel+1;}
return newLevel;}
function setImageMinus(domElem){$('img.plusMinus',domElem).attr('src','themes/default/images/minus.png');}
function setImagePlus(domElem){$('img.plusMinus',domElem).attr('src','themes/default/images/plus.png');}

var DataTable_RowActions_Registry={registry:[],register:function(action){var createInstance=action.createInstance;action.createInstance=function(dataTable,param){var instance=createInstance(dataTable,param);instance.actionName=action.name;return instance;};this.registry.push(action);},getAvailableActionsForReport:function(dataTableParams,tr){if(dataTableParams.disable_row_actions=='1'){return[];}
var available=[];for(var i=0;i<this.registry.length;i++){if(this.registry[i].isAvailableOnReport(dataTableParams,tr)){available.push(this.registry[i]);}}
available.sort(function(a,b){return b.order-a.order;});return available;},getActionByName:function(name){for(var i=0;i<this.registry.length;i++){if(this.registry[i].name==name){return this.registry[i];}}
return false;}};DataTable_RowActions_Registry.register({name:'RowEvolution',dataTableIcon:'themes/default/images/row_evolution.png',dataTableIconHover:'themes/default/images/row_evolution_hover.png',order:50,dataTableIconTooltip:[_pk_translate('General_RowEvolutionRowActionTooltipTitle_js'),_pk_translate('General_RowEvolutionRowActionTooltip_js')],createInstance:function(dataTable,param){if(dataTable!==null&&typeof dataTable.rowEvolutionActionInstance!='undefined'){return dataTable.rowEvolutionActionInstance;}
if(dataTable===null&&param){var report=param.split(':')[0];var div=$(piwik.DataTableManager.getDataTableByReport(report));if(div.size()>0&&div.data('piwikDataTable')){dataTable=div.data('piwikDataTable');if(typeof dataTable.rowEvolutionActionInstance!='undefined'){return dataTable.rowEvolutionActionInstance;}}}
var instance=new DataTable_RowActions_RowEvolution(dataTable);if(dataTable!==null){dataTable.rowEvolutionActionInstance=instance;}
return instance;},isAvailableOnReport:function(dataTableParams){return(typeof dataTableParams.disable_row_evolution=='undefined'||dataTableParams.disable_row_evolution=="0")&&(typeof dataTableParams.flat=='undefined'||dataTableParams.flat=="0");},isAvailableOnRow:function(dataTableParams,tr){return true;}});function DataTable_RowAction(dataTable){this.dataTable=dataTable;this.trEventName='piwikTriggerRowAction';this.actionName='RowAction';}
DataTable_RowAction.prototype.initTr=function(tr){var self=this;tr.bind(self.trEventName,function(e,params){self.trigger($(this),params.originalEvent,params.label);});};DataTable_RowAction.prototype.trigger=function(tr,e,subTableLabel){var label=this.getLabelFromTr(tr);label=label.trim();if(subTableLabel){var separator=' > ';label+=separator+subTableLabel.trim();}
var subtable=tr.closest('table');if(subtable.is('.subDataTable')){subtable.closest('tr').prev().trigger(this.trEventName,{label:label,originalEvent:e});return;}
if(tr.hasClass('actionsDataTable')||tr.hasClass('subActionsDataTable')){var allClasses=tr.attr('class');var matches=allClasses.match(/level[0-9]+/);var level=parseInt(matches[0].substring(5,matches[0].length),10);if(level>0){var findLevel='level'+(level-1);var ptr=tr;while((ptr=ptr.prev()).size()>0){if(!ptr.hasClass(findLevel)){continue;}
ptr.trigger(this.trEventName,{label:label,originalEvent:e});return;}}}
this.performAction(label,tr,e);};DataTable_RowAction.prototype.getLabelFromTr=function(tr){var label=tr.find('span.label');var value=label.data('originalText');if(!value){value=label.text();}
value=value.trim();return encodeURIComponent(value);};DataTable_RowAction.prototype.openPopover=function(parameter){broadcast.propagateNewPopoverParameter('RowAction',this.actionName+':'+parameter);};broadcast.addPopoverHandler('RowAction',function(param){var paramParts=param.split(':');var rowActionName=paramParts[0];paramParts.shift();param=paramParts.join(':');var rowAction=DataTable_RowActions_Registry.getActionByName(rowActionName);if(rowAction){rowAction.createInstance(null,param).doOpenPopover(param);}});DataTable_RowAction.prototype.performAction=function(label,tr,e){};DataTable_RowAction.prototype.doOpenPopover=function(parameter){};function DataTable_RowActions_RowEvolution(dataTable){this.dataTable=dataTable;this.trEventName='piwikTriggerRowEvolution';this.multiEvolutionRows=[];}
DataTable_RowActions_RowEvolution.launch=function(apiMethod,label){var param='RowEvolution:'+apiMethod+':0:'+label;broadcast.propagateNewPopoverParameter('RowAction',param);};DataTable_RowActions_RowEvolution.prototype=new DataTable_RowAction;DataTable_RowActions_RowEvolution.prototype.performAction=function(label,tr,e){if(e.shiftKey){this.addMultiEvolutionRow(label);return;}
var isMultiRowEvolution='0';this.addMultiEvolutionRow(label);if(this.multiEvolutionRows.length>1){isMultiRowEvolution='1';label=this.multiEvolutionRows.join(',');}
var apiMethod=this.dataTable.param.module+'.'+this.dataTable.param.action;this.openPopover(apiMethod,isMultiRowEvolution,label);};DataTable_RowActions_RowEvolution.prototype.addMultiEvolutionRow=function(label){if($.inArray(label,this.multiEvolutionRows)==-1){this.multiEvolutionRows.push(label);}};DataTable_RowActions_RowEvolution.prototype.openPopover=function(apiMethod,multiRowEvolutionParam,label){var urlParam=apiMethod+':'+multiRowEvolutionParam+':'+label;DataTable_RowAction.prototype.openPopover.apply(this,[urlParam]);};DataTable_RowActions_RowEvolution.prototype.doOpenPopover=function(urlParam){var urlParamParts=urlParam.split(':');var apiMethod=urlParamParts[0];urlParamParts.shift();var multiRowEvolutionParam=urlParamParts[0];urlParamParts.shift();var label=urlParamParts.join(':');this.showRowEvolution(apiMethod,label,multiRowEvolutionParam);};DataTable_RowActions_RowEvolution.prototype.showRowEvolution=function(apiMethod,label,multiRowEvolutionParam){var self=this;var box=Piwik_Popover.showLoading('Row Evolution');box.addClass('rowEvolutionPopover');var requestParams={apiMethod:apiMethod,label:label,disableLink:1};var action;if(multiRowEvolutionParam=='0'){action='getRowEvolutionPopover';}else if(multiRowEvolutionParam=='1'){action='getMultiRowEvolutionPopover';}else{action='getMultiRowEvolutionPopover';requestParams.column=multiRowEvolutionParam;}
var callback=function(html){Piwik_Popover.setContent(html);var title=box.find('div.popover-title');if(title.size()>0){Piwik_Popover.setTitle(title.html());title.remove();}
Piwik_Popover.onClose(function(){self.multiEvolutionRows=[];});if(self.dataTable!==null){box.find('a.rowevolution-startmulti').click(function(){Piwik_Popover.onClose(false);Piwik_Popover.close();return false;});}else{box.find('.compare-container, .rowevolution-startmulti').remove();}
box.find('select.multirowevoltion-metric').change(function(){var metric=$(this).val();Piwik_Popover.onClose(false);self.openPopover(apiMethod,metric,label);return true;});};requestParams.module='CoreHome';requestParams.action=action;var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(requestParams,'get');ajaxRequest.setCallback(callback);ajaxRequest.setFormat('html');ajaxRequest.send(false);};

var Piwik_Popover=(function(){var container=false;var isOpen=false;var closeCallback=false;var createContainer=function(){if(container===false){container=$(document.createElement('div')).attr('id','Piwik_Popover');}};var openPopover=function(title){createContainer();container.dialog({title:title,modal:true,width:'950px',position:['center','center'],resizable:false,autoOpen:true,open:function(event,ui){$('.ui-widget-overlay').on('click.popover',function(){container.dialog('close');});},close:function(event,ui){container.find('div.jqplot-target').trigger('piwikDestroyPlot');container[0].innerHTML='';container.dialog('destroy').remove();globalAjaxQueue.abort();$('.ui-widget-overlay').off('click.popover');isOpen=false;broadcast.propagateNewPopoverParameter(false);if(typeof closeCallback=='function'){closeCallback();closeCallback=false;}}});container.data("uiDialog")._title=function(title){title.html(this.options.title);};isOpen=true;};var centerPopover=function(){if(container!==false){container.dialog({position:['center','center']});}};return{showLoading:function(popoverName,popoverSubject,height){var loading=$(document.createElement('div')).addClass('Piwik_Popover_Loading');var loadingMessage=popoverSubject?translations.General_LoadingPopoverFor_js:translations.General_LoadingPopover_js;loadingMessage=loadingMessage.replace(/%s/,popoverName);var p1=$(document.createElement('p')).addClass('Piwik_Popover_Loading_Name');loading.append(p1.text(loadingMessage));var p2;if(popoverSubject){popoverSubject=piwikHelper.addBreakpointsToUrl(popoverSubject);p1.addClass('Piwik_Popover_Loading_NameWithSubject');p2=$(document.createElement('p')).addClass('Piwik_Popover_Loading_Subject');loading.append(p2.html(popoverSubject));}
if(height){loading.height(height);}
if(!isOpen){openPopover();}
this.setContent(loading);this.setTitle('');if(height){var offset=loading.height()-p1.outerHeight();if(popoverSubject){offset-=p2.outerHeight();}
var spacingEl=$(document.createElement('div'));spacingEl.height(Math.round(offset/2));loading.prepend(spacingEl);}
return container;},addHelpButton:function(helpUrl){if(!isOpen){return;}
var titlebar=container.parent().find('.ui-dialog-titlebar');var button=$(document.createElement('a')).addClass('ui-dialog-titlebar-help');button.attr({href:helpUrl,target:'_blank'});titlebar.append(button);},setTitle:function(titleHtml){container.dialog('option','title',titleHtml);},setContent:function(html){if(typeof closeCallback=='function'){closeCallback();closeCallback=false;}
container[0].innerHTML='';container.html(html);centerPopover();},showError:function(title,message,backLabel){var error=$(document.createElement('div')).addClass('Piwik_Popover_Error');var p=$(document.createElement('p')).addClass('Piwik_Popover_Error_Title');error.append(p.html(title));if(message){p=$(document.createElement('p')).addClass('Piwik_Popover_Error_Message');error.append(p.html(message));}
if(backLabel){var back=$(document.createElement('a')).addClass('Piwik_Popover_Error_Back');back.attr('href','#').click(function(){history.back();return false;});error.append(back.html(backLabel));}
if(!isOpen){openPopover();}
this.setContent(error);},onClose:function(callback){closeCallback=callback;},close:function(){if(isOpen){container.dialog('close');}},createPopupAndLoadUrl:function(url,loadingName){var box=Piwik_Popover.showLoading(loadingName);var callback=function(html){function setPopoverTitleIfOneFoundInContainer(){var title=$('h1,h2',container);if(title.length==1){Piwik_Popover.setTitle(title.text());$(title).hide();}}
Piwik_Popover.setContent(html);setPopoverTitleIfOneFoundInContainer();}
var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(piwikHelper.getArrayFromQueryString(url),'get');ajaxRequest.setCallback(callback);ajaxRequest.setFormat('html');ajaxRequest.send(false);}};})();

function menu(){this.param={};}
menu.prototype={resetTimer:null,overMainLI:function(){$(this).siblings().removeClass('sfHover');$(this).addClass('sfHover');clearTimeout(menu.prototype.resetTimer);},outMainLI:function(){clearTimeout(menu.prototype.resetTimer);menu.prototype.resetTimer=setTimeout(function(){$('.nav>.sfHover').removeClass('sfHover');$('.nav>.sfActive').addClass('sfHover');},2000);},onItemClick:function(item){$('ul.nav').trigger('piwikSwitchPage',item);broadcast.propagateAjax($(item).attr('href').substr(1));return false;},init:function(){this.menuNode=$('.nav');$('.nav li li a').each(function(){$(this).css({width:$(this).width()+30,paddingLeft:0,paddingRight:0});});this.menuNode.find("li:has(ul)").hover(this.overMainLI,this.outMainLI);this.menuNode.find('li').each(function(){var url=$(this).find('a').attr('href').substr(1);var module=broadcast.getValueFromUrl("module",url);var action=broadcast.getValueFromUrl("action",url);var moduleId=broadcast.getValueFromUrl("idGoal",url)||broadcast.getValueFromUrl("idDashboard",url);var main_menu=$(this).parent().hasClass('nav')?true:false;if(main_menu){$(this).attr({id:module});}
else if(moduleId!=''){$(this).attr({id:module+'_'+action+'_'+moduleId});}
else{$(this).attr({id:module+'_'+action});}});},activateMenu:function(module,action,id){this.menuNode.find('li').removeClass('sfHover').removeClass('sfActive');var $li=this.getSubmenuID(module,id,action);var mainLi=$("#"+module);if(!mainLi.length){mainLi=$li.parents('li');}
mainLi.addClass('sfActive').addClass('sfHover');$li.addClass('sfHover');},getSubmenuID:function(module,id,action){var $li='';if(module=='Goals'&&id!=''&&(action!='index')){$li=$("#"+module+"_"+action+"_"+id);}else if(module=='Dashboard'){if(!id)id=1;$li=$("#"+module+"_"+action+"_"+id);}else{$li=$("#"+module+"_"+action);}
return $li;},loadFirstSection:function(){if(broadcast.isHashExists()==false){$('li:first a:first',this.menuNode).click().addClass('sfHover').addClass('sfActive');}}};

$(document).ready(function(){if($('.nav').size()){piwikMenu=new menu();piwikMenu.init();piwikMenu.loadFirstSection();broadcast.init();}});

(function($){Date.prototype.getWeek=function(){var onejan=new Date(this.getFullYear(),0,1),onejan_utc=Date.UTC(this.getFullYear(),0,1),this_utc=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()),daysSinceYearStart=(this_utc-onejan_utc)/86400000;return Math.ceil((daysSinceYearStart+onejan.getDay())/7);}
var currentYear,currentMonth,currentDay,currentDate,currentWeek;function setCurrentDate(dateStr){var splitDate=dateStr.split("-");currentYear=splitDate[0];currentMonth=splitDate[1]-1;currentDay=splitDate[2];currentDate=new Date(currentYear,currentMonth,currentDay);currentWeek=currentDate.getWeek();}
setCurrentDate(piwik.currentDateString);var todayDate=new Date;var todayMonth=todayDate.getMonth();var todayYear=todayDate.getFullYear();var todayDay=todayDate.getDate();var piwikMinDate=new Date(piwik.minDateYear,piwik.minDateMonth-1,piwik.minDateDay),piwikMaxDate=new Date(piwik.maxDateYear,piwik.maxDateMonth-1,piwik.maxDateDay);var selectedPeriod=piwik.period;function isDateInCurrentPeriod(date){if(selectedPeriod!=piwik.period){return[true,''];}
var valid=false;var dateMonth=date.getMonth();var dateYear=date.getFullYear();var dateDay=date.getDate();var style='';if(dateMonth==todayMonth&&dateYear==todayYear&&dateDay>todayDay){return[true,''];}
if(dateYear<piwik.minDateYear||(dateYear==piwik.minDateYear&&((dateMonth==piwik.minDateMonth-1&&dateDay<piwik.minDateDay)||(dateMonth<piwik.minDateMonth-1)))){return[true,''];}
if(piwik.period=="month"&&dateMonth==currentMonth&&dateYear==currentYear){valid=true;}
else if(piwik.period=="year"&&dateYear==currentYear){valid=true;}
else if(piwik.period=="week"&&date.getWeek()==currentWeek&&dateYear==currentYear){valid=true;}
else if(piwik.period=="day"&&dateDay==currentDay&&dateMonth==currentMonth&&dateYear==currentYear){valid=true;}
if(valid){return[true,'ui-datepicker-current-period'];}
return[true,''];}
piwik.getBaseDatePickerOptions=function(defaultDate){return{showOtherMonths:false,dateFormat:'yy-mm-dd',firstDay:1,minDate:piwikMinDate,maxDate:piwikMaxDate,prevText:"",nextText:"",currentText:"",defaultDate:defaultDate,changeMonth:true,changeYear:true,stepMonths:1,dayNamesMin:[_pk_translate('General_DaySu_js'),_pk_translate('General_DayMo_js'),_pk_translate('General_DayTu_js'),_pk_translate('General_DayWe_js'),_pk_translate('General_DayTh_js'),_pk_translate('General_DayFr_js'),_pk_translate('General_DaySa_js')],dayNamesShort:[_pk_translate('General_ShortDay_1_js'),_pk_translate('General_ShortDay_2_js'),_pk_translate('General_ShortDay_3_js'),_pk_translate('General_ShortDay_4_js'),_pk_translate('General_ShortDay_5_js'),_pk_translate('General_ShortDay_6_js'),_pk_translate('General_ShortDay_7_js')],dayNames:[_pk_translate('General_LongDay_1_js'),_pk_translate('General_LongDay_2_js'),_pk_translate('General_LongDay_3_js'),_pk_translate('General_LongDay_4_js'),_pk_translate('General_LongDay_5_js'),_pk_translate('General_LongDay_6_js'),_pk_translate('General_LongDay_7_js')],monthNamesShort:[_pk_translate('General_ShortMonth_1_js'),_pk_translate('General_ShortMonth_2_js'),_pk_translate('General_ShortMonth_3_js'),_pk_translate('General_ShortMonth_4_js'),_pk_translate('General_ShortMonth_5_js'),_pk_translate('General_ShortMonth_6_js'),_pk_translate('General_ShortMonth_7_js'),_pk_translate('General_ShortMonth_8_js'),_pk_translate('General_ShortMonth_9_js'),_pk_translate('General_ShortMonth_10_js'),_pk_translate('General_ShortMonth_11_js'),_pk_translate('General_ShortMonth_12_js')],monthNames:[_pk_translate('General_MonthJanuary_js'),_pk_translate('General_MonthFebruary_js'),_pk_translate('General_MonthMarch_js'),_pk_translate('General_MonthApril_js'),_pk_translate('General_MonthMay_js'),_pk_translate('General_MonthJune_js'),_pk_translate('General_MonthJuly_js'),_pk_translate('General_MonthAugust_js'),_pk_translate('General_MonthSeptember_js'),_pk_translate('General_MonthOctober_js'),_pk_translate('General_MonthNovember_js'),_pk_translate('General_MonthDecember_js')]};};var updateDate;function getDatePickerOptions(){var result=piwik.getBaseDatePickerOptions(currentDate);result.beforeShowDay=isDateInCurrentPeriod;result.stepMonths=selectedPeriod=='year'?12:1;result.onSelect=function(){updateDate.apply(this,arguments);};return result;};$(document).ready(function(){var datepickerElem=$('#datepicker').datepicker(getDatePickerOptions()),periodLabels=$('#periodString').find('.period-type label'),periodTooltip=$('#periodString').find('.period-click-tooltip').html();var toggleWhitespaceHighlighting=function(klass,toggleTop,toggleBottom){var viewedYear=$('.ui-datepicker-year',datepickerElem).val(),viewedMonth=+$('.ui-datepicker-month',datepickerElem).val(),firstOfViewedMonth=new Date(viewedYear,viewedMonth,1),lastOfViewedMonth=new Date(viewedYear,viewedMonth+1,0);if(firstOfViewedMonth>=piwikMinDate){$('tbody>tr:first-child td.ui-datepicker-other-month',datepickerElem).toggleClass(klass,toggleTop);}
if(lastOfViewedMonth<piwikMaxDate){$('tbody>tr:last-child td.ui-datepicker-other-month',datepickerElem).toggleClass(klass,toggleBottom);}};var highlightCurrentPeriod=function(){switch(selectedPeriod){case'day':$('a',$(this)).addClass('ui-state-hover');break;case'week':var row=$(this).parent();$('a',row).addClass('ui-state-hover');var toggleTop=row.is(':first-child'),toggleBottom=row.is(':last-child');toggleWhitespaceHighlighting('ui-state-hover',toggleTop,toggleBottom);break;case'month':$('a',$(this).parent().parent()).addClass('ui-state-hover');break;case'year':$('a',$(this).parent().parent()).addClass('ui-state-hover');toggleWhitespaceHighlighting('ui-state-hover',true,true);break;}};var unhighlightAllDates=function(){$('.ui-state-active,.ui-state-hover',datepickerElem).removeClass('ui-state-active ui-state-hover');if(piwik.period=='year'){var viewedYear=$('.ui-datepicker-year',datepickerElem).val(),toggle=selectedPeriod=='year'&&currentYear==viewedYear;toggleWhitespaceHighlighting('ui-datepicker-current-period',toggle,toggle);}
else if(piwik.period=='week'){var toggleTop=$('tr:first-child a',datepickerElem).parent().hasClass('ui-datepicker-current-period'),toggleBottom=$('tr:last-child a',datepickerElem).parent().hasClass('ui-datepicker-current-period');toggleWhitespaceHighlighting('ui-datepicker-current-period',toggleTop,toggleBottom);}};updateDate=function(dateText){piwikHelper.showAjaxLoading('ajaxLoadingCalendar');setCurrentDate(dateText);piwik.period=selectedPeriod;setTimeout(unhighlightAllDates,1);datepickerElem.datepicker('refresh');broadcast.propagateNewPage('date='+dateText+'&period='+selectedPeriod);};var toggleMonthDropdown=function(disable){if(typeof disable==='undefined'){disable=selectedPeriod=='year';}
$('.ui-datepicker-month',datepickerElem).attr('disabled',disable);};var togglePeriodPickers=function(showSingle){$('#periodString').find('.period-date').toggle(showSingle);$('#periodString').find('.period-range').toggle(!showSingle);$('#calendarRangeApply').toggle(!showSingle);};unhighlightAllDates();datepickerElem.on('mouseenter','tbody td',function(){if($(this).hasClass('ui-state-hover'))
{return;}
if($(this).hasClass('ui-state-disabled')&&selectedPeriod!='year'){unhighlightAllDates();if(selectedPeriod=='week'){highlightCurrentPeriod.call(this);}}
else{highlightCurrentPeriod.call(this);}});datepickerElem.on('mouseleave','tbody td',function(){$('a',this).addClass('ui-state-hover');});datepickerElem.on('mouseleave','table',unhighlightAllDates).on('mouseenter','thead',unhighlightAllDates);datepickerElem.on('click','tbody td.ui-datepicker-other-month',function(){if($(this).hasClass('ui-state-hover')){var row=$(this).parent(),tbody=row.parent();if(row.is(':first-child')){$('a',tbody).first().click();}
else{$('a',tbody).last().click();}}});var reloading=false;var changePeriodOnClick=function(periodInput){if(reloading)
{return;}
var url=periodInput.val(),period=broadcast.getValueFromUrl('period',url);if(selectedPeriod==period&&selectedPeriod!='range'){if(piwik.period!=selectedPeriod&&!reloading){reloading=true;selectedPeriod=period;updateDate(piwik.currentDateString);}
return true;}
return false;};$("#otherPeriods").find("label").on('click',function(e){var id=$(e.target).attr('for');changePeriodOnClick($('#'+id));});$("#otherPeriods").find("input").on('click',function(e){var request_URL=$(e.target).val(),period=broadcast.getValueFromUrl('period',request_URL),lastPeriod=selectedPeriod;if(changePeriodOnClick($(e.target))){return true;}
selectedPeriod=period;periodLabels.each(function(){$(this).attr('title','').removeClass('selected-period-label');});if(period=='range'){return true;}
if(period!=piwik.period)
{$(this).parent().find('label[for=period_id_'+period+']').attr('title',periodTooltip).addClass('selected-period-label');}
togglePeriodPickers(true);if(selectedPeriod=='year'||lastPeriod=='year'){var currentMonth=$('.ui-datepicker-month',datepickerElem).val(),currentYear=$('.ui-datepicker-year',datepickerElem).val();datepickerElem.datepicker('option','stepMonths',selectedPeriod=='year'?12:1).datepicker('setDate',new Date(currentYear,currentMonth));}
datepickerElem.datepicker('refresh');unhighlightAllDates();toggleMonthDropdown();return true;});$(datepickerElem).on('click','.ui-datepicker-next,.ui-datepicker-prev',function(){unhighlightAllDates();toggleMonthDropdown(selectedPeriod=='year');});var firstClick=true;$('#periodString').find('#date').click(function(){if(!firstClick){datepickerElem.datepicker('setDate',currentDate);$('#period_id_'+piwik.period).click();}
firstClick=false;});function onDateRangeSelect(dateText,inst){var toOrFrom=inst.id=='calendarFrom'?'From':'To';$('#inputCalendar'+toOrFrom).val(dateText);}
$("#period_id_range").on('click',function(e){togglePeriodPickers(false);var options=getDatePickerOptions();options.onSelect=onDateRangeSelect;options.beforeShowDay='';options.defaultDate=piwik.startDateString;$('#calendarFrom').datepicker(options).datepicker("setDate",$.datepicker.parseDate('yy-mm-dd',piwik.startDateString));onDateRangeSelect(piwik.startDateString,{"id":"calendarFrom"});options.defaultDate=piwik.endDateString;$('#calendarTo').datepicker(options).datepicker("setDate",$.datepicker.parseDate('yy-mm-dd',piwik.endDateString));onDateRangeSelect(piwik.endDateString,{"id":"calendarTo"});$('.ui-state-hover').removeClass('ui-state-hover');$('#calendarRangeApply').on('click',function(){var request_URL=$(e.target).val();var dateFrom=$('#inputCalendarFrom').val(),dateTo=$('#inputCalendarTo').val(),oDateFrom=$.datepicker.parseDate('yy-mm-dd',dateFrom),oDateTo=$.datepicker.parseDate('yy-mm-dd',dateTo);if(!isValidDate(oDateFrom)||!isValidDate(oDateTo)||oDateFrom>oDateTo){$('#alert').find('h2').text(_pk_translate('General_InvalidDateRange_js'));piwikHelper.modalConfirm('#alert',{});return false;}
piwikHelper.showAjaxLoading('ajaxLoadingCalendar');broadcast.propagateNewPage('period=range&date='+dateFrom+','+dateTo);}).show();$('#inputCalendarFrom, #inputCalendarTo').keyup(function(e){var fromOrTo=this.id=='inputCalendarFrom'?'From':'To';var dateInput=$(this).val();try{var newDate=$.datepicker.parseDate('yy-mm-dd',dateInput);}catch(e){return;}
$("#calendar"+fromOrTo).datepicker("setDate",newDate);if(e.keyCode==13){$('#calendarRangeApply').click();}});return true;});function isValidDate(d){if(Object.prototype.toString.call(d)!=="[object Date]")
return false;return!isNaN(d.getTime());}
var period=broadcast.getValueFromUrl('period');if(period=='range'){$("#period_id_range").click();}});}(jQuery));

$(document).ready(function(){var periodWidget={show:function(){this.isOpen=1;$("#periodMore").show();},hide:function(){this.isOpen=0;$("#periodMore").hide();},toggle:function(e){if(!this.isOpen)this.show();else this.hide();}};$("#periodString").on('click',"#date,.calendar-icon",function(){periodWidget.toggle();if($("#periodMore").is(":visible")){$("#periodMore").find(".ui-state-highlight").removeClass('ui-state-highlight');}});$('body').on('mouseup',function(e){if(!$(e.target).parents('#periodString').length&&!$(e.target).is('#periodString')&&!$(e.target).is('option')&&periodWidget.isOpen){periodWidget.hide();}});});

function switchSite(id,name,showAjaxLoading,idCanBeAll){if(id=='all'&&!idCanBeAll){broadcast.propagateNewPage('module=MultiSites&action=index');}
else{$('.sites_autocomplete input').val(id);$('.custom_select_main_link').text(name);$('.custom_select_main_link').addClass('custom_select_loading');broadcast.propagateNewPage('segment=&idSite='+id,showAjaxLoading);}
return false;}
$(function(){var reset=function(selector){$('.websiteSearch',selector).val('');$('.custom_select_ul_list',selector).show();$(".siteSelect.ui-autocomplete,.reset",selector).hide();};piwik.initSiteSelectors=function(){function getUrlForWebsiteId(idSite){var idSiteParam='idSite='+idSite;var newParameters='segment=&'+idSiteParam;var hash=broadcast.isHashExists()?broadcast.getHashFromUrl():"",linkUrl=piwikHelper.getCurrentQueryStringWithParametersModified(newParameters)
+'#'+piwikHelper.getQueryStringWithParametersModified(hash.substring(1),newParameters);return linkUrl;}
$('.sites_autocomplete').each(function(){var selector=$(this);if(selector.attr('data-inited')==1){return;}
selector.attr('data-inited',1);var websiteSearch=$('.websiteSearch',selector);websiteSearch.click(function(){$(this).val('');});websiteSearch.keyup(function(e){if(e.keyCode==27){$('.custom_select_block',selector).removeClass('custom_select_block_show');return false;}
if(!$(this).val()){reset(selector);}});websiteSearch.autocomplete({minLength:1,source:'?module=SitesManager&action=getSitesForAutocompleter',appendTo:$('.custom_select_container',selector),select:function(event,ui){if(ui.item.id>0){$('.custom_select_main_link',selector).attr('siteid',ui.item.id).text(ui.item.name);$('.custom_select_block',selector).removeClass('custom_select_block_show');selector.trigger('piwik:siteSelected',ui.item);}
else{reset(selector);}
return false;},focus:function(event,ui){$('.websiteSearch',selector).val(ui.item.name);return false;},search:function(event,ui){$('.reset',selector).show();$('.custom_select_main_link',selector).addClass('custom_select_loading');},open:function(event,ui){var widthSitesSelection=+$('.custom_select_ul_list',selector).width();$('.custom_select_main_link',selector).removeClass('custom_select_loading');var maxSitenameWidth=$('.max_sitename_width',selector);if(widthSitesSelection>maxSitenameWidth.val()){maxSitenameWidth.val(widthSitesSelection);}
else{maxSitenameWidth=+maxSitenameWidth.val();}
$('.custom_select_ul_list',selector).hide();var cssToRemove={float:'none',position:'static'};$('.siteSelect.ui-autocomplete',selector).show().width(widthSitesSelection).css(cssToRemove).find('li,a').each(function(){$(this).css(cssToRemove);});$('.custom_select_block_show',selector).width(widthSitesSelection);}}).data("ui-autocomplete")._renderItem=function(ul,item){$(ul).addClass('siteSelect');var linkUrl=getUrlForWebsiteId(item.id);var link=$("<a></a>").html(item.label).attr('href',linkUrl),listItem=$('<li></li>');listItem.data("item.ui-autocomplete",item).append(link).appendTo(ul);link.click(function(e){e.stopPropagation();return true;});return listItem;};$('.reset',selector).click(reset);$('body').on('mouseup',function(e){var closestSelector=$(e.target).closest('.sites_autocomplete');if(closestSelector!=selector){reset(selector);$('.custom_select_block',selector).removeClass('custom_select_block_show');}});if($('li',selector).length>1){$(".custom_select_main_link",selector).click(function(){$(".custom_select_block",selector).addClass("custom_select_block_show");$('.custom_select_ul_list',selector).show();$('.websiteSearch',selector).val('').focus();return false;});$('.custom_select_block',selector).on('mouseenter',function(){$('.custom_select_ul_list li a',selector).each(function(){var idSite=$(this).attr('siteid');var linkUrl=getUrlForWebsiteId(idSite);$(this).attr('href',linkUrl);});});$('.custom_select_ul_list li a',selector).each(function(){$(this).click(function(e){var idsite=$(this).attr('siteid'),name=$(this).text();$(".custom_select_main_link",selector).attr('siteid',idsite).text(name);selector.trigger('piwik:siteSelected',{id:idsite,name:name});$(".custom_select_block",selector).removeClass("custom_select_block_show");e.preventDefault();});});var inlinePaddingWidth=22,staticPaddingWidth=34;if($(".custom_select_block ul",selector)[0]){var widthSitesSelection=Math.max($(".custom_select_block ul",selector).width()+inlinePaddingWidth,$(".custom_select_main_link",selector).width()+staticPaddingWidth);$(".custom_select_block",selector).css('width',widthSitesSelection);}}
else{$('.custom_select_main_link',selector).addClass('noselect');}
$('.custom_select_all',selector).click(function(){$(".custom_select_block",selector).toggleClass("custom_select_block_show");selector.trigger('piwik:siteSelected',{id:'all',name:$('.custom_select_all>a',selector).text()});});$('.but',selector).on('click',function(e){if(websiteSearch.val()!=''){websiteSearch.autocomplete('search',websiteSearch.val()+'%%%');}
return false;});selector.bind('piwik:siteSelected',function(e,site){if(1==$(this).attr('data-switch-site-on-select')){if(piwik.idSite!==site.id){switchSite(site.id,site.name);}}else{$('input',this).val(site.id);}});});};});

function initializeSparklines(){var sparklineUrlParamsToIgnore=['module','action','idSite','period','date','viewDataTable'];$("a[name='evolutionGraph']").each(function(){var graph=$(this);graph.parent().find('div.sparkline').each(function(){var sparklineUrl=$('img.sparkline',this).attr('src');if(sparklineUrl!=""){var params=broadcast.getValuesFromUrl(sparklineUrl);for(var i=0;i!=sparklineUrlParamsToIgnore.length;++i){delete params[sparklineUrlParamsToIgnore[i]];}
for(var key in params){if(typeof params[key]=='undefined'){delete params[key];}else{params[key]=decodeURIComponent(params[key]);}}
$(this).click(function(){var idDataTable=graph.attr('graphId'),dataTable=$('#'+idDataTable);if(dataTable.length==0){dataTable=$('div.dataTableGraphEvolutionWrapper').first().closest('.dataTable');}
dataTable.trigger('reload',params);});$(this).hover(function(){$(this).css({"cursor":"pointer","border-bottom":"1px dashed #C3C3C3"});},function(){$(this).css({"border-bottom":"1px solid white"});});}});});}

(function($){$(document).ready(function(){var headerMessageParent=$('#header_message').parent();headerMessageParent.on('click','#updateCheckLinkContainer',function(e){e.preventDefault();var headerMessage=$(this).closest('#header_message');var ajaxRequest=new ajaxHelper();ajaxRequest.setLoadingElement('#header_message .loadingPiwik');ajaxRequest.addParams({module:'CoreHome',action:'checkForUpdates'},'get');ajaxRequest.setCallback(function(response){headerMessage.fadeOut('slow',function(){response=$(response);var newVersionAvailable=response.hasClass('header_alert');if(newVersionAvailable){headerMessage.replaceWith(response);}
else{headerMessage.html(_pk_translate('CoreHome_YouAreUsingTheLatestVersion_js')).show();setTimeout(function(){headerMessage.fadeOut('slow',function(){headerMessage.replaceWith(response);});},4000);}});});ajaxRequest.setFormat('html');ajaxRequest.send(false);return false;});headerMessageParent.on('click','#header_message',function(e){if(e.target.tagName.toLowerCase()!='a'){$(this).toggleClass('active');}});var handleSectionToggle=function(self,showType,doHide){var sectionId=$(self).attr('data-section-id'),section=$('#'+sectionId),showText=_pk_translate('General_Show_js'),hideText=_pk_translate('General_Hide_js');if(typeof(doHide)=='undefined'){doHide=section.is(':visible');}
if(doHide){var newText=$(self).text().replace(hideText,showText),afterHide=function(){$(self).text(newText);};if(showType=='slide'){section.slideUp(afterHide);}
else if(showType=='inline'){section.hide();afterHide();}
else{section.hide(afterHide);}}
else{var newText=$(self).text().replace(showText,hideText);$(self).text(newText);if(showType=='slide'){section.slideDown();}
else if(showType=='inline'){section.css('display','inline-block');}
else{section.show();}}};$('body').on('click','a.section-toggler-link',function(e){e.preventDefault();handleSectionToggle(this,'slide');return false;});$('body').on('change','input.section-toggler-link',function(e){handleSectionToggle(this,'inline',!$(this).is(':checked'));});var currentWidgetLoading=null;$('body').on('click','.reportDimension',function(e){var view=$(this).closest('.reportsByDimensionView'),report=$('.dimensionReport',view),loading=$('.loadingPiwik',view);$('.activeDimension',view).removeClass('activeDimension');$(this).addClass('activeDimension');report.hide();loading.show();var widgetParams=broadcast.getValuesFromUrl($(this).attr('data-url'));for(var key in widgetParams){widgetParams[key]=decodeURIComponent(widgetParams[key]);}
var widgetUniqueId=widgetParams.module+widgetParams.action;currentWidgetLoading=widgetUniqueId;widgetsHelper.loadWidgetAjax(widgetUniqueId,widgetParams,function(response){if(widgetUniqueId!=currentWidgetLoading){return;}
loading.hide();report.html($(response)).css('display','inline-block');piwikHelper.lazyScrollTo(report,400);});});});}(jQuery));

(function($){var DataTableManager=function(){this.nextId=0;};DataTableManager.prototype={getNextId:function(){this.nextId+=1;return'dataTable_'+this.nextId;},getLastId:function(){return'dataTable_'+this.nextId;},initNewDataTables:function(){var self=this;$('div.dataTable').each(function(){if(!$(this).attr('id')){var params=JSON.parse($(this).attr('data-params')||'{}');var tableType=$(this).attr('data-table-type');if(!tableType){tableType='dataTable';}
for(var key in params){if(params[key]instanceof Array){params[key]=params[key].join(',');}}
self.initSingleDataTable(this,window[tableType],params);}});},initSingleDataTable:function(domElem,klass,params){var newId=this.getNextId();$(domElem).attr('id',newId);var table=new klass();$(domElem).data('dataTableInstance',table);table.param=params;table.init(newId);var graphElement=$('.piwik-graph',domElem);if(graphElement[0]){this.initJQPlotGraph(graphElement,newId);}},initJQPlotGraph:function(graphElement,dataTableId){graphElement=$(graphElement);var graphId=dataTableId+'Chart';graphElement.attr('id',graphId);var graphData;try{graphData=JSON.parse(graphElement.attr('data-data'));}catch(e){console.error('JSON.parse Error: "'+e+"\" in:\n"+graphElement.attr('data-data'));return;}
var plot=new JQPlot(graphData,dataTableId);var externalSeriesToggle=graphElement.attr('data-external-series-toggle');if(externalSeriesToggle){plot.addExternalSeriesToggle(window[externalSeriesToggle],graphId,graphElement.attr('data-external-series-show-all')==1);}
setTimeout(function(){plot.render(graphElement.attr('data-graph-type'),graphId,{noData:_pk_translate('General_NoDataForGraph_js'),exportTitle:_pk_translate('General_ExportAsImage_js'),exportText:_pk_translate('General_SaveImageOnYourComputer_js'),metricsToPlot:_pk_translate('General_MetricsToPlot_js'),metricToPlot:_pk_translate('General_MetricToPlot_js'),recordsToPlot:_pk_translate('General_RecordsToPlot_js')});},1);},getDataTableByReport:function(report){var reportWithoutDot=report.replace('.','');var result=undefined;$('.dataTable').each(function(){if($(this).attr('data-report')==reportWithoutDot){result=this;return false;}});return result;},getDataTableInstanceByReport:function(report){var dataTableElement=this.getDataTableByReport(report);return dataTableElement?$(dataTableElement).data('dataTableInstance'):undefined;}};piwik.DataTableManager=new DataTableManager();}(jQuery));

function JQPlot(data,dataTableId){this.init(data,dataTableId);}
JQPlot.prototype={init:function(data,dataTableId){this.dataTableId=dataTableId;this.originalData=data;this.data=data.data;defaultParams={};defaultParams.grid={drawGridLines:false,background:'#fff',borderColor:'#f00',borderWidth:0,shadow:false};defaultParams.title={show:false};defaultParams.axesDefaults={pad:1.0,tickRenderer:$.jqplot.CanvasAxisTickRenderer,tickOptions:{showMark:false,fontSize:'11px',fontFamily:'Arial'},rendererOptions:{drawBaseline:false}};this.params=$.extend(true,{},defaultParams,data.params);this.tooltip=data.tooltip;this.seriesPicker=data.seriesPicker;if(typeof this.params.axes.yaxis=='undefined'){this.params.axes.yaxis={};}
if(typeof this.params.axes.yaxis.tickOptions=='undefined'){this.params.yaxis.tickOptions={formatString:'%d'};}},render:function(type,targetDivId,lang){switch(type){case'evolution':this.prepareEvolutionChart(targetDivId,lang);break;case'bar':this.prepareBarChart(targetDivId,lang);break;case'pie':this.preparePieChart(targetDivId,lang);break;default:return;}
var self=this;var target=$('#'+targetDivId).on('replot',function(e,data){target.trigger('piwikDestroyPlot');if(target.data('oldHeight')>0){target.height(target.data('oldHeight'));target.data('oldHeight',0);this.innerHTML='';}
(new JQPlot(data,self.dataTableId)).render(type,targetDivId,lang);});target.bind('showLoading',function(){var loading=$(document.createElement('div')).addClass('jqplot-loading');loading.css({width:target.innerWidth()+'px',height:target.innerHeight()+'px',opacity:0});target.prepend(loading);loading.css({opacity:.7});});target.bind('changeColumns',function(e,columns){target.trigger('changeSeries',[columns,[]]);});target.bind('changeSeries',function(e,columns,rows){target.trigger('showLoading');if(typeof columns=='string'){columns=columns.split(',');}
if(typeof rows=='undefined'){rows=[];}
else if(typeof rows=='string'){rows=rows.split(',');}
var dataTable=$('#'+self.dataTableId).data('dataTableInstance');dataTable.param.columns=columns.join(',');dataTable.param.rows=rows.join(',');delete dataTable.param.filter_limit;delete dataTable.param.totalRows;if(dataTable.param.filter_sort_column!='label'){dataTable.param.filter_sort_column=columns[0];}
dataTable.param.disable_generic_filters='0';dataTable.reloadAjaxDataTable(false);});if(this.data.length==0){target.addClass('pk-emptyGraph');target.data('oldHeight',target.height());target.css('height','auto').html(lang.noData);return;}
try{var plot=$.jqplot(targetDivId,this.data,this.params);}catch(e){if(e!="No plot target specified"){throw e;}}
var self=this;target.on('jqplotDataHighlight',function(e,s,i,d){if(type=='bar'){var value=self.formatY(self.data[s][i],s);var series=self.params.series[s].label;var percentage='';if(typeof self.tooltip.percentages!='undefined'){var percentage=self.tooltip.percentages[s][i];percentage=' ('+percentage+'%)';}
var label=self.params.axes.xaxis.labels[i];var text='<b>'+value+'</b> '+series+percentage;$(this).tooltip({track:true,items:'*',content:'<h3>'+label+'</h3>'+text,show:false,hide:false}).trigger('mouseover');}else if(type=='pie'){var value=self.formatY(self.data[0][i][1],1);var series=self.params.series[0].label;var percentage=self.tooltip.percentages[0][i];var label=self.data[0][i][0];var text='<b>'+percentage+'%</b> ('+value+' '+series+')';$(this).tooltip({track:true,items:'*',content:'<h3>'+label+'</h3>'+text,show:false,hide:false}).trigger('mouseover');}}).on('jqplotDataUnhighlight',function(e,s,i,d){if(type!='evolution'){if($(this).is(":data('ui-tooltip')")){$(this).tooltip('destroy');}}});var plotWidth=target.innerWidth();var timeout=false;target.on('resizeGraph',function(){var width=target.innerWidth();if(width>0&&Math.abs(plotWidth-width)>=5){plotWidth=width;target.trigger('piwikDestroyPlot');(new JQPlot(self.originalData,self.dataTableId)).render(type,targetDivId,lang);}});var resizeListener=function(){if(timeout){window.clearTimeout(timeout);}
timeout=window.setTimeout(function(){target.trigger('resizeGraph');},300);};$(window).on('resize',resizeListener);target.on('piwikExportAsImage',function(e){self.exportAsImage(target,lang);});target.on('piwikDestroyPlot',function(){$(window).off('resize',resizeListener);plot.destroy();for(var i=0;i<$.jqplot.visiblePlots.length;i++){if($.jqplot.visiblePlots[i]==plot){$.jqplot.visiblePlots[i]=null;}}
$(this).off();});if(typeof $.jqplot.visiblePlots=='undefined'){$.jqplot.visiblePlots=[];$('ul.nav').on('piwikSwitchPage',function(){for(var i=0;i<$.jqplot.visiblePlots.length;i++){if($.jqplot.visiblePlots[i]==null){continue;}
$.jqplot.visiblePlots[i].destroy();}
$.jqplot.visiblePlots=[];});}
if(typeof plot!='undefined'){$.jqplot.visiblePlots.push(plot);}},exportAsImage:function(container,lang){var exportCanvas=document.createElement('canvas');exportCanvas.width=container.width();exportCanvas.height=container.height();if(!exportCanvas.getContext){alert("Sorry, not supported in your browser. Please upgrade your browser :)");return;}
var exportCtx=exportCanvas.getContext('2d');var canvases=container.find('canvas');for(var i=0;i<canvases.length;i++){var canvas=canvases.eq(i);var position=canvas.position();var parent=canvas.parent();if(parent.hasClass('jqplot-axis')){var addPosition=parent.position();position.left+=addPosition.left;position.top+=addPosition.top+parseInt(parent.css('marginTop'),10);}
exportCtx.drawImage(canvas[0],Math.round(position.left),Math.round(position.top));}
var exported=exportCanvas.toDataURL("image/png");var img=document.createElement('img');img.src=exported;img=$(img).css({width:exportCanvas.width+'px',height:exportCanvas.height+'px'});var popover=$(document.createElement('div'));popover.append('<div style="font-size: 13px; margin-bottom: 10px;">'
+lang.exportText+'</div>').append($(img))
popover.dialog({title:lang.exportTitle,modal:true,width:'auto',position:['center','center'],resizable:false,autoOpen:true,open:function(event,ui){$('.ui-widget-overlay').on('click.popover',function(){popover.dialog('close');});},close:function(event,ui){$(this).dialog("destroy").remove();}});},prepareEvolutionChart:function(targetDivId,lang){this.setYTicks();this.addSeriesPicker(targetDivId,lang);defaultParams.axes={xaxis:{pad:1.0,renderer:$.jqplot.CategoryAxisRenderer,tickOptions:{showGridline:false}}};defaultParams.seriesDefaults={lineWidth:1,markerOptions:{style:"filledCircle",size:6,shadow:false}};defaultParams.piwikTicks={showTicks:true,showGrid:true,showHighlight:true};this.params=$.extend(true,{},defaultParams,this.params);var self=this;var lastTick=false;$('#'+targetDivId).on('jqplotMouseLeave',function(e,s,i,d){$(this).css('cursor','default');if($(this).is(":data('ui-tooltip')")){$(this).tooltip('destroy');}}).on('jqplotClick',function(e,s,i,d){if(lastTick!==false&&typeof self.params.axes.xaxis.onclick!='undefined'&&typeof self.params.axes.xaxis.onclick[lastTick]=='string'){var url=self.params.axes.xaxis.onclick[lastTick];piwikHelper.redirectToUrl(url);}}).on('jqplotPiwikTickOver',function(e,tick){lastTick=tick;var label;if(typeof self.params.axes.xaxis.labels!='undefined'){label=self.params.axes.xaxis.labels[tick];}else{label=self.params.axes.xaxis.ticks[tick];}
var text=[];for(var d=0;d<self.data.length;d++){var value=self.formatY(self.data[d][tick],d);var series=self.params.series[d].label;text.push('<b>'+value+'</b> '+series);}
$(this).tooltip({track:true,items:'div',content:'<h3>'+label+'</h3>'+text.join('<br />'),show:false,hide:false}).trigger('mouseover');if(typeof self.params.axes.xaxis.onclick!='undefined'&&typeof self.params.axes.xaxis.onclick[lastTick]=='string'){$(this).css('cursor','pointer');}});this.params.legend={show:false};this.params.canvasLegend={show:true};},preparePieChart:function(targetDivId,lang){this.addSeriesPicker(targetDivId,lang);this.params.seriesDefaults={renderer:$.jqplot.PieRenderer,rendererOptions:{shadow:false,showDataLabels:false,sliceMargin:1,startAngle:35}};this.params.piwikTicks={showTicks:false,showGrid:false,showHighlight:false};this.params.legend={show:false};this.params.pieLegend={show:true};this.params.canvasLegend={show:true,singleMetric:true};if(!(this.data[0][0]instanceof Array)){for(var i=0;i<this.data[0].length;i++){this.data[0][i]=[this.params.axes.xaxis.ticks[i],this.data[0][i]];}}},prepareBarChart:function(targetDivId,lang){this.setYTicks();this.addSeriesPicker(targetDivId,lang);this.params.seriesDefaults={renderer:$.jqplot.BarRenderer,rendererOptions:{shadowOffset:1,shadowDepth:2,shadowAlpha:.2,fillToZero:true,barMargin:this.data[0].length>10?2:10}};this.params.piwikTicks={showTicks:true,showGrid:false,showHighlight:false};this.params.axes.xaxis.renderer=$.jqplot.CategoryAxisRenderer;this.params.axes.xaxis.tickOptions={showGridline:false};this.params.canvasLegend={show:true};},setYTicks:function(){this.setYTicksForAxis('yaxis',this.params.axes.yaxis);for(var i=2;typeof this.params.axes['y'+i+'axis']!='undefined';i++){this.setYTicksForAxis('y'+i+'axis',this.params.axes['y'+i+'axis']);}},setYTicksForAxis:function(axisName,axis){var maxCrossDataSets=0;for(var i=0;i<this.data.length;i++){if(this.params.series[i].yaxis==axisName){var maxValue=Math.max.apply(Math,this.data[i]);if(maxValue>maxCrossDataSets){maxCrossDataSets=maxValue;}
maxCrossDataSets=parseFloat(maxCrossDataSets);}}
maxCrossDataSets+=Math.max(1,Math.round(maxCrossDataSets*.03));if(maxCrossDataSets>15){maxCrossDataSets=maxCrossDataSets+10-maxCrossDataSets%10;}
if(maxCrossDataSets==0){maxCrossDataSets=1;}
if(axis.tickOptions.formatString.substring(2,3)=='%'&&maxCrossDataSets>100){maxCrossDataSets=100;}
var ticks=[];var numberOfTicks=2;var tickDistance=Math.ceil(maxCrossDataSets/numberOfTicks);for(var i=0;i<=numberOfTicks;i++){ticks.push(i*tickDistance);}
axis.ticks=ticks;},formatY:function(value,seriesIndex){var floatVal=parseFloat(value);var intVal=parseInt(value,10);if(Math.abs(floatVal-intVal)>=0.005){value=Math.round(floatVal*100)/100;}else if(parseFloat(intVal)==floatVal){value=intVal;}else{value=floatVal;}
if(typeof this.tooltip.yUnits[seriesIndex]!='undefined'){value+=this.tooltip.yUnits[seriesIndex];}
return value;},addSeriesPicker:function(targetDivId,lang){this.params.seriesPicker={show:typeof this.seriesPicker.selectableColumns=='object'||typeof this.seriesPicker.selectableRows=='object',selectableColumns:this.seriesPicker.selectableColumns,selectableRows:this.seriesPicker.selectableRows,multiSelect:this.seriesPicker.multiSelect,targetDivId:targetDivId,dataTableId:this.dataTableId,lang:lang};},addExternalSeriesToggle:function(seriesPickerClass,targetDivId,initiallyShowAll){new seriesPickerClass(targetDivId,this.originalData,initiallyShowAll);if(!initiallyShowAll){this.data=[this.data[0]];this.params.series=[this.params.series[0]];}}};function JQPlotExternalSeriesToggle(targetDivId,originalConfig,initiallyShowAll){this.init(targetDivId,originalConfig,initiallyShowAll);}
JQPlotExternalSeriesToggle.prototype={init:function(targetDivId,originalConfig,initiallyShowAll){this.targetDivId=targetDivId;this.originalConfig=originalConfig;this.originalData=originalConfig.data;this.originalSeries=originalConfig.params.series;this.originalAxes=originalConfig.params.axes;this.originalTooltipUnits=originalConfig.tooltip.yUnits;this.originalSeriesColors=originalConfig.params.seriesColors;this.initiallyShowAll=initiallyShowAll;this.activated=[];this.target=$('#'+targetDivId);this.attachEvents();},attachEvents:function(){},showSeries:function(i){for(var j=0;j<this.activated.length;j++){this.activated[j]=(i==j);}
this.replot();},toggleSeries:function(i){var activatedCount=0;for(var k=0;k<this.activated.length;k++){if(this.activated[k]){activatedCount++;}}
if(activatedCount==1&&this.activated[i]){return;}
this.activated[i]=!this.activated[i];this.replot();},replot:function(){this.beforeReplot();var usedAxes=[];var config=this.originalConfig;config.data=[];config.params.series=[];config.params.axes={xaxis:this.originalAxes.xaxis};config.tooltip.yUnits=[];config.params.seriesColors=[];for(var j=0;j<this.activated.length;j++){if(!this.activated[j]){continue;}
config.data.push(this.originalData[j]);config.tooltip.yUnits.push(this.originalTooltipUnits[j]);config.params.seriesColors.push(this.originalSeriesColors[j]);config.params.series.push($.extend(true,{},this.originalSeries[j]));var axis=this.originalSeries[j].yaxis;if($.inArray(axis,usedAxes)==-1){usedAxes.push(axis);}}
var replaceAxes={};for(j=0;j<usedAxes.length;j++){var originalAxisName=usedAxes[j];var newAxisName=(j==0?'yaxis':'y'+(j+1)+'axis');replaceAxes[originalAxisName]=newAxisName;config.params.axes[newAxisName]=this.originalAxes[originalAxisName];}
for(j=0;j<config.params.series.length;j++){var series=config.params.series[j];series.yaxis=replaceAxes[series.yaxis];}
this.target.trigger('replot',config);},beforeReplot:function(){}};function RowEvolutionSeriesToggle(targetDivId,originalConfig,initiallyShowAll){this.init(targetDivId,originalConfig,initiallyShowAll);}
RowEvolutionSeriesToggle.prototype=JQPlotExternalSeriesToggle.prototype;RowEvolutionSeriesToggle.prototype.attachEvents=function(){var self=this;this.seriesPickers=this.target.closest('.rowevolution').find('table.metrics tr');this.seriesPickers.each(function(i){var el=$(this);el.click(function(e){if(e.shiftKey){self.toggleSeries(i);}else{self.showSeries(i);}
return false;});if(i==0||self.initiallyShowAll){self.activated.push(true);}else{el.find('td').css('opacity',.5);self.activated.push(false);}
if($.browser.msie){this.ondrag=function(){return false;};this.onselectstart=function(){return false;};}else if($.browser.opera){$(this).attr('unselectable','on');}});};RowEvolutionSeriesToggle.prototype.beforeReplot=function(){for(var i=0;i<this.activated.length;i++){if(this.activated[i]){this.seriesPickers.eq(i).find('td').css('opacity',1);}else{this.seriesPickers.eq(i).find('td').css('opacity',.5);}}};(function($){$.jqplot.PiwikTicks=function(options){this.piwikTicksCanvas=null;this.piwikHighlightCanvas=null;this.markerRenderer=new $.jqplot.MarkerRenderer({shadow:false});this.currentXTick=false;this.showHighlight=false;this.showGrid=false;this.showTicks=false;$.extend(true,this,options);};$.jqplot.PiwikTicks.init=function(target,data,opts){var options=opts||{};this.plugins.piwikTicks=new $.jqplot.PiwikTicks(options.piwikTicks);if(typeof $.jqplot.PiwikTicks.init.eventsBound=='undefined'){$.jqplot.PiwikTicks.init.eventsBound=true;$.jqplot.eventListenerHooks.push(['jqplotMouseMove',handleMouseMove]);$.jqplot.eventListenerHooks.push(['jqplotMouseLeave',handleMouseLeave]);}};$.jqplot.PiwikTicks.postDraw=function(){var c=this.plugins.piwikTicks;if(c.showHighlight){c.piwikHighlightCanvas=new $.jqplot.GenericCanvas();this.eventCanvas._elem.before(c.piwikHighlightCanvas.createElement(this._gridPadding,'jqplot-piwik-highlight-canvas',this._plotDimensions,this));c.piwikHighlightCanvas.setContext();}
if(c.showTicks){var dimensions=this._plotDimensions;dimensions.height+=6;c.piwikTicksCanvas=new $.jqplot.GenericCanvas();this.series[0].shadowCanvas._elem.before(c.piwikTicksCanvas.createElement(this._gridPadding,'jqplot-piwik-ticks-canvas',dimensions,this));c.piwikTicksCanvas.setContext();var ctx=c.piwikTicksCanvas._ctx;var ticks=this.data[0];var totalWidth=ctx.canvas.width;var tickWidth=totalWidth/ticks.length;var xaxisLabels=this.axes.xaxis.ticks;for(var i=0;i<ticks.length;i++){var pos=Math.round(i*tickWidth+tickWidth/2);var full=xaxisLabels[i]&&xaxisLabels[i]!=' ';drawLine(ctx,pos,full,c.showGrid);}}};$.jqplot.preInitHooks.push($.jqplot.PiwikTicks.init);$.jqplot.postDrawHooks.push($.jqplot.PiwikTicks.postDraw);function drawLine(ctx,x,full,showGrid){ctx.save();ctx.strokeStyle='#cccccc';ctx.beginPath();ctx.lineWidth=2;var top=0;if((full&&!showGrid)||!full){top=ctx.canvas.height-5;}
ctx.moveTo(x,top);ctx.lineTo(x,full?ctx.canvas.height:ctx.canvas.height-2);ctx.stroke();ctx.clearRect(x,0,x+1,ctx.canvas.height);ctx.restore();}
function handleMouseMove(ev,gridpos,datapos,neighbor,plot){var c=plot.plugins.piwikTicks;var tick=Math.floor(datapos.xaxis+0.5)-1;if(tick!==c.currentXTick){c.currentXTick=tick;plot.target.trigger('jqplotPiwikTickOver',[tick]);highlight(plot,tick);}}
function handleMouseLeave(ev,gridpos,datapos,neighbor,plot){unHighlight(plot);plot.plugins.piwikTicks.currentXTick=false;}
function highlight(plot,tick){var c=plot.plugins.piwikTicks;if(!c.showHighlight){return;}
unHighlight(plot);for(var i=0;i<plot.series.length;i++){var series=plot.series[i];var seriesMarkerRenderer=series.markerRenderer;c.markerRenderer.style=seriesMarkerRenderer.style;c.markerRenderer.size=seriesMarkerRenderer.size+5;var rgba=$.jqplot.getColorComponents(seriesMarkerRenderer.color);var newrgb=[rgba[0],rgba[1],rgba[2]];var alpha=rgba[3]*.4;c.markerRenderer.color='rgba('+newrgb[0]+','+newrgb[1]+','+newrgb[2]+','+alpha+')';c.markerRenderer.init();var position=series.gridData[tick];c.markerRenderer.draw(position[0],position[1],c.piwikHighlightCanvas._ctx);}}
function unHighlight(plot){var canvas=plot.plugins.piwikTicks.piwikHighlightCanvas;if(canvas!==null){var ctx=canvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);}}})(jQuery);(function($){$.jqplot.CanvasLegendRenderer=function(options){this.legendCanvas=null;this.singleMetric=false;this.show=false;$.extend(true,this,options);};$.jqplot.CanvasLegendRenderer.init=function(target,data,opts){var options=opts||{};this.plugins.canvasLegend=new $.jqplot.CanvasLegendRenderer(options.canvasLegend);if(this.plugins.canvasLegend.show){options.gridPadding={top:21};}};$.jqplot.CanvasLegendRenderer.postDraw=function(){var plot=this;var legend=plot.plugins.canvasLegend;if(!legend.show){return;}
var padding={top:0,right:this._gridPadding.right,bottom:0,left:this._gridPadding.left};var dimensions={width:this._plotDimensions.width,height:this._gridPadding.top};var width=this._plotDimensions.width-this._gridPadding.left-this._gridPadding.right;legend.legendCanvas=new $.jqplot.GenericCanvas();this.eventCanvas._elem.before(legend.legendCanvas.createElement(padding,'jqplot-legend-canvas',dimensions,plot));legend.legendCanvas.setContext();var ctx=legend.legendCanvas._ctx;ctx.save();ctx.font='11px Arial';var x=0;var series=plot.legend._series;for(var i=0;i<series.length;i++){var s=series[i];var label;if(legend.labels&&legend.labels[i]){label=legend.labels[i];}else{label=s.label.toString();}
ctx.fillStyle=s.color;if(legend.singleMetric){ctx.fillStyle='#666666';}
ctx.fillRect(x,10,10,2);x+=15;var nextX=x+ctx.measureText(label).width+20;if(nextX+70>width){ctx.fillText("[...]",x,15);x+=ctx.measureText("[...]").width+20;break;}
ctx.fillText(label,x,15);x=nextX;}
legend.width=x;ctx.restore();};$.jqplot.preInitHooks.push($.jqplot.CanvasLegendRenderer.init);$.jqplot.postDrawHooks.push($.jqplot.CanvasLegendRenderer.postDraw);})(jQuery);(function($){$.jqplot.SeriesPicker=function(options){this.domElem=null;this.show=false;this.selectableColumns=null;this.selectableRows=null;this.multiSelect=true;this.targetDivId="";this.dataTableId="";this.lang={};$.extend(true,this,options);};$.jqplot.SeriesPicker.init=function(target,data,opts){var options=opts||{};this.plugins.seriesPicker=new $.jqplot.SeriesPicker(options.seriesPicker);};$.jqplot.SeriesPicker.postDraw=function(){var plot=this;var picker=plot.plugins.seriesPicker;if(!picker.show){return;}
picker.domElem=$(document.createElement('a')).addClass('jqplot-seriespicker').attr('href','#').html('+').css('marginLeft',(plot._gridPadding.left+plot.plugins.canvasLegend.width-1)+'px');picker.domElem.on('hide',function(){$(this).css('opacity',.55);}).trigger('hide');plot.baseCanvas._elem.before(picker.domElem);picker.domElem.hover(function(){picker.domElem.css('opacity',1);if(!picker.domElem.hasClass('open')){picker.domElem.addClass('open');showPicker(picker,plot._width);}},function(){}).click(function(){return false;});};function showPicker(picker,plotWidth){var pickerLink=picker.domElem;var pickerPopover=$(document.createElement('div')).addClass('jqplock-seriespicker-popover');var pickerState={manipulated:false};var title=picker.multiSelect?picker.lang.metricsToPlot:picker.lang.metricToPlot;pickerPopover.append($(document.createElement('p')).addClass('headline').html(title));if(picker.selectableColumns!==null){for(var i=0;i<picker.selectableColumns.length;i++){var column=picker.selectableColumns[i];pickerPopover.append(createPickerPopupItem(picker,column,'column',pickerState,pickerPopover,pickerLink));}}
if(picker.selectableRows!==null){pickerPopover.append($(document.createElement('p')).addClass('headline').addClass('recordsToPlot').html(picker.lang.recordsToPlot));for(var i=0;i<picker.selectableRows.length;i++){var row=picker.selectableRows[i];pickerPopover.append(createPickerPopupItem(picker,row,'row',pickerState,pickerPopover,pickerLink));}}
$('body').prepend(pickerPopover.hide());var neededSpace=pickerPopover.outerWidth()+10;var linkOffset=pickerLink.offset();if(navigator.appVersion.indexOf("MSIE 7.")!=-1){linkOffset.left-=10;}
var margin=(parseInt(pickerLink.css('marginLeft'),10)-4);if(margin+neededSpace<plotWidth||margin-neededSpace+60<0){pickerPopover.css('marginLeft',(linkOffset.left-4)+'px').show();}else{pickerPopover.addClass('alignright').css('marginLeft',(linkOffset.left-neededSpace+38)+'px').css('backgroundPosition',(pickerPopover.outerWidth()-25)+'px 4px').show();}
pickerPopover.css('marginTop',(linkOffset.top-5)+'px').show();checkPickerLeave(pickerPopover,function(){var replot=pickerState.manipulated;hidePicker(picker,pickerPopover,pickerLink,replot);});}
function createPickerPopupItem(picker,config,type,pickerState,pickerPopover,pickerLink){var checkbox=$(document.createElement('input')).addClass('select').attr('type',picker.multiSelect?'checkbox':'radio');if(config.displayed&&!(!picker.multiSelect&&pickerState.oneChecked)){checkbox.prop('checked',true);pickerState.oneChecked=true;}
checkbox.data('name',type=='column'?config.column:config.matcher);var el=$(document.createElement('p')).append(checkbox).append(type=='column'?config.translation:config.label).addClass(type=='column'?'pickColumn':'pickRow');var replot=function(){unbindPickerLeaveCheck();hidePicker(picker,pickerPopover,pickerLink,true);};var checkBox=function(box){if(!picker.multiSelect){pickerPopover.find('input.select:not(.current)').prop('checked',false);}
box.prop('checked',true);replot();};el.click(function(e){pickerState.manipulated=true;var box=$(this).find('input.select');if(!$(e.target).is('input.select')){if(box.is(':checked')){box.prop('checked',false);}else{checkBox(box);}}else{if(box.is(':checked')){checkBox(box);}}});return el;}
var onMouseMove;function checkPickerLeave(pickerPopover,onLeaveCallback){var offset=pickerPopover.offset();var minX=offset.left;var minY=offset.top;var maxX=minX+pickerPopover.outerWidth();var maxY=minY+pickerPopover.outerHeight();var currentX,currentY;onMouseMove=function(e){currentX=e.pageX;currentY=e.pageY;if(currentX<minX||currentX>maxX||currentY<minY||currentY>maxY){unbindPickerLeaveCheck();onLeaveCallback();}};$(document).mousemove(onMouseMove);}
function unbindPickerLeaveCheck(){$(document).unbind('mousemove',onMouseMove);}
function hidePicker(picker,pickerPopover,pickerLink,replot){pickerPopover.hide();pickerLink.trigger('hide').removeClass('open');if(replot){var columns=[];var rows=[];pickerPopover.find('input:checked').each(function(){if($(this).closest('p').hasClass('pickRow')){rows.push($(this).data('name'));}else{columns.push($(this).data('name'));}});var noRowSelected=pickerPopover.find('.pickRow').size()>0&&pickerPopover.find('.pickRow input:checked').size()==0;if(columns.length>0&&!noRowSelected){$('#'+picker.targetDivId).trigger('changeSeries',[columns,rows]);$('#'+picker.targetDivId).parents('[widgetId]').trigger('setParameters',{columns:columns,rows:rows});}}
pickerPopover.remove();}
$.jqplot.preInitHooks.push($.jqplot.SeriesPicker.init);$.jqplot.postDrawHooks.push($.jqplot.SeriesPicker.postDraw);})(jQuery);(function($){$.jqplot.PieLegend=function(options){this.pieLegendCanvas=null;this.show=false;$.extend(true,this,options);};$.jqplot.PieLegend.init=function(target,data,opts){var options=opts||{};this.plugins.pieLegend=new $.jqplot.PieLegend(options.pieLegend);};$.jqplot.PieLegend.postDraw=function(){var plot=this;var legend=plot.plugins.pieLegend;if(!legend.show){return;}
var series=plot.series[0];var angles=series._sliceAngles;var radius=series._diameter/2;var center=series._center;var colors=this.seriesColors;var lineAngles=[];for(var i=0;i<angles.length;i++){lineAngles.push((angles[i][0]+angles[i][1])/2+Math.PI/2);}
var labels=[];var data=series._plotData;for(i=0;i<data.length;i++){labels.push(data[i][0]);}
legend.pieLegendCanvas=new $.jqplot.GenericCanvas();plot.series[0].canvas._elem.before(legend.pieLegendCanvas.createElement(plot._gridPadding,'jqplot-pie-legend-canvas',plot._plotDimensions,plot));legend.pieLegendCanvas.setContext();var ctx=legend.pieLegendCanvas._ctx;ctx.save();ctx.font='11px Arial';var height=legend.pieLegendCanvas._elem.height();var x1,x2,y1,y2,lastY2=false,right,lastRight=false;for(i=0;i<labels.length;i++){var label=labels[i];ctx.strokeStyle=colors[i%colors.length];ctx.lineCap='round';ctx.lineWidth=1;x1=center[0]+Math.sin(lineAngles[i])*(radius);y1=center[1]-Math.cos(lineAngles[i])*(radius);x2=center[0]+Math.sin(lineAngles[i])*(radius+7);y2=center[1]-Math.cos(lineAngles[i])*(radius+7);right=x2>center[0];if(lastY2!==false&&lastRight==right&&((right&&y2-lastY2<13)||(!right&&lastY2-y2<13))){if(x1>center[0]){y2=lastY2+13;}else{y2=lastY2-13;}}
if(y2<4||y2+4>height){continue;}
ctx.beginPath();ctx.moveTo(x1,y1);ctx.lineTo(x2,y2);ctx.closePath();ctx.stroke();ctx.beginPath();ctx.moveTo(x2,y2);if(right){ctx.lineTo(x2+5,y2);}else{ctx.lineTo(x2-5,y2);}
ctx.closePath();ctx.stroke();lastY2=y2;lastRight=right;if(right){var x=x2+9;}else{var x=x2-9-ctx.measureText(label).width;}
ctx.fillStyle='#666666';ctx.fillText(label,x,y2+3);}
ctx.restore();};$.jqplot.preInitHooks.push($.jqplot.PieLegend.init);$.jqplot.postDrawHooks.push($.jqplot.PieLegend.postDraw);})(jQuery);

function widgetsHelper(){}
widgetsHelper.getAvailableWidgets=function(){if(!widgetsHelper.availableWidgets){var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({module:'Dashboard',action:'getAvailableWidgets'},'get');ajaxRequest.setCallback(function(data){widgetsHelper.availableWidgets=data;});ajaxRequest.send(true);}
return widgetsHelper.availableWidgets;};widgetsHelper.getWidgetObjectFromUniqueId=function(uniqueId){var widgets=widgetsHelper.getAvailableWidgets();for(var widgetCategory in widgets){var widgetInCategory=widgets[widgetCategory];for(var i in widgetInCategory){if(widgetInCategory[i]["uniqueId"]==uniqueId){return widgetInCategory[i];}}}
return false;};widgetsHelper.getWidgetNameFromUniqueId=function(uniqueId){var widget=this.getWidgetObjectFromUniqueId(uniqueId);if(widget==false){return false;}
return widget["name"];};widgetsHelper.getLoadWidgetAjaxRequest=function(widgetUniqueId,widgetParameters,onWidgetLoadedCallback){var token_auth=broadcast.getValueFromUrl('token_auth');if(token_auth.length&&token_auth!='anonymous'){widgetParameters['token_auth']=token_auth;}
var disableLink=broadcast.getValueFromUrl('disableLink');if(disableLink.length){widgetParameters['disableLink']=disableLink;}
return{widgetUniqueId:widgetUniqueId,type:'GET',url:'index.php',dataType:'html',async:true,error:piwikHelper.ajaxHandleError,success:onWidgetLoadedCallback,data:piwikHelper.getQueryStringFromParameters(widgetParameters)+"&widget=1&idSite="+piwik.idSite+"&period="+piwik.period+"&date="+broadcast.getValueFromUrl('date')+"&token_auth="+piwik.token_auth};};widgetsHelper.loadWidgetAjax=function(widgetUniqueId,widgetParameters,onWidgetLoadedCallback){var disableLink=broadcast.getValueFromUrl('disableLink');if(disableLink.length){widgetParameters['disableLink']=disableLink;}
widgetParameters['widget']=1;var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(widgetParameters,'get');ajaxRequest.setCallback(onWidgetLoadedCallback);ajaxRequest.setFormat('html');ajaxRequest.send(false);return ajaxRequest;};widgetsHelper.getEmptyWidgetHtml=function(uniqueId,widgetName){return'<div id="'+uniqueId+'" class="widget">'+'<div class="widgetTop">'+'<div class="button" id="close">'+'<img src="themes/default/images/close.png" title="'+_pk_translate('Dashboard_Close_js')+'" />'+'</div>'+'<div class="button" id="maximise">'+'<img src="themes/default/images/maximise.png" title="'+_pk_translate('Dashboard_Maximise_js')+'" />'+'</div>'+'<div class="button" id="minimise">'+'<img src="themes/default/images/minimise.png" title="'+_pk_translate('Dashboard_Minimise_js')+'" />'+'</div>'+'<div class="button" id="refresh">'+'<img src="themes/default/images/refresh.png" title="'+_pk_translate('Dashboard_Refresh_js')+'" />'+'</div>'+'<div class="widgetName">'+widgetName+'</div>'+'</div>'+'<div class="widgetContent">'+'<div class="widgetLoading">'+
_pk_translate('Dashboard_LoadingWidget_js')+'</div>'+'</div>'+'</div>';};(function($){$.extend({widgetPreview:new function(){var settings={onPreviewLoaded:function(){},onSelect:function(){},isWidgetAvailable:function(widgetUniqueId){return true;},resetOnSelect:false,baseClass:'widgetpreview-base',categorylistClass:'widgetpreview-categorylist',widgetlistClass:'widgetpreview-widgetlist',widgetpreviewClass:'widgetpreview-preview',choosenClass:'widgetpreview-choosen',unavailableClass:'widgetpreview-unavailable'};var availableWidgets,widgetPreview,widgetAjaxRequest=null;function createWidgetCategoryList(){if(!$('.'+settings.categorylistClass,widgetPreview).length){$(widgetPreview).append('<ul class="'+settings.categorylistClass+'"></ul>');}else{$('.'+settings.categorylistClass,widgetPreview).empty();}
for(var widgetCategory in availableWidgets){$('.'+settings.categorylistClass,widgetPreview).append('<li>'+widgetCategory+'</li>');}
return $('.'+settings.categorylistClass,widgetPreview);};function createWidgetList(){if(!$('.'+settings.widgetlistClass,widgetPreview).length){$(widgetPreview).append('<ul class="'+settings.widgetlistClass+'"></ul>');}else{$('.'+settings.widgetlistClass+' li',widgetPreview).off('mouseover');$('.'+settings.widgetlistClass+' li',widgetPreview).off('click');$('.'+settings.widgetlistClass,widgetPreview).empty();}
if($('.'+settings.categorylistClass+' .'+settings.choosenClass,widgetPreview).length){var position=$('.'+settings.categorylistClass+' .'+settings.choosenClass,widgetPreview).position().top-
$('.'+settings.categorylistClass).position().top;$('.'+settings.widgetlistClass,widgetPreview).css('top',position);$('.'+settings.widgetlistClass,widgetPreview).css('marginBottom',position);}
return $('.'+settings.widgetlistClass,widgetPreview);};function showWidgetList(widgets){var widgetList=createWidgetList(),widgetPreviewTimer;for(var j=0;j<widgets.length;j++){var widgetName=widgets[j]["name"];var widgetUniqueId=widgets[j]["uniqueId"];var widgetParameters=widgets[j]["parameters"];var widgetClass='';if(!settings.isWidgetAvailable(widgetUniqueId)){widgetClass+=' '+settings.unavailableClass;}
widgetList.append('<li class="'+widgetClass+'" uniqueid="'+widgetUniqueId+'">'+widgetName+'</li>');}
$('li:not(.'+settings.unavailableClass+')',widgetList).on('mouseenter',function(){var that=this,widgetUniqueId=$(this).attr('uniqueid');clearTimeout(widgetPreview);widgetPreviewTimer=setTimeout(function(){$('li',widgetList).removeClass(settings.choosenClass);$(that).addClass(settings.choosenClass);showPreview(widgetUniqueId);},400);});$('li:not(.'+settings.unavailableClass+')',widgetList).on('mouseleave',function(){clearTimeout(widgetPreview);});$('li:not(.'+settings.unavailableClass+')',widgetList).on('click',function(){if(!$('.widgetLoading',widgetPreview).length){settings.onSelect($(this).attr('uniqueid'));if(settings.resetOnSelect){resetWidgetPreview();}}
return false;});}
function createPreviewElement(){if(!$('.'+settings.widgetpreviewClass,widgetPreview).length){$(widgetPreview).append('<div class="'+settings.widgetpreviewClass+'"></div>');}else{$('.'+settings.widgetpreviewClass+' .widgetTop',widgetPreview).off('click');$('.'+settings.widgetpreviewClass,widgetPreview).empty();}
return $('.'+settings.widgetpreviewClass,widgetPreview);};function showPreview(widgetUniqueId){if($('#'+widgetUniqueId,widgetPreview).length)return;var previewElement=createPreviewElement();var widget=widgetsHelper.getWidgetObjectFromUniqueId(widgetUniqueId);var widgetParameters=widget['parameters'];var emptyWidgetHtml=widgetsHelper.getEmptyWidgetHtml(widgetUniqueId,'<div title="'+_pk_translate("Dashboard_AddPreviewedWidget_js")+'">'+
_pk_translate('Dashboard_WidgetPreview_js')+'</div>');previewElement.html(emptyWidgetHtml);var onWidgetLoadedCallback=function(response){var widgetElement=$('#'+widgetUniqueId);$('.widgetContent',widgetElement).html($(response));$('.widgetContent',widgetElement).trigger('widget:create');settings.onPreviewLoaded(widgetUniqueId,widgetElement);$('.'+settings.widgetpreviewClass+' .widgetTop',widgetPreview).on('click',function(){settings.onSelect(widgetUniqueId);if(settings.resetOnSelect){resetWidgetPreview();}
return false;});};if(widgetAjaxRequest){widgetAjaxRequest.abort();}
widgetAjaxRequest=widgetsHelper.loadWidgetAjax(widgetUniqueId,widgetParameters,onWidgetLoadedCallback);};function resetWidgetPreview(){$('.'+settings.categorylistClass+' li',widgetPreview).removeClass(settings.choosenClass);createWidgetList();createPreviewElement();};this.construct=function(userSettings){if(widgetPreview&&userSettings=='reset'){resetWidgetPreview();return;}
widgetPreview=this;$(this).addClass('widgetpreview-base');settings=jQuery.extend(settings,userSettings);if(typeof settings.onSelect=='function'){this.onSelect=settings.onSelect;}
if(typeof settings.onPreviewLoaded=='function'){this.onPreviewLoaded=settings.onPreviewLoaded;}
availableWidgets=widgetsHelper.getAvailableWidgets();var categoryList=createWidgetCategoryList();$('li',categoryList).on('mouseover',function(){var category=$(this).text();var widgets=availableWidgets[category];$('li',categoryList).removeClass(settings.choosenClass);$(this).addClass(settings.choosenClass);showWidgetList(widgets);createPreviewElement();});};}});$.fn.extend({widgetPreview:$.widgetPreview.construct})})(jQuery);

function widgetize(){var self=this;this.getInputFormWithHtml=function(inputId,htmlEmbed){return'<input class="formEmbedCode" id="'+inputId+'" value="'+htmlEmbed.replace(/"/g,'&quot;')+'" onclick="javascript:document.getElementById(\''+inputId+'\').focus();document.getElementById(\''+inputId+'\').select();" readonly="true" type="text" />';}
this.getEmbedUrl=function(parameters,exportFormat){var copyParameters={};for(var variableName in parameters){copyParameters[variableName]=parameters[variableName];}
copyParameters['moduleToWidgetize']=parameters['module'];copyParameters['actionToWidgetize']=parameters['action'];delete copyParameters['action'];delete copyParameters['module'];var sourceUrl;sourceUrl=document.location.protocol+'//'+document.location.hostname+(document.location.port==''?'':(':'+document.location.port))+document.location.pathname+'?';sourceUrl+="module=Widgetize"+"&action="+exportFormat+"&"+piwikHelper.getQueryStringFromParameters(copyParameters)+"&idSite="+piwik.idSite+"&period="+piwik.period+"&date="+broadcast.getValueFromUrl('date')+"&disableLink=1&widget=1";return sourceUrl;}
this.htmlentities=function(s){return s.replace(/[<>&]/g,function(m){return"&"+m.charCodeAt(0)+";";});}
this.callbackAddExportButtonsUnderWidget=function(widgetUniqueId,loadedWidgetElement){var widget=widgetsHelper.getWidgetObjectFromUniqueId(widgetUniqueId);var widgetParameters=widget['parameters'];var exportButtonsElement=$('<span id="exportButtons">');var urlIframe=self.getEmbedUrl(widgetParameters,"iframe");var widgetIframeHtml='<div id="widgetIframe">'+'<iframe width="100%" height="350" src="'+
urlIframe+'" scrolling="no" frameborder="0" marginheight="0" marginwidth="0">'+'</iframe>'+'</div>';$(exportButtonsElement).append('<div id="embedThisWidgetIframe">'+'<label for="embedThisWidgetIframeInput">&rsaquo; Embed Iframe</label>'+'<span id="embedThisWidgetIframeInput">'+
self.getInputFormWithHtml('iframeEmbed',widgetIframeHtml)+'</span>'+'</div>'+'<div> <label for="embedThisWidgetDirectLink">&rsaquo; Direct Link</label>'+'<span id="embedThisWidgetDirectLink"> '+self.getInputFormWithHtml('directLinkEmbed',urlIframe)+' - <a href="'+urlIframe+'" target="_blank">'+_pk_translate('General_OpenInNewWindow_js')+'</a></span>'
+'</div>');$('#iframeDivToExport').html(widgetIframeHtml);$(loadedWidgetElement).parent().append(exportButtonsElement);}}

function DataTable_RowActions_Transitions(dataTable){this.dataTable=dataTable;this.transitions=null;}
DataTable_RowActions_Transitions.prototype=new DataTable_RowAction;DataTable_RowActions_Transitions.launchForUrl=function(url){broadcast.propagateNewPopoverParameter('RowAction','Transitions:url:'+url);};DataTable_RowActions_Transitions.isPageUrlReport=function(module,action){return module=='Actions'&&(action=='getPageUrls'||action=='getEntryPageUrls'||action=='getExitPageUrls'||action=='getPageUrlsFollowingSiteSearch');};DataTable_RowActions_Transitions.isPageTitleReport=function(module,action){return module=='Actions'&&(action=='getPageTitles'||action=='getPageTitlesFollowingSiteSearch');}
DataTable_RowActions_Transitions.prototype.trigger=function(tr,e,subTableLabel){var link=tr.find('> td:first > a').attr('href');link=$('<textarea>').html(link).val();var module=this.dataTable.param.module;var action=this.dataTable.param.action;if(DataTable_RowActions_Transitions.isPageUrlReport(module,action)){this.openPopover('url:'+link);}else if(DataTable_RowActions_Transitions.isPageTitleReport(module,action)){DataTable_RowAction.prototype.trigger.apply(this,[tr,e,subTableLabel]);}else{alert('Transitions can\'t be used on this report.');}};DataTable_RowAction.prototype.performAction=function(label,tr,e){var separator=' > ';var labelParts=label.split(separator);for(var i=0;i<labelParts.length;i++){labelParts[i]=$.trim(decodeURIComponent(labelParts[i]));}
label=labelParts.join(piwik.config.action_url_category_delimiter);this.openPopover('title:'+label);};DataTable_RowActions_Transitions.prototype.doOpenPopover=function(link){var parts=link.split(':');if(parts.length<2){return;}
var actionType=parts[0];parts.shift();var actionName=parts.join(':');if(this.transitions===null){this.transitions=new Piwik_Transitions(actionType,actionName,this);}else{this.transitions.reset(actionType,actionName);}
this.transitions.showPopover();};DataTable_RowActions_Registry.register({name:'Transitions',dataTableIcon:'plugins/Transitions/templates/transitions_icon.png',dataTableIconHover:'plugins/Transitions/templates/transitions_icon_hover.png',order:20,dataTableIconTooltip:[_pk_translate('General_TransitionsRowActionTooltipTitle_js'),_pk_translate('General_TransitionsRowActionTooltip_js')],createInstance:function(dataTable){return new DataTable_RowActions_Transitions(dataTable);},isAvailableOnReport:function(dataTableParams){return(DataTable_RowActions_Transitions.isPageUrlReport(dataTableParams.module,dataTableParams.action)||DataTable_RowActions_Transitions.isPageTitleReport(dataTableParams.module,dataTableParams.action));},isAvailableOnRow:function(dataTableParams,tr){if(tr.attr('id')){return false;}
if(DataTable_RowActions_Transitions.isPageUrlReport(dataTableParams.module,dataTableParams.action)&&!tr.find('> td:first span.label').parent().is('a')){return false;}
return true;}});function Piwik_Transitions(actionType,actionName,rowAction){this.reset(actionType,actionName);this.rowAction=rowAction;this.ajax=new Piwik_Transitions_Ajax();this.model=new Piwik_Transitions_Model(this.ajax);this.leftGroups=['previousPages','previousSiteSearches','searchEngines','websites','campaigns'];this.rightGroups=['followingPages','followingSiteSearches','downloads','outlinks'];}
Piwik_Transitions.prototype.reset=function(actionType,actionName){this.actionType=actionType;this.actionName=actionName;this.popover=null;this.canvas=null;this.centerBox=null;this.leftOpenGroup='previousPages';this.rightOpenGroup='followingPages';this.highlightedGroup=false;this.highlightedGroupSide=false;this.highlightedGroupCenterEl=false;};Piwik_Transitions.prototype.showPopover=function(){var self=this;this.popover=Piwik_Popover.showLoading('Transitions',self.actionName,550);Piwik_Popover.addHelpButton('http://piwik.org/docs/transitions');var bothLoaded=function(){Piwik_Popover.setContent(Piwik_Transitions.popoverHtml);self.preparePopover();self.model.htmlLoaded();if(self.model.searchEnginesNbTransitions>0&&self.model.websitesNbTransitions>0
+self.model.campaignsNbTransitions>0){self.canvas.narrowMode();}
self.render();self.canvas.truncateVisibleBoxTexts();};var callbackForHtml=false;if(typeof Piwik_Transitions.popoverHtml=='undefined'){this.ajax.callTransitionsController('renderPopover',function(html){Piwik_Transitions.popoverHtml=html;if(callbackForHtml!==false){callbackForHtml();}});}
self.model.loadData(self.actionType,self.actionName,function(){if(typeof Piwik_Transitions.popoverHtml=='undefined'){callbackForHtml=bothLoaded;}else{bothLoaded();}});};Piwik_Transitions.prototype.preparePopover=function(){var self=this;var width=900;var height=550;var canvasBgLeft=self.prepareCanvas('Background_Left',width,height);var canvasBgRight=self.prepareCanvas('Background_Right',width,height);var canvasLeft=self.prepareCanvas('Left',width,height);var canvasRight=self.prepareCanvas('Right',width,height);var canvasLoops=self.prepareCanvas('Loops',width,height);self.canvas=new Piwik_Transitions_Canvas(canvasBgLeft,canvasBgRight,canvasLeft,canvasRight,canvasLoops,width,height);self.centerBox=self.popover.find('#Transitions_CenterBox');var title=self.actionName;if(self.actionType=='url'){title=Piwik_Transitions_Util.shortenUrl(title,true);}
title=self.centerBox.find('h2').addClass('Transitions_ApplyTextAndTruncate').data('text',title).data('maxLines',3);if(self.actionType=='url'){title.click(function(){self.openExternalUrl(self.actionName);}).css('cursor','pointer');}
var element=title.add(self.popover.find('p.Transitions_Pageviews'));element.tooltip({track:true,content:function(){var totalNbPageviews=self.model.getTotalNbPageviews();if(totalNbPageviews>0){var share=Math.round(self.model.pageviews/totalNbPageviews*1000)/10;var text=Piwik_Transitions_Translations.ShareOfAllPageviews;text=text.replace(/%s/,self.model.pageviews).replace(/%s/,share+'%');text+='<br /><i>'+Piwik_Transitions_Translations.DateRange+' '+self.model.date+'</i>';var title='<h3>'+piwikHelper.addBreakpointsToUrl(self.actionName)+'</h3>';return title+text;}
return false;},items:'*',tooltipClass:'Transitions_Tooltip_Small',show:false,hide:false});};Piwik_Transitions.prototype.prepareCanvas=function(canvasId,width,height){canvasId='Transitions_Canvas_'+canvasId;var div=$('#'+canvasId).width(width).height(height);var canvas;if(typeof Piwik_Transitions.canvasCache=='undefined'||typeof window.G_vmlCanvasManager!="undefined"){Piwik_Transitions.canvasCache={};}
if(typeof Piwik_Transitions.canvasCache[canvasId]=='undefined'){Piwik_Transitions.canvasCache[canvasId]=document.createElement('canvas');canvas=Piwik_Transitions.canvasCache[canvasId];canvas.width=width;canvas.height=height;}else{canvas=Piwik_Transitions.canvasCache[canvasId];canvas.getContext('2d').clearRect(0,0,width,height);}
div.append(canvas);return canvas;};Piwik_Transitions.prototype.render=function(){this.renderCenterBox();this.renderLeftSide();this.renderRightSide();this.renderLoops();};Piwik_Transitions.prototype.renderLeftSide=function(onlyBg){this.renderGroups(this.leftGroups,this.leftOpenGroup,'left',onlyBg);this.renderEntries(onlyBg);this.reRenderIfNeededToCenter('left',onlyBg);};Piwik_Transitions.prototype.renderRightSide=function(onlyBg){this.renderGroups(this.rightGroups,this.rightOpenGroup,'right',onlyBg);this.renderExits(onlyBg);this.reRenderIfNeededToCenter('right',onlyBg);};Piwik_Transitions.prototype.renderGroups=function(groups,openGroup,side,onlyBg){for(var i=0;i<groups.length;i++){var groupName=groups[i];if(groupName==openGroup){if(i!=0){var spacing=this.canvas.isNarrowMode()?7:13;this.canvas.addBoxSpacing(spacing,side);}
this.renderOpenGroup(groupName,side,onlyBg);}else{this.renderClosedGroup(groupName,side,onlyBg);}}
this.canvas.addBoxSpacing(13,side);};Piwik_Transitions.prototype.reRenderIfNeededToCenter=function(side,onlyBg){var height=(side=='left'?this.canvas.leftBoxPositionY:this.canvas.rightBoxPositionY)-20;if(height<460&&!this.reRendering){var yOffset=(460-height)/2;this.canvas.clearSide(side,onlyBg);this.canvas.addBoxSpacing(yOffset,side);this.reRendering=true;side=='left'?this.renderLeftSide(onlyBg):this.renderRightSide(onlyBg);this.reRendering=false;}};Piwik_Transitions.prototype.renderCenterBox=function(){var box=this.centerBox;Piwik_Transitions_Util.replacePlaceholderInHtml(box.find('.Transitions_Pageviews'),this.model.pageviews);var self=this;var showMetric=function(cssClass,modelProperty,highlightCurveOnSide,groupCanBeExpanded){var el=box.find('.Transitions_'+cssClass);Piwik_Transitions_Util.replacePlaceholderInHtml(el,self.model[modelProperty]);if(self.model[modelProperty]==0){el.addClass('Transitions_Value0');}else{self.addTooltipShowingPercentageOfAllPageviews(el,modelProperty);var groupName=cssClass.charAt(0).toLowerCase()+cssClass.substr(1);el.hover(function(){self.highlightGroup(groupName,highlightCurveOnSide);},function(){self.unHighlightGroup(groupName,highlightCurveOnSide);});if(groupCanBeExpanded){el.click(function(){self.openGroup(highlightCurveOnSide,groupName);}).css('cursor','pointer');}}};showMetric('DirectEntries','directEntries','left',false);showMetric('PreviousSiteSearches','previousSiteSearchesNbTransitions','left',true);showMetric('PreviousPages','previousPagesNbTransitions','left',true);showMetric('SearchEngines','searchEnginesNbTransitions','left',true);showMetric('Websites','websitesNbTransitions','left',true);showMetric('Campaigns','campaignsNbTransitions','left',true);showMetric('FollowingPages','followingPagesNbTransitions','right',true);showMetric('FollowingSiteSearches','followingSiteSearchesNbTransitions','right',true);showMetric('Outlinks','outlinksNbTransitions','right',true);showMetric('Downloads','downloadsNbTransitions','right',true);showMetric('Exits','exits','right',false);box.find('.Transitions_CenterBoxMetrics').show();};Piwik_Transitions.prototype.addTooltipShowingPercentageOfAllPageviews=function(element,metric){var tip=Piwik_Transitions_Translations.XOfAllPageviews;var percentage=this.model.getPercentage(metric,true);tip=tip.replace(/%s/,'<b>'+percentage+'</b>');element.tooltip({track:true,content:tip,items:'*',tooltipClass:'Transitions_Tooltip_Small',show:false,hide:false});};Piwik_Transitions.prototype.renderLoops=function(){if(this.model.loops==0){return;}
var loops=this.popover.find('#Transitions_Loops').show();Piwik_Transitions_Util.replacePlaceholderInHtml(loops,this.model.loops);this.addTooltipShowingPercentageOfAllPageviews(loops,'loops');this.canvas.renderLoops(this.model.getPercentage('loops'));};Piwik_Transitions.prototype.renderEntries=function(onlyBg){if(this.model.directEntries>0){var self=this;var gradient=this.canvas.createHorizontalGradient('#FFFFFF','#BACFE8','left');if(this.highlightedGroup=='directEntries'){gradient=this.canvas.createHorizontalGradient('#FFFFFF','#FAD293','left');}
this.canvas.renderBox({side:'left',onlyBg:onlyBg,share:this.model.getPercentage('directEntries'),gradient:gradient,boxText:Piwik_Transitions_Translations.directEntries,boxTextNumLines:1,boxTextCssClass:'SingleLine',smallBox:true,onMouseOver:function(){self.highlightGroup('directEntries','left');},onMouseOut:function(){self.unHighlightGroup('directEntries','left');}});this.canvas.addBoxSpacing(20,'left');}};Piwik_Transitions.prototype.renderExits=function(onlyBg){if(this.model.exits>0){var self=this;var gradient=this.canvas.createHorizontalGradient('#FFFFFF','#BACFE8','right');if(this.highlightedGroup=='exits'){gradient=this.canvas.createHorizontalGradient('#FFFFFF','#FAD293','right');}
this.canvas.renderBox({side:'right',onlyBg:onlyBg,share:this.model.getPercentage('exits'),gradient:gradient,boxText:Piwik_Transitions_Translations.exits,boxTextNumLines:1,boxTextCssClass:'SingleLine',smallBox:true,onMouseOver:function(){self.highlightGroup('exits','right');},onMouseOut:function(){self.unHighlightGroup('exits','right');}});this.canvas.addBoxSpacing(20,'right');}};Piwik_Transitions.prototype.renderOpenGroup=function(groupName,side,onlyBg){var self=this;var nbTransitionsVarName=groupName+'NbTransitions';var nbTransitions=self.model[nbTransitionsVarName];if(nbTransitions==0){return;}
var totalShare=this.model.getPercentage(nbTransitionsVarName);var details=self.model.getDetailsForGroup(groupName);var gradientItems=this.canvas.createHorizontalGradient('#E3DFD1','#E8E4D5',side);var gradientOthers=this.canvas.createHorizontalGradient('#F5F3EB','#E8E4D5',side);var gradientBackground=this.canvas.createHorizontalGradient('#FFFFFF','#BACFE8',side);if(groupName==this.highlightedGroup){gradientBackground=this.canvas.createHorizontalGradient('#FFFFFF','#FAD293',side);}
var boxPositionBefore,curvePositionBefore;if(side=='left'){boxPositionBefore=this.canvas.leftBoxPositionY;curvePositionBefore=this.canvas.leftCurvePositionY;}else{boxPositionBefore=this.canvas.rightBoxPositionY;curvePositionBefore=this.canvas.rightCurvePositionY;}
var titleX,titleClass;if(side=='left'){titleX=this.canvas.leftBoxBeginX+10;titleClass='BoxTextLeft';}else{titleX=this.canvas.rightBoxBeginX-1;titleClass='BoxTextRight';}
if(!onlyBg){var groupTitle=self.model.getGroupTitle(groupName);var titleEl=this.canvas.renderText(groupTitle,titleX,boxPositionBefore+11,[titleClass,'TitleOfOpenGroup']);titleEl.hover(function(){self.highlightGroup(groupName,side);},function(){self.unHighlightGroup(groupName,side);});}
this.canvas.addBoxSpacing(34,side);for(var i=0;i<details.length;i++){var data=details[i];var label=(typeof data.url!='undefined'?data.url:data.label);label=(typeof label!='undefined'&&label!==null?label:'');var isOthers=(label=='Others');var onClick=false;if(!isOthers&&(groupName=='previousPages'||groupName=='followingPages')){onClick=(function(url){return function(){self.reloadPopover(url);};})(label);}else if(!isOthers&&(groupName=='outlinks'||groupName=='websites'||groupName=='downloads')){onClick=(function(url){return function(){self.openExternalUrl(url);};})(label);}
var tooltip=Piwik_Transitions_Translations.XOfY;tooltip='<b>'+tooltip.replace(/%s/,data.referrals+'</b>').replace(/%s/,nbTransitions);tooltip=this.model.getShareInGroupTooltip(tooltip,groupName);var fullLabel=label;var shortened=false;if((this.actionType=='url'&&(groupName=='previousPages'||groupName=='followingPages'))||groupName=='downloads'){label=Piwik_Transitions_Util.shortenUrl(label,true);shortened=true;}else if(groupName=='outlinks'||groupName=='websites'){label=Piwik_Transitions_Util.shortenUrl(label);shortened=true;}
this.canvas.renderBox({side:side,onlyBg:onlyBg,share:data.percentage/100*totalShare,gradient:isOthers?gradientOthers:gradientItems,boxText:label,boxTextTooltip:isOthers||!shortened?false:fullLabel,boxTextNumLines:3,curveText:data.percentage+'%',curveTextTooltip:tooltip,onClick:onClick});}
var boxPositionAfter,curvePositionAfter;if(side=='left'){boxPositionAfter=this.canvas.leftBoxPositionY;curvePositionAfter=this.canvas.leftCurvePositionY;this.canvas.leftBoxPositionY=boxPositionBefore;this.canvas.leftCurvePositionY=curvePositionBefore;}else{boxPositionAfter=this.canvas.rightBoxPositionY;curvePositionAfter=this.canvas.rightCurvePositionY;this.canvas.rightBoxPositionY=boxPositionBefore;this.canvas.rightCurvePositionY=curvePositionBefore;}
this.canvas.renderBox({side:side,boxHeight:boxPositionAfter-boxPositionBefore-this.canvas.boxSpacing-2,curveHeight:curvePositionAfter-curvePositionBefore-this.canvas.curveSpacing,gradient:gradientBackground,bgCanvas:true});var spacing=this.canvas.isNarrowMode()?8:15;this.canvas.addBoxSpacing(spacing,side);};Piwik_Transitions.prototype.renderClosedGroup=function(groupName,side,onlyBg){var self=this;var gradient=this.canvas.createHorizontalGradient('#DDE4ED','#9BBADE',side);if(groupName==this.highlightedGroup){gradient=this.canvas.createHorizontalGradient('#FAE2C0','#FAD293',side);}
var nbTransitionsVarName=groupName+'NbTransitions';if(self.model[nbTransitionsVarName]==0){return;}
self.canvas.renderBox({side:side,onlyBg:onlyBg,share:self.model.getPercentage(nbTransitionsVarName),gradient:gradient,boxText:self.model.getGroupTitle(groupName),boxTextNumLines:1,boxTextCssClass:'SingleLine',boxIcon:'themes/default/images/plus_blue.png',smallBox:true,onClick:function(){self.unHighlightGroup(groupName,side);self.openGroup(side,groupName);},onMouseOver:function(){self.highlightGroup(groupName,side);},onMouseOut:function(){self.unHighlightGroup(groupName,side);}});};Piwik_Transitions.prototype.reloadPopover=function(url){if(this.rowAction){this.rowAction.openPopover(this.actionType+':'+url);}else{this.reset(this.actionType,url);this.showPopover();}};Piwik_Transitions.prototype.openGroup=function(side,groupName){this.canvas.clearSide(side);if(side=='left'){this.leftOpenGroup=groupName;this.renderLeftSide();}else{this.rightOpenGroup=groupName;this.renderRightSide();}
this.renderLoops();this.canvas.truncateVisibleBoxTexts();};Piwik_Transitions.prototype.highlightGroup=function(groupName,side){if(this.highlightedGroup==groupName){return;}
if(this.highlightedGroup!==false){this.unHighlightGroup(this.highlightedGroup,this.highlightedGroupSide);}
this.highlightedGroup=groupName;this.highlightedGroupSide=side;var cssClass='Transitions_'+groupName.charAt(0).toUpperCase()+groupName.substr(1);this.highlightedGroupCenterEl=this.canvas.container.find('.'+cssClass);this.highlightedGroupCenterEl.addClass('Transitions_Highlighted');this.canvas.clearSide(side,true);if(side=='left'){this.renderLeftSide(true);}else{this.renderRightSide(true);}
this.renderLoops();};Piwik_Transitions.prototype.unHighlightGroup=function(groupName,side){if(this.highlightedGroup===false){return;}
this.highlightedGroupCenterEl.removeClass('Transitions_Highlighted');this.highlightedGroup=false;this.highlightedGroupSide=false;this.highlightedGroupCenterEl=false;this.canvas.clearSide(side,true);if(side=='left'){this.renderLeftSide(true);}else{this.renderRightSide(true);}
this.renderLoops();};Piwik_Transitions.prototype.openExternalUrl=function(url){url=piwik.piwik_url+'?module=Proxy&action=redirect&url='+encodeURIComponent(url);window.open(url,'_newtab');};function Piwik_Transitions_Canvas(canvasBgLeft,canvasBgRight,canvasLeft,canvasRight,canvasLoops,width,height){if(typeof window.G_vmlCanvasManager!="undefined"){window.G_vmlCanvasManager.initElement(canvasBgLeft);window.G_vmlCanvasManager.initElement(canvasBgRight);window.G_vmlCanvasManager.initElement(canvasLeft);window.G_vmlCanvasManager.initElement(canvasRight);window.G_vmlCanvasManager.initElement(canvasLoops);}
if(!canvasBgLeft.getContext){alert('Your browser is not supported.');return;}
this.container=$(canvasBgLeft).parent().parent();this.contextBgLeft=canvasBgLeft.getContext('2d');this.contextBgRight=canvasBgRight.getContext('2d');this.contextLeft=canvasLeft.getContext('2d');this.contextRight=canvasRight.getContext('2d');this.contextLoops=canvasLoops.getContext('2d');this.width=width;this.height=height;this.leftBoxPositionY=this.originalBoxPositionY=0;this.leftCurvePositionY=this.originalCurvePositionY=110;this.rightBoxPositionY=this.originalBoxPositionY;this.rightCurvePositionY=this.originalCurvePositionY;this.boxWidth=175;this.boxHeight=53;this.smallBoxHeight=30;this.curveWidth=170;this.lineHeight=14;this.boxSpacing=7;this.curveSpacing=1.5;this.totalHeightOfConnections=205;this.leftBoxBeginX=0;this.leftCurveBeginX=this.leftBoxBeginX+this.boxWidth;this.leftCurveEndX=this.leftCurveBeginX+this.curveWidth;this.rightBoxEndX=this.width;this.rightBoxBeginX=this.rightCurveEndX=this.rightBoxEndX-this.boxWidth;this.rightCurveBeginX=this.rightCurveEndX-this.curveWidth;}
Piwik_Transitions_Canvas.prototype.narrowMode=function(){this.smallBoxHeight=26;this.boxSpacing=4;this.narrowMode=true;};Piwik_Transitions_Canvas.prototype.isNarrowMode=function(){return typeof this.narrowMode!='undefined';};Piwik_Transitions_Canvas.prototype.createHorizontalGradient=function(lightColor,darkColor,position){var fromX,toX,fromColor,toColor;if(position=='left'){fromX=this.leftBoxBeginX+50;toX=this.leftCurveEndX-20;fromColor=lightColor;toColor=darkColor;}else{fromX=this.rightCurveBeginX+20;toX=this.rightBoxEndX-50;fromColor=darkColor;toColor=lightColor;}
var gradient=this.contextBgLeft.createLinearGradient(fromX,0,toX,0);gradient.addColorStop(0,fromColor);gradient.addColorStop(1,toColor);return gradient;};Piwik_Transitions_Canvas.prototype.renderText=function(text,x,y,cssClass,onClick,icon,maxLines){var div=this.addDomElement('div','Text');div.css({left:x+'px',top:y+'px'});if(icon){div.addClass('Transitions_HasBackground');div.css({backgroundImage:'url('+icon+')'});}
if(cssClass){if(typeof cssClass=='object'){for(var i=0;i<cssClass.length;i++){div.addClass('Transitions_'+cssClass[i]);}}else{div.addClass('Transitions_'+cssClass);}}
if(onClick){div.css('cursor','pointer').hover(function(){$(this).addClass('Transitions_Hover');},function(){$(this).removeClass('Transitions_Hover');}).click(onClick);}
if(maxLines){div.addClass('Transitions_ApplyTextAndTruncate').data('text',text);}else{div.html(text);}
return div;};Piwik_Transitions_Canvas.prototype.addDomElement=function(tagName,cssClass){var el=$(document.createElement('div')).addClass('Transitions_'+cssClass);this.container.append(el);return el;};Piwik_Transitions_Canvas.prototype.truncateVisibleBoxTexts=function(){this.container.find('.Transitions_ApplyTextAndTruncate').each(function(){var container=$(this).html('<span>');var span=container.find('span');var text=container.data('text');span.html(piwikHelper.addBreakpointsToUrl(text));var divHeight=container.innerHeight();if(container.data('maxLines')){divHeight=container.data('maxLines')*(parseInt(container.css('lineHeight'),10)+.2);}
var leftPart=false;var rightPart=false;while(divHeight<span.outerHeight()){if(leftPart===false){var middle=Math.round(text.length/2);leftPart=text.substring(0,middle);rightPart=text.substring(middle,text.length);}
leftPart=leftPart.substring(0,leftPart.length-2);rightPart=rightPart.substring(2,rightPart.length);text=leftPart+'...'+rightPart;span.html(piwikHelper.addBreakpointsToUrl(text));}
span.removeClass('Transitions_Truncate');});};Piwik_Transitions_Canvas.prototype.renderBox=function(params){var curveHeight=params.curveHeight?params.curveHeight:Math.round(this.totalHeightOfConnections*params.share);curveHeight=Math.max(curveHeight,1);var boxHeight=this.boxHeight;if(params.smallBox){boxHeight=this.smallBoxHeight;}
if(params.boxHeight){boxHeight=params.boxHeight;}
var context;if(params.bgCanvas){context=params.side=='left'?this.contextBgLeft:this.contextBgRight;}else{context=params.side=='left'?this.contextLeft:this.contextRight;}
context.fillStyle=params.gradient;context.beginPath();if(params.side=='left'){this.renderLeftBoxBg(context,boxHeight,curveHeight);}else{this.renderRightBoxBg(context,boxHeight,curveHeight);}
if(typeof context.endPath=='function'){context.endPath();}
if(params.boxText&&!params.onlyBg){var onClick=typeof params.onClick=='function'?params.onClick:false;var boxTextLeft,boxTextTop,el;if(params.side=='left'){boxTextLeft=this.leftBoxBeginX+10;boxTextTop=this.leftBoxPositionY+boxHeight/2-params.boxTextNumLines*this.lineHeight/2;el=this.renderText(params.boxText,boxTextLeft,boxTextTop,'BoxTextLeft',onClick,params.boxIcon,params.boxTextNumLines);}else{boxTextLeft=this.rightBoxBeginX;boxTextTop=this.rightBoxPositionY+boxHeight/2-params.boxTextNumLines*this.lineHeight/2;el=this.renderText(params.boxText,boxTextLeft,boxTextTop,'BoxTextRight',onClick,params.boxIcon,params.boxTextNumLines);}
if(params.boxTextCssClass){el.addClass('Transitions_'+params.boxTextCssClass);}
if(params.boxTextTooltip){var tip=piwikHelper.addBreakpointsToUrl(params.boxTextTooltip);el.tooltip({track:true,content:tip,items:'*',tooltipClass:'Transitions_Tooltip_Small',show:false,hide:false});}
if(typeof params.onMouseOver=='function'){el.mouseenter(params.onMouseOver);}
if(typeof params.onMouseOut=='function'){el.mouseleave(params.onMouseOut);}}
if(params.curveText&&!params.onlyBg){var curveTextLeft,curveTextTop;if(params.side=='left'){curveTextLeft=this.leftBoxBeginX+this.boxWidth+3;curveTextTop=this.leftBoxPositionY+boxHeight/2-this.lineHeight/2;}else{curveTextLeft=this.rightBoxBeginX-37;curveTextTop=this.rightBoxPositionY+boxHeight/2-this.lineHeight/2;}
var textDiv=this.renderText(params.curveText,curveTextLeft,curveTextTop,params.side=='left'?'CurveTextLeft':'CurveTextRight');if(params.curveTextTooltip){textDiv.tooltip({track:true,content:params.curveTextTooltip,items:'*',tooltipClass:'Transitions_Tooltip_Small',show:false,hide:false});}}
if(params.side=='left'){this.leftBoxPositionY+=boxHeight+this.boxSpacing;this.leftCurvePositionY+=curveHeight+this.curveSpacing;}else{this.rightBoxPositionY+=boxHeight+this.boxSpacing;this.rightCurvePositionY+=curveHeight+this.curveSpacing;}};Piwik_Transitions_Canvas.prototype.renderLeftBoxBg=function(context,boxHeight,curveHeight){var leftUpper={x:this.leftCurveBeginX,y:this.leftBoxPositionY};var leftLower={x:this.leftCurveBeginX,y:this.leftBoxPositionY+boxHeight};var rightUpper={x:this.leftCurveEndX,y:this.leftCurvePositionY};var rightLower={x:this.leftCurveEndX,y:this.leftCurvePositionY+curveHeight};var center=(this.leftCurveBeginX+this.leftCurveEndX)/2;var cp1Upper={x:center,y:leftUpper.y};var cp2Upper={x:center,y:rightUpper.y};var cp1Lower={x:center,y:rightLower.y};var cp2Lower={x:center,y:leftLower.y};context.moveTo(leftUpper.x,leftUpper.y);context.bezierCurveTo(cp1Upper.x,cp1Upper.y,cp2Upper.x,cp2Upper.y,rightUpper.x,rightUpper.y);context.lineTo(rightLower.x,rightLower.y);context.bezierCurveTo(cp1Lower.x,cp1Lower.y,cp2Lower.x,cp2Lower.y,leftLower.x,leftLower.y);context.lineTo(leftLower.x-this.boxWidth+2,leftLower.y);context.lineTo(leftLower.x-this.boxWidth,leftUpper.y);context.lineTo(leftUpper.x,leftUpper.y);context.fill();};Piwik_Transitions_Canvas.prototype.renderRightBoxBg=function(context,boxHeight,curveHeight){var leftUpper={x:this.rightCurveBeginX,y:this.rightCurvePositionY};var leftLower={x:this.rightCurveBeginX,y:this.rightCurvePositionY+curveHeight};var rightUpper={x:this.rightCurveEndX,y:this.rightBoxPositionY};var rightLower={x:this.rightCurveEndX,y:this.rightBoxPositionY+boxHeight};var center=(this.rightCurveBeginX+this.rightCurveEndX)/2;var cp1Upper={x:center,y:leftUpper.y};var cp2Upper={x:center,y:rightUpper.y};var cp1Lower={x:center,y:rightLower.y};var cp2Lower={x:center,y:leftLower.y};context.moveTo(leftUpper.x,leftUpper.y);context.bezierCurveTo(cp1Upper.x,cp1Upper.y,cp2Upper.x,cp2Upper.y,rightUpper.x,rightUpper.y);context.lineTo(rightUpper.x+this.boxWidth,rightUpper.y);context.lineTo(rightLower.x+this.boxWidth-2,rightLower.y);context.lineTo(rightLower.x,rightLower.y);context.bezierCurveTo(cp1Lower.x,cp1Lower.y,cp2Lower.x,cp2Lower.y,leftLower.x,leftLower.y);context.lineTo(leftUpper.x,leftUpper.y);context.fill();};Piwik_Transitions_Canvas.prototype.addBoxSpacing=function(spacing,side){if(side=='left'){this.leftBoxPositionY+=spacing;}else{this.rightBoxPositionY+=spacing;}};Piwik_Transitions_Canvas.prototype.renderLoops=function(share){var curveHeight=Math.round(this.totalHeightOfConnections*share);curveHeight=Math.max(curveHeight,1);var gradient=this.contextLoops.createLinearGradient(this.leftCurveEndX-50,0,this.rightCurveBeginX+50,0);var light='#F5F3EB';var dark='#E8E4D5';gradient.addColorStop(0,dark);gradient.addColorStop(.5,light);gradient.addColorStop(1,dark);this.contextLoops.fillStyle=gradient;this.contextLoops.beginPath();var point1={x:this.leftCurveEndX,y:this.leftCurvePositionY};var point2={x:this.leftCurveEndX,y:470};var cpLeftX=(this.leftCurveBeginX+this.leftCurveEndX)/2+30;var cp1={x:cpLeftX,y:point1.y};var cp2={x:cpLeftX,y:point2.y};this.contextLoops.moveTo(point1.x,point1.y);this.contextLoops.bezierCurveTo(cp1.x,cp1.y,cp2.x,cp2.y,point2.x,point2.y);var point3={x:this.rightCurveBeginX,y:point2.y};this.contextLoops.lineTo(point3.x,point3.y);var point4={x:this.rightCurveBeginX,y:this.rightCurvePositionY};var cpRightX=(this.rightCurveBeginX+this.rightCurveEndX)/2-30;var cp3={x:cpRightX,y:point3.y};var cp4={x:cpRightX,y:point4.y};this.contextLoops.bezierCurveTo(cp3.x,cp3.y,cp4.x,cp4.y,point4.x,point4.y);var point5={x:point4.x,y:point4.y+curveHeight};this.contextLoops.lineTo(point5.x,point5.y);var point6={x:point5.x,y:point2.y-25};cpRightX-=30;var cp5={x:cpRightX,y:point5.y};var cp6={x:cpRightX,y:point6.y};this.contextLoops.bezierCurveTo(cp5.x,cp5.y,cp6.x,cp6.y,point6.x,point6.y);var point7={x:point1.x,y:point6.y};this.contextLoops.lineTo(point7.x,point7.y);var point8={x:point1.x,y:point1.y+curveHeight};cpLeftX+=30;var cp7={x:cpLeftX,y:point7.y};var cp8={x:cpLeftX,y:point8.y};this.contextLoops.bezierCurveTo(cp7.x,cp7.y,cp8.x,cp8.y,point8.x,point8.y);this.contextLoops.fill();if(typeof this.contextLoops.endPath=='function'){this.contextLoops.endPath();}};Piwik_Transitions_Canvas.prototype.clearSide=function(side,onlyBg){if(side=='left'){this.contextBgLeft.clearRect(0,0,this.width,this.height);this.contextLeft.clearRect(0,0,this.width,this.height);}else{this.contextBgRight.clearRect(0,0,this.width,this.height);this.contextRight.clearRect(0,0,this.width,this.height);}
this.contextLoops.clearRect(0,0,this.width,this.height);if(side=='left'){if(!onlyBg){this.container.find('.Transitions_BoxTextLeft').remove();this.container.find('.Transitions_CurveTextLeft').remove();}
this.leftBoxPositionY=this.originalBoxPositionY;this.leftCurvePositionY=this.originalCurvePositionY;}else{if(!onlyBg){this.container.find('.Transitions_BoxTextRight').remove();this.container.find('.Transitions_CurveTextRight').remove();}
this.rightBoxPositionY=this.originalBoxPositionY;this.rightCurvePositionY=this.originalCurvePositionY;}};function Piwik_Transitions_Model(ajax){this.ajax=ajax;this.groupTitles={};}
Piwik_Transitions_Model.prototype.htmlLoaded=function(){this.groupTitles.previousPages=Piwik_Transitions_Translations.fromPreviousPages;this.groupTitles.previousSiteSearches=Piwik_Transitions_Translations.fromPreviousSiteSearches;this.groupTitles.followingPages=Piwik_Transitions_Translations.toFollowingPages;this.groupTitles.followingSiteSearches=Piwik_Transitions_Translations.toFollowingSiteSearches;this.groupTitles.outlinks=Piwik_Transitions_Translations.outlinks;this.groupTitles.downloads=Piwik_Transitions_Translations.downloads;this.shareInGroupTexts={previousPages:Piwik_Transitions_Translations.fromPreviousPagesInline,previousSiteSearches:Piwik_Transitions_Translations.fromPreviousSiteSearchesInline,followingPages:Piwik_Transitions_Translations.toFollowingPagesInline,followingSiteSearches:Piwik_Transitions_Translations.toFollowingSiteSearchesInline,searchEngines:Piwik_Transitions_Translations.fromSearchEnginesInline,websites:Piwik_Transitions_Translations.fromWebsitesInline,campaigns:Piwik_Transitions_Translations.fromCampaignsInline,outlinks:Piwik_Transitions_Translations.outlinksInline,downloads:Piwik_Transitions_Translations.downloadsInline};};Piwik_Transitions_Model.prototype.loadData=function(actionType,actionName,callback){var self=this;this.pageviews=0;this.exits=0;this.loops=0;this.directEntries=0;this.searchEnginesNbTransitions=0;this.searchEngines=[];this.websitesNbTransitions=0;this.websites=[];this.campaignsNbTransitions=0;this.campaigns=[];this.previousPagesNbTransitions=0;this.previousPages=[];this.followingPagesNbTransitions=0;this.followingPages=[];this.downloadsNbTransitions=0;this.downloads=[];this.outlinksNbTransitions=0;this.outlinks=[];this.previousSiteSearchesNbTransitions=0;this.previousSiteSearches=[];this.followingSiteSearchesNbTransitions=0;this.followingSiteSearches=[];this.date='';this.ajax.callApi('Transitions.getTransitionsForAction',{actionType:actionType,actionName:actionName,expanded:1},function(report){self.date=report.date;self.pageviews=report.pageMetrics.pageviews;self.loops=report.pageMetrics.loops;self.exits=report.pageMetrics.exits;for(var i=0;i<report.referrers.length;i++){var referrer=report.referrers[i];if(referrer.shortName=='direct'){self.directEntries=referrer.visits;}else if(referrer.shortName=='search'){self.searchEnginesNbTransitions=referrer.visits;self.searchEngines=referrer.details;self.groupTitles.searchEngines=referrer.label;}else if(referrer.shortName=='website'){self.websitesNbTransitions=referrer.visits;self.websites=referrer.details;self.groupTitles.websites=referrer.label;}else if(referrer.shortName=='campaign'){self.campaignsNbTransitions=referrer.visits;self.campaigns=referrer.details;self.groupTitles.campaigns=referrer.label;}}
self.loadAndSumReport(report,'previousPages');self.loadAndSumReport(report,'previousSiteSearches');self.loadAndSumReport(report,'followingPages');self.loadAndSumReport(report,'followingSiteSearches');self.loadAndSumReport(report,'downloads');self.loadAndSumReport(report,'outlinks');if(typeof Piwik_Transitions_Model.totalNbPageviews=='undefined'){Piwik_Transitions_Model.totalNbPageviews=false;self.ajax.loadTotalNbPageviews(function(nbPageviews){Piwik_Transitions_Model.totalNbPageviews=nbPageviews;});}
callback();});};Piwik_Transitions_Model.prototype.loadAndSumReport=function(apiData,reportName){var data=this[reportName]=apiData[reportName];var sumVarName=reportName+'NbTransitions';this[sumVarName]=0;for(var i=0;i<data.length;i++){this[sumVarName]+=data[i].referrals;}};Piwik_Transitions_Model.prototype.getTotalNbPageviews=function(){if(typeof Piwik_Transitions_Model.totalNbPageviews=='undefined'){return false;}
return Piwik_Transitions_Model.totalNbPageviews;};Piwik_Transitions_Model.prototype.getGroupTitle=function(groupName){if(typeof this.groupTitles[groupName]!='undefined'){return this.groupTitles[groupName];}
return groupName;};Piwik_Transitions_Model.prototype.getShareInGroupTooltip=function(share,groupName){var tip=this.shareInGroupTexts[groupName];return tip.replace(/%s/,share);};Piwik_Transitions_Model.prototype.getDetailsForGroup=function(groupName){return this.addPercentagesToData(this[groupName]);};Piwik_Transitions_Model.prototype.getPercentage=function(metric,formatted){var percentage=(this.pageviews==0?0:this[metric]/this.pageviews);if(formatted){percentage=this.roundPercentage(percentage);percentage+='%';}
return percentage;};Piwik_Transitions_Model.prototype.addPercentagesToData=function(data){var total=0;for(var i=0;i<data.length;i++){total+=parseInt(data[i].referrals,10);}
for(i=0;i<data.length;i++){data[i].percentage=this.roundPercentage(data[i].referrals/total);}
return data;};Piwik_Transitions_Model.prototype.roundPercentage=function(value){if(value<.1){return Math.round(value*1000)/10.0;}else{return Math.round(value*100);}};function Piwik_Transitions_Ajax(){}
Piwik_Transitions_Ajax.prototype.loadTotalNbPageviews=function(callback){this.callApi('Actions.get',{columns:'nb_pageviews'},function(response){var value=typeof response.value!='undefined'?response.value:false;callback(value);});};Piwik_Transitions_Ajax.prototype.callTransitionsController=function(action,callback){var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({module:'Transitions',action:action},'get');ajaxRequest.setCallback(callback);ajaxRequest.setFormat('html');ajaxRequest.send(false);};Piwik_Transitions_Ajax.prototype.callApi=function(method,params,callback){var self=this;params.format='JSON';params.module='API';params.method=method;var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(params,'get');ajaxRequest.useCallbackInCaseOfError();ajaxRequest.setCallback(function(result){if(typeof result.result!='undefined'&&result.result=='error'){var errorName=result.message;var showError=function(){var errorTitle,errorMessage,errorBack;if(typeof Piwik_Transitions_Translations[errorName]=='undefined'){errorTitle='Exception';errorMessage=errorName;errorBack='<<<';}else{errorTitle=Piwik_Transitions_Translations[errorName];errorMessage=Piwik_Transitions_Translations[errorName+'Details'];errorBack=Piwik_Transitions_Translations[errorName+'Back'];}
if(typeof params.actionName!='undefined'){var url=params.actionName;url=piwikHelper.addBreakpointsToUrl(url);errorTitle=errorTitle.replace(/%s/,'<span>'+url+'</span>');}
errorMessage=errorMessage.replace(/%s/g,'<br />');Piwik_Popover.showError(errorTitle,errorMessage,errorBack);};if(typeof Piwik_Transitions_Translations=='undefined'){self.callApi('Transitions.getTranslations',{},function(response){if(typeof response[0]=='object'){Piwik_Transitions_Translations=response[0];}else{Piwik_Transitions_Translations={};}
showError();});}else{showError();}}
else{callback(result);}});ajaxRequest.send(false);};Piwik_Transitions_Util={shortenUrl:function(url,removeDomain){if(url=='Others'){return url;}
var urlBackup=url;url=url.replace(/http(s)?:\/\/(www\.)?/,'');if(urlBackup==url){return url;}
if(removeDomain){url=url.replace(/[^\/]*/,'');if(url=='/'){url=urlBackup;}}
url=url.replace(/\/$/,'');return url;},replacePlaceholderInHtml:function(container,value,spanClass){var span=container.find('span');if(span.size()==0){var html=container.html().replace(/%s/,'<span></span>');span=container.html(html).find('span');if(!spanClass){spanClass='Transitions_Metric';}
span.addClass(spanClass);}
if($.browser.msie&&parseFloat($.browser.version)<8){value+='&nbsp;';}
span.html(value);}};

$(document).ready(function(){var languageSelector=$("#languageSelection");if(languageSelector.size()==0)return;languageSelector.find("input").hide();var select=$("#language").hide();var langSelect=$("<a>").insertAfter(select).text(select.children(':selected').text()).autocomplete({delay:0,minLength:0,appendTo:'#languageSelection',source:function(request,response){response(select.children("option").map(function(){var text=$(this).text();return{label:text,value:this.value,title:$(this).attr('title'),href:$(this).attr('href'),option:this};}));},select:function(event,ui){event.preventDefault();ui.item.option.selected=true;if(ui.item.value){langSelect.text(ui.item.label);$('#languageSelection').find('form').submit();}else if(ui.item.href){window.open(ui.item.href);}}}).click(function(){if($(this).autocomplete("widget").is(":visible")){$(this).autocomplete("close");return;}
$(this).autocomplete("search","");});langSelect.data("ui-autocomplete")._renderItem=function(ul,item){$(ul).attr('id','languageSelect');return $("<li></li>").data("item.ui-autocomplete",item).append("<a title=\""+item.title+"\" href=\"javascript:;\">"+item.label+"</a>").appendTo(ul);};$('body').on('mouseup',function(e){if(!$(e.target).parents('#languageSelection').length&&!$(e.target).is('#languageSelection')&&!$(e.target).parents('#languageSelect').length){langSelect.autocomplete("close");}});});

(function($){var dashboardLayout={};var dashboardId=1;var dashboardName='';var dashboardElement=null;var dashboardChanged=false;var methods={init:function(options){dashboardElement=this;if(options.idDashboard){dashboardId=options.idDashboard;}
if(options.name){dashboardName=options.name;}
if(options.layout){generateLayout(options.layout);buildMenu();}else{methods.loadDashboard.apply(this,[dashboardId]);}
return this;},destroy:function(){$(dashboardElement).remove();dashboardElement=null;var widgets=$('[widgetId]');for(var i=0;i<widgets.length;i++){$(widgets[i]).dashboardWidget('destroy');}},loadDashboard:function(dashboardIdToLoad){$(dashboardElement).empty();dashboardName='';dashboardLayout=null;dashboardId=dashboardIdToLoad;piwikHelper.showAjaxLoading();broadcast.updateHashOnly=true;broadcast.propagateAjax('?idDashboard='+dashboardIdToLoad);fetchLayout(generateLayout);buildMenu();return this;},setColumnLayout:function(newLayout){adjustDashboardColumns(newLayout);},getColumnLayout:function(){return dashboardLayout.config.layout;},getDashboardName:function(){return dashboardName;},getDashboardId:function(){return dashboardId;},setDashboardName:function(newName){dashboardName=newName;dashboardChanged=true;saveLayout();},addWidget:function(uniqueId,columnNumber,widgetParameters,addWidgetOnTop,isHidden){addWidgetTemplate(uniqueId,columnNumber,widgetParameters,addWidgetOnTop,isHidden);reloadWidget(uniqueId);saveLayout();},resetLayout:function(){var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({module:'Dashboard',action:'resetLayout',idDashboard:dashboardId},'get');ajaxRequest.setCallback(function(){methods.loadDashboard.apply(this,[dashboardId])});ajaxRequest.setLoadingElement();ajaxRequest.setFormat('html');ajaxRequest.send(true);},removeDashboard:function(){removeDashboard();},saveLayoutAsDefaultWidgetLayout:function(){saveLayout('saveLayoutAsDefault');},isDefaultDashboard:function(){return(dashboardId==1);}};function generateLayout(layout){dashboardLayout=parseLayout(layout);piwikHelper.hideAjaxLoading();adjustDashboardColumns(dashboardLayout.config.layout);var dashboardContainsWidgets=false;for(var column=0;column<dashboardLayout.columns.length;column++){for(var i in dashboardLayout.columns[column]){if(typeof dashboardLayout.columns[column][i]!='object'){continue;}
var widget=dashboardLayout.columns[column][i];dashboardContainsWidgets=true;addWidgetTemplate(widget.uniqueId,column+1,widget.parameters,false,widget.isHidden)}}
if(!dashboardContainsWidgets){$(dashboardElement).trigger('dashboardempty');}
makeWidgetsSortable();}
function fetchLayout(callback){globalAjaxQueue.abort();var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({module:'Dashboard',action:'getDashboardLayout',idDashboard:dashboardId},'get');ajaxRequest.setCallback(callback);ajaxRequest.send(false);}
function adjustDashboardColumns(layout){var columnWidth=layout.split('-');var columnCount=columnWidth.length;var currentCount=$('.col',dashboardElement).length;if(currentCount<columnCount){$('.menuClear',dashboardElement).remove();for(var i=currentCount;i<columnCount;i++){if(dashboardLayout.columns.length<i){dashboardLayout.columns.push({});}
$(dashboardElement).append('<div class="col"> </div>');}
$(dashboardElement).append('<div class="menuClear"> </div>');}else if(currentCount>columnCount){for(var i=columnCount;i<currentCount;i++){if(dashboardLayout.columns.length>=i){dashboardLayout.columns.pop();}
$('[widgetId]',$('.col:last')).each(function(id,elem){var cols=$('.col').slice(0,columnCount);var smallestColumn=$(cols[0]);var smallestColumnHeight=null;cols.each(function(colId,col){if(smallestColumnHeight==null||smallestColumnHeight>$(col).height()){smallestColumnHeight=$(col).height();smallestColumn=$(col);}});$(elem).appendTo(smallestColumn);});$('.col:last').remove();}}
for(var i=0;i<columnCount;i++){$('.col',dashboardElement)[i].className='col width-'+columnWidth[i];}
makeWidgetsSortable();if(currentCount>0&&dashboardLayout.config.layout!=layout){dashboardChanged=true;dashboardLayout.config.layout=layout;saveLayout();}
$('.widget:has(".piwik-graph")').each(function(id,elem){reloadWidget($(elem).attr('id'));});}
function parseLayout(layout){if($.isArray(layout)){layout={config:{layout:'33-33-33'},columns:layout};}
if(!layout.config.layout){layout.config.layout='33-33-33';}
return layout;}
function reloadWidget(uniqueId){$('[widgetId='+uniqueId+']',dashboardElement).dashboardWidget('reload',false,true);}
function addWidgetTemplate(uniqueId,columnNumber,widgetParameters,addWidgetOnTop,isHidden){if(!columnNumber){columnNumber=1;}
if(columnNumber>$('.col',dashboardElement).length){return;}
var widgetContent='<div class="sortable" widgetId="'+uniqueId+'"></div>';if(addWidgetOnTop){$('.col:nth-child('+columnNumber+')',dashboardElement).prepend(widgetContent);}else{$('.col:nth-child('+columnNumber+')',dashboardElement).append(widgetContent);}
$('[widgetId='+uniqueId+']',dashboardElement).dashboardWidget({uniqueId:uniqueId,widgetParameters:widgetParameters,onChange:function(){saveLayout();},isHidden:isHidden});}
function makeWidgetsSortable(){function onStart(event,ui){if(!jQuery.support.noCloneEvent){$('object',this).hide();}}
function onStop(event,ui){$('object',this).show();$('.widgetHover',this).removeClass('widgetHover');$('.widgetTopHover',this).removeClass('widgetTopHover');$('.button#close, .button#maximise',this).hide();if($('.widget:has(".piwik-graph")',ui.item).length){reloadWidget($('.widget',ui.item).attr('id'));}
saveLayout();}
if($("div.col",dashboardElement).is(":data('ui-sortable')")){$("div.col",dashboardElement).sortable('destroy');}
$('div.col',dashboardElement).sortable({items:'div.sortable',opacity:0.6,forceHelperSize:true,forcePlaceholderSize:true,placeholder:'hover',handle:'.widgetTop',helper:'clone',start:onStart,stop:onStop,connectWith:'div.col'});}
function buildMenu(){var success=function(dashboards){var dashboardMenuList=$('#Dashboard').find('> ul');dashboardMenuList.empty();if(dashboards.length>1){dashboardMenuList.show();for(var i=0;i<dashboards.length;i++){dashboardMenuList.append('<li id="Dashboard_embeddedIndex_'+dashboards[i].iddashboard+'" class="dashboardMenuItem"><a dashboardId="'+dashboards[i].iddashboard+'">'+piwikHelper.htmlEntities(dashboards[i].name)+'</a></li>');if(dashboards[i].iddashboard==dashboardId){dashboardName=dashboards[i].name;}}
$('li a',dashboardMenuList).each(function(){$(this).css({width:$(this).width()+30,paddingLeft:0,paddingRight:0});});$('#Dashboard_embeddedIndex_'+dashboardId).addClass('sfHover');}else{dashboardMenuList.hide();}
$('.dashboardMenuItem').on('click',function(){if(typeof piwikMenu!='undefined'){piwikMenu.activateMenu('Dashboard','embeddedIndex');}
$('.dashboardMenuItem').removeClass('sfHover');if($(dashboardElement).length){$(dashboardElement).dashboard('loadDashboard',$('a',this).attr('dashboardId'));}else{broadcast.propagateAjax('module=Dashboard&action=embeddedIndex&idDashboard='+$('a',this).attr('dashboardId'));}
$(this).addClass('sfHover');});};var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({module:'Dashboard',action:'getAllDashboards'},'get');ajaxRequest.setCallback(success);ajaxRequest.send(false);}
function saveLayout(action){var columns=[];var columnNumber=0;$('.col').each(function(){columns[columnNumber]=[];var items=$('[widgetId]',this);for(var j=0;j<items.size();j++){columns[columnNumber][j]=$(items[j]).dashboardWidget('getWidgetObject');delete columns[columnNumber][j].parameters.segment;}
columnNumber++;});if(JSON.stringify(dashboardLayout.columns)!=JSON.stringify(columns)||dashboardChanged||action){dashboardLayout.columns=JSON.parse(JSON.stringify(columns));columns=null;if(!action){action='saveLayout';}
var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({module:'Dashboard',action:action,idDashboard:dashboardId},'get');ajaxRequest.addParams({layout:JSON.stringify(dashboardLayout),name:dashboardName},'post');ajaxRequest.setCallback(function(){if(dashboardChanged){dashboardChanged=false;buildMenu();}});ajaxRequest.setFormat('html');ajaxRequest.send(false);}}
function removeDashboard(){if(dashboardId==1){return;}
var ajaxRequest=new ajaxHelper();ajaxRequest.setLoadingElement();ajaxRequest.addParams({module:'Dashboard',action:'removeDashboard',idDashboard:dashboardId},'get');ajaxRequest.setCallback(function(){methods.loadDashboard.apply(this,[1]);});ajaxRequest.setFormat('html');ajaxRequest.send(true);}
$.fn.dashboard=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.dashboard');}}})(jQuery);

(function($){$.widget('piwik.dashboardWidget',{isMaximised:false,uniqueId:null,widgetParameters:{},options:{uniqueId:null,isHidden:false,onChange:null,widgetParameters:{}},_create:function(){if(!this.options.uniqueId){piwikHelper.error('widgets can\'t be created without an uniqueId');return;}else{this.uniqueId=this.options.uniqueId;}
if(this.options.widgetParameters){this.widgetParameters=this.options.widgetParameters;}
this._createDashboardWidget(this.uniqueId);var self=this;this.element.on('setParameters.dashboardWidget',function(e,params){self.setParameters(params);});this.reload(true,true);},destroy:function(){if(this.isMaximised){$('[widgetId='+this.uniqueId+']').dialog('destroy');}
$('*',this.element).off('.dashboardWidget');$('.widgetContent',this.element).trigger('widget:destroy');return this;},getWidgetObject:function(){return{uniqueId:this.uniqueId,parameters:this.widgetParameters,isHidden:this.options.isHidden};},maximise:function(){this.isMaximised=true;$('.button#close, .button#maximise',this.element).hide();this.element.before('<div id="'+this.uniqueId+'-placeholder" class="widgetPlaceholder widget"> </div>');$('#'+this.uniqueId+'-placeholder').height(this.element.height());$('#'+this.uniqueId+'-placeholder').width(this.element.width()-16);var width=Math.floor($('body').width()*0.7);var self=this;this.element.dialog({title:'',modal:true,width:width,position:['center','center'],resizable:true,autoOpen:true,close:function(event,ui){self.isMaximised=false;$('.button#minimise, .button#refresh',$(this)).hide();$('body').off('.dashboardWidget');$(this).dialog("destroy");$('#'+self.uniqueId+'-placeholder').replaceWith(this);$(this).removeAttr('style');self.options.onChange();$(this).find('div.piwik-graph').trigger('resizeGraph');$('.widgetContent',self.element).trigger('widget:minimise');}});this.element.find('div.piwik-graph').trigger('resizeGraph');var currentWidget=this.element;$('body').on('click.dashboardWidget',function(ev){if(/ui-widget-overlay/.test(ev.target.className)){$(currentWidget).dialog("close");}});$('.widgetContent',currentWidget).trigger('widget:maximise');return this;},reload:function(hideLoading,notJQueryUI){if(!notJQueryUI){piwikHelper.log('widget.reload() was called by jquery.ui, ignoring',arguments.callee.caller);return;}
var self=this,currentWidget=this.element;function onWidgetLoadedReplaceElementWithContent(loadedContent){$('.widgetContent',currentWidget).html(loadedContent);$('.widgetContent',currentWidget).removeClass('loading');$('.widgetContent',currentWidget).trigger('widget:create',[self]);}
var segment=broadcast.getValueFromHash('segment')||broadcast.getValueFromUrl('segment');if(segment.length){this.widgetParameters.segment=segment;}
if(!hideLoading){$('.widgetContent',currentWidget).addClass('loading');}
widgetsHelper.loadWidgetAjax(this.uniqueId,this.widgetParameters,onWidgetLoadedReplaceElementWithContent);return this;},setParameters:function(parameters){if(!this.isMaximised&&(parameters.viewDataTable=='tableAllColumns'||parameters.viewDataTable=='tableGoals')){this.maximise();}
for(var name in parameters){this.widgetParameters[name]=parameters[name];}
if(!this.isMaximised){this.options.onChange();}
return this;},_createDashboardWidget:function(uniqueId){var widgetName=widgetsHelper.getWidgetNameFromUniqueId(uniqueId);if(!widgetName){widgetName=_pk_translate('Dashboard_WidgetNotFound_js');}
var emptyWidgetContent=widgetsHelper.getEmptyWidgetHtml(uniqueId,widgetName);this.element.html(emptyWidgetContent);var widgetElement=$('#'+uniqueId,this.element);var self=this;widgetElement.on('mouseenter.dashboardWidget',function(){if(!self.isMaximised){$(this).addClass('widgetHover');$('.widgetTop',this).addClass('widgetTopHover');$('.button#close, .button#maximise',this).show();if(!$('.widgetContent',this).hasClass('hidden')){$('.button#minimise, .button#refresh',this).show();}}}).on('mouseleave.dashboardWidget',function(){if(!self.isMaximised){$(this).removeClass('widgetHover');$('.widgetTop',this).removeClass('widgetTopHover');$('.button#close, .button#maximise, .button#minimise, .button#refresh',this).hide();}});if(this.options.isHidden){$('.widgetContent',widgetElement).toggleClass('hidden');}
$('.button#close',widgetElement).on('click.dashboardWidget',function(ev){piwikHelper.modalConfirm('#confirm',{yes:function(){self.element.remove();self.options.onChange();}});});$('.button#maximise',widgetElement).on('click.dashboardWidget',function(ev){if($('.widgetContent',$(this).parents('.widget')).hasClass('hidden')){self.isMaximised=false;self.options.isHidden=false;$('.widgetContent',$(this).parents('.widget')).removeClass('hidden');$('.button#minimise, .button#refresh',$(this).parents('.widget')).show();$(this).parents('.widget').find('div.piwik-graph').trigger('resizeGraph');self.options.onChange();$('.widgetContent',widgetElement).trigger('widget:minimise');}else{self.maximise();}});$('.button#minimise',widgetElement).on('click.dashboardWidget',function(ev){if(!self.isMaximised){$('.widgetContent',$(this).parents('.widget')).addClass('hidden');$('.button#minimise, .button#refresh',$(this).parents('.widget')).hide();self.options.isHidden=true;self.options.onChange();}else{self.element.dialog("close");}});$('.button#refresh',widgetElement).on('click.dashboardWidget',function(ev){self.reload(false,true);});widgetElement.show();}});})(jQuery);

function initDashboard(dashboardId,dashboardLayout){if($('#periodString').length){$('#periodString').after($('#dashboardSettings'));var leftMargin=$('#periodString')[0].offsetWidth;var segmentSelector=$('.segmentationContainer:visible');if(segmentSelector.length){segmentSelector=$($('.segmentationContainer:visible')[0]);leftMargin=segmentSelector.position().left+segmentSelector.outerWidth();}
$('#dashboardSettings').css({left:leftMargin});}
if(!$('#topBars').length){$('#dashboardSettings').css({left:0});$('#dashboardSettings').after($('#Dashboard'));$('#Dashboard').find('> ul li a').each(function(){$(this).css({width:this.offestWidth+30,paddingLeft:0,paddingRight:0});});$('#Dashboard_embeddedIndex_'+dashboardId).addClass('sfHover');}
$('#dashboardSettings').on('click',function(){$('#dashboardSettings').toggleClass('visible');if($('#dashboardWidgetsArea').dashboard('isDefaultDashboard')){$('#removeDashboardLink').hide();}else{$('#removeDashboardLink').show();}
$('#dashboardSettings').find('.widgetpreview-widgetlist').css('paddingTop',$('#dashboardSettings').find('.widgetpreview-categorylist').parent('li').position().top);});$('body').on('mouseup',function(e){if(!$(e.target).parents('#dashboardSettings').length&&!$(e.target).is('#dashboardSettings')){$('#dashboardSettings').widgetPreview('reset');$('#dashboardSettings').removeClass('visible');}});widgetsHelper.getAvailableWidgets();$('#dashboardWidgetsArea').on('dashboardempty',showEmptyDashboardNotification);$('#dashboardWidgetsArea').dashboard({idDashboard:dashboardId,layout:dashboardLayout});$('#dashboardSettings').widgetPreview({isWidgetAvailable:function(widgetUniqueId){return!$('#dashboardWidgetsArea').find('[widgetId='+widgetUniqueId+']').length;},onSelect:function(widgetUniqueId){var widget=widgetsHelper.getWidgetObjectFromUniqueId(widgetUniqueId);$('#dashboardWidgetsArea').dashboard('addWidget',widget.uniqueId,1,widget.parameters,true,false);$('#dashboardSettings').removeClass('visible');},resetOnSelect:true});$('#columnPreview').find('>div').each(function(){var width=[];$('div',this).each(function(){width.push(this.className.replace(/width-/,''));});$(this).attr('layout',width.join('-'));});$('#columnPreview').find('>div').on('click',function(){$('#columnPreview').find('>div').removeClass('choosen');$(this).addClass('choosen');});$('.submenu>li').on('mouseenter',function(event){if(!$('.widgetpreview-categorylist',event.target).length){$('#dashboardSettings').widgetPreview('reset');}});}
function createDashboard(){$('#createDashboardName').val('');piwikHelper.modalConfirm('#createDashboardConfirm',{yes:function(){var dashboardName=$('#createDashboardName').val();var type=($('#dashboard_type_empty:checked').length>0)?'empty':'default';var ajaxRequest=new ajaxHelper();ajaxRequest.setLoadingElement();ajaxRequest.addParams({module:'Dashboard',action:'createNewDashboard'},'get');ajaxRequest.addParams({name:encodeURIComponent(dashboardName),type:type},'post');ajaxRequest.setCallback(function(id){$('#dashboardWidgetsArea').dashboard('loadDashboard',id);});ajaxRequest.send(true);}});}
function resetDashboard(){piwikHelper.modalConfirm('#resetDashboardConfirm',{yes:function(){$('#dashboardWidgetsArea').dashboard('resetLayout');}});}
function renameDashboard(){$('#newDashboardName').val($('#dashboardWidgetsArea').dashboard('getDashboardName'));piwikHelper.modalConfirm('#renameDashboardConfirm',{yes:function(){$('#dashboardWidgetsArea').dashboard('setDashboardName',$('#newDashboardName').val());}});}
function removeDashboard(){$('#removeDashboardConfirm').find('h2 span').html($('#dashboardWidgetsArea').dashboard('getDashboardName'));piwikHelper.modalConfirm('#removeDashboardConfirm',{yes:function(){$('#dashboardWidgetsArea').dashboard('removeDashboard');}});}
function showChangeDashboardLayoutDialog(){$('#columnPreview').find('>div').removeClass('choosen');$('#columnPreview').find('>div[layout='+$('#dashboardWidgetsArea').dashboard('getColumnLayout')+']').addClass('choosen');piwikHelper.modalConfirm('#changeDashboardLayout',{yes:function(){$('#dashboardWidgetsArea').dashboard('setColumnLayout',$('#changeDashboardLayout').find('.choosen').attr('layout'));}});}
function showEmptyDashboardNotification(){piwikHelper.modalConfirm('#dashboardEmptyNotification',{resetDashboard:function(){$('#dashboardWidgetsArea').dashboard('resetLayout');},addWidget:function(){$('#dashboardSettings').trigger('click');}});}
function setAsDefaultWidgets(){piwikHelper.modalConfirm('#setAsDefaultWidgetsConfirm',{yes:function(){$('#dashboardWidgetsArea').dashboard('saveLayoutAsDefaultWidgetLayout');}});}
function copyDashboardToUser(){$('#copyDashboardName').val($('#dashboardWidgetsArea').dashboard('getDashboardName'));var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({module:'API',method:'UsersManager.getUsers',format:'json'},'get');ajaxRequest.setCallback(function(availableUsers){$('#copyDashboardUser').empty();$('#copyDashboardUser').append($('<option></option>').val(piwik.userLogin).html(piwik.userLogin));$.each(availableUsers,function(index,user){if(user.login!='anonymous'&&user.login!=piwik.userLogin){$('#copyDashboardUser').append($('<option></option>').val(user.login).html(user.login+' ('+user.alias+')'));}});});ajaxRequest.send(true);piwikHelper.modalConfirm('#copyDashboardToUserConfirm',{yes:function(){var copyDashboardName=$('#copyDashboardName').val();var copyDashboardUser=$('#copyDashboardUser').val();var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({module:'Dashboard',action:'copyDashboardToUser'},'get');ajaxRequest.addParams({name:encodeURIComponent(copyDashboardName),dashboardId:$('#dashboardWidgetsArea').dashboard('getDashboardId'),user:encodeURIComponent(copyDashboardUser)},'post');ajaxRequest.setCallback(function(id){$('#alert').find('h2').text(_pk_translate('Dashboard_DashboardCopied_js'));piwikHelper.modalConfirm('#alert',{});});ajaxRequest.send(true);}});}

function setRowData(idsite,visits,pageviews,revenue,name,url,visitsSummaryValue,pageviewsSummaryValue,revenueSummaryValue){this.idsite=idsite;this.visits=visits;this.revenue=revenue;this.name=name;this.url=url;this.pageviews=pageviews;this.visitsSummaryValue=parseFloat(visitsSummaryValue);this.pageviewsSummaryValue=parseFloat(pageviewsSummaryValue);this.revenueSummaryValue=parseFloat(revenueSummaryValue)||0;}
function setOrderBy(self,allSites,params,mOrderBy){if(params['mOrderBy']==mOrderBy){if(params['order']=='desc'){params['order']='asc';}else{params['order']='desc';}}
params['mOrderBy']=mOrderBy;prepareRows(allSites,params);$('.arrow').removeClass('multisites_desc multisites_asc');if($(self).attr('class')=='evolution'){mOrderBy='evolution';}
$('#'+mOrderBy+'  .arrow').addClass('multisites_'+params['order']);return params;}
function prepareRows(allUnsortedSites,params){var allSites;$("#tb").find("tr").remove();$("#next").html('');$("#prev").html('');var mOrderBy=params['mOrderBy'];allSites=orderBy(allUnsortedSites,params);if(allSites.length>params['limit']){allSites=limitBy(allSites,params);}
displayRows(allSites,params);showPagination(allUnsortedSites,params);params['sitesVisible']=allSites;}
function orderBy(allSites,params){if(params['mOrderBy']=='names'){allSites.sort(function(a,b){if(a['name'].toLowerCase()==b['name'].toLowerCase()){return 0;}
return(a['name'].toLowerCase()<b['name'].toLowerCase())?-1:1;});}
else if(params['mOrderBy']=='visits'){allSites.sort(function(a,b){if(a['visits']==b['visits']){return 0;}
return(a['visits']<b['visits'])?-1:1;});}
else if(params['mOrderBy']=='pageviews'){allSites.sort(function(a,b){if(a['pageviews']==b['pageviews']){return 0;}
return(a['pageviews']<b['pageviews'])?-1:1;});}
else if(params['mOrderBy']=='revenue'){allSites.sort(function(a,b){var lhs=parseFloat(a['revenue'].replace(/[^0-9\.]+/g,""))||0,rhs=parseFloat(b['revenue'].replace(/[^0-9\.]+/g,""))||0;return lhs===rhs?0:((lhs<rhs)?-1:1);});}
else if(params['mOrderBy']=='revenueSummary'){allSites.sort(function(a,b){if(a['revenueSummaryValue']==b['revenueSummaryValue']){return 0;}
return(a['revenueSummaryValue']-b['revenueSummaryValue']<=0.01)?-1:1;});}
else if(params['mOrderBy']=='pageviewsSummary'){allSites.sort(function(a,b){if(a['pageviewsSummaryValue']==b['pageviewsSummaryValue']){return 0;}
return(a['pageviewsSummaryValue']-b['pageviewsSummaryValue']<=0.01)?-1:1;});}
else if(params['mOrderBy']=='visitsSummary'){allSites.sort(function(a,b){if(a['visitsSummaryValue']==b['visitsSummaryValue']){return 0;}
return(a['visitsSummaryValue']-b['visitsSummaryValue']<=0.01)?-1:1;});}
if(params['order']=='desc'){allSites.reverse();}
return allSites;}
function limitBy(allSites,params){var begin=(params['page']-1)*params['limit'];var end=(params['page']*params['limit']);return allSites.slice(begin,end);}
function switchEvolution(params){$('.pageviews').hide();$('.revenue').hide();$('.visits').hide();$('.'+params['evolutionBy']).show();sitesVisible=params['sitesVisible'];for(var i=0;i<allSites.length;i++){$('#sparkline_'+allSites[i].idsite).html(getSparklineImg(allSites[i].idsite,params['evolutionBy'],params));}}
function displayRows(allSites,params){for(var i=0;i<allSites.length;i++){var str=params['row'];str=str.replace(/%revenueSummary%/g,getImageForSummary(allSites[i].revenueSummaryValue));str=str.replace(/%pageviewsSummary%/g,getImageForSummary(allSites[i].pageviewsSummaryValue));str=str.replace(/%visitsSummary%/g,getImageForSummary(allSites[i].visitsSummaryValue));str=str.replace(/%sparkline%/g,getSparklineImg(allSites[i].idsite,params['evolutionBy'],params));str=str.replace(/%pageviews%/g,allSites[i].pageviews);str=str.replace(/%idsite%/g,allSites[i].idsite);str=str.replace(/%visits%/g,allSites[i].visits);str=str.replace(/%name%/g,allSites[i].name);str=str.replace(/%revenue%/g,allSites[i].revenue);str=str.replace(/%main_url%/g,allSites[i].url);str=str.replace(/%date%/g,params['date']||params['dateSparkline']);str=str.replace(/%period%/g,params['period']);$('#tb').append('<tr class="tables_row" id="row_'+allSites[i].idsite+'">'+str+'</tr>');}
$(".table_row").show();$('.pageviews').hide();$('.revenue').hide();$('.visits').hide();$('#main_indicator').hide();$('.'+params['evolutionBy']).show();$("#main_indicator").hide();}
function getSparklineImg(id,column,params){if(column!='revenue'){column='nb_'+column;}
var append='';var token_auth=broadcast.getValueFromUrl('token_auth');if(token_auth.length){append='&token_auth='+token_auth;}
return'<img class="sparkline" alt="" src="?module=MultiSites&action=getEvolutionGraph&period='+params['period']+'&date='+params['dateSparkline']+'&evolutionBy='+params['evolutionBy']+'&columns='+column+'&idSite='+id+'&idsite='+id+'&viewDataTable=sparkline'+append+'" width="100" height="25" />';}
function showPagination(allSites,params){if((params['page']*params['limit'])<allSites.length){var html='<span style="cursor:pointer;" class="pointer" onClick="changePage(allSites, params, \'next\');">'+params['next']+' &#187;</span>';$("#next").html(html);}
if(params['page']>1){html='<span style="cursor:pointer;" onClick="changePage(allSites, params, \'prev\');">&#171; '+params['prev']+'</span>'
$("#prev").html(html);}
var start=(params['page']-1)*params['limit']+1;var count=allSites.length;var end=parseInt(start)+parseInt(params['limit'])-1;if(end>count)end=count;html='<span>'+(start)+' - '+end+' of '+count+'</span>';$("#counter").html(html);}
function changePage(allSites,params,kind){if(kind=='next'){params['page']++;}
else{params['page']--;}
prepareRows(allSites,params);return params;}
function getImageForSummary(value){if(value>0){return'<img src="plugins/MultiSites/images/arrow_up.png" alt="" /> <b style="color: green;">'+value+'&nbsp;%</b>';}
else if(value==0){return'<img src="plugins/MultiSites/images/stop.png" alt="" /> <b>'+value+'%</b>';}
else{return'<img src="plugins/MultiSites/images/arrow_down.png" alt="" /> <b style="color: red;">'+value+'&nbsp;%</b>';}}

function showAddNewGoal(){hideForms();$(".entityAddContainer").show();showCancel();piwikHelper.lazyScrollTo(".entityContainer",400);return false;}
function showEditGoals(){hideForms();$("#entityEditContainer").show();showCancel();piwikHelper.lazyScrollTo(".entityContainer",400);return false;}
function hideForms(){$(".entityAddContainer").hide();$("#entityEditContainer").hide();}
function showCancel(){$(".entityCancel").show();$('.entityCancelLink').click(function(){hideForms();$(".entityCancel").hide();});}
function initGoalForm(goalMethodAPI,submitText,goalName,matchAttribute,pattern,patternType,caseSensitive,revenue,allowMultiple,goalId){$('#goal_name').val(goalName);if(matchAttribute=='manually'){$('select[name=trigger_type] option[value=manually]').prop('selected',true);$('input[name=match_attribute]').prop('disabled',true);$('#match_attribute_section').hide();$('#manual_trigger_section').show();matchAttribute='url';}else{$('select[name=trigger_type] option[value=visitors]').prop('selected',true);}
$('input[name=match_attribute][value='+matchAttribute+']').prop('checked',true);$('input[name=allow_multiple][value='+allowMultiple+']').prop('checked',true);$('#match_attribute_name').html(mappingMatchTypeName[matchAttribute]);$('#examples_pattern').html(mappingMatchTypeExamples[matchAttribute]);$('select[name=pattern_type] option[value='+patternType+']').prop('selected',true);$('input[name=pattern]').val(pattern);$('#case_sensitive').prop('checked',caseSensitive);$('input[name=revenue]').val(revenue);$('input[name=methodGoalAPI]').val(goalMethodAPI);$('#goal_submit').val(submitText);if(goalId!=undefined){$('input[name=goalIdUpdate]').val(goalId);}}
function bindGoalForm(){$('select[name=trigger_type]').click(function(){var triggerTypeId=$(this).val();if(triggerTypeId=="manually"){$('input[name=match_attribute]').prop('disabled',true);$('#match_attribute_section').hide();$('#manual_trigger_section').show();}else{$('input[name=match_attribute]').removeProp('disabled');$('#match_attribute_section').show();$('#manual_trigger_section').hide();}});$('input[name=match_attribute]').click(function(){var matchTypeId=$(this).val();$('#match_attribute_name').html(mappingMatchTypeName[matchTypeId]);$('#examples_pattern').html(mappingMatchTypeExamples[matchTypeId]);});$('#goal_submit').click(function(){ajaxAddGoal();return false;});$('a[name=linkAddNewGoal]').click(function(){initAndShowAddGoalForm();piwikHelper.lazyScrollTo('#goal_name');});}
function ajaxDeleteGoal(idGoal){piwikHelper.lazyScrollTo(".entityContainer",400);var parameters={};parameters.format='json';parameters.idGoal=idGoal;parameters.module='API';parameters.method='Goals.deleteGoal';var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(parameters,'get');ajaxRequest.setLoadingElement('#goalAjaxLoading');ajaxRequest.setCallback(function(){location.reload();});ajaxRequest.send(true);}
function ajaxAddGoal(){piwikHelper.lazyScrollTo(".entityContainer",400);var parameters={};parameters.name=encodeURIComponent($('#goal_name').val());if($('[name=trigger_type]').val()=='manually'){parameters.matchAttribute='manually';parameters.patternType='regex';parameters.pattern='.*';parameters.caseSensitive=0;}else{parameters.matchAttribute=$('input[name=match_attribute]:checked').val();parameters.patternType=$('[name=pattern_type]').val();parameters.pattern=encodeURIComponent($('input[name=pattern]').val());parameters.caseSensitive=$('#case_sensitive').prop('checked')==true?1:0;}
parameters.revenue=$('input[name=revenue]').val();parameters.allowMultipleConversionsPerVisit=$('input[name=allow_multiple]:checked').val()==true?1:0;parameters.idGoal=$('input[name=goalIdUpdate]').val();parameters.format='json';parameters.module='API';parameters.method=$('input[name=methodGoalAPI]').val();var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(parameters,'get');ajaxRequest.setLoadingElement('#goalAjaxLoading');ajaxRequest.setCallback(function(){location.reload();});ajaxRequest.send(true);}
function bindListGoalEdit(){$('a[name=linkEditGoal]').click(function(){var goalId=$(this).attr('id');var goal=piwik.goals[goalId];initGoalForm("Goals.updateGoal",_pk_translate('Goals_UpdateGoal_js'),goal.name,goal.match_attribute,goal.pattern,goal.pattern_type,(goal.case_sensitive!='0'),goal.revenue,goal.allow_multiple,goalId);showAddNewGoal();return false;});$('a[name=linkDeleteGoal]').click(function(){var goalId=$(this).attr('id');var goal=piwik.goals[goalId];$('#confirm').find('h2').text(sprintf(_pk_translate('Goals_DeleteGoalConfirm_js'),'"'+goal.name+'"'));piwikHelper.modalConfirm('#confirm',{yes:function(){ajaxDeleteGoal(goalId);}});return false;});$('a[name=linkEditGoals]').click(function(){return showEditGoals();});}
function initAndShowAddGoalForm(){initGoalForm('Goals.addGoal',_pk_translate('Goals_AddGoal_js'),'','url','','contains',false,'0','0');return showAddNewGoal();}

$(document).ready(function(){$('#geoip-download-progress,#geoip-updater-progressbar').progressbar({value:1});$('.location-provider').change(function(){if(!$(this).is(':checked'))return;var parent=$(this).parent(),loading=$('.loadingPiwik',parent),ajaxSuccess=$('.ajaxSuccess',parent);var ajaxRequest=new ajaxHelper();ajaxRequest.setLoadingElement(loading);ajaxRequest.addParams({module:'UserCountry',action:'setCurrentLocationProvider',id:$(this).val()},'get');ajaxRequest.setCallback(function(){ajaxSuccess.fadeIn(1000,function(){setTimeout(function(){ajaxSuccess.fadeOut(1000);},2000);});});ajaxRequest.send(false);});$('.refresh-loc').click(function(e){e.preventDefault();var cell=$(this).parent().parent(),loading=$('.loadingPiwik',cell),location=$('.location',cell);location.css('visibility','hidden');var ajaxRequest=new ajaxHelper();ajaxRequest.setLoadingElement(loading);ajaxRequest.addParams({module:'UserCountry',action:'getLocationUsingProvider',id:$(this).attr('data-impl-id')},'get');ajaxRequest.setCallback(function(response){location.html('<strong><em>'+response+'</em></strong>').css('visibility','visible');});ajaxRequest.setFormat('html');ajaxRequest.send(false);return false;});var downloadNextChunk=function(action,thisId,progressBarId,cont,extraData,callback){var data={module:'UserCountry',action:action,'continue':cont?1:0};for(var k in extraData){data[k]=extraData[k];}
var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(data,'post');ajaxRequest.setCallback(function(response){if(!response||response.error){callback(response);}
else{var newProgressVal=Math.ceil((response.current_size/response.expected_file_size)*100);newProgressVal=Math.min(newProgressVal,100);$('#'+progressBarId).progressbar('option','value',newProgressVal);if(newProgressVal<100){downloadNextChunk(action,thisId,progressBarId,true,extraData,callback);}
else{callback(response);}}});ajaxRequest.setErrorCallback(function(){callback({error:_pk_translate('UserCountry_FatalErrorDuringDownload_js')});});ajaxRequest.send(false);};$('#start-download-free-geoip').click(function(){$('#geoipdb-screen1').hide("slide",{direction:"left"},800,function(){$('#geoipdb-screen2-download').fadeIn(1000);downloadNextChunk('downloadFreeGeoIPDB','geoipdb-screen2-download','geoip-download-progress',false,{},function(response){if(response.error){$('#geoipdb-screen2-download').fadeOut(1000,function(){$('#manage-geoip-dbs').html(response.error);});}
else{$('#geoipdb-screen2-download').fadeOut(1000,function(){$('#manage-geoip-dbs').html(response.next_screen);});}});});});$('body').on('click','#start-automatic-update-geoip',function(){$('#geoipdb-screen1').hide("slide",{direction:"left"},800,function(){$('#geoip-db-mangement').text(_pk_translate('UserCountry_SetupAutomaticUpdatesOfGeoIP_js'));$('#geoipdb-update-info').fadeIn(1000);});});$('body').on('click','#update-geoip-links',function(){$('#geoipdb-update-info-error').hide();var currentDownloading=null,updateGeoIPSuccess=function(response){if(response&&response.error){$('#geoip-progressbar-container').hide();$('#geoipdb-update-info-error').html(response.error).show();}
else if(response&&response.to_download){var continuing=currentDownloading==response.to_download;currentDownloading=response.to_download;$('#geoip-updater-progressbar').progressbar('option','value',1);$('#geoip-updater-progressbar-label').html(response.to_download_label);$('#geoip-progressbar-container').show();downloadNextChunk('downloadMissingGeoIpDb','geoipdb-update-info','geoip-updater-progressbar',continuing,{key:response.to_download},updateGeoIPSuccess);}
else{$('#geoipdb-update-info-error').hide();$('#geoip-updater-progressbar-label').html('');$('#geoip-progressbar-container').hide();$('#done-updating-updater').fadeIn(1000,function(){setTimeout(function(){$('#done-updating-updater').fadeOut(1000);},3000);});}};var ajaxRequest=new ajaxHelper();ajaxRequest.addParams({period:$('#geoip-update-period-cell').find('>input:checked').val()},'get');ajaxRequest.addParams({module:'UserCountry',action:'updateGeoIPLinks',loc_db:$('#geoip-location-db').val(),isp_db:$('#geoip-isp-db').val(),org_db:$('#geoip-org-db').val()},'post');ajaxRequest.setCallback(updateGeoIPSuccess);ajaxRequest.send(false);});});

$(function(){var feedback=$('a#topmenu-feedback');if(feedback.size()){var fbDiv=$('<div id="feedback-dialog"></div>').appendTo('body');feedback.click(function(){if(fbDiv.html()==''){fbDiv.html('<div id="feedback-loading"><img alt="" src="themes/default/images/loading-blue.gif"> '+_pk_translate('General_Loading_js')+'</div>');}
if($('#feedback-loading',fbDiv).length){$.get(feedback.attr('href'),function(data){fbDiv.html(data);});fbDiv.dialog({title:feedback.html(),modal:true,width:650,position:['center',40],resizable:false,autoOpen:false});}
$('#feedback-faq').show();$('#feedback-form').hide();$('#feedback-sent').hide().empty();fbDiv.dialog('open');return false;});}});

function sendUpdateUserAJAX(row){var parameters={};parameters.userLogin=$(row).children('#userLogin').html();var password=$(row).find('input#password').val();if(password!='-')parameters.password=password;parameters.email=$(row).find('input#email').val();parameters.alias=$(row).find('input#alias').val();var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'UsersManager.updateUser'},'GET');ajaxHandler.addParams(parameters,'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement();ajaxHandler.send(true);}
function sendDeleteUserAJAX(login){var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'UsersManager.deleteUser'},'GET');ajaxHandler.addParams({userLogin:login},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement('#ajaxLoadingUsersManagement');ajaxHandler.setErrorElement('#ajaxErrorUsersManagement');ajaxHandler.send(true);}
function sendAddUserAJAX(row){var parameters={};parameters.userLogin=$(row).find('input#useradd_login').val();parameters.password=$(row).find('input#useradd_password').val();parameters.email=$(row).find('input#useradd_email').val();parameters.alias=$(row).find('input#useradd_alias').val();var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'UsersManager.addUser'},'GET');ajaxHandler.addParams(parameters,'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement('#ajaxLoadingUsersManagement');ajaxHandler.setErrorElement('#ajaxErrorUsersManagement');ajaxHandler.send(true);}
function getIdSites(){return $('.custom_select_main_link').attr('siteid');}
function sendUpdateUserAccess(login,access,successCallback){var parameters={};parameters.userLogin=login;parameters.access=access;parameters.idSites=getIdSites();var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'UsersManager.setUserAccess'},'GET');ajaxHandler.addParams(parameters,'POST');ajaxHandler.setCallback(successCallback);ajaxHandler.setLoadingElement('#ajaxLoadingUsersManagement');ajaxHandler.setErrorElement('#ajaxErrorUsersManagement');ajaxHandler.send(true);}
function submitOnEnter(e){var key=e.keyCode||e.which;if(key==13){$(this).find('.adduser').click();$(this).find('.updateuser').click();}}
function launchAjaxRequest(self,successCallback){sendUpdateUserAccess($(self).parent().parent().find('#login').html(),$(self).parent().attr('id'),successCallback);}
function hideAccessUpdated(){setTimeout(function(){$('#accessUpdated').fadeOut(500);},2000);}
function bindUpdateAccess(){var self=this;hideAccessUpdated(1);function successCallback(response){var mainDiv=$(self).parent().parent();var login=$('#login',mainDiv).text();mainDiv.find('.accessGranted').attr("src","plugins/UsersManager/images/no-access.png").attr("class","updateAccess").click(bindUpdateAccess);$(self).attr('src',"plugins/UsersManager/images/ok.png").attr('class',"accessGranted");$('#accessUpdated').css('display','inline-block');hideAccessUpdated();if(login=='anonymous'){window.location.reload();}}
var idSite=getIdSites();if(idSite=='all'){var target=this;var userLogin=$(this).parent().parent().find('#login').text();$('#confirm').find('#login').text(userLogin);function onValidate(){launchAjaxRequest(target,successCallback);}
piwikHelper.modalConfirm('#confirm',{yes:onValidate})}
else{launchAjaxRequest(this,successCallback);}}
$(document).ready(function(){var alreadyEdited=[];$('.edituser').click(function(){piwikHelper.hideAjaxError();var idRow=$(this).attr('id');if(alreadyEdited[idRow]==1)return;alreadyEdited[idRow]=1;$('tr#'+idRow+' .editable').each(function(i,n){var contentBefore=$(n).text();var idName=$(n).attr('id');if(idName!='userLogin'){var contentAfter='<input id="'+idName+'" value="'+piwikHelper.htmlEntities(contentBefore)+'" size="25" />';$(n).html(contentAfter);}});$(this).toggle().parent().prepend($('<input type="submit" class="submit updateuser"  value="'+_pk_translate('General_Save_js')+'" />').click(function(){var onValidate=function(){sendUpdateUserAJAX($('tr#'+idRow));};if($('tr#'+idRow).find('input#password').val()!='-'){piwikHelper.modalConfirm('#confirmPasswordChange',{yes:onValidate});}else{onValidate();}}));});$('.editable').keypress(submitOnEnter);$('td.editable').click(function(){$(this).parent().find('.edituser').click();});$('.deleteuser').click(function(){piwikHelper.hideAjaxError();var idRow=$(this).attr('id');var loginToDelete=$(this).parent().parent().find('#userLogin').html();$('#confirmUserRemove').find('h2').text(sprintf(_pk_translate('UsersManager_DeleteConfirm_js'),'"'+loginToDelete+'"'));piwikHelper.modalConfirm('#confirmUserRemove',{yes:function(){sendDeleteUserAJAX(loginToDelete);}});});$('.addrow').click(function(){piwikHelper.hideAjaxError();$(this).toggle();var numberOfRows=$('table#users')[0].rows.length;var newRowId=numberOfRows+1;newRowId='row'+newRowId;$($.parseHTML(' <tr id="'+newRowId+'">\
    <td><input id="useradd_login" value="login?" size="10" /></td>\
    <td><input id="useradd_password" value="password" size="10" /></td>\
    <td><input id="useradd_email" value="email@domain.com" size="15" /></td>\
    <td><input id="useradd_alias" value="alias" size="15" /></td>\
    <td>-</td>\
    <td><input type="submit" class="submit adduser"  value="'+_pk_translate('General_Save_js')+'" /></td>\
      <td><span class="cancel">'+sprintf(_pk_translate('General_OrCancel_js'),"","")+'</span></td>\
    </tr>')).appendTo('#users');$('#'+newRowId).keypress(submitOnEnter);$('.adduser').click(function(){sendAddUserAJAX($('tr#'+newRowId));});$('.cancel').click(function(){piwikHelper.hideAjaxError();$(this).parents('tr').remove();$('.addrow').toggle();});});$('.updateAccess').click(bindUpdateAccess);$('#usersManagerSiteSelect').bind('piwik:siteSelected',function(e,site){if(site.id!=piwik.idSite){switchSite(site.id,site.name,false,true);}});});

function sendUserSettingsAJAX(){var params;var defaultDate=$('input[name=defaultDate]:checked').val();if(defaultDate=='today'||defaultDate=='yesterday'){params='period=day&date='+defaultDate;}else if(defaultDate.indexOf('last')>=0||defaultDate.indexOf('previous')>=0){params='period=range&date='+defaultDate;}else{params='date=today&period='+defaultDate;}
var alias=$('#alias').val();var email=$('#email').val();var password=$('#password').val();var passwordBis=$('#passwordBis').val();var defaultReport=$('input[name=defaultReport]:checked').val();if(defaultReport==1){defaultReport=$('#defaultReportSiteSelector').find('.custom_select_main_link').attr('siteid');}
var postParams={};postParams.alias=alias;postParams.email=email;if(password){postParams.password=password;}
if(passwordBis){postParams.passwordBis=passwordBis;}
postParams.defaultReport=defaultReport;postParams.defaultDate=defaultDate;var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'UsersManager',format:'json',action:'recordUserSettings'},'GET');ajaxHandler.addParams(postParams,'POST');ajaxHandler.redirectOnSuccess(params);ajaxHandler.setLoadingElement('#ajaxLoadingUserSettings');ajaxHandler.setErrorElement('#ajaxErrorUserSettings');ajaxHandler.send(true);}
function sendAnonymousUserSettingsAJAX(){var anonymousDefaultReport=$('input[name=anonymousDefaultReport]:checked').val();if(anonymousDefaultReport==1){anonymousDefaultReport=$('#anonymousDefaultReportWebsite').find('option:selected').val();}
var anonymousDefaultDate=$('input[name=anonymousDefaultDate]:checked').val();var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'UsersManager',format:'json',action:'recordAnonymousUserSettings'},'GET');ajaxHandler.addParams({anonymousDefaultReport:anonymousDefaultReport,anonymousDefaultDate:anonymousDefaultDate},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement('#ajaxLoadingAnonymousUserSettings');ajaxHandler.setErrorElement('#ajaxErrorAnonymousUserSettings');ajaxHandler.send(true);}
$(document).ready(function(){$('#userSettingsSubmit').click(function(){if($('#password').length>0&&$('#password').val()!=''){piwikHelper.modalConfirm('#confirmPasswordChange',{yes:sendUserSettingsAJAX});}else{sendUserSettingsAJAX();}});$('#userSettingsTable').find('input').keypress(function(e){var key=e.keyCode||e.which;if(key==13){$('#userSettingsSubmit').click();}});$('#anonymousUserSettingsSubmit').click(function(){sendAnonymousUserSettingsAJAX();});});

function SitesManager(_timezones,_currencies,_defaultTimezone,_defaultCurrency){var timezones=_timezones;var currencies=_currencies;var defaultTimezone=_defaultTimezone;var defaultCurrency=_defaultCurrency;var siteBeingEdited=false;var siteBeingEditedName='';function sendDeleteSiteAJAX(idSite){var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({idSite:idSite,module:'API',format:'json',method:'SitesManager.deleteSite'},'GET');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement();ajaxHandler.send(true);}
function sendAddSiteAJAX(row){var siteName=$(row).find('input#name').val();var urls=$(row).find('textarea#urls').val();urls=urls.trim().split("\n");var excludedIps=$(row).find('textarea#excludedIps').val();excludedIps=piwikHelper.getApiFormatTextarea(excludedIps);var timezone=$(row).find('#timezones option:selected').val();var currency=$(row).find('#currencies option:selected').val();var excludedQueryParameters=$(row).find('textarea#excludedQueryParameters').val();excludedQueryParameters=piwikHelper.getApiFormatTextarea(excludedQueryParameters);var excludedUserAgents=$(row).find('textarea#excludedUserAgents').val();excludedUserAgents=piwikHelper.getApiFormatTextarea(excludedUserAgents);var keepURLFragments=$('#keepURLFragmentSelect',row).val();var ecommerce=$(row).find('#ecommerce option:selected').val();var sitesearch=$(row).find('#sitesearch option:selected').val();var searchKeywordParameters=$('input#searchKeywordParameters').val();var searchCategoryParameters=$('input#searchCategoryParameters').val();var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'SitesManager.addSite'},'GET');ajaxHandler.addParams({siteName:siteName,timezone:timezone,currency:currency,ecommerce:ecommerce,excludedIps:excludedIps,excludedQueryParameters:excludedQueryParameters,excludedUserAgents:excludedUserAgents,keepURLFragments:keepURLFragments,siteSearch:sitesearch,searchKeywordParameters:searchKeywordParameters,searchCategoryParameters:searchCategoryParameters,urls:urls},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement();ajaxHandler.send(true);}
function sendUpdateSiteAJAX(row){var siteName=$(row).find('input#siteName').val();var idSite=$(row).children('#idSite').html();var urls=$(row).find('textarea#urls').val();urls=urls.trim().split("\n");var excludedIps=$(row).find('textarea#excludedIps').val();excludedIps=piwikHelper.getApiFormatTextarea(excludedIps);var excludedQueryParameters=$(row).find('textarea#excludedQueryParameters').val();excludedQueryParameters=piwikHelper.getApiFormatTextarea(excludedQueryParameters);var excludedUserAgents=$(row).find('textarea#excludedUserAgents').val();excludedUserAgents=piwikHelper.getApiFormatTextarea(excludedUserAgents);var keepURLFragments=$('#keepURLFragmentSelect',row).val();var timezone=$(row).find('#timezones option:selected').val();var currency=$(row).find('#currencies option:selected').val();var ecommerce=$(row).find('#ecommerce option:selected').val();var sitesearch=$(row).find('#sitesearch option:selected').val();var searchKeywordParameters=$('input#searchKeywordParameters').val();var searchCategoryParameters=$('input#searchCategoryParameters').val();var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'SitesManager.updateSite',idSite:idSite},'GET');ajaxHandler.addParams({siteName:siteName,timezone:timezone,currency:currency,ecommerce:ecommerce,excludedIps:excludedIps,excludedQueryParameters:excludedQueryParameters,excludedUserAgents:excludedUserAgents,keepURLFragments:keepURLFragments,siteSearch:sitesearch,searchKeywordParameters:searchKeywordParameters,searchCategoryParameters:searchCategoryParameters,urls:urls},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement();ajaxHandler.send(true);}
function sendGlobalSettingsAJAX(){var timezone=$('#defaultTimezone').find('option:selected').val();var currency=$('#defaultCurrency').find('option:selected').val();var excludedIps=$('textarea#globalExcludedIps').val();excludedIps=piwikHelper.getApiFormatTextarea(excludedIps);var excludedQueryParameters=$('textarea#globalExcludedQueryParameters').val();excludedQueryParameters=piwikHelper.getApiFormatTextarea(excludedQueryParameters);var globalExcludedUserAgents=$('textarea#globalExcludedUserAgents').val();globalExcludedUserAgents=piwikHelper.getApiFormatTextarea(globalExcludedUserAgents);var globalKeepURLFragments=$('#globalKeepURLFragments').is(':checked')?1:0;var searchKeywordParameters=$('input#globalSearchKeywordParameters').val();var searchCategoryParameters=$('input#globalSearchCategoryParameters').val();var enableSiteUserAgentExclude=$('input#enableSiteUserAgentExclude').is(':checked')?1:0;var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'SitesManager',format:'json',action:'setGlobalSettings'},'GET');ajaxHandler.addParams({timezone:timezone,currency:currency,excludedIps:excludedIps,excludedQueryParameters:excludedQueryParameters,excludedUserAgents:globalExcludedUserAgents,keepURLFragments:globalKeepURLFragments,enableSiteUserAgentExclude:enableSiteUserAgentExclude,searchKeywordParameters:searchKeywordParameters,searchCategoryParameters:searchCategoryParameters},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement('#ajaxLoadingGlobalSettings');ajaxHandler.setErrorElement('#ajaxErrorGlobalSettings');ajaxHandler.send(true);}
this.init=function(){$('.addRowSite').click(function(){piwikHelper.hideAjaxError();$('.addRowSite').toggle();var excludedUserAgentCell='';if($('#exclude-user-agent-header').is(':visible')){excludedUserAgentCell='<td><textarea cols="20" rows="4" id="excludedUserAgents"></textarea><br />'+excludedUserAgentsHelp+'</td>';}
var numberOfRows=$('table#editSites')[0].rows.length;var newRowId='rowNew'+numberOfRows;var submitButtonHtml='<input type="submit" class="addsite submit" value="'+_pk_translate('General_Save_js')+'" />';$($.parseHTML(' <tr id="'+newRowId+'">\
    <td>&nbsp;</td>\
    <td><input id="name" value="Name" size="15" /><br/><br/><br/>'+submitButtonHtml+'</td>\
    <td><textarea cols="25" rows="3" id="urls">http://siteUrl.com/\nhttp://siteUrl2.com/</textarea><br />'+aliasUrlsHelp+keepURLFragmentSelectHTML+'</td>\
    <td><textarea cols="20" rows="4" id="excludedIps"></textarea><br />'+excludedIpHelp+'</td>\
    <td><textarea cols="20" rows="4" id="excludedQueryParameters"></textarea><br />'+excludedQueryParametersHelp+'</td>'+
excludedUserAgentCell+'<td>'+getSitesearchSelector(false)+'</td>\
    <td>'+getTimezoneSelector(defaultTimezone)+'<br />'+timezoneHelp+'</td>\
    <td>'+getCurrencySelector(defaultCurrency)+'<br />'+currencyHelp+'</td>\
    <td>'+getEcommerceSelector(0)+'<br />'+ecommerceHelp+'</td>\
    <td>'+submitButtonHtml+'</td>\
      <td><span class="cancel link_but">'+sprintf(_pk_translate('General_OrCancel_js'),"","")+'</span></td>\
    </tr>')).appendTo('#editSites');piwikHelper.lazyScrollTo('#'+newRowId);$('.addsite').click(function(){sendAddSiteAJAX($('tr#'+newRowId));});$('.cancel').click(function(){piwikHelper.hideAjaxError();$(this).parents('tr').remove();$('.addRowSite').toggle();});return false;});$('.deleteSite').click(function(){piwikHelper.hideAjaxError();var idRow=$(this).attr('id');var nameToDelete=$(this).parent().parent().find('input#siteName').val()||$(this).parent().parent().find('td#siteName').html();var idsiteToDelete=$(this).parent().parent().find('#idSite').html();$('#confirm').find('h2').text(sprintf(_pk_translate('SitesManager_DeleteConfirm_js'),'"'+nameToDelete+'" (idSite = '+idsiteToDelete+')'));piwikHelper.modalConfirm('#confirm',{yes:function(){sendDeleteSiteAJAX(idsiteToDelete);}});});var alreadyEdited=[];$('.editSite').click(function(){piwikHelper.hideAjaxError();var idRow=$(this).attr('id');if(alreadyEdited[idRow]==1)return;if(siteBeingEdited){$('#alert').find('h2').text(sprintf(_pk_translate('SitesManager_OnlyOneSiteAtTime_js'),'"'+$("<div/>").html(siteBeingEditedName).text()+'"'));piwikHelper.modalConfirm('#alert',{});return;}
siteBeingEdited=true;alreadyEdited[idRow]=1;$('tr#'+idRow+' .editableSite').each(function(i,n){var contentBefore=$(n).html();var idName=$(n).attr('id');if(idName=='siteName'){siteBeingEditedName=contentBefore;var contentAfter='<input id="'+idName+'" value="'+piwikHelper.htmlEntities(contentBefore)+'" size="15" />';var inputSave=$('<br/><input style="margin-top:50px" type="submit" class="submit" value="'+_pk_translate('General_Save_js')+'" />').click(function(){submitUpdateSite($(this).parent());});var spanCancel=$('<div><br/>'+sprintf(_pk_translate('General_OrCancel_js'),"","")+'</div>').click(function(){piwikHelper.refreshAfter(0);});$(n).html(contentAfter).keypress(submitSiteOnEnter).append(inputSave).append(spanCancel);}
else if(idName=='urls'){var keepURLFragmentsForSite=$(this).closest('tr').attr('data-keep-url-fragments');var contentAfter='<textarea cols="25" rows="3" id="urls">'+contentBefore.replace(/<br *\/? *>/gi,"\n")+'</textarea>';contentAfter+='<br />'+aliasUrlsHelp+keepURLFragmentSelectHTML;$(n).html(contentAfter).find('select').val(keepURLFragmentsForSite);}
else if(idName=='excludedIps'){var contentAfter='<textarea cols="20" rows="4" id="excludedIps">'+contentBefore.replace(/<br *\/? *>/gi,"\n")+'</textarea>';contentAfter+='<br />'+excludedIpHelp;$(n).html(contentAfter);}
else if(idName=='excludedQueryParameters'){var contentAfter='<textarea cols="20" rows="4" id="excludedQueryParameters">'+contentBefore.replace(/<br *\/? *>/gi,"\n")+'</textarea>';contentAfter+='<br />'+excludedQueryParametersHelp;$(n).html(contentAfter);}
else if(idName=='excludedUserAgents'){var contentAfter='<textarea cols="20" rows="4" id="excludedUserAgents">'+
contentBefore.replace(/<br *\/? *>/gi,"\n")+'</textarea><br />'+excludedUserAgentsHelp;$(n).html(contentAfter);}
else if(idName=='timezone'){var contentAfter=getTimezoneSelector(contentBefore);contentAfter+='<br />'+timezoneHelp;$(n).html(contentAfter);}
else if(idName=='currency'){var contentAfter=getCurrencySelector(contentBefore);contentAfter+='<br />'+currencyHelp;$(n).html(contentAfter);}
else if(idName=='ecommerce'){var ecommerceActive=contentBefore.indexOf("ecommerceActive")>0?1:0;contentAfter=getEcommerceSelector(ecommerceActive)+'<br />'+ecommerceHelp;$(n).html(contentAfter);}
else if(idName=='sitesearch'){contentAfter=getSitesearchSelector(contentBefore);$(n).html(contentAfter);onClickSiteSearchUseDefault();}});$(this).toggle().parent().prepend($('<input type="submit" class="updateSite submit" value="'+_pk_translate('General_Save_js')+'" />').click(function(){sendUpdateSiteAJAX($('tr#'+idRow));}));});$('#globalSettingsSubmit').click(function(){sendGlobalSettingsAJAX();});$('#defaultTimezone').html(getTimezoneSelector(defaultTimezone));$('#defaultCurrency').html(getCurrencySelector(defaultCurrency));$('td.editableSite').click(function(){$(this).parent().find('.editSite').click();});}
function getSitesearchSelector(contentBefore){var globalKeywordParameters=$('input#globalSearchKeywordParameters').val().trim();var globalCategoryParameters=$('input#globalSearchCategoryParameters').val().trim();if(contentBefore){var enabled=contentBefore.indexOf("sitesearchActive")>0?1:0;var spanSearch=$(contentBefore).filter('.sskp');var searchKeywordParameters=spanSearch.attr('sitesearch_keyword_parameters').trim();var searchCategoryParameters=spanSearch.attr('sitesearch_category_parameters').trim();var checked=globalKeywordParameters.length&&!searchKeywordParameters.trim().length;}else{var searchKeywordParameters=globalKeywordParameters;var searchCategoryParameters=globalCategoryParameters;var enabled=searchKeywordParameters.length||searchCategoryParameters.length;var checked=enabled;}
var searchGlobalHasValues=globalKeywordParameters.trim().length;var html='<select id="sitesearch" onchange="return onClickSiteSearchUseDefault();">';var selected=' selected="selected" ';html+='<option '+(enabled?selected:'')+' value="1">'+sitesearchEnabled+'</option>';html+='<option '+(enabled?'':selected)+' value="0">'+sitesearchDisabled+'</option>';html+='</select>';html+='<span style="font-size: 11px;"><br/>';if(searchGlobalHasValues){var checkedStr=checked?' checked ':'';html+='<label><span id="sitesearchUseDefault"'+(!enabled?' style="display:none" ':'')+'><input type="checkbox" '+checkedStr+' id="sitesearchUseDefaultCheck" onclick="return onClickSiteSearchUseDefault();"> '+sitesearchUseDefault+' </span>';html+='</label>';html+='<div '+((checked&&enabled)?'':'style="display-none"')+' class="searchDisplayParams form-description">'
+searchKeywordLabel+' ('+strDefault+') '+': '
+globalKeywordParameters
+(globalCategoryParameters.length?', '+searchCategoryLabel+': '+globalCategoryParameters:'')
+'</div>';}
html+='<div id="sitesearchIntro">'+sitesearchIntro+'</div>';html+='<div id="searchSiteParameters">';html+='<br/><label><div style="margin-bottom:3px">'+searchKeywordLabel+'</div><input type="text" size="22" id="searchKeywordParameters" value="'+searchKeywordParameters+'" style="margin-bottom: -10px;font-size:9pt;font-family:monospace"></input>'+searchKeywordHelp+'</label>';if(globalCategoryParameters!='globalSearchCategoryParametersIsDisabled'){html+='<br/><label><div style="margin-bottom:3px">'+searchCategoryLabel+'</div><input type="text" size="22" id="searchCategoryParameters" value="'+searchCategoryParameters+'" style="margin-bottom: -10px;font-size:9pt;font-family:monospace"></input>'+searchCategoryHelp+'</label>';}
html+='</div></span>';return html;}
function getEcommerceSelector(enabled){var html='<select id="ecommerce">';var selected=' selected="selected" ';html+='<option '+(enabled?'':selected)+' value="0">'+ecommerceDisabled+'</option>';html+='<option '+(enabled?selected:'')+' value="1">'+ecommerceEnabled+'</option>';html+='</select>';return html;}
function getTimezoneSelector(selectedTimezone){var html='<select id="timezones">';for(var continent in timezones){html+='<optgroup label="'+continent+'">';for(var timezoneId in timezones[continent]){var selected='';if(timezoneId==selectedTimezone){selected=' selected="selected" ';}
html+='<option '+selected+' value="'+timezoneId+'">'+timezones[continent][timezoneId]+'</option>';}
html+="</optgroup>\n";}
html+='</select>';return html;}
function getCurrencySelector(selectedCurrency){var html='<select id="currencies">';for(var currency in currencies){var selected='';if(currency==selectedCurrency){selected=' selected="selected" ';}
html+='<option '+selected+' value="'+currency+'">'+currencies[currency]+'</option>';}
html+='</select>';return html;}
function submitSiteOnEnter(e){var key=e.keyCode||e.which;if(key==13){submitUpdateSite(this);$(this).find('.addsite').click();}}
function submitUpdateSite(self){$(self).parent().find('.updateSite').click();}}
function onClickSiteSearchUseDefault(){if($('select#sitesearch').val()=="1"){$('#sitesearchUseDefault').show();if($('#sitesearchUseDefaultCheck').is(':checked')){$('#searchSiteParameters').hide();$('#sitesearchIntro').show();$('#searchKeywordParameters,#searchCategoryParameters').val('');$('.searchDisplayParams').show();}else{$('#sitesearchIntro').hide();$('.searchDisplayParams').hide();$('#searchSiteParameters').show();}}else{$('.searchDisplayParams').hide();$('#sitesearchUseDefault').hide();$('#searchSiteParameters').hide();$('#sitesearchIntro').show();}}

var getReportParametersFunctions=Object();var updateReportParametersFunctions=Object();var resetReportParametersFunctions=Object();function formSetEditReport(idReport){var report={'type':ReportPlugin.defaultReportType,'format':ReportPlugin.defaultReportFormat,'description':'','period':ReportPlugin.defaultPeriod,'hour':ReportPlugin.defaultHour,'reports':[]};if(idReport>0){report=ReportPlugin.reportList[idReport];$('#report_submit').val(ReportPlugin.updateReportString);}
else{$('#report_submit').val(ReportPlugin.createReportString);}
toggleReportType(report.type);$('#report_description').html(report.description);$('#report_segment').find('option[value='+report.idsegment+']').prop('selected','selected');$('#report_type').find('option[value='+report.type+']').prop('selected','selected');$('#report_period').find('option[value='+report.period+']').prop('selected','selected');$('#report_hour').val(report.hour);$('[name=report_format].'+report.type+' option[value='+report.format+']').prop('selected','selected');$('[name=reportsList] input').prop('checked',false);var key;for(key in report.reports){$('.'+report.type+' [report-unique-id='+report.reports[key]+']').prop('checked','checked');}
updateReportParametersFunctions[report.type](report.parameters);$('#report_idreport').val(idReport);}
function getReportAjaxRequest(idReport,defaultApiMethod){var parameters={};piwikHelper.lazyScrollTo(".entityContainer",400);parameters.module='API';parameters.method=defaultApiMethod;if(idReport==0){parameters.method='PDFReports.addReport';}
parameters.format='json';return parameters;}
function toggleReportType(reportType){resetReportParametersFunctions[reportType]();$('#report_type').find('option').each(function(index,type){$('.'+$(type).val()).hide();});$('.'+reportType).show();}
function initManagePdf(){$('#addEditReport').submit(function(){var idReport=$('#report_idreport').val();var apiParameters=getReportAjaxRequest(idReport,'PDFReports.updateReport');apiParameters.idReport=idReport;apiParameters.description=$('#report_description').val();apiParameters.idSegment=$('#report_segment').find('option:selected').val();apiParameters.reportType=$('#report_type').find('option:selected').val();apiParameters.reportFormat=$('[name=report_format].'+apiParameters.reportType+' option:selected').val();var reports=[];$('[name=reportsList].'+apiParameters.reportType+' input:checked').each(function(){reports.push($(this).attr('report-unique-id'));});if(reports.length>0){apiParameters.reports=reports;}
apiParameters.parameters=getReportParametersFunctions[apiParameters.reportType]();var ajaxHandler=new ajaxHelper();ajaxHandler.addParams(apiParameters,'POST');ajaxHandler.addParams({period:$('#report_period').find('option:selected').val()},'GET');ajaxHandler.addParams({hour:$('#report_hour').val()},'GET');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement();ajaxHandler.send(true);return false;});$('a[name=linkSendNow]').click(function(){var idReport=$(this).attr('idreport');var parameters=getReportAjaxRequest(idReport,'PDFReports.sendReport');parameters.idReport=idReport;var ajaxHandler=new ajaxHelper();ajaxHandler.addParams(parameters,'POST');ajaxHandler.setLoadingElement();ajaxHandler.send(true);});$('a[name=linkDeleteReport]').click(function(){var idReport=$(this).attr('id');function onDelete(){var parameters=getReportAjaxRequest(idReport,'PDFReports.deleteReport');parameters.idReport=idReport;var ajaxHandler=new ajaxHelper();ajaxHandler.addParams(parameters,'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement();ajaxHandler.send(true);}
piwikHelper.modalConfirm('#confirm',{yes:onDelete});});$('a[name=linkEditReport]').click(function(){var idReport=$(this).attr('id');formSetEditReport(idReport);$('.entityAddContainer').show();$('#entityEditContainer').hide();});$('#report_type').change(function(){var reportType=$(this).val();toggleReportType(reportType);});$('#linkAddReport').click(function(){$('.entityAddContainer').show();$('#entityEditContainer').hide();formSetEditReport(0);});$('.entityCancelLink').click(function(){$('.entityAddContainer').hide();$('#entityEditContainer').show();piwikHelper.hideAjaxError();}).click();}
// ┌────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël 2.1.0 - JavaScript Vector Library                          │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\
// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\
// └────────────────────────────────────────────────────────────────────┘ \\

(function(a){var b="0.3.4",c="hasOwnProperty",d=/[\.\/]/,e="*",f=function(){},g=function(a,b){return a-b},h,i,j={n:{}},k=function(a,b){var c=j,d=i,e=Array.prototype.slice.call(arguments,2),f=k.listeners(a),l=0,m=!1,n,o=[],p={},q=[],r=h,s=[];h=a,i=0;for(var t=0,u=f.length;t<u;t++)"zIndex"in f[t]&&(o.push(f[t].zIndex),f[t].zIndex<0&&(p[f[t].zIndex]=f[t]));o.sort(g);while(o[l]<0){n=p[o[l++]],q.push(n.apply(b,e));if(i){i=d;return q}}for(t=0;t<u;t++){n=f[t];if("zIndex"in n)if(n.zIndex==o[l]){q.push(n.apply(b,e));if(i)break;do{l++,n=p[o[l]],n&&q.push(n.apply(b,e));if(i)break}while(n)}else p[n.zIndex]=n;else{q.push(n.apply(b,e));if(i)break}}i=d,h=r;return q.length?q:null};k.listeners=function(a){var b=a.split(d),c=j,f,g,h,i,k,l,m,n,o=[c],p=[];for(i=0,k=b.length;i<k;i++){n=[];for(l=0,m=o.length;l<m;l++){c=o[l].n,g=[c[b[i]],c[e]],h=2;while(h--)f=g[h],f&&(n.push(f),p=p.concat(f.f||[]))}o=n}return p},k.on=function(a,b){var c=a.split(d),e=j;for(var g=0,h=c.length;g<h;g++)e=e.n,!e[c[g]]&&(e[c[g]]={n:{}}),e=e[c[g]];e.f=e.f||[];for(g=0,h=e.f.length;g<h;g++)if(e.f[g]==b)return f;e.f.push(b);return function(a){+a==+a&&(b.zIndex=+a)}},k.stop=function(){i=1},k.nt=function(a){if(a)return(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(h);return h},k.off=k.unbind=function(a,b){var f=a.split(d),g,h,i,k,l,m,n,o=[j];for(k=0,l=f.length;k<l;k++)for(m=0;m<o.length;m+=i.length-2){i=[m,1],g=o[m].n;if(f[k]!=e)g[f[k]]&&i.push(g[f[k]]);else for(h in g)g[c](h)&&i.push(g[h]);o.splice.apply(o,i)}for(k=0,l=o.length;k<l;k++){g=o[k];while(g.n){if(b){if(g.f){for(m=0,n=g.f.length;m<n;m++)if(g.f[m]==b){g.f.splice(m,1);break}!g.f.length&&delete g.f}for(h in g.n)if(g.n[c](h)&&g.n[h].f){var p=g.n[h].f;for(m=0,n=p.length;m<n;m++)if(p[m]==b){p.splice(m,1);break}!p.length&&delete g.n[h].f}}else{delete g.f;for(h in g.n)g.n[c](h)&&g.n[h].f&&delete g.n[h].f}g=g.n}}},k.once=function(a,b){var c=function(){var d=b.apply(this,arguments);k.unbind(a,c);return d};return k.on(a,c)},k.version=b,k.toString=function(){return"You are running Eve "+b},typeof module!="undefined"&&module.exports?module.exports=k:typeof define!="undefined"?define("eve",[],function(){return k}):a.eve=k})(this),function(){function cF(a){for(var b=0;b<cy.length;b++)cy[b].el.paper==a&&cy.splice(b--,1)}function cE(b,d,e,f,h,i){e=Q(e);var j,k,l,m=[],o,p,q,t=b.ms,u={},v={},w={};if(f)for(y=0,z=cy.length;y<z;y++){var x=cy[y];if(x.el.id==d.id&&x.anim==b){x.percent!=e?(cy.splice(y,1),l=1):k=x,d.attr(x.totalOrigin);break}}else f=+v;for(var y=0,z=b.percents.length;y<z;y++){if(b.percents[y]==e||b.percents[y]>f*b.top){e=b.percents[y],p=b.percents[y-1]||0,t=t/b.top*(e-p),o=b.percents[y+1],j=b.anim[e];break}f&&d.attr(b.anim[b.percents[y]])}if(!!j){if(!k){for(var A in j)if(j[g](A))if(U[g](A)||d.paper.customAttributes[g](A)){u[A]=d.attr(A),u[A]==null&&(u[A]=T[A]),v[A]=j[A];switch(U[A]){case C:w[A]=(v[A]-u[A])/t;break;case"colour":u[A]=a.getRGB(u[A]);var B=a.getRGB(v[A]);w[A]={r:(B.r-u[A].r)/t,g:(B.g-u[A].g)/t,b:(B.b-u[A].b)/t};break;case"path":var D=bR(u[A],v[A]),E=D[1];u[A]=D[0],w[A]=[];for(y=0,z=u[A].length;y<z;y++){w[A][y]=[0];for(var F=1,G=u[A][y].length;F<G;F++)w[A][y][F]=(E[y][F]-u[A][y][F])/t}break;case"transform":var H=d._,I=ca(H[A],v[A]);if(I){u[A]=I.from,v[A]=I.to,w[A]=[],w[A].real=!0;for(y=0,z=u[A].length;y<z;y++){w[A][y]=[u[A][y][0]];for(F=1,G=u[A][y].length;F<G;F++)w[A][y][F]=(v[A][y][F]-u[A][y][F])/t}}else{var J=d.matrix||new cb,K={_:{transform:H.transform},getBBox:function(){return d.getBBox(1)}};u[A]=[J.a,J.b,J.c,J.d,J.e,J.f],b$(K,v[A]),v[A]=K._.transform,w[A]=[(K.matrix.a-J.a)/t,(K.matrix.b-J.b)/t,(K.matrix.c-J.c)/t,(K.matrix.d-J.d)/t,(K.matrix.e-J.e)/t,(K.matrix.f-J.f)/t]}break;case"csv":var L=r(j[A])[s](c),M=r(u[A])[s](c);if(A=="clip-rect"){u[A]=M,w[A]=[],y=M.length;while(y--)w[A][y]=(L[y]-u[A][y])/t}v[A]=L;break;default:L=[][n](j[A]),M=[][n](u[A]),w[A]=[],y=d.paper.customAttributes[A].length;while(y--)w[A][y]=((L[y]||0)-(M[y]||0))/t}}var O=j.easing,P=a.easing_formulas[O];if(!P){P=r(O).match(N);if(P&&P.length==5){var R=P;P=function(a){return cC(a,+R[1],+R[2],+R[3],+R[4],t)}}else P=bf}q=j.start||b.start||+(new Date),x={anim:b,percent:e,timestamp:q,start:q+(b.del||0),status:0,initstatus:f||0,stop:!1,ms:t,easing:P,from:u,diff:w,to:v,el:d,callback:j.callback,prev:p,next:o,repeat:i||b.times,origin:d.attr(),totalOrigin:h},cy.push(x);if(f&&!k&&!l){x.stop=!0,x.start=new Date-t*f;if(cy.length==1)return cA()}l&&(x.start=new Date-x.ms*f),cy.length==1&&cz(cA)}else k.initstatus=f,k.start=new Date-k.ms*f;eve("raphael.anim.start."+d.id,d,b)}}function cD(a,b){var c=[],d={};this.ms=b,this.times=1;if(a){for(var e in a)a[g](e)&&(d[Q(e)]=a[e],c.push(Q(e)));c.sort(bd)}this.anim=d,this.top=c[c.length-1],this.percents=c}function cC(a,b,c,d,e,f){function o(a,b){var c,d,e,f,j,k;for(e=a,k=0;k<8;k++){f=m(e)-a;if(z(f)<b)return e;j=(3*i*e+2*h)*e+g;if(z(j)<1e-6)break;e=e-f/j}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=m(e);if(z(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}function n(a,b){var c=o(a,b);return((l*c+k)*c+j)*c}function m(a){return((i*a+h)*a+g)*a}var g=3*b,h=3*(d-b)-g,i=1-g-h,j=3*c,k=3*(e-c)-j,l=1-j-k;return n(a,1/(200*f))}function cq(){return this.x+q+this.y+q+this.width+" × "+this.height}function cp(){return this.x+q+this.y}function cb(a,b,c,d,e,f){a!=null?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function bH(b,c,d){b=a._path2curve(b),c=a._path2curve(c);var e,f,g,h,i,j,k,l,m,n,o=d?0:[];for(var p=0,q=b.length;p<q;p++){var r=b[p];if(r[0]=="M")e=i=r[1],f=j=r[2];else{r[0]=="C"?(m=[e,f].concat(r.slice(1)),e=m[6],f=m[7]):(m=[e,f,e,f,i,j,i,j],e=i,f=j);for(var s=0,t=c.length;s<t;s++){var u=c[s];if(u[0]=="M")g=k=u[1],h=l=u[2];else{u[0]=="C"?(n=[g,h].concat(u.slice(1)),g=n[6],h=n[7]):(n=[g,h,g,h,k,l,k,l],g=k,h=l);var v=bG(m,n,d);if(d)o+=v;else{for(var w=0,x=v.length;w<x;w++)v[w].segment1=p,v[w].segment2=s,v[w].bez1=m,v[w].bez2=n;o=o.concat(v)}}}}}return o}function bG(b,c,d){var e=a.bezierBBox(b),f=a.bezierBBox(c);if(!a.isBBoxIntersect(e,f))return d?0:[];var g=bB.apply(0,b),h=bB.apply(0,c),i=~~(g/5),j=~~(h/5),k=[],l=[],m={},n=d?0:[];for(var o=0;o<i+1;o++){var p=a.findDotsAtSegment.apply(a,b.concat(o/i));k.push({x:p.x,y:p.y,t:o/i})}for(o=0;o<j+1;o++)p=a.findDotsAtSegment.apply(a,c.concat(o/j)),l.push({x:p.x,y:p.y,t:o/j});for(o=0;o<i;o++)for(var q=0;q<j;q++){var r=k[o],s=k[o+1],t=l[q],u=l[q+1],v=z(s.x-r.x)<.001?"y":"x",w=z(u.x-t.x)<.001?"y":"x",x=bD(r.x,r.y,s.x,s.y,t.x,t.y,u.x,u.y);if(x){if(m[x.x.toFixed(4)]==x.y.toFixed(4))continue;m[x.x.toFixed(4)]=x.y.toFixed(4);var y=r.t+z((x[v]-r[v])/(s[v]-r[v]))*(s.t-r.t),A=t.t+z((x[w]-t[w])/(u[w]-t[w]))*(u.t-t.t);y>=0&&y<=1&&A>=0&&A<=1&&(d?n++:n.push({x:x.x,y:x.y,t1:y,t2:A}))}}return n}function bF(a,b){return bG(a,b,1)}function bE(a,b){return bG(a,b)}function bD(a,b,c,d,e,f,g,h){if(!(x(a,c)<y(e,g)||y(a,c)>x(e,g)||x(b,d)<y(f,h)||y(b,d)>x(f,h))){var i=(a*d-b*c)*(e-g)-(a-c)*(e*h-f*g),j=(a*d-b*c)*(f-h)-(b-d)*(e*h-f*g),k=(a-c)*(f-h)-(b-d)*(e-g);if(!k)return;var l=i/k,m=j/k,n=+l.toFixed(2),o=+m.toFixed(2);if(n<+y(a,c).toFixed(2)||n>+x(a,c).toFixed(2)||n<+y(e,g).toFixed(2)||n>+x(e,g).toFixed(2)||o<+y(b,d).toFixed(2)||o>+x(b,d).toFixed(2)||o<+y(f,h).toFixed(2)||o>+x(f,h).toFixed(2))return;return{x:l,y:m}}}function bC(a,b,c,d,e,f,g,h,i){if(!(i<0||bB(a,b,c,d,e,f,g,h)<i)){var j=1,k=j/2,l=j-k,m,n=.01;m=bB(a,b,c,d,e,f,g,h,l);while(z(m-i)>n)k/=2,l+=(m<i?1:-1)*k,m=bB(a,b,c,d,e,f,g,h,l);return l}}function bB(a,b,c,d,e,f,g,h,i){i==null&&(i=1),i=i>1?1:i<0?0:i;var j=i/2,k=12,l=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],n=0;for(var o=0;o<k;o++){var p=j*l[o]+j,q=bA(p,a,c,e,g),r=bA(p,b,d,f,h),s=q*q+r*r;n+=m[o]*w.sqrt(s)}return j*n}function bA(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;return a*g-3*b+3*c}function by(a,b){var c=[];for(var d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function bx(){return this.hex}function bv(a,b,c){function d(){var e=Array.prototype.slice.call(arguments,0),f=e.join("␀"),h=d.cache=d.cache||{},i=d.count=d.count||[];if(h[g](f)){bu(i,f);return c?c(h[f]):h[f]}i.length>=1e3&&delete h[i.shift()],i.push(f),h[f]=a[m](b,e);return c?c(h[f]):h[f]}return d}function bu(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function bm(a){if(Object(a)!==a)return a;var b=new a.constructor;for(var c in a)a[g](c)&&(b[c]=bm(a[c]));return b}function a(c){if(a.is(c,"function"))return b?c():eve.on("raphael.DOMload",c);if(a.is(c,E))return a._engine.create[m](a,c.splice(0,3+a.is(c[0],C))).add(c);var d=Array.prototype.slice.call(arguments,0);if(a.is(d[d.length-1],"function")){var e=d.pop();return b?e.call(a._engine.create[m](a,d)):eve.on("raphael.DOMload",function(){e.call(a._engine.create[m](a,d))})}return a._engine.create[m](a,arguments)}a.version="2.1.0",a.eve=eve;var b,c=/[, ]+/,d={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},e=/\{(\d+)\}/g,f="prototype",g="hasOwnProperty",h={doc:document,win:window},i={was:Object.prototype[g].call(h.win,"Raphael"),is:h.win.Raphael},j=function(){this.ca=this.customAttributes={}},k,l="appendChild",m="apply",n="concat",o="createTouch"in h.doc,p="",q=" ",r=String,s="split",t="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[s](q),u={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},v=r.prototype.toLowerCase,w=Math,x=w.max,y=w.min,z=w.abs,A=w.pow,B=w.PI,C="number",D="string",E="array",F="toString",G="fill",H=Object.prototype.toString,I={},J="push",K=a._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,L=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,M={NaN:1,Infinity:1,"-Infinity":1},N=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,O=w.round,P="setAttribute",Q=parseFloat,R=parseInt,S=r.prototype.toUpperCase,T=a._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},U=a._availableAnimAttrs={blur:C,"clip-rect":"csv",cx:C,cy:C,fill:"colour","fill-opacity":C,"font-size":C,height:C,opacity:C,path:"path",r:C,rx:C,ry:C,stroke:"colour","stroke-opacity":C,"stroke-width":C,transform:"transform",width:C,x:C,y:C},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,W=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,X={hs:1,rg:1},Y=/,?([achlmqrstvxz]),?/gi,Z=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,$=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,_=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,ba=a._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,bb={},bc=function(a,b){return a.key-b.key},bd=function(a,b){return Q(a)-Q(b)},be=function(){},bf=function(a){return a},bg=a._rectPath=function(a,b,c,d,e){if(e)return[["M",a+e,b],["l",c-e*2,0],["a",e,e,0,0,1,e,e],["l",0,d-e*2],["a",e,e,0,0,1,-e,e],["l",e*2-c,0],["a",e,e,0,0,1,-e,-e],["l",0,e*2-d],["a",e,e,0,0,1,e,-e],["z"]];return[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},bh=function(a,b,c,d){d==null&&(d=c);return[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},bi=a._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return bh(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return bh(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return bg(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return bg(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return bg(b.x,b.y,b.width,b.height)}},bj=a.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;a=bR(a);for(e=0,g=a.length;e<g;e++){i=a[e];for(f=1,h=i.length;f<h;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d}return a};a._g=h,a.type=h.win.SVGAngle||h.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(a.type=="VML"){var bk=h.doc.createElement("div"),bl;bk.innerHTML='<v:shape adj="1"/>',bl=bk.firstChild,bl.style.behavior="url(#default#VML)";if(!bl||typeof bl.adj!="object")return a.type=p;bk=null}a.svg=!(a.vml=a.type=="VML"),a._Paper=j,a.fn=k=j.prototype=a.prototype,a._id=0,a._oid=0,a.is=function(a,b){b=v.call(b);if(b=="finite")return!M[g](+a);if(b=="array")return a instanceof Array;return b=="null"&&a===null||b==typeof a&&a!==null||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||H.call(a).slice(8,-1).toLowerCase()==b},a.angle=function(b,c,d,e,f,g){if(f==null){var h=b-d,i=c-e;if(!h&&!i)return 0;return(180+w.atan2(-i,-h)*180/B+360)%360}return a.angle(b,c,f,g)-a.angle(d,e,f,g)},a.rad=function(a){return a%360*B/180},a.deg=function(a){return a*180/B%360},a.snapTo=function(b,c,d){d=a.is(d,"finite")?d:10;if(a.is(b,E)){var e=b.length;while(e--)if(z(b[e]-c)<=d)return b[e]}else{b=+b;var f=c%b;if(f<d)return c-f;if(f>b-d)return c-f+b}return c};var bn=a.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=w.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)});a.setWindow=function(b){eve("raphael.setWindow",a,h.win,b),h.win=b,h.doc=h.win.document,a._engine.initWin&&a._engine.initWin(h.win)};var bo=function(b){if(a.vml){var c=/^\s+|\s+$/g,d;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),d=e.body}catch(f){d=createPopup().document.body}var g=d.createTextRange();bo=bv(function(a){try{d.style.color=r(a).replace(c,p);var b=g.queryCommandValue("ForeColor");b=(b&255)<<16|b&65280|(b&16711680)>>>16;return"#"+("000000"+b.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=h.doc.createElement("i");i.title="Raphaël Colour Picker",i.style.display="none",h.doc.body.appendChild(i),bo=bv(function(a){i.style.color=a;return h.doc.defaultView.getComputedStyle(i,p).getPropertyValue("color")})}return bo(b)},bp=function(){return"hsb("+[this.h,this.s,this.b]+")"},bq=function(){return"hsl("+[this.h,this.s,this.l]+")"},br=function(){return this.hex},bs=function(b,c,d){c==null&&a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b&&(d=b.b,c=b.g,b=b.r);if(c==null&&a.is(b,D)){var e=a.getRGB(b);b=e.r,c=e.g,d=e.b}if(b>1||c>1||d>1)b/=255,c/=255,d/=255;return[b,c,d]},bt=function(b,c,d,e){b*=255,c*=255,d*=255;var f={r:b,g:c,b:d,hex:a.rgb(b,c,d),toString:br};a.is(e,"finite")&&(f.opacity=e);return f};a.color=function(b){var c;a.is(b,"object")&&"h"in b&&"s"in b&&"b"in b?(c=a.hsb2rgb(b),b.r=c.r,b.g=c.g,b.b=c.b,b.hex=c.hex):a.is(b,"object")&&"h"in b&&"s"in b&&"l"in b?(c=a.hsl2rgb(b),b.r=c.r,b.g=c.g,b.b=c.b,b.hex=c.hex):(a.is(b,"string")&&(b=a.getRGB(b)),a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b?(c=a.rgb2hsl(b),b.h=c.h,b.s=c.s,b.l=c.l,c=a.rgb2hsb(b),b.v=c.b):(b={hex:"none"},b.r=b.g=b.b=b.h=b.s=b.v=b.l=-1)),b.toString=br;return b},a.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;a=a%360/60,i=c*b,h=i*(1-z(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a];return bt(e,f,g,d)},a.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h);if(a>1||b>1||c>1)a/=360,b/=100,c/=100;a*=360;var e,f,g,h,i;a=a%360/60,i=2*b*(c<.5?c:1-c),h=i*(1-z(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a];return bt(e,f,g,d)},a.rgb2hsb=function(a,b,c){c=bs(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;f=x(a,b,c),g=f-y(a,b,c),d=g==0?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=g==0?0:g/f;return{h:d,s:e,b:f,toString:bp}},a.rgb2hsl=function(a,b,c){c=bs(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;g=x(a,b,c),h=y(a,b,c),i=g-h,d=i==0?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=i==0?0:f<.5?i/(2*f):i/(2-2*f);return{h:d,s:e,l:f,toString:bq}},a._path2string=function(){return this.join(",").replace(Y,"$1")};var bw=a._preload=function(a,b){var c=h.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,h.doc.body.removeChild(this)},c.onerror=function(){h.doc.body.removeChild(this)},h.doc.body.appendChild(c),c.src=a};a.getRGB=bv(function(b){if(!b||!!((b=r(b)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:bx};if(b=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:bx};!X[g](b.toLowerCase().substring(0,2))&&b.charAt()!="#"&&(b=bo(b));var c,d,e,f,h,i,j,k=b.match(L);if(k){k[2]&&(f=R(k[2].substring(5),16),e=R(k[2].substring(3,5),16),d=R(k[2].substring(1,3),16)),k[3]&&(f=R((i=k[3].charAt(3))+i,16),e=R((i=k[3].charAt(2))+i,16),d=R((i=k[3].charAt(1))+i,16)),k[4]&&(j=k[4][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),k[1].toLowerCase().slice(0,4)=="rgba"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100));if(k[5]){j=k[5][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),(j[0].slice(-3)=="deg"||j[0].slice(-1)=="°")&&(d/=360),k[1].toLowerCase().slice(0,4)=="hsba"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100);return a.hsb2rgb(d,e,f,h)}if(k[6]){j=k[6][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),(j[0].slice(-3)=="deg"||j[0].slice(-1)=="°")&&(d/=360),k[1].toLowerCase().slice(0,4)=="hsla"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100);return a.hsl2rgb(d,e,f,h)}k={r:d,g:e,b:f,toString:bx},k.hex="#"+(16777216|f|e<<8|d<<16).toString(16).slice(1),a.is(h,"finite")&&(k.opacity=h);return k}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:bx}},a),a.hsb=bv(function(b,c,d){return a.hsb2rgb(b,c,d).hex}),a.hsl=bv(function(b,c,d){return a.hsl2rgb(b,c,d).hex}),a.rgb=bv(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),a.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b}));return c.hex},a.getColor.reset=function(){delete this.start},a.parsePathString=function(b){if(!b)return null;var c=bz(b);if(c.arr)return bJ(c.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];a.is(b,E)&&a.is(b[0],E)&&(e=bJ(b)),e.length||r(b).replace(Z,function(a,b,c){var f=[],g=b.toLowerCase();c.replace(_,function(a,b){b&&f.push(+b)}),g=="m"&&f.length>2&&(e.push([b][n](f.splice(0,2))),g="l",b=b=="m"?"l":"L");if(g=="r")e.push([b][n](f));else while(f.length>=d[g]){e.push([b][n](f.splice(0,d[g])));if(!d[g])break}}),e.toString=a._path2string,c.arr=bJ(e);return e},a.parseTransformString=bv(function(b){if(!b)return null;var c={r:3,s:4,t:2,m:6},d=[];a.is(b,E)&&a.is(b[0],E)&&(d=bJ(b)),d.length||r(b).replace($,function(a,b,c){var e=[],f=v.call(b);c.replace(_,function(a,b){b&&e.push(+b)}),d.push([b][n](e))}),d.toString=a._path2string;return d});var bz=function(a){var b=bz.ps=bz.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[g](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])});return b[a]};a.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=A(j,3),l=A(j,2),m=i*i,n=m*i,o=k*a+l*3*i*c+j*3*i*i*e+n*g,p=k*b+l*3*i*d+j*3*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,x=j*e+i*g,y=j*f+i*h,z=90-w.atan2(q-s,r-t)*180/B;(q>s||r<t)&&(z+=180);return{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:x,y:y},alpha:z}},a.bezierBBox=function(b,c,d,e,f,g,h,i){a.is(b,"array")||(b=[b,c,d,e,f,g,h,i]);var j=bQ.apply(null,b);return{x:j.min.x,y:j.min.y,x2:j.max.x,y2:j.max.y,width:j.max.x-j.min.x,height:j.max.y-j.min.y}},a.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2},a.isBBoxIntersect=function(b,c){var d=a.isPointInsideBBox;return d(c,b.x,b.y)||d(c,b.x2,b.y)||d(c,b.x,b.y2)||d(c,b.x2,b.y2)||d(b,c.x,c.y)||d(b,c.x2,c.y)||d(b,c.x,c.y2)||d(b,c.x2,c.y2)||(b.x<c.x2&&b.x>c.x||c.x<b.x2&&c.x>b.x)&&(b.y<c.y2&&b.y>c.y||c.y<b.y2&&c.y>b.y)},a.pathIntersection=function(a,b){return bH(a,b)},a.pathIntersectionNumber=function(a,b){return bH(a,b,1)},a.isPointInsidePath=function(b,c,d){var e=a.pathBBox(b);return a.isPointInsideBBox(e,c,d)&&bH(b,[["M",c,d],["H",e.x2+10]],1)%2==1},a._removedFactory=function(a){return function(){eve("raphael.log",null,"Raphaël: you are calling to method “"+a+"” of removed object",a)}};var bI=a.pathBBox=function(a){var b=bz(a);if(b.bbox)return b.bbox;if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=bR(a);var c=0,d=0,e=[],f=[],g;for(var h=0,i=a.length;h<i;h++){g=a[h];if(g[0]=="M")c=g[1],d=g[2],e.push(c),f.push(d);else{var j=bQ(c,d,g[1],g[2],g[3],g[4],g[5],g[6]);e=e[n](j.min.x,j.max.x),f=f[n](j.min.y,j.max.y),c=g[5],d=g[6]}}var k=y[m](0,e),l=y[m](0,f),o=x[m](0,e),p=x[m](0,f),q={x:k,y:l,x2:o,y2:p,width:o-k,height:p-l};b.bbox=bm(q);return q},bJ=function(b){var c=bm(b);c.toString=a._path2string;return c},bK=a._pathToRelative=function(b){var c=bz(b);if(c.rel)return bJ(c.rel);if(!a.is(b,E)||!a.is(b&&b[0],E))b=a.parsePathString(b);var d=[],e=0,f=0,g=0,h=0,i=0;b[0][0]=="M"&&(e=b[0][1],f=b[0][2],g=e,h=f,i++,d.push(["M",e,f]));for(var j=i,k=b.length;j<k;j++){var l=d[j]=[],m=b[j];if(m[0]!=v.call(m[0])){l[0]=v.call(m[0]);switch(l[0]){case"a":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]-e).toFixed(3),l[7]=+(m[7]-f).toFixed(3);break;case"v":l[1]=+(m[1]-f).toFixed(3);break;case"m":g=m[1],h=m[2];default:for(var n=1,o=m.length;n<o;n++)l[n]=+(m[n]-(n%2?e:f)).toFixed(3)}}else{l=d[j]=[],m[0]=="m"&&(g=m[1]+e,h=m[2]+f);for(var p=0,q=m.length;p<q;p++)d[j][p]=m[p]}var r=d[j].length;switch(d[j][0]){case"z":e=g,f=h;break;case"h":e+=+d[j][r-1];break;case"v":f+=+d[j][r-1];break;default:e+=+d[j][r-2],f+=+d[j][r-1]}}d.toString=a._path2string,c.rel=bJ(d);return d},bL=a._pathToAbsolute=function(b){var c=bz(b);if(c.abs)return bJ(c.abs);if(!a.is(b,E)||!a.is(b&&b[0],E))b=a.parsePathString(b);if(!b||!b.length)return[["M",0,0]];var d=[],e=0,f=0,g=0,h=0,i=0;b[0][0]=="M"&&(e=+b[0][1],f=+b[0][2],g=e,h=f,i++,d[0]=["M",e,f]);var j=b.length==3&&b[0][0]=="M"&&b[1][0].toUpperCase()=="R"&&b[2][0].toUpperCase()=="Z";for(var k,l,m=i,o=b.length;m<o;m++){d.push(k=[]),l=b[m];if(l[0]!=S.call(l[0])){k[0]=S.call(l[0]);switch(k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+e),k[7]=+(l[7]+f);break;case"V":k[1]=+l[1]+f;break;case"H":k[1]=+l[1]+e;break;case"R":var p=[e,f][n](l.slice(1));for(var q=2,r=p.length;q<r;q++)p[q]=+p[q]+e,p[++q]=+p[q]+f;d.pop(),d=d[n](by(p,j));break;case"M":g=+l[1]+e,h=+l[2]+f;default:for(q=1,r=l.length;q<r;q++)k[q]=+l[q]+(q%2?e:f)}}else if(l[0]=="R")p=[e,f][n](l.slice(1)),d.pop(),d=d[n](by(p,j)),k=["R"][n](l.slice(-2));else for(var s=0,t=l.length;s<t;s++)k[s]=l[s];switch(k[0]){case"Z":e=g,f=h;break;case"H":e=k[1];break;case"V":f=k[1];break;case"M":g=k[k.length-2],h=k[k.length-1];default:e=k[k.length-2],f=k[k.length-1]}}d.toString=a._path2string,c.abs=bJ(d);return d},bM=function(a,b,c,d){return[a,b,c,d,c,d]},bN=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},bO=function(a,b,c,d,e,f,g,h,i,j){var k=B*120/180,l=B/180*(+e||0),m=[],o,p=bv(function(a,b,c){var d=a*w.cos(c)-b*w.sin(c),e=a*w.sin(c)+b*w.cos(c);return{x:d,y:e}});if(!j){o=p(a,b,-l),a=o.x,b=o.y,o=p(h,i,-l),h=o.x,i=o.y;var q=w.cos(B/180*e),r=w.sin(B/180*e),t=(a-h)/2,u=(b-i)/2,v=t*t/(c*c)+u*u/(d*d);v>1&&(v=w.sqrt(v),c=v*c,d=v*d);var x=c*c,y=d*d,A=(f==g?-1:1)*w.sqrt(z((x*y-x*u*u-y*t*t)/(x*u*u+y*t*t))),C=A*c*u/d+(a+h)/2,D=A*-d*t/c+(b+i)/2,E=w.asin(((b-D)/d).toFixed(9)),F=w.asin(((i-D)/d).toFixed(9));E=a<C?B-E:E,F=h<C?B-F:F,E<0&&(E=B*2+E),F<0&&(F=B*2+F),g&&E>F&&(E=E-B*2),!g&&F>E&&(F=F-B*2)}else E=j[0],F=j[1],C=j[2],D=j[3];var G=F-E;if(z(G)>k){var H=F,I=h,J=i;F=E+k*(g&&F>E?1:-1),h=C+c*w.cos(F),i=D+d*w.sin(F),m=bO(h,i,c,d,e,0,g,I,J,[F,H,C,D])}G=F-E;var K=w.cos(E),L=w.sin(E),M=w.cos(F),N=w.sin(F),O=w.tan(G/4),P=4/3*c*O,Q=4/3*d*O,R=[a,b],S=[a+P*L,b-Q*K],T=[h+P*N,i-Q*M],U=[h,i];S[0]=2*R[0]-S[0],S[1]=2*R[1]-S[1];if(j)return[S,T,U][n](m);m=[S,T,U][n](m).join()[s](",");var V=[];for(var W=0,X=m.length;W<X;W++)V[W]=W%2?p(m[W-1],m[W],l).y:p(m[W],m[W+1],l).x;return V},bP=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:A(j,3)*a+A(j,2)*3*i*c+j*3*i*i*e+A(i,3)*g,y:A(j,3)*b+A(j,2)*3*i*d+j*3*i*i*f+A(i,3)*h}},bQ=bv(function(a,b,c,d,e,f,g,h){var i=e-2*c+a-(g-2*e+c),j=2*(c-a)-2*(e-c),k=a-c,l=(-j+w.sqrt(j*j-4*i*k))/2/i,n=(-j-w.sqrt(j*j-4*i*k))/2/i,o=[b,h],p=[a,g],q;z(l)>"1e12"&&(l=.5),z(n)>"1e12"&&(n=.5),l>0&&l<1&&(q=bP(a,b,c,d,e,f,g,h,l),p.push(q.x),o.push(q.y)),n>0&&n<1&&(q=bP(a,b,c,d,e,f,g,h,n),p.push(q.x),o.push(q.y)),i=f-2*d+b-(h-2*f+d),j=2*(d-b)-2*(f-d),k=b-d,l=(-j+w.sqrt(j*j-4*i*k))/2/i,n=(-j-w.sqrt(j*j-4*i*k))/2/i,z(l)>"1e12"&&(l=.5),z(n)>"1e12"&&(n=.5),l>0&&l<1&&(q=bP(a,b,c,d,e,f,g,h,l),p.push(q.x),o.push(q.y)),n>0&&n<1&&(q=bP(a,b,c,d,e,f,g,h,n),p.push(q.x),o.push(q.y));return{min:{x:y[m](0,p),y:y[m](0,o)},max:{x:x[m](0,p),y:x[m](0,o)}}}),bR=a._path2curve=bv(function(a,b){var c=!b&&bz(a);if(!b&&c.curve)return bJ(c.curve);var d=bL(a),e=b&&bL(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][n](bO[m](0,[b.x,b.y][n](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][n](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][n](bN(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][n](bN(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][n](bM(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][n](bM(b.x,b.y,a[1],b.y));break;case"V":a=["C"][n](bM(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][n](bM(b.x,b.y,b.X,b.Y))}return a},i=function(a,b){if(a[b].length>7){a[b].shift();var c=a[b];while(c.length)a.splice(b++,0,["C"][n](c.splice(0,6)));a.splice(b,1),l=x(d.length,e&&e.length||0)}},j=function(a,b,c,f,g){a&&b&&a[g][0]=="M"&&b[g][0]!="M"&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],l=x(d.length,e&&e.length||0))};for(var k=0,l=x(d.length,e&&e.length||0);k<l;k++){d[k]=h(d[k],f),i(d,k),e&&(e[k]=h(e[k],g)),e&&i(e,k),j(d,e,f,g,k),j(e,d,g,f,k);var o=d[k],p=e&&e[k],q=o.length,r=e&&p.length;f.x=o[q-2],f.y=o[q-1],f.bx=Q(o[q-4])||f.x,f.by=Q(o[q-3])||f.y,g.bx=e&&(Q(p[r-4])||g.x),g.by=e&&(Q(p[r-3])||g.y),g.x=e&&p[r-2],g.y=e&&p[r-1]}e||(c.curve=bJ(d));return e?[d,e]:d},null,bJ),bS=a._parseDots=bv(function(b){var c=[];for(var d=0,e=b.length;d<e;d++){var f={},g=b[d].match(/^([^:]*):?([\d\.]*)/);f.color=a.getRGB(g[1]);if(f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),c.push(f)}for(d=1,e=c.length-1;d<e;d++)if(!c[d].offset){var h=Q(c[d-1].offset||0),i=0;for(var j=d+1;j<e;j++)if(c[j].offset){i=c[j].offset;break}i||(i=100,j=e),i=Q(i);var k=(i-h)/(j-d+1);for(;d<j;d++)h+=k,c[d].offset=h+"%"}return c}),bT=a._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)},bU=a._tofront=function(a,b){b.top!==a&&(bT(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},bV=a._toback=function(a,b){b.bottom!==a&&(bT(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},bW=a._insertafter=function(a,b,c){bT(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},bX=a._insertbefore=function(a,b,c){bT(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},bY=a.toMatrix=function(a,b){var c=bI(a),d={_:{transform:p},getBBox:function(){return c}};b$(d,b);return d.matrix},bZ=a.transformPath=function(a,b){return bj(a,bY(a,b))},b$=a._extractTransform=function(b,c){if(c==null)return b._.transform;c=r(c).replace(/\.{3}|\u2026/g,b._.transform||p);var d=a.parseTransformString(c),e=0,f=0,g=0,h=1,i=1,j=b._,k=new cb;j.transform=d||[];if(d)for(var l=0,m=d.length;l<m;l++){var n=d[l],o=n.length,q=r(n[0]).toLowerCase(),s=n[0]!=q,t=s?k.invert():0,u,v,w,x,y;q=="t"&&o==3?s?(u=t.x(0,0),v=t.y(0,0),w=t.x(n[1],n[2]),x=t.y(n[1],n[2]),k.translate(w-u,x-v)):k.translate(n[1],n[2]):q=="r"?o==2?(y=y||b.getBBox(1),k.rotate(n[1],y.x+y.width/2,y.y+y.height/2),e+=n[1]):o==4&&(s?(w=t.x(n[2],n[3]),x=t.y(n[2],n[3]),k.rotate(n[1],w,x)):k.rotate(n[1],n[2],n[3]),e+=n[1]):q=="s"?o==2||o==3?(y=y||b.getBBox(1),k.scale(n[1],n[o-1],y.x+y.width/2,y.y+y.height/2),h*=n[1],i*=n[o-1]):o==5&&(s?(w=t.x(n[3],n[4]),x=t.y(n[3],n[4]),k.scale(n[1],n[2],w,x)):k.scale(n[1],n[2],n[3],n[4]),h*=n[1],i*=n[2]):q=="m"&&o==7&&k.add(n[1],n[2],n[3],n[4],n[5],n[6]),j.dirtyT=1,b.matrix=k}b.matrix=k,j.sx=h,j.sy=i,j.deg=e,j.dx=f=k.e,j.dy=g=k.f,h==1&&i==1&&!e&&j.bbox?(j.bbox.x+=+f,j.bbox.y+=+g):j.dirtyT=1},b_=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return a.length==4?[b,0,a[2],a[3]]:[b,0];case"s":return a.length==5?[b,1,1,a[3],a[4]]:a.length==3?[b,1,1]:[b,1]}},ca=a._equaliseTransform=function(b,c){c=r(c).replace(/\.{3}|\u2026/g,b),b=a.parseTransformString(b)||[],c=a.parseTransformString(c)||[];var d=x(b.length,c.length),e=[],f=[],g=0,h,i,j,k;for(;g<d;g++){j=b[g]||b_(c[g]),k=c[g]||b_(j);if(j[0]!=k[0]||j[0].toLowerCase()=="r"&&(j[2]!=k[2]||j[3]!=k[3])||j[0].toLowerCase()=="s"&&(j[3]!=k[3]||j[4]!=k[4]))return;e[g]=[],f[g]=[];for(h=0,i=x(j.length,k.length);h<i;h++)h in j&&(e[g][h]=j[h]),h in k&&(f[g][h]=k[h])}return{from:e,to:f}};a._getContainer=function(b,c,d,e){var f;f=e==null&&!a.is(b,"object")?h.doc.getElementById(b):b;if(f!=null){if(f.tagName)return c==null?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:c,height:d};return{container:1,x:b,y:c,width:d,height:e}}},a.pathToRelative=bK,a._engine={},a.path2curve=bR,a.matrix=function(a,b,c,d,e,f){return new cb(a,b,c,d,e,f)},function(b){function d(a){var b=w.sqrt(c(a));a[0]&&(a[0]/=b),a[1]&&(a[1]/=b)}function c(a){return a[0]*a[0]+a[1]*a[1]}b.add=function(a,b,c,d,e,f){var g=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],i=[[a,c,e],[b,d,f],[0,0,1]],j,k,l,m;a&&a instanceof cb&&(i=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(j=0;j<3;j++)for(k=0;k<3;k++){m=0;for(l=0;l<3;l++)m+=h[j][l]*i[l][k];g[j][k]=m}this.a=g[0][0],this.b=g[1][0],this.c=g[0][1],this.d=g[1][1],this.e=g[0][2],this.f=g[1][2]},b.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new cb(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},b.clone=function(){return new cb(this.a,this.b,this.c,this.d,this.e,this.f)},b.translate=function(a,b){this.add(1,0,0,1,a,b)},b.scale=function(a,b,c,d){b==null&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},b.rotate=function(b,c,d){b=a.rad(b),c=c||0,d=d||0;var e=+w.cos(b).toFixed(9),f=+w.sin(b).toFixed(9);this.add(e,f,-f,e,c,d),this.add(1,0,0,1,-c,-d)},b.x=function(a,b){return a*this.a+b*this.c+this.e},b.y=function(a,b){return a*this.b+b*this.d+this.f},b.get=function(a){return+this[r.fromCharCode(97+a)].toFixed(4)},b.toString=function(){return a.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},b.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},b.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},b.split=function(){var b={};b.dx=this.e,b.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];b.scalex=w.sqrt(c(e[0])),d(e[0]),b.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*b.shear,e[1][1]-e[0][1]*b.shear],b.scaley=w.sqrt(c(e[1])),d(e[1]),b.shear/=b.scaley;var f=-e[0][1],g=e[1][1];g<0?(b.rotate=a.deg(w.acos(g)),f<0&&(b.rotate=360-b.rotate)):b.rotate=a.deg(w.asin(f)),b.isSimple=!+b.shear.toFixed(9)&&(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate),b.isSuperSimple=!+b.shear.toFixed(9)&&b.scalex.toFixed(9)==b.scaley.toFixed(9)&&!b.rotate,b.noRotation=!+b.shear.toFixed(9)&&!b.rotate;return b},b.toTransformString=function(a){var b=a||this[s]();if(b.isSimple){b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4);return(b.dx||b.dy?"t"+[b.dx,b.dy]:p)+(b.scalex!=1||b.scaley!=1?"s"+[b.scalex,b.scaley,0,0]:p)+(b.rotate?"r"+[b.rotate,0,0]:p)}return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(cb.prototype);var cc=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(cc&&cc[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&cc&&cc[1]<8?k.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:k.safari=be;var cd=function(){this.returnValue=!1},ce=function(){return this.originalEvent.preventDefault()},cf=function(){this.cancelBubble=!0},cg=function(){return this.originalEvent.stopPropagation()},ch=function(){if(h.doc.addEventListener)return function(a,b,c,d){var e=o&&u[b]?u[b]:b,f=function(e){var f=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,i=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,j=e.clientX+i,k=e.clientY+f;if(o&&u[g](b))for(var l=0,m=e.targetTouches&&e.targetTouches.length;l<m;l++)if(e.targetTouches[l].target==a){var n=e;e=e.targetTouches[l],e.originalEvent=n,e.preventDefault=ce,e.stopPropagation=cg;break}return c.call(d,e,j,k)};a.addEventListener(e,f,!1);return function(){a.removeEventListener(e,f,!1);return!0}};if(h.doc.attachEvent)return function(a,b,c,d){var e=function(a){a=a||h.win.event;var b=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,e=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;a.preventDefault=a.preventDefault||cd,a.stopPropagation=a.stopPropagation||cf;return c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){a.detachEvent("on"+b,e);return!0};return f}}(),ci=[],cj=function(a){var b=a.clientX,c=a.clientY,d=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,e=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,f,g=ci.length;while(g--){f=ci[g];if(o){var i=a.touches.length,j;while(i--){j=a.touches[i];if(j.identifier==f.el._drag.id){b=j.clientX,c=j.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}}else a.preventDefault();var k=f.el.node,l,m=k.nextSibling,n=k.parentNode,p=k.style.display;h.win.opera&&n.removeChild(k),k.style.display="none",l=f.el.paper.getElementByPoint(b,c),k.style.display=p,h.win.opera&&(m?n.insertBefore(k,m):n.appendChild(k)),l&&eve("raphael.drag.over."+f.el.id,f.el,l),b+=e,c+=d,eve("raphael.drag.move."+f.el.id,f.move_scope||f.el,b-f.el._drag.x,c-f.el._drag.y,b,c,a)}},ck=function(b){a.unmousemove(cj).unmouseup(ck);var c=ci.length,d;while(c--)d=ci[c],d.el._drag={},eve("raphael.drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,b);ci=[]},cl=a.el={};for(var cm=t.length;cm--;)(function(b){a[b]=cl[b]=function(c,d){a.is(c,"function")&&(this.events=this.events||[],this.events.push({name:b,f:c,unbind:ch(this.shape||this.node||h.doc,b,c,d||this)}));return this},a["un"+b]=cl["un"+b]=function(a){var c=this.events||[],d=c.length;while(d--)if(c[d].name==b&&c[d].f==a){c[d].unbind(),c.splice(d,1),!c.length&&delete this.events;return this}return this}})(t[cm]);cl.data=function(b,c){var d=bb[this.id]=bb[this.id]||{};if(arguments.length==1){if(a.is(b,"object")){for(var e in b)b[g](e)&&this.data(e,b[e]);return this}eve("raphael.data.get."+this.id,this,d[b],b);return d[b]}d[b]=c,eve("raphael.data.set."+this.id,this,c,b);return this},cl.removeData=function(a){a==null?bb[this.id]={}:bb[this.id]&&delete bb[this.id][a];return this},cl.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},cl.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var cn=[];cl.drag=function(b,c,d,e,f,g){function i(i){(i.originalEvent||i).preventDefault();var j=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,k=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft;this._drag.x=i.clientX+k,this._drag.y=i.clientY+j,this._drag.id=i.identifier,!ci.length&&a.mousemove(cj).mouseup(ck),ci.push({el:this,move_scope:e,start_scope:f,end_scope:g}),c&&eve.on("raphael.drag.start."+this.id,c),b&&eve.on("raphael.drag.move."+this.id,b),d&&eve.on("raphael.drag.end."+this.id,d),eve("raphael.drag.start."+this.id,f||e||this,i.clientX+k,i.clientY+j,i)}this._drag={},cn.push({el:this,start:i}),this.mousedown(i);return this},cl.onDragOver=function(a){a?eve.on("raphael.drag.over."+this.id,a):eve.unbind("raphael.drag.over."+this.id)},cl.undrag=function(){var b=cn.length;while(b--)cn[b].el==this&&(this.unmousedown(cn[b].start),cn.splice(b,1),eve.unbind("raphael.drag.*."+this.id));!cn.length&&a.unmousemove(cj).unmouseup(ck)},k.circle=function(b,c,d){var e=a._engine.circle(this,b||0,c||0,d||0);this.__set__&&this.__set__.push(e);return e},k.rect=function(b,c,d,e,f){var g=a._engine.rect(this,b||0,c||0,d||0,e||0,f||0);this.__set__&&this.__set__.push(g);return g},k.ellipse=function(b,c,d,e){var f=a._engine.ellipse(this,b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(f);return f},k.path=function(b){b&&!a.is(b,D)&&!a.is(b[0],E)&&(b+=p);var c=a._engine.path(a.format[m](a,arguments),this);this.__set__&&this.__set__.push(c);return c},k.image=function(b,c,d,e,f){var g=a._engine.image(this,b||"about:blank",c||0,d||0,e||0,f||0);this.__set__&&this.__set__.push(g);return g},k.text=function(b,c,d){var e=a._engine.text(this,b||0,c||0,r(d));this.__set__&&this.__set__.push(e);return e},k.set=function(b){!a.is(b,"array")&&(b=Array.prototype.splice.call(arguments,0,arguments.length));var c=new cG(b);this.__set__&&this.__set__.push(c);return c},k.setStart=function(a){this.__set__=a||this.set()},k.setFinish=function(a){var b=this.__set__;delete this.__set__;return b},k.setSize=function(b,c){return a._engine.setSize.call(this,b,c)},k.setViewBox=function(b,c,d,e,f){return a._engine.setViewBox.call(this,b,c,d,e,f)},k.top=k.bottom=null,k.raphael=a;var co=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,i=b.top+(h.win.pageYOffset||e.scrollTop||d.scrollTop)-f,j=b.left+(h.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:i,x:j}};k.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=h.doc.elementFromPoint(a,b);if(h.win.opera&&e.tagName=="svg"){var f=co(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var i=d.getIntersectionList(g,null);i.length&&(e=i[i.length-1])}if(!e)return null;while(e.parentNode&&e!=d.parentNode&&!e.raphael)e=e.parentNode;e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null;return e},k.getById=function(a){var b=this.bottom;while(b){if(b.id==a)return b;b=b.next}return null},k.forEach=function(a,b){var c=this.bottom;while(c){if(a.call(b,c)===!1)return this;c=c.next}return this},k.getElementsByPoint=function(a,b){var c=this.set();this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)});return c},cl.isPointInside=function(b,c){var d=this.realPath=this.realPath||bi[this.type](this);return a.isPointInsidePath(d,b,c)},cl.getBBox=function(a){if(this.removed)return{};var b=this._;if(a){if(b.dirty||!b.bboxwt)this.realPath=bi[this.type](this),b.bboxwt=bI(this.realPath),b.bboxwt.toString=cq,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=bi[this.type](this);b.bbox=bI(bj(this.realPath,this.matrix)),b.bbox.toString=cq,b.dirty=b.dirtyT=0}return b.bbox},cl.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a},cl.glow=function(a){if(this.type=="text")return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||bi[this.type](this);f=this.matrix?bj(f,this.matrix):f;for(var g=1;g<c+1;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var cr={},cs=function(b,c,d,e,f,g,h,i,j){return j==null?bB(b,c,d,e,f,g,h,i):a.findDotsAtSegment(b,c,d,e,f,g,h,i,bC(b,c,d,e,f,g,h,i,j))},ct=function(b,c){return function(d,e,f){d=bR(d);var g,h,i,j,k="",l={},m,n=0;for(var o=0,p=d.length;o<p;o++){i=d[o];if(i[0]=="M")g=+i[1],h=+i[2];else{j=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6]);if(n+j>e){if(c&&!l.start){m=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),k+=["C"+m.start.x,m.start.y,m.m.x,m.m.y,m.x,m.y];if(f)return k;l.start=k,k=["M"+m.x,m.y+"C"+m.n.x,m.n.y,m.end.x,m.end.y,i[5],i[6]].join(),n+=j,g=+i[5],h=+i[6];continue}if(!b&&!c){m=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n);return{x:m.x,y:m.y,alpha:m.alpha}}}n+=j,g=+i[5],h=+i[6]}k+=i.shift()+i}l.end=k,m=b?n:c?l:a.findDotsAtSegment(g,h,i[0],i[1],i[2],i[3],i[4],i[5],1),m.alpha&&(m={x:m.x,y:m.y,alpha:m.alpha});return m}},cu=ct(1),cv=ct(),cw=ct(0,1);a.getTotalLength=cu,a.getPointAtLength=cv,a.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return cw(a,b).end;var d=cw(a,c,1);return b?cw(d,b).end:d},cl.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return cu(this.attrs.path)}},cl.getPointAtLength=function(a){if(this.type=="path")return cv(this.attrs.path,a)},cl.getSubpath=function(b,c){if(this.type=="path")return a.getSubpath(this.attrs.path,b,c)};var cx=a.easing_formulas={linear:function(a){return a},"<":function(a){return A(a,1.7)},">":function(a){return A(a,.48)},"<>":function(a){var b=.48-a/1.04,c=w.sqrt(.1734+b*b),d=c-b,e=A(z(d),1/3)*(d<0?-1:1),f=-c-b,g=A(z(f),1/3)*(f<0?-1:1),h=e+g+.5;return(1-h)*3*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a=a-1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){if(a==!!a)return a;return A(2,-10*a)*w.sin((a-.075)*2*B/.3)+1},bounce:function(a){var b=7.5625,c=2.75,d;a<1/c?d=b*a*a:a<2/c?(a-=1.5/c,d=b*a*a+.75):a<2.5/c?(a-=2.25/c,d=b*a*a+.9375):(a-=2.625/c,d=b*a*a+.984375);return d}};cx.easeIn=cx["ease-in"]=cx["<"],cx.easeOut=cx["ease-out"]=cx[">"],cx.easeInOut=cx["ease-in-out"]=cx["<>"],cx["back-in"]=cx.backIn,cx["back-out"]=cx.backOut;var cy=[],cz=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},cA=function(){var b=+(new Date),c=0;for(;c<cy.length;c++){var d=cy[c];if(d.el.removed||d.paused)continue;var e=b-d.start,f=d.ms,h=d.easing,i=d.from,j=d.diff,k=d.to,l=d.t,m=d.el,o={},p,r={},s;d.initstatus?(e=(d.initstatus*d.anim.top-d.prev)/(d.percent-d.prev)*f,d.status=d.initstatus,delete d.initstatus,d.stop&&cy.splice(c--,1)):d.status=(d.prev+(d.percent-d.prev)*(e/f))/d.anim.top;if(e<0)continue;if(e<f){var t=h(e/f);for(var u in i)if(i[g](u)){switch(U[u]){case C:p=+i[u]+t*f*j[u];break;case"colour":p="rgb("+[cB(O(i[u].r+t*f*j[u].r)),cB(O(i[u].g+t*f*j[u].g)),cB(O(i[u].b+t*f*j[u].b))].join(",")+")";break;case"path":p=[];for(var v=0,w=i[u].length;v<w;v++){p[v]=[i[u][v][0]];for(var x=1,y=i[u][v].length;x<y;x++)p[v][x]=+i[u][v][x]+t*f*j[u][v][x];p[v]=p[v].join(q)}p=p.join(q);break;case"transform":if(j[u].real){p=[];for(v=0,w=i[u].length;v<w;v++){p[v]=[i[u][v][0]];for(x=1,y=i[u][v].length;x<y;x++)p[v][x]=i[u][v][x]+t*f*j[u][v][x]}}else{var z=function(a){return+i[u][a]+t*f*j[u][a]};p=[["m",z(0),z(1),z(2),z(3),z(4),z(5)]]}break;case"csv":if(u=="clip-rect"){p=[],v=4;while(v--)p[v]=+i[u][v]+t*f*j[u][v]}break;default:var A=[][n](i[u]);p=[],v=m.paper.customAttributes[u].length;while(v--)p[v]=+A[v]+t*f*j[u][v]}o[u]=p}m.attr(o),function(a,b,c){setTimeout(function(){eve("raphael.anim.frame."+a,b,c)})}(m.id,m,d.anim)}else{(function(b,c,d){setTimeout(function(){eve("raphael.anim.frame."+c.id,c,d),eve("raphael.anim.finish."+c.id,c,d),a.is(b,"function")&&b.call(c)})})(d.callback,m,d.anim),m.attr(k),cy.splice(c--,1);if(d.repeat>1&&!d.next){for(s in k)k[g](s)&&(r[s]=d.totalOrigin[s]);d.el.attr(r),cE(d.anim,d.el,d.anim.percents[0],null,d.totalOrigin,d.repeat-1)}d.next&&!d.stop&&cE(d.anim,d.el,d.next,null,d.totalOrigin,d.repeat)}}a.svg&&m&&m.paper&&m.paper.safari(),cy.length&&cz(cA)},cB=function(a){return a>255?255:a<0?0:a};cl.animateWith=function(b,c,d,e,f,g){var h=this;if(h.removed){g&&g.call(h);return h}var i=d instanceof cD?d:a.animation(d,e,f,g),j,k;cE(i,h,i.percents[0],null,h.attr());for(var l=0,m=cy.length;l<m;l++)if(cy[l].anim==c&&cy[l].el==b){cy[m-1].start=cy[l].start;break}return h},cl.onAnimation=function(a){a?eve.on("raphael.anim.frame."+this.id,a):eve.unbind("raphael.anim.frame."+this.id);return this},cD.prototype.delay=function(a){var b=new cD(this.anim,this.ms);b.times=this.times,b.del=+a||0;return b},cD.prototype.repeat=function(a){var b=new cD(this.anim,this.ms);b.del=this.del,b.times=w.floor(x(a,0))||1;return b},a.animation=function(b,c,d,e){if(b instanceof cD)return b;if(a.is(d,"function")||!d)e=e||d||null,d=null;b=Object(b),c=+c||0;var f={},h,i;for(i in b)b[g](i)&&Q(i)!=i&&Q(i)+"%"!=i&&(h=!0,f[i]=b[i]);if(!h)return new cD(b,c);d&&(f.easing=d),e&&(f.callback=e);return new cD({100:f},c)},cl.animate=function(b,c,d,e){var f=this;if(f.removed){e&&e.call(f);return f}var g=b instanceof cD?b:a.animation(b,c,d,e);cE(g,f,g.percents[0],null,f.attr());return f},cl.setTime=function(a,b){a&&b!=null&&this.status(a,y(b,a.ms)/a.ms);return this},cl.status=function(a,b){var c=[],d=0,e,f;if(b!=null){cE(a,this,-1,y(b,1));return this}e=cy.length;for(;d<e;d++){f=cy[d];if(f.el.id==this.id&&(!a||f.anim==a)){if(a)return f.status;c.push({anim:f.anim,status:f.status})}}if(a)return 0;return c},cl.pause=function(a){for(var b=0;b<cy.length;b++)cy[b].el.id==this.id&&(!a||cy[b].anim==a)&&eve("raphael.anim.pause."+this.id,this,cy[b].anim)!==!1&&(cy[b].paused=!0);return this},cl.resume=function(a){for(var b=0;b<cy.length;b++)if(cy[b].el.id==this.id&&(!a||cy[b].anim==a)){var c=cy[b];eve("raphael.anim.resume."+this.id,this,c.anim)!==!1&&(delete c.paused,this.status(c.anim,c.status))}return this},cl.stop=function(a){for(var b=0;b<cy.length;b++)cy[b].el.id==this.id&&(!a||cy[b].anim==a)&&eve("raphael.anim.stop."+this.id,this,cy[b].anim)!==!1&&cy.splice(b--,1);return this},eve.on("raphael.remove",cF),eve.on("raphael.clear",cF),cl.toString=function(){return"Raphaël’s object"};var cG=function(a){this.items=[],this.length=0,this.type="set";if(a)for(var b=0,c=a.length;b<c;b++)a[b]&&(a[b].constructor==cl.constructor||a[b].constructor==cG)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},cH=cG.prototype;cH.push=function(){var a,b;for(var c=0,d=arguments.length;c<d;c++)a=arguments[c],a&&(a.constructor==cl.constructor||a.constructor==cG)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},cH.pop=function(){this.length&&delete this[this.length--];return this.items.pop()},cH.forEach=function(a,b){for(var c=0,d=this.items.length;c<d;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var cI in cl)cl[g](cI)&&(cH[cI]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][m](c,b)})}}(cI));cH.attr=function(b,c){if(b&&a.is(b,E)&&a.is(b[0],"object"))for(var d=0,e=b.length;d<e;d++)this.items[d].attr(b[d]);else for(var f=0,g=this.items.length;f<g;f++)this.items[f].attr(b,c);return this},cH.clear=function(){while(this.length)this.pop()},cH.splice=function(a,b,c){a=a<0?x(this.length+a,0):a,b=x(0,y(this.length-a,b));var d=[],e=[],f=[],g;for(g=2;g<arguments.length;g++)f.push(arguments[g]);for(g=0;g<b;g++)e.push(this[a+g]);for(;g<this.length-a;g++)d.push(this[a+g]);var h=f.length;for(g=0;g<h+d.length;g++)this.items[a+g]=this[a+g]=g<h?f[g]:d[g-h];g=this.items.length=this.length-=b-h;while(this[g])delete this[g++];return new cG(e)},cH.exclude=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a){this.splice(b,1);return!0}},cH.animate=function(b,c,d,e){(a.is(d,"function")||!d)&&(e=d||null);var f=this.items.length,g=f,h,i=this,j;if(!f)return this;e&&(j=function(){!--f&&e.call(i)}),d=a.is(d,D)?d:j;var k=a.animation(b,c,d,j);h=this.items[--g].animate(k);while(g--)this.items[g]&&!this.items[g].removed&&this.items[g].animateWith(h,k,k);return this},cH.insertAfter=function(a){var b=this.items.length;while(b--)this.items[b].insertAfter(a);return this},cH.getBBox=function(){var a=[],b=[],c=[],d=[];for(var e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}a=y[m](0,a),b=y[m](0,b),c=x[m](0,c),d=x[m](0,d);return{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},cH.clone=function(a){a=new cG;for(var b=0,c=this.items.length;b<c;b++)a.push(this.items[b].clone());return a},cH.toString=function(){return"Raphaël‘s set"},a.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[g](d)&&(b.face[d]=a.face[d]);this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=R(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[g](e)){var f=a.glyphs[e];b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"};if(f.k)for(var h in f.k)f[g](h)&&(b.glyphs[e].k[h]=f.k[h])}}return a},k.getFont=function(b,c,d,e){e=e||"normal",d=d||"normal",c=+c||{normal:400,bold:700,lighter:300,bolder:800}[c]||400;if(!!a.fonts){var f=a.fonts[b];if(!f){var h=new RegExp("(^|\\s)"+b.replace(/[^\w\d\s+!~.:_-]/g,p)+"(\\s|$)","i");for(var i in a.fonts)if(a.fonts[g](i)&&h.test(i)){f=a.fonts[i];break}}var j;if(f)for(var k=0,l=f.length;k<l;k++){j=f[k];if(j.face["font-weight"]==c&&(j.face["font-style"]==d||!j.face["font-style"])&&j.face["font-stretch"]==e)break}return j}},k.print=function(b,d,e,f,g,h,i){h=h||"middle",i=x(y(i||0,1),-1);var j=r(e)[s](p),k=0,l=0,m=p,n;a.is(f,e)&&(f=this.getFont(f));if(f){n=(g||16)/f.face["units-per-em"];var o=f.face.bbox[s](c),q=+o[0],t=o[3]-o[1],u=0,v=+o[1]+(h=="baseline"?t+ +f.face.descent:t/2);for(var w=0,z=j.length;w<z;w++){if(j[w]=="\n")k=0,B=0,l=0,u+=t;else{var A=l&&f.glyphs[j[w-1]]||{},B=f.glyphs[j[w]];k+=l?(A.w||f.w)+(A.k&&A.k[j[w]]||0)+f.w*i:0,l=1}B&&B.d&&(m+=a.transformPath(B.d,["t",k*n,u*n,"s",n,n,q,v,"t",(b-q)/n,(d-v)/n]))}}return this.path(m).attr({fill:"#000",stroke:"none"})},k.add=function(b){if(a.is(b,"array")){var c=this.set(),e=0,f=b.length,h;for(;e<f;e++)h=b[e]||{},d[g](h.type)&&c.push(this[h.type]().attr(h))}return c},a.format=function(b,c){var d=a.is(c,E)?[0][n](c):arguments;b&&a.is(b,D)&&d.length-1&&(b=b.replace(e,function(a,b){return d[++b]==null?p:d[b]}));return b||p},a.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),typeof e=="function"&&f&&(e=e()))}),e=(e==null||e==d?a:e)+"";return e};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),a.ninja=function(){i.was?h.win.Raphael=i.is:delete Raphael;return a},a.st=cH,function(b,c,d){function e(){/in/.test(b.readyState)?setTimeout(e,9):a.eve("raphael.DOMload")}b.readyState==null&&b.addEventListener&&(b.addEventListener(c,d=function(){b.removeEventListener(c,d,!1),b.readyState="complete"},!1),b.readyState="loading"),e()}(document,"DOMContentLoaded"),i.was?h.win.Raphael=a:Raphael=a,eve.on("raphael.DOMload",function(){b=!0})}(),window.Raphael.svg&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=a.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};a.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var q=function(d,e){if(e){typeof d=="string"&&(d=q(d));for(var f in e)e[b](f)&&(f.substring(0,6)=="xlink:"?d.setAttributeNS(n,f.substring(6),c(e[f])):d.setAttribute(f,c(e[f])))}else d=a._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(b,e){var j="linear",k=b.id+e,m=.5,n=.5,o=b.node,p=b.paper,r=o.style,s=a._g.doc.getElementById(k);if(!s){e=c(e).replace(a._radial_gradient,function(a,b,c){j="radial";if(b&&c){m=d(b),n=d(c);var e=(n>.5)*2-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&n!=.5&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/);if(j=="linear"){var t=e.shift();t=-d(t);if(isNaN(t))return null;var u=[0,0,f.cos(a.rad(t)),f.sin(a.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=a._parseDots(e);if(!w)return null;k=k.replace(/[\(\)\s,\xb0#]/g,"_"),b.gradient&&k!=b.gradient.id&&(p.defs.removeChild(b.gradient),delete b.gradient);if(!b.gradient){s=q(j+"Gradient",{id:k}),b.gradient=s,q(s,j=="radial"?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:b.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;x<y;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1;return 1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if(d.type=="path"){var g=c(e).toLowerCase().split("-"),h=d.paper,i=f?"end":"start",j=d.node,k=d.attrs,m=k["stroke-width"],n=g.length,r="classic",s,t,u,v,w,x=3,y=3,z=5;while(n--)switch(g[n]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":r=g[n];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}r=="open"?(x+=2,y+=2,z+=2,u=1,v=f?4:1,w={fill:"none",stroke:k.stroke}):(v=u=x/2,w={fill:k.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={};if(r!="none"){var A="raphael-marker-"+r,B="raphael-marker-"+i+r+x+y;a._g.doc.getElementById(A)?p[A]++:(h.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[r],id:A})),p[A]=1);var C=a._g.doc.getElementById(B),D;C?(p[B]++,D=C.getElementsByTagName("use")[0]):(C=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:v,refY:y/2}),D=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),C.appendChild(D),h.defs.appendChild(C),p[B]=1),q(D,w);var F=u*(r!="diamond"&&r!="oval");f?(s=d._.arrows.startdx*m||0,t=a.getTotalLength(k.path)-F*m):(s=F*m,t=a.getTotalLength(k.path)-(d._.arrows.enddx*m||0)),w={},w["marker-"+i]="url(#"+B+")";if(t||s)w.d=Raphael.getSubpath(k.path,s,t);q(j,w),d._.arrows[i+"Path"]=A,d._.arrows[i+"Marker"]=B,d._.arrows[i+"dx"]=F,d._.arrows[i+"Type"]=r,d._.arrows[i+"String"]=e}else f?(s=d._.arrows.startdx*m||0,t=a.getTotalLength(k.path)-s):(s=0,t=a.getTotalLength(k.path)-(d._.arrows.enddx*m||0)),d._.arrows[i+"Path"]&&q(j,{d:Raphael.getSubpath(k.path,s,t)}),delete d._.arrows[i+"Path"],delete d._.arrows[i+"Marker"],delete d._.arrows[i+"dx"],delete d._.arrows[i+"Type"],delete d._.arrows[i+"String"];for(w in p)if(p[b](w)&&!p[w]){var G=a._g.doc.getElementById(w);G&&G.parentNode.removeChild(G)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,b,d){b=u[c(b).toLowerCase()];if(b){var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=b.length;while(h--)g[h]=b[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;i.style.visibility="hidden";for(var o in f)if(f[b](o)){if(!a._availableAttrs[b](o))continue;var p=f[o];k[o]=p;switch(o){case"blur":d.blur(p);break;case"href":case"title":case"target":var u=i.parentNode;if(u.tagName.toLowerCase()!="a"){var w=q("a");u.insertBefore(w,i),w.appendChild(i),u=w}o=="target"?u.setAttributeNS(n,"show",p=="blank"?"new":p):u.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var x=c(p).split(j);if(x.length==4){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var z=q("clipPath"),A=q("rect");z.id=a.createUUID(),q(A,{x:x[0],y:x[1],width:x[2],height:x[3]}),z.appendChild(A),d.paper.defs.appendChild(z),q(i,{"clip-path":"url(#"+z.id+")"}),d.clip=A}if(!p){var B=i.getAttribute("clip-path");if(B){var C=a._g.doc.getElementById(B.replace(/(^url\(#|\)$)/g,l));C&&C.parentNode.removeChild(C),q(i,{"clip-path":l}),delete d.clip}}break;case"path":d.type=="path"&&(q(i,{d:p?k.path=a._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":i.setAttribute(o,p),d._.dirty=1;if(k.fx)o="x",p=k.x;else break;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if(o=="rx"&&d.type=="rect")break;case"cx":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"height":i.setAttribute(o,p),d._.dirty=1;if(k.fy)o="y",p=k.y;else break;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if(o=="ry"&&d.type=="rect")break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":d.type=="rect"?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":d.type=="image"&&i.setAttributeNS(n,"href",p);break;case"stroke-width":if(d._.sx!=1||d._.sy!=1)p/=g(h(d._.sx),h(d._.sy))||1;d.paper._vbSize&&(p*=d.paper._vbSize),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var D=c(p).match(a._ISURL);if(D){z=q("pattern");var F=q("image");z.id=a.createUUID(),q(z,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(F,{x:0,y:0,"xlink:href":D[1]}),z.appendChild(F),function(b){a._preload(D[1],function(){var a=this.offsetWidth,c=this.offsetHeight;q(b,{width:a,height:c}),q(F,{width:a,height:c}),d.paper.safari()})}(z),d.paper.defs.appendChild(z),q(i,{fill:"url(#"+z.id+")"}),d.pattern=z,d.pattern&&s(d);break}var G=a.getRGB(p);if(!G.error)delete f.gradient,delete k.gradient,!a.is(k.opacity,"undefined")&&a.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!a.is(k["fill-opacity"],"undefined")&&a.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});else if((d.type=="circle"||d.type=="ellipse"||c(p).charAt()!="r")&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var H=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(H){var I=H.getElementsByTagName("stop");q(I[I.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}G[b]("opacity")&&q(i,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=a.getRGB(p),i.setAttribute(o,G.hex),o=="stroke"&&G[b]("opacity")&&q(i,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity}),o=="stroke"&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":(d.type=="circle"||d.type=="ellipse"||c(p).charAt()!="r")&&r(d,p);break;case"opacity":k.gradient&&!k[b]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){H=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)),H&&(I=H.getElementsByTagName("stop"),q(I[I.length-1],{"stop-opacity":p}));break};default:o=="font-size"&&(p=e(p,10)+"px");var J=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[J]=p,d._.dirty=1,i.setAttribute(o,p)}}y(d,f),i.style.visibility=m},x=1.2,y=function(d,f){if(d.type=="text"&&!!(f[b]("text")||f[b]("font")||f[b]("font-size")||f[b]("x")||f[b]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(a._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[b]("text")){g.text=f.text;while(h.firstChild)h.removeChild(h.firstChild);var j=c(f.text).split("\n"),k=[],m;for(var n=0,o=j.length;n<o;n++)m=q("tspan"),n&&q(m,{dy:i*x,x:g.x}),m.appendChild(a._g.doc.createTextNode(j[n])),h.appendChild(m),k[n]=m}else{k=h.getElementsByTagName("tspan");for(n=0,o=k.length;n<o;n++)n?q(k[n],{dy:i*x,x:g.x}):q(k[0],{dy:0})}q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&a.is(r,"finite")&&q(k[0],{dy:r})}},z=function(b,c){var d=0,e=0;this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.matrix=a.matrix(),this.realPath=null,this.paper=c,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},A=a.el;z.prototype=A,A.constructor=z,a._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);d.type="path",w(d,{fill:"none",stroke:"#000",path:a});return d},A.rotate=function(a,b,e){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),e==null&&(b=e);if(b==null||e==null){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}this.transform(this._.transform.concat([["r",a,b,e]]));return this},A.scale=function(a,b,e,f){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),b==null&&(b=a),f==null&&(e=f);if(e==null||f==null)var g=this.getBBox(1);e=e==null?g.x+g.width/2:e,f=f==null?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]]));return this},A.translate=function(a,b){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this.transform(this._.transform.concat([["t",a,b]]));return this},A.transform=function(c){var d=this._;if(c==null)return d.transform;a._extractTransform(this,c),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix});if(d.sx!=1||d.sy!=1){var e=this.attrs[b]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this},A.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this},A.remove=function(){if(!this.removed&&!!this.node.parentNode){var b=this.paper;b.__set__&&b.__set__.exclude(this),k.unbind("raphael.*.*."+this.id),this.gradient&&b.defs.removeChild(this.gradient),a._tear(this,b),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var c in this)this[c]=typeof this[c]=="function"?a._removedFactory(c):null;this.removed=!0}},A._getBBox=function(){if(this.node.style.display=="none"){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}a&&this.hide();return b},A.attr=function(c,d){if(this.removed)return this;if(c==null){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform;return e}if(d==null&&a.is(c,"string")){if(c=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(c=="transform")return this._.transform;var g=c.split(j),h={};for(var i=0,l=g.length;i<l;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return l-1?h:h[g[0]]}if(d==null&&a.is(c,"array")){h={};for(i=0,l=c.length;i<l;i++)h[c[i]]=this.attr(c[i]);return h}if(d!=null){var m={};m[c]=d}else c!=null&&a.is(c,"object")&&(m=c);for(var n in m)k("raphael.attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[b](n)&&m[b](n)&&a.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[b](p)&&(m[p]=o[p])}w(this,m);return this},A.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;b.top!=this&&a._tofront(this,b);return this},A.toBack=function(){if(this.removed)return this;var b=this.node.parentNode;b.tagName.toLowerCase()=="a"?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper);var c=this.paper;return this},A.insertAfter=function(b){if(this.removed)return this;var c=b.node||b[b.length-1].node;c.nextSibling?c.parentNode.insertBefore(this.node,c.nextSibling):c.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper);return this},A.insertBefore=function(b){if(this.removed)return this;var c=b.node||b[0].node;c.parentNode.insertBefore(this.node,c),a._insertbefore(this,b,this.paper);return this},A.blur=function(b){var c=this;if(+b!==0){var d=q("filter"),e=q("feGaussianBlur");c.attrs.blur=b,d.id=a.createUUID(),q(e,{stdDeviation:+b||1.5}),d.appendChild(e),c.paper.defs.appendChild(d),c._blur=d,q(c.node,{filter:"url(#"+d.id+")"})}else c._blur&&(c._blur.parentNode.removeChild(c._blur),delete c._blur,delete c.attrs.blur),c.node.removeAttribute("filter")},a._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs);return f},a._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs);return h},a._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs);return g},a._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image";return h},a._engine.text=function(b,c,d,e){var f=q("text");b.canvas&&b.canvas.appendChild(f);var g=new z(f,b);g.attrs={x:c,y:d,"text-anchor":"middle",text:e,font:a._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs);return g},a._engine.setSize=function(a,b){this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this},a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b&&b.container,d=b.x,e=b.y,f=b.width,g=b.height;if(!c)throw new Error("SVG container not found.");var h=q("svg"),i="overflow:hidden;",j;d=d||0,e=e||0,f=f||512,g=g||342,q(h,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),c==1?(h.style.cssText=i+"position:absolute;left:"+d+"px;top:"+e+"px",a._g.doc.body.appendChild(h),j=1):(h.style.cssText=i+"position:relative",c.firstChild?c.insertBefore(h,c.firstChild):c.appendChild(h)),c=new a._Paper,c.width=f,c.height=g,c.canvas=h,c.clear(),c._left=c._top=0,j&&(c.renderfix=function(){}),c.renderfix();return c},a._engine.setViewBox=function(a,b,c,d,e){k("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f=g(c/this.width,d/this.height),h=this.top,i=e?"meet":"xMinYMin",j,l;a==null?(this._vbSize&&(f=1),delete this._vbSize,j="0 0 "+this.width+m+this.height):(this._vbSize=f,j=a+m+b+m+c+m+d),q(this.canvas,{viewBox:j,preserveAspectRatio:i});while(f&&h)l="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":l}),h._.dirty=1,h._.dirtyT=1,h=h.prev;this._viewBox=[a,b,c,d,!!e];return this},a.prototype.renderfix=function(){var a=this.canvas,b=a.style,c;try{c=a.getScreenCTM()||a.createSVGMatrix()}catch(d){c=a.createSVGMatrix()}var e=-c.e%1,f=-c.f%1;if(e||f)e&&(this._left=(this._left+e)%1,b.left=this._left+"px"),f&&(this._top=(this._top+f)%1,b.top=this._top+"px")},a.prototype.clear=function(){a.eve("raphael.clear",this);var b=this.canvas;while(b.firstChild)b.removeChild(b.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(a._g.doc.createTextNode("Created with Raphaël "+a.version)),b.appendChild(this.desc),b.appendChild(this.defs=q("defs"))},a.prototype.remove=function(){k("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null};var B=a.st;for(var C in A)A[b](C)&&!B[b](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}(window.Raphael),window.Raphael.vml&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=a.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(b){var d=/[ahqstv]/ig,e=a._pathToAbsolute;c(b).match(d)&&(e=a._path2curve),d=/[clmz]/g;if(e==a._pathToAbsolute&&!c(b).match(d)){var g=c(b).replace(q,function(a,b,c){var d=[],e=b.toLowerCase()=="m",g=p[b];c.replace(s,function(a){e&&d.length==2&&(g+=d+p[b=="m"?"l":"L"],d=[]),d.push(f(a*u))});return g+d});return g}var h=e(b),i,j;g=[];for(var k=0,l=h.length;k<l;k++){i=h[k],j=h[k][0].toLowerCase(),j=="z"&&(j="x");for(var m=1,r=i.length;m<r;m++)j+=f(i[m]*u)+(m!=r-1?",":o);g.push(j)}return g.join(n)},y=function(b,c,d){var e=a.matrix();e.rotate(-b,.5,.5);return{dx:e.x(c,d),dy:e.y(c,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q,r=u/b,s=u/c;m.visibility="hidden";if(!!b&&!!c){l.coordsize=i(r)+n+i(s),m.rotation=f*(b*c<0?-1:1);if(f){var t=y(f,d,e);d=t.dx,e=t.dy}b<0&&(p+="x"),c<0&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-r+n+e*-s;if(k||g.fillsize){var v=l.getElementsByTagName(j);v=v&&v[0],l.removeChild(v),k&&(t=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),v.position=t.dx*o+n+t.dy*o),g.fillsize&&(v.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(v)}m.visibility="visible"}};a.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var A=function(a,b,d){var e=c(b).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";while(g--)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q,r=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),s=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),t=e;for(var y in i)i[b](y)&&(m[y]=i[y]);r&&(m.path=a._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur);if(i.path&&e.type=="path"||r)l.path=x(~c(m.path).toLowerCase().indexOf("r")?a._pathToAbsolute(m.path):m.path),e.type=="image"&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0));"transform"in i&&e.transform(i.transform);if(s){var B=+m.cx,D=+m.cy,E=+m.rx||+m.r||0,G=+m.ry||+m.r||0;l.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((B-E)*u),f((D-G)*u),f((B+E)*u),f((D+G)*u),f(B*u))}if("clip-rect"in i){var H=c(i["clip-rect"]).split(k);if(H.length==4){H[2]=+H[2]+ +H[0],H[3]=+H[3]+ +H[1];var I=l.clipRect||a._g.doc.createElement("div"),J=I.style;J.clip=a.format("rect({1}px {2}px {3}px {0}px)",H),l.clipRect||(J.position="absolute",J.top=0,J.left=0,J.width=e.paper.width+"px",J.height=e.paper.height+"px",l.parentNode.insertBefore(I,l),I.appendChild(l),l.clipRect=I)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var K=e.textpath.style;i.font&&(K.font=i.font),i["font-family"]&&(K.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(K.fontSize=i["font-size"]),i["font-weight"]&&(K.fontWeight=i["font-weight"]),i["font-style"]&&(K.fontStyle=i["font-style"])}"arrow-start"in i&&A(t,i["arrow-start"]),"arrow-end"in i&&A(t,i["arrow-end"],1);if(i.opacity!=null||i["stroke-width"]!=null||i.fill!=null||i.src!=null||i.stroke!=null||i["stroke-width"]!=null||i["stroke-opacity"]!=null||i["fill-opacity"]!=null||i["stroke-dasharray"]!=null||i["stroke-miterlimit"]!=null||i["stroke-linejoin"]!=null||i["stroke-linecap"]!=null){var L=l.getElementsByTagName(j),M=!1;L=L&&L[0],!L&&(M=L=F(j)),e.type=="image"&&i.src&&(L.src=i.src),i.fill&&(L.on=!0);if(L.on==null||i.fill=="none"||i.fill===null)L.on=!1;if(L.on&&i.fill){var N=c(i.fill).match(a._ISURL);if(N){L.parentNode==l&&l.removeChild(L),L.rotate=!0,L.src=N[1],L.type="tile";var O=e.getBBox(1);L.position=O.x+n+O.y,e._.fillpos=[O.x,O.y],a._preload(N[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else L.color=a.getRGB(i.fill).hex,L.src=o,L.type="solid",a.getRGB(i.fill).error&&(t.type in{circle:1,ellipse:1}||c(i.fill).charAt()!="r")&&C(t,i.fill,L)&&(m.fill="none",m.gradient=i.fill,L.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var P=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+a.getRGB(i.fill).o+1||2)-1);P=h(g(P,0),1),L.opacity=P,L.src&&(L.color="none")}l.appendChild(L);var Q=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],T=!1;!Q&&(T=Q=F("stroke"));if(i.stroke&&i.stroke!="none"||i["stroke-width"]||i["stroke-opacity"]!=null||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])Q.on=!0;(i.stroke=="none"||i.stroke===null||Q.on==null||i.stroke==0||i["stroke-width"]==0)&&(Q.on=!1);var U=a.getRGB(i.stroke);Q.on&&i.stroke&&(Q.color=U.hex),P=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+U.o+1||2)-1);var V=(d(i["stroke-width"])||1)*.75;P=h(g(P,0),1),i["stroke-width"]==null&&(V=m["stroke-width"]),i["stroke-width"]&&(Q.weight=V),V&&V<1&&(P*=V)&&(Q.weight=1),Q.opacity=P,i["stroke-linejoin"]&&(Q.joinstyle=i["stroke-linejoin"]||"miter"),Q.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(Q.endcap=i["stroke-linecap"]=="butt"?"flat":i["stroke-linecap"]=="square"?"square":"round");if(i["stroke-dasharray"]){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Q.dashstyle=W[b](i["stroke-dasharray"])?W[i["stroke-dasharray"]]:o}T&&l.appendChild(Q)}if(t.type=="text"){t.paper.canvas.style.display=o;var X=t.paper.span,Y=100,Z=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=X.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),Z=d(m["font-size"]||Z&&Z[0])||10,p.fontSize=Z*Y+"px",t.textpath.string&&(X.innerHTML=c(t.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var $=X.getBoundingClientRect();t.W=m.w=($.right-$.left)/Y,t.H=m.h=($.bottom-$.top)/Y,t.X=m.x,t.Y=m.y+t.H/2,("x"in i||"y"in i)&&(t.path.v=a.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));var _=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var ba=0,bb=_.length;ba<bb;ba++)if(_[ba]in i){t._.dirty=1;break}switch(m["text-anchor"]){case"start":t.textpath.style["v-text-align"]="left",t.bbx=t.W/2;break;case"end":t.textpath.style["v-text-align"]="right",t.bbx=-t.W/2;break;default:t.textpath.style["v-text-align"]="center",t.bbx=0}t.textpath.style["v-text-kern"]=!0}},C=function(b,f,g){b.attrs=b.attrs||{};var h=b.attrs,i=Math.pow,j,k,l="linear",m=".5 .5";b.attrs.gradient=f,f=c(f).replace(a._radial_gradient,function(a,b,c){l="radial",b&&c&&(b=d(b),c=d(c),i(b-.5,2)+i(c-.5,2)>.25&&(c=e.sqrt(.25-i(b-.5,2))*((c>.5)*2-1)+.5),m=b+n+c);return o}),f=f.split(/\s*\-\s*/);if(l=="linear"){var p=f.shift();p=-d(p);if(isNaN(p))return null}var q=a._parseDots(f);if(!q)return null;b=b.shape||b.node;if(q.length){b.removeChild(g),g.on=!0,g.method="none",g.color=q[0].color,g.color2=q[q.length-1].color;var r=[];for(var s=0,t=q.length;s<t;s++)q[s].offset&&r.push(q[s].offset+n+q[s].color);g.colors=r.length?r.join():"0% "+g.color,l=="radial"?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=m,g.angle=0):(g.type="gradient",g.angle=(270-p)%360),b.appendChild(g)}return 1},D=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=a.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},E=a.el;D.prototype=E,E.constructor=D,E.transform=function(b){if(b==null)return this._.transform;var d=this.paper._viewBoxShift,e=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:o,f;d&&(f=b=c(b).replace(/\.{3}|\u2026/g,this._.transform||o)),a._extractTransform(this,e+b);var g=this.matrix.clone(),h=this.skew,i=this.node,j,k=~c(this.attrs.fill).indexOf("-"),l=!c(this.attrs.fill).indexOf("url(");g.translate(-0.5,-0.5);if(l||k||this.type=="image"){h.matrix="1 0 0 1",h.offset="0 0",j=g.split();if(k&&j.noRotation||!j.isSimple){i.style.filter=g.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;i.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else i.style.filter=o,z(this,j.scalex,j.scaley,j.dx,j.dy,j.rotate)}else i.style.filter=o,h.matrix=c(g),h.offset=g.offset();f&&(this._.transform=f);return this},E.rotate=function(a,b,e){if(this.removed)return this;if(a!=null){a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),e==null&&(b=e);if(b==null||e==null){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,b,e]]));return this}},E.translate=function(a,b){if(this.removed)return this;a=c(a).split(k),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b),this.transform(this._.transform.concat([["t",a,b]]));return this},E.scale=function(a,b,e,f){if(this.removed)return this;a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),b==null&&(b=a),f==null&&(e=f);if(e==null||f==null)var g=this.getBBox(1);e=e==null?g.x+g.width/2:e,f=f==null?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this._.dirtyT=1;return this},E.hide=function(){!this.removed&&(this.node.style.display="none");return this},E.show=function(){!this.removed&&(this.node.style.display=o);return this},E._getBBox=function(){if(this.removed)return{};return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&!!this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),a.eve.unbind("raphael.*.*."+this.id),a._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null;this.removed=!0}},E.attr=function(c,d){if(this.removed)return this;if(c==null){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform;return e}if(d==null&&a.is(c,"string")){if(c==j&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var g=c.split(k),h={};for(var i=0,m=g.length;i<m;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return m-1?h:h[g[0]]}if(this.attrs&&d==null&&a.is(c,"array")){h={};for(i=0,m=c.length;i<m;i++)h[c[i]]=this.attr(c[i]);return h}var n;d!=null&&(n={},n[c]=d),d==null&&a.is(c,"object")&&(n=c);for(var o in n)l("raphael.attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[b](o)&&n[b](o)&&a.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[b](q)&&(n[q]=p[q])}n.text&&this.type=="text"&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a._tofront(this,this.paper);return this},E.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper));return this},E.insertAfter=function(b){if(this.removed)return this;b.constructor==a.st.constructor&&(b=b[b.length-1]),b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper);return this},E.insertBefore=function(b){if(this.removed)return this;b.constructor==a.st.constructor&&(b=b[0]),b.node.parentNode.insertBefore(this.node,b.node),a._insertbefore(this,b,this.paper);return this},E.blur=function(b){var c=this.node.runtimeStyle,d=c.filter;d=d.replace(r,o),+b!==0?(this.attrs.blur=b,c.filter=d+n+m+".Blur(pixelradius="+(+b||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",f(+b||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)},a._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");f.on=!0,c.appendChild(f),d.skew=f,d.transform(o);return d},a._engine.rect=function(b,c,d,e,f,g){var h=a._rectPath(c,d,e,f,g),i=b.path(h),j=i.attrs;i.X=j.x=c,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect";return i},a._engine.ellipse=function(a,b,c,d,e){var f=a.path(),g=f.attrs;f.X=b-d,f.Y=c-e,f.W=d*2,f.H=e*2,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e});return f},a._engine.circle=function(a,b,c,d){var e=a.path(),f=e.attrs;e.X=b-d,e.Y=c-d,e.W=e.H=d*2,e.type="circle",B(e,{cx:b,cy:c,r:d});return e},a._engine.image=function(b,c,d,e,f,g){var h=a._rectPath(d,e,f,g),i=b.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];k.src=c,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=c,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0);return i},a._engine.text=function(b,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=a.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=c(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,b),l={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=c(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),b.canvas.appendChild(h);var m=F("skew");m.on=!0,h.appendChild(m),k.skew=m,k.transform(o);return k},a._engine.setSize=function(b,c){var d=this.canvas.style;this.width=b,this.height=c,b==+b&&(b+="px"),c==+c&&(c+="px"),d.width=b,d.height=c,d.clip="rect(0 "+b+" "+c+" 0)",this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox);return this},a._engine.setViewBox=function(b,c,d,e,f){a.eve("raphael.setViewBox",this,this._viewBox,[b,c,d,e,f]);var h=this.width,i=this.height,j=1/g(d/h,e/i),k,l;f&&(k=i/e,l=h/d,d*k<h&&(b-=(h-d*k)/2/k),e*l<i&&(c-=(i-e*l)/2/l)),this._viewBox=[b,c,d,e,!!f],this._viewBoxShift={dx:-b,dy:-c,scale:j},this.forEach(function(a){a.transform("...")});return this};var F;a._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a._engine.initWin(a._g.win),a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b.container,d=b.height,e,f=b.width,g=b.x,h=b.y;if(!c)throw new Error("VML container not found.");var i=new a._Paper,j=i.canvas=a._g.doc.createElement("div"),k=j.style;g=g||0,h=h||0,f=f||512,d=d||342,i.width=f,i.height=d,f==+f&&(f+="px"),d==+d&&(d+="px"),i.coordsize=u*1e3+n+u*1e3,i.coordorigin="0 0",i.span=a._g.doc.createElement("span"),i.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",j.appendChild(i.span),k.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",f,d),c==1?(a._g.doc.body.appendChild(j),k.left=g+"px",k.top=h+"px",k.position="absolute"):c.firstChild?c.insertBefore(j,c.firstChild):c.appendChild(j),i.renderfix=function(){};return i},a.prototype.clear=function(){a.eve("raphael.clear",this),this.canvas.innerHTML=o,this.span=a._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a.prototype.remove=function(){a.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null;return!0};var G=a.st;for(var H in E)E[b](H)&&!G[b](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(H))}(window.Raphael);
/*
* qTip2 - Pretty powerful tooltips
* http://craigsworks.com/projects/qtip2/
*
* Version: nightly
* Copyright 2009-2010 Craig Michael Thompson - http://craigsworks.com
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: Mon Nov 21 13:18:18.0000000000 2011
*//*jslint browser: true, onevar: true, undef: true, nomen: true, bitwise: true, regexp: true, newcap: true, immed: true, strict: true *//*global window: false, jQuery: false, console: false */
(function(a,b,c){function z(b,c){var i,j,k,l,m,n=a(this),o=a(document.body),p=this===document?o:n,q=n.metadata?n.metadata(c.metadata):f,r=c.metadata.type==="html5"&&q?q[c.metadata.name]:f,s=n.data(c.metadata.name||"qtipopts");try{s=typeof s==="string"?(new Function("return "+s))():s}catch(t){w("Unable to parse HTML5 attribute data: "+s)}l=a.extend(d,{},g.defaults,c,typeof s==="object"?x(s):f,x(r||q)),j=l.position,l.id=b;if("boolean"===typeof l.content.text){k=n.attr(l.content.attr);if(l.content.attr!==e&&k)l.content.text=k;else{w("Unable to locate content for tooltip! Aborting render of tooltip on element: ",n);return e}}j.container===e&&(j.container=o),j.target===e&&(j.target=p),l.show.target===e&&(l.show.target=p),l.show.solo===d&&(l.show.solo=o),l.hide.target===e&&(l.hide.target=p),l.position.viewport===d&&(l.position.viewport=j.container),j.at=new h.Corner(j.at),j.my=new h.Corner(j.my);if(a.data(this,"qtip"))if(l.overwrite)n.qtip("destroy");else if(l.overwrite===e)return e;l.suppress&&(m=a.attr(this,"title"))&&a(this).removeAttr("title").attr(u,m),i=new y(n,l,b,!!k),a.data(this,"qtip",i),n.bind("remove.qtip-"+b,function(){i.destroy()});return i}function y(s,t,w,y){function R(){var c=[t.show.target[0],t.hide.target[0],z.rendered&&G.tooltip[0],t.position.container[0],t.position.viewport[0],b,document];z.rendered?a([]).pushStack(a.grep(c,function(a){return typeof a==="object"})).unbind(F):t.show.target.unbind(F+"-create")}function Q(){function p(a){E.is(":visible")&&z.reposition(a)}function o(a){if(E.hasClass(m))return e;clearTimeout(z.timers.inactive),z.timers.inactive=setTimeout(function(){z.hide(a)},t.hide.inactive)}function l(b){if(E.hasClass(m)||C||D)return e;var d=a(b.relatedTarget||b.target),g=d.closest(n)[0]===E[0],h=d[0]===f.show[0];clearTimeout(z.timers.show),clearTimeout(z.timers.hide);if(c.target==="mouse"&&g||t.hide.fixed&&(/mouse(out|leave|move)/.test(b.type)&&(g||h)))try{b.preventDefault(),b.stopImmediatePropagation()}catch(i){}else t.hide.delay>0?z.timers.hide=setTimeout(function(){z.hide(b)},t.hide.delay):z.hide(b)}function k(a){if(E.hasClass(m))return e;clearTimeout(z.timers.show),clearTimeout(z.timers.hide);var b=function(){z.toggle(d,a)};t.show.delay>0?z.timers.show=setTimeout(b,t.show.delay):b()}var c=t.position,f={show:t.show.target,hide:t.hide.target,viewport:a(c.viewport),document:a(document),body:a(document.body),window:a(b)},h={show:a.trim(""+t.show.event).split(" "),hide:a.trim(""+t.hide.event).split(" ")},j=a.browser.msie&&parseInt(a.browser.version,10)===6;E.bind("mouseenter"+F+" mouseleave"+F,function(a){var b=a.type==="mouseenter";b&&z.focus(a),E.toggleClass(q,b)}),t.hide.fixed&&(f.hide=f.hide.add(E),E.bind("mouseover"+F,function(){E.hasClass(m)||clearTimeout(z.timers.hide)})),/mouse(out|leave)/i.test(t.hide.event)?t.hide.leave==="window"&&f.window.bind("mouseout"+F+" blur"+F,function(a){/select|option/.test(a.target)&&!a.relatedTarget&&z.hide(a)}):/mouse(over|enter)/i.test(t.show.event)&&f.hide.bind("mouseleave"+F,function(a){clearTimeout(z.timers.show)}),(""+t.hide.event).indexOf("unfocus")>-1&&f.body.bind("mousedown"+F,function(b){var c=a(b.target),d=!E.hasClass(m)&&E.is(":visible");c[0]!==E[0]&&c.parents(n).length===0&&c.add(s).length>1&&!c.attr("disabled")&&z.hide(b)}),"number"===typeof t.hide.inactive&&(f.show.bind("qtip-"+w+"-inactive",o),a.each(g.inactiveEvents,function(a,b){f.hide.add(G.tooltip).bind(b+F+"-inactive",o)})),a.each(h.hide,function(b,c){var d=a.inArray(c,h.show),e=a(f.hide);d>-1&&e.add(f.show).length===e.length||c==="unfocus"?(f.show.bind(c+F,function(a){E.is(":visible")?l(a):k(a)}),delete h.show[d]):f.hide.bind(c+F,l)}),a.each(h.show,function(a,b){f.show.bind(b+F,k)}),"number"===typeof t.hide.distance&&f.show.add(E).bind("mousemove"+F,function(a){var b=H.origin||{},c=t.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&z.hide(a)}),c.target==="mouse"&&(f.show.bind("mousemove"+F,function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),c.adjust.mouse&&(t.hide.event&&E.bind("mouseleave"+F,function(a){(a.relatedTarget||a.target)!==f.show[0]&&z.hide(a)}),f.document.bind("mousemove"+F,function(a){!E.hasClass(m)&&E.is(":visible")&&z.reposition(a||i)}))),(c.adjust.resize||f.viewport.length)&&(a.event.special.resize?f.viewport:f.window).bind("resize"+F,p),(f.viewport.length||j&&E.css("position")==="fixed")&&f.viewport.bind("scroll"+F,p)}function P(b,d){function g(b){function i(c){c&&(delete h[c.src],clearTimeout(z.timers.img[c.src]),a(c).unbind(F)),a.isEmptyObject(h)&&(z.redraw(),d!==e&&z.reposition(H.event),b())}var g,h={};if((g=f.find("img:not([height]):not([width])")).length===0)return i();g.each(function(b,d){if(h[d.src]===c){var e=0,f=3;(function g(){if(d.height||d.width||e>f)return i(d);e+=1,z.timers.img[d.src]=setTimeout(g,700)})(),a(d).bind("error"+F+" load"+F,function(){i(this)}),h[d.src]=d}})}var f=G.content;if(!z.rendered||!b)return e;a.isFunction(b)&&(b=b.call(s,H.event,z)||""),b.jquery&&b.length>0?f.empty().append(b.css({display:"block"})):f.html(b),z.rendered<0?E.queue("fx",g):(D=0,g(a.noop));return z}function O(b,c){var d=G.title;if(!z.rendered||!b)return e;a.isFunction(b)&&(b=b.call(s,H.event,z));if(b===e)return K(e);b.jquery&&b.length>0?d.empty().append(b.css({display:"block"})):d.html(b),z.redraw(),c!==e&&z.rendered&&E.is(":visible")&&z.reposition(H.event)}function N(a){var b=G.button,c=G.title;if(!z.rendered)return e;a?(c||M(),L()):b.remove()}function M(){var b=B+"-title";G.titlebar&&K(),G.titlebar=a("<div />",{"class":k+"-titlebar "+(t.style.widget?"ui-widget-header":"")}).append(G.title=a("<div />",{id:b,"class":k+"-title","aria-atomic":d})).insertBefore(G.content).delegate(".ui-tooltip-close","mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus",b.type.substr(-4)==="down")}).delegate(".ui-tooltip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover",b.type==="mouseover")}),t.content.title.button?L():z.rendered&&z.redraw()}function L(){var b=t.content.title.button,c=typeof b==="string",d=c?b:"Close tooltip";G.button&&G.button.remove(),b.jquery?G.button=b:G.button=a("<a />",{"class":"ui-state-default ui-tooltip-close "+(t.style.widget?"":k+"-icon"),title:d,"aria-label":d}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),G.button.appendTo(G.titlebar).attr("role","button").click(function(a){E.hasClass(m)||z.hide(a);return e}),z.redraw()}function K(a){G.title&&(G.titlebar.remove(),G.titlebar=G.title=G.button=f,a!==e&&z.reposition())}function J(){var a=t.style.widget;E.toggleClass(l,a).toggleClass(o,!a),G.content.toggleClass(l+"-content",a),G.titlebar&&G.titlebar.toggleClass(l+"-header",a),G.button&&G.button.toggleClass(k+"-icon",!a)}function I(a){var b=0,c,d=t,e=a.split(".");while(d=d[e[b++]])b<e.length&&(c=d);return[c||t,e.pop()]}var z=this,A=document.body,B=k+"-"+w,C=0,D=0,E=a(),F=".qtip-"+w,G,H;z.id=w,z.rendered=e,z.elements=G={target:s},z.timers={img:{}},z.options=t,z.checks={},z.plugins={},z.cache=H={event:{},target:a(),disabled:e,attr:y},z.checks.builtin={"^id$":function(b,c,f){var h=f===d?g.nextid:f,i=k+"-"+h;h!==e&&h.length>0&&!a("#"+i).length&&(E[0].id=i,G.content[0].id=i+"-content",G.title[0].id=i+"-title")},"^content.text$":function(a,b,c){P(c)},"^content.title.text$":function(a,b,c){if(!c)return K();!G.title&&c&&M(),O(c)},"^content.title.button$":function(a,b,c){N(c)},"^position.(my|at)$":function(a,b,c){"string"===typeof c&&(a[b]=new h.Corner(c))},"^position.container$":function(a,b,c){z.rendered&&E.appendTo(c)},"^show.ready$":function(){z.rendered?z.toggle(d):z.render(1)},"^style.classes$":function(a,b,c){E.attr("class",k+" qtip ui-helper-reset "+c)},"^style.widget|content.title":J,"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){E[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=t.position;E.attr("tracking",a.target==="mouse"&&a.adjust.mouse),R(),Q()}},a.extend(z,{render:function(b){if(z.rendered)return z;var c=t.content.text,f=t.content.title.text,g=t.position,i=a.Event("tooltiprender");a.attr(s[0],"aria-describedby",B),E=G.tooltip=a("<div/>",{id:B,"class":k+" qtip ui-helper-reset "+o+" "+t.style.classes+" "+k+"-pos-"+t.position.my.abbrev(),width:t.style.width||"",height:t.style.height||"",tracking:g.target==="mouse"&&g.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":e,"aria-describedby":B+"-content","aria-hidden":d}).toggleClass(m,H.disabled).data("qtip",z).appendTo(t.position.container).append(G.content=a("<div />",{"class":k+"-content",id:B+"-content","aria-atomic":d})),z.rendered=-1,C=D=1,f&&(M(),a.isFunction(f)||O(f,e)),a.isFunction(c)||P(c,e),z.rendered=d,J(),a.each(t.events,function(b,c){a.isFunction(c)&&E.bind(b==="toggle"?"tooltipshow tooltiphide":"tooltip"+b,c)}),a.each(h,function(){this.initialize==="render"&&this(z)}),Q(),E.queue("fx",function(a){i.originalEvent=H.event,E.trigger(i,[z]),C=D=0,z.redraw(),(t.show.ready||b)&&z.toggle(d,H.event),a()});return z},get:function(a){var b,c;switch(a.toLowerCase()){case"dimensions":b={height:E.outerHeight(),width:E.outerWidth()};break;case"offset":b=h.offset(E,t.position.container);break;default:c=I(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(b,c){function m(a,b){var c,d,e;for(c in k)for(d in k[c])if(e=(new RegExp(d,"i")).exec(a))b.push(e),k[c][d].apply(z,b)}var g=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,h=/^content\.(title|attr)|style/i,i=e,j=e,k=z.checks,l;"string"===typeof b?(l=b,b={},b[l]=c):b=a.extend(d,{},b),a.each(b,function(c,d){var e=I(c.toLowerCase()),f;f=e[0][e[1]],e[0][e[1]]="object"===typeof d&&d.nodeType?a(d):d,b[c]=[e[0],e[1],d,f],i=g.test(c)||i,j=h.test(c)||j}),x(t),C=D=1,a.each(b,m),C=D=0,E.is(":visible")&&z.rendered&&(i&&z.reposition(t.position.target==="mouse"?f:H.event),j&&z.redraw());return z},toggle:function(b,c){function q(){b?(a.browser.msie&&E[0].style.removeAttribute("filter"),E.css("overflow",""),"string"===typeof h.autofocus&&a(h.autofocus,E).focus(),p=a.Event("tooltipvisible"),p.originalEvent=c?H.event:f,E.trigger(p,[z]),h.target.trigger("qtip-"+w+"-inactive")):E.css({display:"",visibility:"",opacity:"",left:"",top:""})}if(!z.rendered)return b?z.render(1):z;var g=b?"show":"hide",h=t[g],j=E.is(":visible"),k=!c||t[g].target.length<2||H.target[0]===c.target,l=t.position,m=t.content,o,p;(typeof b).search("boolean|number")&&(b=!j);if(!E.is(":animated")&&j===b&&k)return z;if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(H.event.type)&&c.target===t.show.target[0]&&E.has(c.relatedTarget).length)return z;H.event=a.extend({},c)}p=a.Event("tooltip"+g),p.originalEvent=c?H.event:f,E.trigger(p,[z,90]);if(p.isDefaultPrevented())return z;a.attr(E[0],"aria-hidden",!b),b?(H.origin=a.extend({},i),z.focus(c),a.isFunction(m.text)&&P(m.text,e),a.isFunction(m.title.text)&&O(m.title.text,e),!v&&l.target==="mouse"&&l.adjust.mouse&&(a(document).bind("mousemove.qtip",function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),v=d),z.reposition(c),(p.solo=!!h.solo)&&a(n,h.solo).not(E).qtip("hide",p)):(clearTimeout(z.timers.show),delete H.origin,v&&!a(n+'[tracking="true"]:visible',h.solo).not(E).length&&(a(document).unbind("mousemove.qtip"),v=e),z.blur(c)),k&&E.stop(0,1),h.effect===e?(E[g](),q.call(E)):a.isFunction(h.effect)?(h.effect.call(E,z),E.queue("fx",function(a){q(),a()})):E.fadeTo(90,b?1:0,q),b&&h.target.trigger("qtip-"+w+"-inactive");return z},show:function(a){return z.toggle(d,a)},hide:function(a){return z.toggle(e,a)},focus:function(b){if(!z.rendered)return z;var c=a(n),d=parseInt(E[0].style.zIndex,10),e=g.zindex+c.length,f=a.extend({},b),h,i;E.hasClass(p)||(i=a.Event("tooltipfocus"),i.originalEvent=f,E.trigger(i,[z,e]),i.isDefaultPrevented()||(d!==e&&(c.each(function(){this.style.zIndex>d&&(this.style.zIndex=this.style.zIndex-1)}),c.filter("."+p).qtip("blur",f)),E.addClass(p)[0].style.zIndex=e));return z},blur:function(b){var c=a.extend({},b),d;E.removeClass(p),d=a.Event("tooltipblur"),d.originalEvent=c,E.trigger(d,[z]);return z},reposition:function(c,d){if(!z.rendered||C)return z;C=1;var f=t.position.target,g=t.position,j=g.my,l=g.at,m=g.adjust,n=m.method.split(" "),o=E.outerWidth(),p=E.outerHeight(),q=0,r=0,s=a.Event("tooltipmove"),u=E.css("position")==="fixed",v=g.viewport,w={left:0,top:0},x=g.container,y=e,B=z.plugins.tip,D={horizontal:n[0],vertical:n[1]=n[1]||n[0],enabled:v.jquery&&f[0]!==b&&f[0]!==A&&m.method!=="none",left:function(a){var b=D.horizontal==="shift",c=-x.offset.left+v.offset.left+v.scrollLeft,d=j.x==="left"?o:j.x==="right"?-o:-o/2,e=l.x==="left"?q:l.x==="right"?-q:-q/2,f=B&&B.size?B.size.width||0:0,g=B&&B.corner&&B.corner.precedance==="x"&&!b?f:0,h=c-a+g,i=a+o-v.width-c+g,k=d-(j.precedance==="x"||j.x===j.y?e:0),n=j.x==="center";b?(g=B&&B.corner&&B.corner.precedance==="y"?f:0,k=(j.x==="left"?1:-1)*d-g,w.left+=h>0?h:i>0?-i:0,w.left=Math.max(-x.offset.left+v.offset.left+(g&&B.corner.x==="center"?B.offset:0),a-k,Math.min(Math.max(-x.offset.left+v.offset.left+v.width,a+k),w.left))):(h>0&&(j.x!=="left"||i>0)?w.left-=k:i>0&&(j.x!=="right"||h>0)&&(w.left-=n?-k:k),w.left!==a&&n&&(w.left-=m.x),w.left<c&&-w.left>i&&(w.left=a));return w.left-a},top:function(a){var b=D.vertical==="shift",c=-x.offset.top+v.offset.top+v.scrollTop,d=j.y==="top"?p:j.y==="bottom"?-p:-p/2,e=l.y==="top"?r:l.y==="bottom"?-r:-r/2,f=B&&B.size?B.size.height||0:0,g=B&&B.corner&&B.corner.precedance==="y"&&!b?f:0,h=c-a+g,i=a+p-v.height-c+g,k=d-(j.precedance==="y"||j.x===j.y?e:0),n=j.y==="center";b?(g=B&&B.corner&&B.corner.precedance==="x"?f:0,k=(j.y==="top"?1:-1)*d-g,w.top+=h>0?h:i>0?-i:0,w.top=Math.max(-x.offset.top+v.offset.top+(g&&B.corner.x==="center"?B.offset:0),a-k,Math.min(Math.max(-x.offset.top+v.offset.top+v.height,a+k),w.top))):(h>0&&(j.y!=="top"||i>0)?w.top-=k:i>0&&(j.y!=="bottom"||h>0)&&(w.top-=n?-k:k),w.top!==a&&n&&(w.top-=m.y),w.top<0&&-w.top>i&&(w.top=a));return w.top-a}},F;if(a.isArray(f)&&f.length===2)l={x:"left",y:"top"},w={left:f[0],top:f[1]};else if(f==="mouse"&&(c&&c.pageX||H.event.pageX))l={x:"left",y:"top"},c=(c&&(c.type==="resize"||c.type==="scroll")?H.event:c&&c.pageX&&c.type==="mousemove"?c:i&&i.pageX&&(m.mouse||!c||!c.pageX)?{pageX:i.pageX,pageY:i.pageY}:!m.mouse&&H.origin&&H.origin.pageX?H.origin:c)||c||H.event||i||{},w={top:c.pageY,left:c.pageX};else{f==="event"?c&&c.target&&c.type!=="scroll"&&c.type!=="resize"?f=H.target=a(c.target):f=H.target:H.target=a(f),f=a(f).eq(0);if(f.length===0)return z;f[0]===document||f[0]===b?(q=h.iOS?b.innerWidth:f.width(),r=h.iOS?b.innerHeight:f.height(),f[0]===b&&(w={top:u||h.iOS?(v||f).scrollTop():0,left:u||h.iOS?(v||f).scrollLeft():0})):f.is("area")&&h.imagemap?w=h.imagemap(f,l,D.enabled?n:e):f[0].namespaceURI==="http://www.w3.org/2000/svg"&&h.svg?w=h.svg(f,l):(q=f.outerWidth(),r=f.outerHeight(),w=h.offset(f,x)),w.offset&&(q=w.width,r=w.height,y=w.flipoffset,w=w.offset);if(h.iOS<4.1&&h.iOS>3.1||h.iOS==4.3||!h.iOS&&u)F=a(b),w.left-=F.scrollLeft(),w.top-=F.scrollTop();w.left+=l.x==="right"?q:l.x==="center"?q/2:0,w.top+=l.y==="bottom"?r:l.y==="center"?r/2:0}w.left+=m.x+(j.x==="right"?-o:j.x==="center"?-o/2:0),w.top+=m.y+(j.y==="bottom"?-p:j.y==="center"?-p/2:0),D.enabled?(v={elem:v,height:v[(v[0]===b?"h":"outerH")+"eight"](),width:v[(v[0]===b?"w":"outerW")+"idth"](),scrollLeft:u?0:v.scrollLeft(),scrollTop:u?0:v.scrollTop(),offset:v.offset()||{left:0,top:0}},x={elem:x,scrollLeft:x.scrollLeft(),scrollTop:x.scrollTop(),offset:x.offset()||{left:0,top:0}},w.adjusted={left:D.horizontal!=="none"?D.left(w.left):0,top:D.vertical!=="none"?D.top(w.top):0},w.adjusted.left+w.adjusted.top&&E.attr("class",E[0].className.replace(/ui-tooltip-pos-\w+/i,k+"-pos-"+j.abbrev())),y&&w.adjusted.left&&(w.left+=y.left),y&&w.adjusted.top&&(w.top+=y.top)):w.adjusted={left:0,top:0},s.originalEvent=a.extend({},c),E.trigger(s,[z,w,v.elem||v]);if(s.isDefaultPrevented())return z;delete w.adjusted,d===e||isNaN(w.left)||isNaN(w.top)||f==="mouse"||!a.isFunction(g.effect)?E.css(w):a.isFunction(g.effect)&&(g.effect.call(E,z,a.extend({},w)),E.queue(function(b){a(this).css({opacity:"",height:""}),a.browser.msie&&this.style.removeAttribute("filter"),b()})),C=0;return z},redraw:function(){if(z.rendered<1||D)return z;var a=t.position.container,b,c,d,e;D=1,t.style.height&&E.css("height",t.style.height),t.style.width?E.css("width",t.style.width):(E.css("width","").addClass(r),c=E.width()+1,d=E.css("max-width")||"",e=E.css("min-width")||"",b=(d+e).indexOf("%")>-1?a.width()/100:0,d=(d.indexOf("%")>-1?b:1)*parseInt(d,10)||c,e=(e.indexOf("%")>-1?b:1)*parseInt(e,10)||0,c=d+e?Math.min(Math.max(c,e),d):c,E.css("width",Math.round(c)).removeClass(r)),D=0;return z},disable:function(b){"boolean"!==typeof b&&(b=!E.hasClass(m)&&!H.disabled),z.rendered?(E.toggleClass(m,b),a.attr(E[0],"aria-disabled",b)):H.disabled=!!b;return z},enable:function(){return z.disable(e)},destroy:function(){var b=s[0],c=a.attr(b,u),d=s.data("qtip");z.rendered&&(E.remove(),a.each(z.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(z.timers.show),clearTimeout(z.timers.hide),R();if(!d||z===d)a.removeData(b,"qtip"),t.suppress&&c&&(a.attr(b,"title",c),s.removeAttr(u)),s.removeAttr("aria-describedby");s.unbind(".qtip-"+w),delete j[z.id];return s}})}function x(b){var c;if(!b||"object"!==typeof b)return e;if(b.metadata===f||"object"!==typeof b.metadata)b.metadata={type:b.metadata};if("content"in b){if(b.content===f||"object"!==typeof b.content||b.content.jquery)b.content={text:b.content};c=b.content.text||e,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"===typeof c&&!c.jquery)&&(b.content.text=e);if("title"in b.content){if(b.content.title===f||"object"!==typeof b.content.title)b.content.title={text:b.content.title};c=b.content.title.text||e,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"===typeof c&&!c.jquery)&&(b.content.title.text=e)}}if("position"in b)if(b.position===f||"object"!==typeof b.position)b.position={my:b.position,at:b.position};if("show"in b)if(b.show===f||"object"!==typeof b.show)b.show.jquery?b.show={target:b.show}:b.show={event:b.show};if("hide"in b)if(b.hide===f||"object"!==typeof b.hide)b.hide.jquery?b.hide={target:b.hide}:b.hide={event:b.hide};if("style"in b)if(b.style===f||"object"!==typeof b.style)b.style={classes:b.style};a.each(h,function(){this.sanitize&&this.sanitize(b)});return b}function w(){w.history=w.history||[],w.history.push(arguments);if("object"===typeof console){var a=console[console.warn?"warn":"log"],b=Array.prototype.slice.call(arguments),c;typeof arguments[0]==="string"&&(b[0]="qTip2: "+b[0]),c=a.apply?a.apply(console,b):a(b)}}"use strict";var d=!0,e=!1,f=null,g,h,i,j={},k="ui-tooltip",l="ui-widget",m="ui-state-disabled",n="div.qtip."+k,o=k+"-default",p=k+"-focus",q=k+"-hover",r=k+"-fluid",s="-31000px",t="_replacedByqTip",u="oldtitle",v;g=a.fn.qtip=function(b,h,i){var j=(""+b).toLowerCase(),k=f,l=a.makeArray(arguments).slice(1),m=l[l.length-1],n=this[0]?a.data(this[0],"qtip"):f;if(!arguments.length&&n||j==="api")return n;if("string"===typeof b){this.each(function(){var b=a.data(this,"qtip");if(!b)return d;m&&m.timeStamp&&(b.cache.event=m);if(j!=="option"&&j!=="options"||!h)b[j]&&b[j].apply(b[j],l);else if(a.isPlainObject(h)||i!==c)b.set(h,i);else{k=b.get(h);return e}});return k!==f?k:this}if("object"===typeof b||!arguments.length){n=x(a.extend(d,{},b));return g.bind.call(this,n,m)}},g.bind=function(b,f){return this.each(function(k){function r(b){function d(){p.render(typeof b==="object"||l.show.ready),m.show.add(m.hide).unbind(o)}if(p.cache.disabled)return e;p.cache.event=a.extend({},b),p.cache.target=b?a(b.target):[c],l.show.delay>0?(clearTimeout(p.timers.show),p.timers.show=setTimeout(d,l.show.delay),n.show!==n.hide&&m.hide.bind(n.hide,function(){clearTimeout(p.timers.show)})):d()}var l,m,n,o,p,q;q=a.isArray(b.id)?b.id[k]:b.id,q=!q||q===e||q.length<1||j[q]?g.nextid++:j[q]=q,o=".qtip-"+q+"-create",p=z.call(this,q,b);if(p===e)return d;l=p.options,a.each(h,function(){this.initialize==="initialize"&&this(p)}),m={show:l.show.target,hide:l.hide.target},n={show:a.trim(""+l.show.event).replace(/ /g,o+" ")+o,hide:a.trim(""+l.hide.event).replace(/ /g,o+" ")+o},/mouse(over|enter)/i.test(n.show)&&!/mouse(out|leave)/i.test(n.hide)&&(n.hide+=" mouseleave"+o),m.show.bind("mousemove"+o,function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),m.show.bind(n.show,r),(l.show.ready||l.prerender)&&r(f)})},h=g.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance=b==="t"||b==="b"?"y":"x",this.string=function(){return this.precedance==="y"?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:a==="c"||a!=="c"&&b!=="c"?b+a:a+b},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(a,b){function i(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}var c=a.offset(),d=b,e=0,f=document.body,g,h;if(d){do{d.css("position")!=="static"&&(g=d[0]===f?{left:parseInt(d.css("left"),10)||0,top:parseInt(d.css("top"),10)||0}:d.position(),c.left-=g.left+(parseInt(d.css("borderLeftWidth"),10)||0)+(parseInt(d.css("marginLeft"),10)||0),c.top-=g.top+(parseInt(d.css("borderTopWidth"),10)||0),h=d.css("overflow"),(h==="scroll"||h==="auto")&&++e);if(d[0]===f)break}while(d=d.offsetParent());b[0]!==f&&e&&i(b,1)}return c},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||e,fn:{attr:function(b,c){if(this.length){var d=this[0],e="title",f=a.data(d,"qtip");if(b===e&&f&&"object"===typeof f&&f.options.suppress){if(arguments.length<2)return a.attr(d,u);f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",c);return this.attr(u,c)}}return a.fn["attr"+t].apply(this,arguments)},clone:function(b){var c=a([]),d="title",e=a.fn["clone"+t].apply(this,arguments);b||e.filter("["+u+"]").attr("title",function(){return a.attr(this,u)}).removeAttr(u);return e},remove:a.ui?f:function(b,c){a.ui||a(this).each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add(this).each(function(){a(this).triggerHandler("remove")})})}}},a.each(h.fn,function(b,c){if(!c||a.fn[b+t])return d;var e=a.fn[b+t]=a.fn[b];a.fn[b]=function(){return c.apply(this,arguments)||e.apply(this,arguments)}}),g.version="nightly",g.nextid=0,g.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),g.zindex=15e3,g.defaults={prerender:e,id:e,overwrite:d,suppress:d,content:{text:d,attr:"title",title:{text:e,button:e}},position:{my:"top left",at:"bottom right",target:e,container:e,viewport:e,adjust:{x:0,y:0,mouse:d,resize:d,method:"flip flip"},effect:function(b,c,d){a(this).animate(c,{duration:200,queue:e})}},show:{target:e,event:"mouseenter",effect:d,delay:90,solo:e,ready:e,autofocus:e},hide:{target:e,event:"mouseleave",effect:d,delay:0,fixed:e,inactive:e,leave:"window",distance:e},style:{classes:"",widget:e,width:e,height:e},events:{render:f,move:f,show:f,hide:f,toggle:f,visible:f,focus:f,blur:f}},h.svg=function(b,c){var d=a(document),e=b[0],f={width:0,height:0,offset:{top:1e10,left:1e10}},g,h,i,j,k;if(e.getBBox&&e.parentNode){g=e.getBBox(),h=e.getScreenCTM(),i=e.farthestViewportElement||e;if(!i.createSVGPoint)return f;j=i.createSVGPoint(),j.x=g.x,j.y=g.y,k=j.matrixTransform(h),f.offset.left=k.x,f.offset.top=k.y,j.x+=g.width,j.y+=g.height,k=j.matrixTransform(h),f.width=k.x-f.offset.left,f.height=k.y-f.offset.top,f.offset.left+=d.scrollLeft(),f.offset.top+=d.scrollTop()}return f}})(jQuery,window);

/*
 *  Kartograph - a svg mapping library
 *  Copyright (C) 2011-2013  Gregor Aisch
 *
 *  This library is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU Lesser General Public
 *  License as published by the Free Software Foundation; either
 *  version 2.1 of the License, or (at your option) any later version.
 *
 *  This library is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  Lesser General Public License for more details.
 *
 *  You should have received a copy of the GNU Lesser General Public
 *  License along with this library. If not, see <http://www.gnu.org/licenses/>.
 *
*/
(function(){function bS(){function h(a,b,c){f(a.point,b)<f(c.point,b)&&(c=a),a.left&&(c=h(a.left,b,c));if(a.right){var d=a.point[a.axis]-b[a.axis];d*d<f(c.point,b)&&(c=h(a.right,b,c))}return c}function g(a){return function(b,c){b=b[a],c=c[a];return b<c?-1:b>c?1:0}}function f(a,c){var d=0;for(var e=0;e<b.length;e++){var f=b[e],g=a[f]-c[f];d+=g*g}return d}function e(a,c){if(!!a.length){var d=b[c%b.length],f=a.length>>1;a.sort(g(d));return{axis:d,point:a[f],left:e(a.slice(0,f),c+1),right:e(a.slice(f+1),c+1)}}}var a={},b=["x","y"],c,d=[];a.axes=function(c){if(!arguments.length)return b;b=c;return a},a.points=function(b){if(!arguments.length)return d;d=b,c=null;return a},a.find=function(b){return h(a.root(),b,c).point},a.root=function(a){return c||(c=e(d,0))};return a}function bR(){var a={},b=[],c=1,d=1;a.size=function(b){if(!arguments.length)return d;d=b;return a},a.iterations=function(b){if(!arguments.length)return c;c=b;return a},a.add=function(c){b.push(c);return a},a.means=function(){var a=[],e={},f=Math.min(d,b.length);for(var g=0,h=2*f;g<h;g++){var i=b[~~(Math.random()*b.length)],j=i.x+"/"+i.y;if(!(j in e)){e[j]=1;if(a.push({x:i.x,y:i.y})>=f)break}}f=a.length;for(var k=0;k<c;k++){var l=bS().points(a);for(var g=0;g<f;g++){var m=a[g];m.sumX=0,m.sumY=0,m.size=0,m.points=[],m.indices=[]}for(var g=0;g<b.length;g++){var n=b[g],m=l.find(n);m.sumX+=n.x,m.sumY+=n.y,m.size++,m.points.push(n),m.indices.push(g)}for(var g=0;g<f;g++){var m=a[g];if(!m.size)continue;m.x=m.sumX/m.size,m.y=m.sumY/m.size}}return a};return a}var a,b,c,d,e,f,g,h,i,j,k,l,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN={}.hasOwnProperty,bO=function(a,b){function d(){this.constructor=a}for(var c in b)bN.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype;return a},bP=function(a,b){return function(){return a.apply(b,arguments)}},bQ=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};bz=typeof exports!="undefined"&&exports!==null?exports:this,br=bz.$K=window.Kartograph=(bH=bz.Kartograph)!=null?bH:bz.Kartograph={},br.version="0.5.2",a=bz.jQuery,br.__verbose=!1,bB=function(a){try{return console.warn.apply(console,arguments)}catch(b){try{return opera.postError.apply(opera,arguments)}catch(b){return alert(Array.prototype.join.call(arguments," "))}}},bs=function(a){if(br.__verbose)try{return console.debug.apply(console,arguments)}catch(b){try{return opera.postError.apply(opera,arguments)}catch(b){return alert(Array.prototype.join.call(arguments," "))}}},(bI=(bF=String.prototype).trim)==null&&(bF.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(this==null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(c===0)return-1;var d=0;arguments.length>0&&(d=Number(arguments[1]),d!=d?d=0:d!=0&&d!=Infinity&&d!=-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;var e=d>=0?d:Math.max(c-Math.abs(d),0);for(;e<c;e++)if(e in b&&b[e]===a)return e;return-1}),bE=function(){var a,b,c,d,e;a={},e="Boolean Number String Function Array Date RegExp Undefined Null".split(" ");for(c=0,d=e.length;c<d;c++)b=e[c],a["[object "+b+"]"]=b.toLowerCase();return function(b){var c;c=Object.prototype.toString.call(b);return a[c]||"object"}}(),d=function(){function a(a,b,c,d){var e;a==null&&(a=0),b==null&&(b=0),c==null&&(c=null),d==null&&(d=null),e=this,c===null?(e.xmin=Number.MAX_VALUE,e.xmax=Number.MAX_VALUE*-1):(e.xmin=e.left=a,e.xmax=e.right=a+c,e.width=c),d===null?(e.ymin=Number.MAX_VALUE,e.ymax=Number.MAX_VALUE*-1):(e.ymin=e.top=b,e.ymax=e.bottom=d+b,e.height=d);return}a.prototype.update=function(a,b){var c;b==null&&(b=a[1],a=a[0]),c=this,c.xmin=Math.min(c.xmin,a),c.ymin=Math.min(c.ymin,b),c.xmax=Math.max(c.xmax,a),c.ymax=Math.max(c.ymax,b),c.left=c.xmin,c.top=c.ymin,c.right=c.xmax,c.bottom=c.ymax,c.width=c.xmax-c.xmin,c.height=c.ymax-c.ymin;return this},a.prototype.intersects=function(a){return a.left<s.right&&a.right>s.left&&a.top<s.bottom&&a.bottom>s.top},a.prototype.inside=function(a,b){var c;c=this;return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom},a.prototype.join=function(a){var b;b=this,b.update(a.left,a.top),b.update(a.right,a.bottom);return this};return a}(),d.fromXML=function(a){var b,c,d,e;d=Number(a.getAttribute("x")),e=Number(a.getAttribute("y")),c=Number(a.getAttribute("w")),b=Number(a.getAttribute("h"));return new br.BBox(d,e,c,b)},br.BBox=d,(bJ=br.geom)==null&&(br.geom={}),(bK=(bG=br.geom).clipping)==null&&(bG.clipping={}),l=function(){function f(){}var a,b,c,d,e;b=0,c=1,d=2,a=4,e=8,f.prototype.compute_out_code=function(a,b,c){var d,e;e=this,d=e.INSIDE,b<a.left?d|=e.LEFT:b>a.right&&(d|=e.RIGHT),c<a.top?d|=e.TOP:c>a.bottom&&(d|=e.BOTTOM);return d},f.prototype.clip=function(a,b,c,d,e){var f,g,h,i,j,k,l;j=this,g=j.compute_out_code(a,b,c),h=j.compute_out_code(a,d,e),f=False;while(True){if(!(g|h)){f=True;break}if(g&h)break;i=code===0?h:g,i&j.TOP?(k=b+(d-b)*(a.top-c)/(e-c),l=a.top):i&j.BOTTOM?(k=b+(d-b)*(a.bottom-c)/(e-c),l=a.bottom):i&j.RIGHT?(l=c+(e-c)*(a.right-b)/(d-b),k=a.right):i&j.LEFT&&(l=c+(e-c)*(a.left-b)/(d-b),k=a.left),i===g?(b=k,c=l,g=j.compute_out_code(a,b,c)):(d=k,e=l,h=j.compute_out_code(a,d,e))}return f?[b,c,d,e]:null};return f}(),br.geom.clipping.CohenSutherland=l,B=function(){function b(b,c,d){var e,f;f=this,f.container=e=a(b),c==null&&(c=e.width()),d==null&&(d=e.height()),d===0&&(d="auto"),f.size={h:d,w:c},f.markers=[],f.pathById={},f.container.addClass("kartograph")}b.prototype.createSVGLayer=function(b){var c,d,e,f,g,h,i,j;f=this,(j=f._layerCnt)==null&&(f._layerCnt=0),e=f._layerCnt++,i=f.viewport,d=f.container,g=Raphael(d[0],i.width,i.height),h=a(g.canvas),h.css({position:"absolute",top:"0px",left:"0px","z-index":e+5}),d.css("position")==="static"&&d.css({position:"relative",height:i.height+"px"}),h.addClass(b),c=a("desc",g.canvas).text(),a("desc",g.canvas).text(c.replace("with ","with kartograph "+br.version+" and "));return g},b.prototype.createHTMLLayer=function(b){var c,d,e,f,g,h;f=this,g=f.viewport,c=f.container,(h=f._layerCnt)==null&&(f._layerCnt=0),e=f._layerCnt++,d=a('<div class="layer '+b+'" />'),d.css({position:"absolute",top:"0px",left:"0px",width:g.width+"px",height:g.height+"px","z-index":e+5}),c.append(d);return d},b.prototype.loadMap=function(b,c,d){var e,f,g,h;f=this,e=a.Deferred(),f.clear(),f.opts=d!=null?d:{},(h=(g=f.opts).zoom)==null&&(g.zoom=1),f.mapLoadCallback=c,f._loadMapDeferred=e,f._lastMapUrl=b,f.cacheMaps&&br.__mapCache[b]!=null?f._mapLoaded(br.__mapCache[b]):a.ajax({url:b,dataType:"text",success:f._mapLoaded,context:f,error:function(a,b,c){return bB(a,b,c)}});return e.promise()},b.prototype.setMap=function(a,b){var c,d,e;c=this,c.opts=b!=null?b:{},(e=(d=c.opts).zoom)==null&&(d.zoom=1),c._lastMapUrl="string",c._mapLoaded(a)},b.prototype._mapLoaded=function(b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;h=this,h.cacheMaps&&((o=br.__mapCache)==null&&(br.__mapCache={}),br.__mapCache[h._lastMapUrl]=b);try{b=a(b)}catch(t){bB("something went horribly wrong while parsing svg"),h._loadMapDeferred.reject("could not parse svg");return}h.svgSrc=b,c=a("view",b),bs("got svg src",h.svgSrc),h.paper==null&&(m=h.size.w,f=h.size.h,f==="auto"&&(j=c.attr("w")/c.attr("h"),f=m/j),h.viewport=new d(0,0,m,f)),l=h.viewport,bs("got viewport",h.viewport),h.viewAB=e=br.View.fromXML(c[0]),bs("got first view",h.viewAB),i=(p=h.opts.padding)!=null?p:0,g=(q=h.opts.halign)!=null?q:"center",k=(r=h.opts.valign)!=null?r:"center",bs("got alignment",g,k),n=(s=h.opts.zoom)!=null?s:1,h.viewBC=new br.View(h.viewAB.asBBox(),l.width*n,l.height*n,i,g,k),bs("got second view",h.viewBC),h.proj=br.Proj.fromXML(a("proj",c)[0]),bs("got projection",h.proj),h.mapLoadCallback!=null&&h.mapLoadCallback(h),h._loadMapDeferred!=null&&h._loadMapDeferred.resolve(h)},b.prototype.addLayer=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;c==null&&(c={}),i=this,(u=i.layerIds)==null&&(i.layerIds=[]),(v=i.layers)==null&&(i.layers={}),i.paper==null&&(i.paper=i.createSVGLayer()),l=b,bE(c)==="object"?(h=c.name,j=c.key,o=c.title):c={},h==null&&(h=l),m=a("#"+l,i.svgSrc);if(m.length!==0){g=new L(h,j,i,c.filter),d=a("*",m[0]);for(q=0,s=d.length;q<s;q++)n=d[q],g.addPath(n,o);g.paths.length>0&&(i.layers[h]=g,i.layerIds.push(h)),e=["click","mouseenter","mouseleave","dblclick","mousedown","mouseup","mouseover","mouseout"];for(r=0,t=e.length;r<t;r++)f=e[r],bE(c[f])==="function"&&g.on(f,c[f]);if(c.styles!=null){w=c.styles;for(k in w)p=w[k],g.style(k,p)}c.tooltips!=null&&g.tooltips(c.tooltips);return i}},b.prototype.getLayer=function(a){var b;b=this;if(b.layers[a]==null){bB("could not find layer "+a);return null}return b.layers[a]},b.prototype.getLayerPath=function(a,b){var c,d;d=this,c=d.getLayer(a);if(c!=null)return bE(b)==="object"?c.getPaths(b)[0]:c.getPath(b);return null},b.prototype.onLayerEvent=function(a,b,c){var d;d=this,d.getLayer(c).on(a,b);return d},b.prototype.addMarker=function(a){var b,c;b=this,b.markers.push(a),c=b.viewBC.project(b.viewAB.project(b.proj.project(a.lonlat.lon,a.lonlat.lat)));return a.render(c[0],c[1],b.container,b.paper)},b.prototype.clearMarkers=function(){var a,b,c,d,e;b=this,e=b.markers;for(c=0,d=e.length;c<d;c++)a=e[c],a.clear();return b.markers=[]},b.prototype.fadeIn=function(a){var b,c,d,e,f,g,h,i,j,k,l;a==null&&(a={}),f=this,e=(i=a.layer)!=null?i:f.layerIds[f.layerIds.length-1],c=(j=a.duration)!=null?j:500,k=f.layers[e].pathsById,l=[];for(d in k)h=k[d],l.push(function(){var a,d,e;e=[];for(a=0,d=h.length;a<d;a++)g=h[a],bE(c)==="function"?b=c(g.data):b=c,g.svgPath.attr("opacity",0),e.push(g.svgPath.animate({opacity:1},b));return e}());return l},b.prototype.loadCoastline=function(){var b;b=this;return a.ajax({url:"coastline.json",success:b.renderCoastline,context:b})},b.prototype.resize=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;g=this,c=g.container,a==null&&(a=c.width()),b==null&&(b=c.height()),g.viewport=k=new br.BBox(0,0,a,b),g.paper!=null&&g.paper.setSize(k.width,k.height),k=g.viewport,h=(o=g.opts.padding)!=null?o:0,d=(p=g.opts.halign)!=null?p:"center",j=(q=g.opts.valign)!=null?q:"center",l=g.opts.zoom,g.viewBC=new br.View(g.viewAB.asBBox(),k.width*l,k.height*l,h,d,j),r=g.layers;for(e in r)f=r[e],f.setView(g.viewBC);if(g.symbolGroups!=null){s=g.symbolGroups;for(m=0,n=s.length;m<n;m++)i=s[m],i.onResize()}},b.prototype.lonlat2xy=function(a){var b,c;c=this,a.length===2&&(a=new br.LonLat(a[0],a[1])),a.length===3&&(a=new br.LonLat(a[0],a[1],a[2])),b=c.proj.project(a.lon,a.lat,a.alt);return c.viewBC.project(c.viewAB.project(b))},b.prototype.showZoomControls=function(){var a;a=this,a.zc=new S(a);return a},b.prototype.addSymbolGroup=function(a){var b,c;b=this,(c=b.symbolGroups)==null&&(b.symbolGroups=[]);return b.symbolGroups.push(a)},b.prototype.removeSymbols=function(a){var b,c,d,e,f,g;b=this;if(a!=null)return b.symbolGroups[a].remove();f=b.symbolGroups,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(c.remove());return g},b.prototype.clear=function(){var b,c,d,e,f,g;c=this;if(c.layers!=null){for(b in c.layers)c.layers[b].remove();c.layers={},c.layerIds=[]}if(c.symbolGroups!=null){g=c.symbolGroups;for(e=0,f=g.length;e<f;e++)d=g[e],d.remove();c.symbolGroups=[]}if(c.paper!=null){a(c.paper.canvas).remove();return c.paper=void 0}},b.prototype.loadCSS=function(b,c){var d;d=this;if(a.browser.msie)return a.ajax({url:b,dataType:"text",success:function(a){d.styles=br.parsecss(a);return c()},error:function(a,c,d){return bB("error while loading "+b,a,c,d)}});a("body").append('<link rel="stylesheet" href="'+b+'" />');return c()},b.prototype.applyCSS=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;e=this;if(e.styles==null)return a;(n=e._pathTypes)==null&&(e._pathTypes=["path","circle","rectangle","ellipse"]),(o=e._regardStyles)==null&&(e._regardStyles=["fill","stroke","fill-opacity","stroke-width","stroke-opacity"]);for(h in e.styles){f=h,p=f.split(",");for(j=0,l=p.length;j<l;j++){i=p[j],f=i.split(" "),f=f[f.length-1],f=f.split(":");if(f.length>1)continue;f=f[0].split("."),c=f.slice(1);if(c.length>0&&c.indexOf(b)<0)continue;f=f[0];if(e._pathTypes.indexOf(f)>=0&&f!==a.type)continue;g=e.styles[h],q=e._regardStyles;for(k=0,m=q.length;k<m;k++)d=q[k],g[d]!=null&&a.attr(d,g[d])}}return a},b.prototype.style=function(a,b,c,d,e){var f;f=this,a=f.getLayer(a);if(a!=null)return a.style(b,c,d,e)};return b}(),br.Kartograph=B,br.map=function(a,b,c){return new B(a,b,c)},br.__mapCache={},J=function(){function a(a,b,c){c==null&&(c=0),this.lon=Number(a),this.lat=Number(b),this.alt=Number(c)}a.prototype.distance=function(a){var b,c,d,e,f,g,h,i,j;j=this,b=6371,g=Math.PI/180,e=(a.lat-j.lat)*g,f=(a.lon-j.lon)*g,h=j.lat*g,i=a.lat*g,c=Math.sin(e/2)*Math.sin(e/2)+Math.sin(f/2)*Math.sin(f/2)*Math.cos(h)*Math.cos(i),d=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return b*d};return a}(),F=function(a){function b(a,c,d){d==null&&(d=0),b.__super__.constructor.call(this,c,a,d)}bO(b,a);return b}(J),br.LonLat=J,br.LatLon=F,L=function(){function b(a,b,c,d){var e;e=this,e.id=a,e.path_id=b,e.paper=c.paper,e.view=c.viewBC,e.map=c,e.filter=d}b.prototype.addPath=function(a,b){var c,d,e,f,g,h,i;d=this,(g=d.paths)==null&&(d.paths=[]),c=new M(a,d.id,d.map,b);if(bE(d.filter)==="function"&&d.filter(c.data)===!1)c.remove();else{d.paths.push(c);if(d.path_id!=null){(h=d.pathsById)==null&&(d.pathsById={}),(i=(e=d.pathsById)[f=c.data[d.path_id]])==null&&(e[f]=[]);return d.pathsById[c.data[d.path_id]].push(c)}}},b.prototype.hasPath=function(a){var b;b=this;return b.pathsById!=null&&b.pathsById[a]!=null},b.prototype.getPathsData=function(){var a,b,c,d,e,f;a=this,c=[],f=a.paths;for(d=0,e=f.length;d<e;d++)b=f[d],c.push(b.data);return c},b.prototype.getPath=function(a){var b;b=this;return b.hasPath(a)?b.pathsById[a][0]:null},b.prototype.getPaths=function(a){var b,c,d,e,f,g,h,i;e=this,d=[];if(bE(a)==="object"){i=e.paths;for(g=0,h=i.length;g<h;g++){f=i[g],c=!0;for(b in a)c=c&&f.data[b]===a[b];c&&d.push(f)}}return d},b.prototype.setView=function(a){var b,c,d,e,f;b=this,f=b.paths;for(d=0,e=f.length;d<e;d++)c=f[d],c.setView(a);return b},b.prototype.remove=function(){var a,b,c,d,e,f;a=this,e=a.paths,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(b.remove());return f},b.prototype.style=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o;j=this;if(bE(a)==="object"){for(i in a)l=a[i],j.style(i,l);return j}c==null&&(c=0),d==null&&(d=0),o=j.paths;for(m=0,n=o.length;m<n;m++)k=o[m],l=bx(b,k.data),h=bx(c,k.data),g=bx(d,k.data),h>0?(f={},f[a]=l,e=Raphael.animation(f,h*1e3),k.svgPath.animate(e.delay(g*1e3))):k.svgPath.attr(a,l);return j},b.prototype.on=function(b,c){var d,e,f,g,h,i,j;f=this,d=function(){function a(a,b,c){this.type=a,this.cb=b,this.layer=c,this.handle=bP(this.handle,this)}a.prototype.handle=function(a){var b;f=this,b=f.layer.map.pathById[a.target.getAttribute("id")];return f.cb(b.data,b.svgPath,a)};return a}(),e=new d(b,c,f),j=f.paths;for(h=0,i=j.length;h<i;h++)g=j[h],a(g.svgPath.node).bind(b,e.handle);return f},b.prototype.tooltips=function(b,c){var d,e,f,g,h,i,j;d=this,f=function(b,d){var e;e={position:{target:"mouse",viewport:a(window),adjust:{x:7,y:7}},show:{delay:c!=null?c:20},events:{show:function(b,c){return a(".qtip").filter(function(){return this!==c.elements.tooltip.get(0)}).hide()}},content:{}},d!=null?typeof d=="string"?e.content.text=d:a.isArray(d)&&(e.content.title=d[0],e.content.text=d[1]):e.content.text="n/a";return a(b.svgPath.node).qtip(e)},j=d.paths;for(h=0,i=j.length;h<i;h++)e=j[h],g=bx(b,e.data),f(e,g);return d},b.prototype.sort=function(a){var b,c,d,e,f,g;c=this,c.paths.sort(function(b,c){var d,e,f;d=a(b.data),e=a(c.data);return d===e?0:(f=d>e)!=null?f:{1:-1}}),b=!1,g=c.paths;for(e=0,f=g.length;e<f;e++)d=g[e],b&&d.svgPath.insertAfter(b.svgPath),b=d;return c};return b}(),bx=function(a,b){return bE(a)==="function"?a(b):a},bt=0,M=function(){function a(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q;h=this,i=c.paper,n=c.viewBC,h.path=j=br.geom.Path.fromSVG(a),h.vpath=n.projectPath(j),h.svgPath=h.vpath.toSVG(i),c.styles==null?h.svgPath.node.setAttribute("class",b):c.applyCSS(h.svgPath,b),l="path_"+bt++,h.svgPath.node.setAttribute("id",l),c.pathById[l]=h,f={};for(g=p=0,q=a.attributes.length-1;0<=q?p<=q:p>=q;g=0<=q?++p:--p)e=a.attributes[g],e.name.substr(0,5)==="data-"&&(m=e.value,o=Number(m),m.trim()!==""&&o===m&&!isNaN(o)&&(m=o),f[e.name.substr(5)]=m);h.data=f,bE(d)==="string"?k=d:bE(d)==="function"&&(k=d(f)),k!=null&&h.svgPath.attr("title",k)}a.prototype.setView=function(a){var b,c,d;b=this,c=a.projectPath(b.path),b.vpath=c;if(b.path.type==="path"){d=c.svgString();return b.svgPath.attr({path:d})}if(b.path.type==="circle")return b.svgPath.attr({cx:c.x,cy:c.y,r:c.r})},a.prototype.remove=function(){var a;a=this;return a.svgPath.remove()};return a}(),br.parsecss=function(a,b){var c,d,e,f,g,h,i,j;f={},a=bu(a),j=a.split("`b%");for(h=0,i=j.length;h<i;h++){c=j[h],c=c.split("%b`");if(c.length<2)continue;c[0]=by(c[0]),e=bw(c[1]);if(f[c[0]]!=null)for(d in e)g=e[d],f[c[0]][d]=g;else f[c[0]]=e}if(bE(b)==="function")b(f);else return f},bv={},bw=function(a){var b,c,d,e,f,g;d=bv[a].replace(/^{|}$/g,""),d=bu(d),c={},g=d.split(";");for(e=0,f=g.length;e<f;e++){b=g[e],b=b.split(":");if(b.length<2)continue;c[by(b[0])]=by(b.slice(1).join(":"))}return c},Z=/{[^{}]*}/,_=/\[[^\[\]]*\]|{[^{}]*}|\([^()]*\)|function(\s+\w+)?(\s*%b`\d+`b%){2}/,$=/(?:\/\*(?:[^\*]|\*[^\/])*\*\/)|(\\.|"(?:[^\\\"]|\\.|\\\n)*"|'(?:[^\\\']|\\.|\\\n)*')/g,ba=/%\w`(\d+)`\w%/,bA=0,bu=function(a,b){var c,d,e;a=a.replace($,function(a,b){var c;if(!b)return"";c="%s`"+ ++bA+"`s%",bv[bA]=b.replace(/^\\/,"");return c}),c=b?_:Z;while(d=c.exec(a))e="%b`"+ ++bA+"`b%",bv[bA]=d[0],a=a.replace(c,e);return a},by=function(a){var b;if(a==null)return a;while(b=ba.exec(a))a=a.replace(ba,bv[b[1]]);return a.trim()},(bL=br.geom)==null&&(br.geom={}),T=function(){function a(a,b,c){var d;c==null&&(c=!0),d=this,d.type=a,d.contours=b,d.closed=c}a.prototype.clipToBBox=function(a){throw"path clipping is not implemented yet"},a.prototype.toSVG=function(a){var b;b=this.svgString();return a.path(b)},a.prototype.svgString=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;d=this,e="",c=d.closed?"Z M":"M",l=d.contours;for(h=0,j=l.length;h<j;h++){a=l[h],b=!0,e+=e===""?"M":c;for(i=0,k=a.length;i<k;i++)m=a[i],f=m[0],g=m[1],b||(e+="L"),e+=f+","+g,b=!1}d.closed&&(e+="Z");return e},a.prototype.area=function(){var a,b,c,d,e,f,g,h,i;d=this;if(d.areas!=null)return d._area;d.areas=[],d._area=0,h=d.contours;for(e=0,g=h.length;e<g;e++){b=h[e],a=0;for(c=f=0,i=b.length-2;0<=i?f<=i:f>=i;c=0<=i?++f:--f)a+=b[c][0]*b[c+1][1]-b[c+1][0]*b[c][1];a*=.5,a=a,d.areas.push(a),d._area+=a}return d._area},a.prototype.centroid=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;p=this;if(p._centroid!=null)return p._centroid;c=p.area(),f=g=0;for(k=A=0,G=p.contours.length-1;0<=G?A<=G:A>=G;k=0<=G?++A:--A){e=p.contours[k],d=[],n=e.length;for(l=B=0,H=n-1;0<=H?B<=H:B>=H;l=0<=H?++B:--B){q=e[l],r=e[(l+1)%n],h=0,d.push(q),q[0]===r[0]&&(h=Math.abs(q[1]-r[1])),q[1]===r[1]&&(h=Math.abs(q[0]-r[0]));if(h>10){a=Math.floor(h*2);for(s=C=1,I=a-1;1<=I?C<=I:C>=I;s=1<=I?++C:--C)t=[q[0]+s/a*(r[0]-q[0]),q[1]+s/a*(r[1]-q[1])],d.push(t)}}b=p.areas[k],w=y=x=z=0,n=d.length,E=[],u=0;for(l=D=0,J=n-1;0<=J?D<=J:D>=J;l=0<=J?++D:--D)q=d[l],r=d[(l+1)%n],i=r[0]-q[0],j=r[1]-q[1],o=Math.sqrt(i*i+j*j),E.push(o),u+=o;for(l=F=0,K=n-1;0<=K?F<=K:F>=K;l=0<=K?++F:--F)q=d[l],v=E[l]/u,w+=v*q[0],y+=v*q[1];m=b/c,f+=w*m,g+=y*m}p._centroid=[f,g];return p._centroid},a.prototype.isInside=function(a,b){var c,d,e,f,g,h;f=this,c=f._bbox;if(a<c[0]||a>c[2]||b<c[1]||b>c[3])return!1;for(e=g=0,h=f.contours.length-1;0<=h?g<=h:g>=h;e=0<=h?++g:--g){d=f.contours[e];if(bC(d,[a,b]))return!0}return!1};return a}(),br.geom.Path=T,k=function(a){function b(a,c,d){this.x=a,this.y=c,this.r=d,b.__super__.constructor.call(this,"circle",null,!0)}bO(b,a),b.prototype.toSVG=function(a){var b;b=this;return a.circle(b.x,b.y,b.r)},b.prototype.centroid=function(){var a;a=this;return[a.x,a.y]},b.prototype.area=function(){var a;a=this;return Math.PI*a.r*m.r};return b}(T),br.geom.Circle=k,T.fromSVG=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;e=[],m=a.nodeName,k=null;if(m==="path"){i=a.getAttribute("d").trim(),h=Raphael.parsePathString(i),b=h[h.length-1]==="Z",l=b?"Z M":"M",d=[];for(n=0,o=h.length;n<o;n++){c=h[n];if(c.length===0)continue;c[0]==="M"?(d.length>2&&(e.push(d),d=[]),d.push([c[1],c[2]])):c[0]==="L"?d.push([c[1],c[2]]):c[0]==="Z"&&d.length>2&&(e.push(d),d=[])}d.length>2&&(e.push(d),d=[]),k=new br.geom.Path(m,e,b)}else m==="circle"&&(f=a.getAttribute("cx"),g=a.getAttribute("cy"),j=a.getAttribute("r"),k=new br.geom.Circle(f,g,j));return k},G=function(){function a(a){this.points=a}a.prototype.clipToBBox=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;l=this,c=(new br.geom.clipping.CohenSutherland).clip,k=[],f=[],e=!1;for(d=q=0,r=l.points.length-2;0<=r?q<=r:q>=r;d=0<=r?++q:--q){s=l.points[d],g=s[0],h=s[1],t=l.points[d+1],i=t[0],j=t[1];try{u=c(b,g,h,i,j),m=u[0],o=u[1],n=u[2],p=u[3],e=!0,k.push([m,o]),(i!==n||j!==o||d===len(l.points)-2)&&k.push([n,p])}catch(v){e&&k.length>1&&(f.push(new a(k)),k=[]),e=!1}}k.length>1&&f.push(new a(k));return f},a.prototype.toSVG=function(){var a,b,c,d,e,f,g,h;b=this,a=[],g=b.points;for(e=0,f=g.length;e<f;e++)h=g[e],c=h[0],d=h[1],a.push(c+","+d);return"M"+a.join("L")};return a}(),br.geom.Line=G,bC=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;h=Math.PI,d=Math.atan2,k=h*2,g=a.length,c=0;for(f=p=0,q=g-1;0<=q?p<=q:p>=q;f=0<=q?++p:--p){l=a[f][0]-b[0],n=a[f][1]-b[1],m=a[(f+1)%g][0]-b[0],o=a[(f+1)%g][1]-b[1],i=d(n,l),j=d(o,m),e=j-i;while(e>h)e-=k;while(e<-h)e+=k;c+=e}return Math.abs(c)>=h},bD=br.proj={},Function.prototype.bind=function(a){var b;b=this;return function(){return b.apply(a,arguments)}},V=function(){function a(a){var b,c,d;b=this,b.lon0=(c=a.lon0)!=null?c:0,b.lat0=(d=a.lat0)!=null?d:0,b.PI=Math.PI,b.HALFPI=b.PI*.5,b.QUARTERPI=b.PI*.25,b.RAD=b.PI/180,b.DEG=180/b.PI,b.lam0=b.rad(this.lon0),b.phi0=b.rad(this.lat0),b.minLat=-90,b.maxLat=90}a.parameters=[],a.title="Projection",a.prototype.rad=function(a){return a*this.RAD},a.prototype.deg=function(a){return a*this.DEG},a.prototype.plot=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;b==null&&(b=!0),f=[],c=!0;for(j=0,k=a.length;j<k;j++)l=a[j],e=l[0],d=l[1],g=this._visible(e,d),g&&(c=!1),m=this.project(e,d),h=m[0],i=m[1],!g&&b?f.push(this._truncate(h,i)):f.push([h,i]);return c?null:[f]},a.prototype.sea=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;f=this,e=f.project.bind(this),d=[],a=f.lon0,f.lon0=0;for(c=g=-180;g<=180;c=++g)d.push(e(c,f.maxLat));for(b=h=k=f.maxLat,l=f.minLat;k<=l?h<=l:h>=l;b=k<=l?++h:--h)d.push(e(180,b));for(c=i=180;i>=-180;c=--i)d.push(e(c,f.minLat));for(b=j=m=f.minLat,n=f.maxLat;m<=n?j<=n:j>=n;b=m<=n?++j:--j)d.push(e(-180,b));f.lon0=a;return d},a.prototype.world_bbox=function(){var a,b,c,d,e,f;b=this.project.bind(this),d=this.sea(),a=new br.BBox;for(e=0,f=d.length;e<f;e++)c=d[e],a.update(c[0],c[1]);return a},a.prototype.toString=function(){var a;a=this;return"[Proj: "+a.name+"]"};return a}(),V.fromXML=function(a){var b,c,d,e,f,g,h;d=a.getAttribute("id"),e={};for(c=g=0,h=a.attributes.length-1;0<=h?g<=h:g>=h;c=0<=h?++g:--g)b=a.attributes[c],b.name!=="id"&&(e[b.name]=b.value);f=new br.proj[d](e),f.name=d;return f},br.Proj=V,o=function(a){function b(a){var c,d,e;a==null&&(a={}),c=this,c.flip=Number((d=a.flip)!=null?d:0),c.flip===1&&(a.lon0=(e=-a.lon0)!=null?e:0),b.__super__.constructor.call(this,a)}bO(b,a),b.parameters=["lon0","flip"],b.title="Cylindrical Projection",b.prototype._visible=function(a,b){return!0},b.prototype.clon=function(a){a-=this.lon0,a<-180?a+=360:a>180&&(a-=360);return a},b.prototype.ll=function(a,b){return this.flip===1?[-a,-b]:[a,b]};return b}(V),r=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.title="Equirectangular Projection",b.prototype.project=function(a,b){var c;c=this.ll(a,b),a=c[0],b=c[1],a=this.clon(a);return[a*Math.cos(this.phi0)*1e3,b*-1*1e3]};return b}(o),bD.lonlat=r,i=function(a){function b(a){var c;b.__super__.constructor.call(this,a),this.lat1=(c=a.lat1)!=null?c:0,this.phi1=this.rad(this.lat1)}bO(b,a),b.parameters=["lon0","lat1","flip"],b.title="Cylindrical Equal Area",b.prototype.project=function(a,b){var c,d,e,f,g;g=this.ll(a,b),a=g[0],b=g[1],c=this.rad(this.clon(a)),d=this.rad(b*-1),e=c*Math.cos(this.phi1),f=Math.sin(d)/Math.cos(this.phi1);return[e*1e3,f*1e3]};return b}(o),bD.cea=i,u=function(a){function b(a){a.lat1=45,b.__super__.constructor.call(this,a)}bO(b,a),b.title="Gall-Peters Projection",b.parameters=["lon0","flip"];return b}(i),bD.gallpeters=u,y=function(a){function b(a){a.lat1=37.7,b.__super__.constructor.call(this,a)}bO(b,a),b.title="Hobo-Dyer Projection",b.parameters=["lon0","flip"];return b}(i),bD.hobodyer=y,f=function(a){function b(a){a.lat1=30,b.__super__.constructor.call(this,a)}bO(b,a),b.title="Behrmann Projection",b.parameters=["lon0","flip"];return b}(i),bD.behrmann=f,e=function(a){function b(a){a.lat1=50,b.__super__.constructor.call(this,a)}bO(b,a),b.title="Balthasart Projection",b.parameters=["lon0","flip"];return b}(i),bD.balthasart=e,N=function(a){function b(a){b.__super__.constructor.call(this,a),this.minLat=-85,this.maxLat=85}bO(b,a),b.title="Mercator Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i;f=this,i=f.ll(a,b),a=i[0],b=i[1],d=Math,c=f.rad(f.clon(a)),e=f.rad(b*-1),g=c*1e3,h=d.log((1+d.sin(e))/d.cos(e))*1e3;return[g,h]};return b}(o),bD.mercator=N,X=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.title="Pseudo-Cylindrical Projection";return b}(o),P=function(a){function b(a){var c;b.__super__.constructor.call(this,a),c=this,c.A0=.8707,c.A1=-0.131979,c.A2=-0.013791,c.A3=.003971,c.A4=-0.001529,c.B0=1.007226,c.B1=.015085,c.B2=-0.044475,c.B3=.028874,c.B4=-0.005916,c.C0=c.B0,c.C1=3*c.B1,c.C2=7*c.B2,c.C3=9*c.B3,c.C4=11*c.B4,c.EPS=1e-11,c.MAX_Y=.8707*.52*Math.PI;return}bO(b,a),b.title="Natural Earth Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j;g=this,j=g.ll(a,b),a=j[0],b=j[1],c=g.rad(g.clon(a)),d=g.rad(b*-1),e=d*d,f=e*e,h=c*(g.A0+e*(g.A1+e*(g.A2+f*e*(g.A3+e*g.A4))))*180+500,i=d*(g.B0+e*(g.B1+f*(g.B2+g.B3*e+g.B4*f)))*180+270;return[h,i]};return b}(X),bD.naturalearth=P,bb=function(a){function b(a){var c;b.__super__.constructor.call(this,a),c=this,c.X=[1,-5.67239e-12,-0.0000715511,311028e-11,.9986,-0.000482241,-0.000024897,-0.00000133094,.9954,-0.000831031,-0.000044861,-9.86588e-7,.99,-0.00135363,-0.0000596598,367749e-11,.9822,-0.00167442,-0.0000044975,-0.00000572394,.973,-0.00214869,-0.0000903565,1.88767e-8,.96,-0.00305084,-0.0000900732,164869e-11,.9427,-0.00382792,-0.0000653428,-0.00000261493,.9216,-0.00467747,-0.000104566,48122e-10,.8962,-0.00536222,-0.0000323834,-0.00000543445,.8679,-0.00609364,-0.0001139,332521e-11,.835,-0.00698325,-0.0000640219,9.34582e-7,.7986,-0.00755337,-0.0000500038,9.35532e-7,.7597,-0.00798325,-0.0000359716,-0.00000227604,.7186,-0.00851366,-0.000070112,-0.00000863072,.6732,-0.00986209,-0.000199572,191978e-10,.6213,-0.010418,883948e-10,624031e-11,.5722,-0.00906601,181999e-9,624033e-11,.5322,0,0,0],c.Y=[0,.0124,3.72529e-10,1.15484e-9,.062,.0124001,1.76951e-8,-5.92321e-9,.124,.0123998,-7.09668e-8,2.25753e-8,.186,.0124008,2.66917e-7,-8.44523e-8,.248,.0123971,-9.99682e-7,3.15569e-7,.31,.0124108,373349e-11,-0.0000011779,.372,.0123598,-0.000013935,439588e-11,.434,.0125501,520034e-10,-0.0000100051,.4968,.0123198,-0.0000980735,922397e-11,.5571,.0120308,402857e-10,-0.0000052901,.6176,.0120369,-0.0000390662,7.36117e-7,.6769,.0117015,-0.0000280246,-8.54283e-7,.7346,.0113572,-0.0000408389,-5.18524e-7,.7903,.0109099,-0.0000486169,-0.0000010718,.8435,.0103433,-0.0000646934,5.36384e-9,.8936,.00969679,-0.0000646129,-0.00000854894,.9394,.00840949,-0.000192847,-0.00000421023,.9761,.00616525,-0.000256001,-0.00000421021,1,0,0,0],c.NODES=18,c.FXC=.8487,c.FYC=1.3523,c.C1=11.459155902616464,c.RC1=.08726646259971647,c.ONEEPS=1.000001,c.EPS=1e-8;return}bO(b,a),b.title="Robinson Projection",b.prototype._poly=function(a,b,c){return a[b]+c*(a[b+1]+c*(a[b+2]+c*a[b+3]))},b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j;g=this,j=g.ll(a,b),a=j[0],b=j[1],a=g.clon(a),d=g.rad(a),e=g.rad(b*-1),f=Math.abs(e),c=Math.floor(f*g.C1),c>=g.NODES&&(c=g.NODES-1),f=g.deg(f-g.RC1*c),c*=4,h=1e3*g._poly(g.X,c,f)*g.FXC*d,i=1e3*g._poly(g.Y,c,f)*g.FYC,e<0&&(i=-i);return[h,i]};return b}(X),bD.robinson=bb,p=function(a){function b(a){var c;b.__super__.constructor.call(this,a),c=this,c.C_x=.4222382003157712,c.C_y=1.3265004281770023,c.RC_y=.7538633073600218,c.C_p=3.5707963267948966,c.RC_p=.2800495767557787,c.EPS=1e-7,c.NITER=6}bO(b,a),b.title="Eckert IV Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;h=this,m=h.ll(a,b),a=m[0],b=m[1],f=h.rad(h.clon(a)),g=h.rad(b*-1),i=h.C_p*Math.sin(g),c=g*g,g*=.895168+c*(.0218849+c*.00826809),e=h.NITER;while(e>0){d=Math.cos(g),j=Math.sin(g),c=(g+j*(d+2)-i)/(1+d*(d+2)-j*j),g-=c;if(Math.abs(c)<h.EPS)break;e-=1}e===0?(k=h.C_x*f,l=g<0?-h.C_y:h.C_y):(k=h.C_x*f*(1+Math.cos(g)),l=h.C_y*Math.sin(g));return[k,l]};return b}(X),bD.eckert4=p,be=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.title="Sinusoidal Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h;d=this,h=d.ll(a,b),a=h[0],b=h[1],c=d.rad(d.clon(a)),e=d.rad(b*-1),f=1032*c*Math.cos(e),g=1032*e;return[f,g]};return b}(X),bD.sinusoidal=be,O=function(a){function b(a,c,d,e,f){var g,h,i,j;c==null&&(c=1.5707963267948966),d==null&&(d=null),e==null&&(e=null),f==null&&(f=null),b.__super__.constructor.call(this,a),g=this,g.MAX_ITER=10,g.TOLERANCE=1e-7,c!=null?(h=c+c,j=Math.sin(c),i=Math.sqrt(Math.PI*2*j/(h+Math.sin(h))),g.cx=2*i/Math.PI,g.cy=i/j,g.cp=h+Math.sin(h)):d!=null&&e!=null&&typeof cz!="undefined"&&cz!==null?(g.cx=d,g.cy=e,g.cp=f):bB("kartograph.proj.Mollweide: either p or cx,cy,cp must be defined")}bO(b,a),b.title="Mollweide Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;h=this,m=h.ll(a,b),a=m[0],b=m[1],g=Math,c=g.abs,f=h.rad(h.clon(a)),i=h.rad(b),e=h.cp*g.sin(i),d=h.MAX_ITER;while(d!==0){j=(i+g.sin(i)-e)/(1+g.cos(i)),i-=j;if(c(j)<h.TOLERANCE)break;d-=1}d===0?i=i>=0?h.HALFPI:-h.HALFPI:i*=.5,k=1e3*h.cx*f*g.cos(i),l=1e3*h.cy*g.sin(i);return[k,l*-1]};return b}(X),bD.mollweide=O,bm=function(a){function b(a){b.__super__.constructor.call(this,a,1.0471975511965976)}bO(b,a),b.title="Wagner IV Projection";return b}(O),bD.wagner4=bm,bn=function(a){function b(a){b.__super__.constructor.call(this,a,null,.90977,1.65014,3.00896)}bO(b,a),b.title="Wagner V Projection";return b}(O),bD.wagner5=bn,K=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}var b,c;bO(d,a),c=-89,b=89,d.parameters=["lon0","lat0","flip"],d.title="Loximuthal Projection (equidistant)",d.prototype.project=function(a,b){var c,d,e,f,g,h,i;e=this,i=e.ll(a,b),a=i[0],b=i[1],d=Math,c=e.rad(e.clon(a)),f=e.rad(b),f===e.phi0?g=c*d.cos(e.phi0):g=c*(f-e.phi0)/(d.log(d.tan(e.QUARTERPI+f*.5))-d.log(d.tan(e.QUARTERPI+e.phi0*.5))),g*=1e3,h=1e3*(f-e.phi0);return[g,h*-1]};return d}(X),bD.loximuthal=K,j=function(a){function g(){return g.__super__.constructor.apply(this,arguments)}var b,c,d,e,f;bO(g,a),g.title="Canters Modified Sinusoidal I",g.parameters=["lon0"],b=1.1966,c=-0.129,d=3*c,e=-0.0076,f=5*e,g.prototype.project=function(a,g){var h,i,j,k,l,m;h=this,m=h.ll(a,g),a=m[0],g=m[1],a=h.rad(h.clon(a)),g=h.rad(g),k=g*g,l=k*k,i=1e3*a*Math.cos(g)/(b+d*k+f*l),j=1e3*g*(b+c*k+e*l);return[i,j*-1]};return g}(X),bD.canters1=j,x=function(a){function o(a){o.__super__.constructor.call(this,a)}var b,c,d,e,f,g,h,i,j,k,l,m,n;bO(o,a),o.title="Hatano Projection",h=20,d=1e-7,i=1.000001,b=2.67595,c=2.43763,j=.3736990601468637,k=.4102345310814193,f=1.75859,g=1.93052,m=.5686373742600607,n=.5179951515653813,e=.85,l=1.1764705882352942,o.prototype.project=function(a,i){var j,k,l,m,n,
o,p,q,r,s;m=this,s=m.ll(a,i),a=s[0],i=s[1],l=m.rad(m.clon(a)),n=m.rad(i),j=Math.sin(n)*(n<0?c:b);for(k=r=h;r>=1;k=r+=-1){o=(n+Math.sin(n)-j)/(1+Math.cos(n)),n-=o;if(Math.abs(o)<d)break}p=1e3*e*l*Math.cos(n*=.5),q=1e3*Math.sin(n)*(n<0?g:f);return[p,q*-1]};return o}(X),bD.hatano=x,w=function(a){function b(a){var c;b.__super__.constructor.call(this,a),c=this,c.lat1=41.737,c.p1=new O,c.p0=new be}bO(b,a),b.title="Goode Homolosine Projection",b.parameters=["lon0"],b.prototype.project=function(a,b){var c,d;c=this,d=c.ll(a,b),a=d[0],b=d[1],a=c.clon(a);return Math.abs(b)>c.lat1?c.p1.project(a,b):c.p0.project(a,b)};return b}(X),bD.goodehomolosine=w,Q=function(a){function c(a){c.__super__.constructor.call(this,a),this.r=this.HALFPI*100}var b;bO(c,a),c.title="Nicolosi Globular Projection",c.parameters=["lon0"],b=1e-10,c.prototype._visible=function(a,b){var c;c=this,a=c.clon(a);return a>-90&&a<90},c.prototype.project=function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;h=this,p=h.ll(a,c),a=p[0],c=p[1],f=h.rad(h.clon(a)),j=h.rad(c),Math.abs(f)<b?(n=0,o=j):Math.abs(j)<b?(n=f,o=0):Math.abs(Math.abs(f)-h.HALFPI)<b?(n=f*Math.cos(j),o=h.HALFPI*Math.sin(j)):Math.abs(Math.abs(j)-h.HALFPI)<b?(n=0,o=j):(m=h.HALFPI/f-f/h.HALFPI,d=j/h.HALFPI,l=Math.sin(j),e=(1-d*d)/(l-d),k=m/e,k*=k,g=(m*l/e-.5*m)/(1+k),i=(l/k+.5*e)/(1+1/k),n=Math.cos(j),n=Math.sqrt(g*g+n*n/(1+k)),n=h.HALFPI*(g+(f<0?-n:n)),o=Math.sqrt(i*i-(l*l/k+e*l-1)/(1+1/k)),o=h.HALFPI*(i+(j<0?o:-o)));return[n*100,o*-100]},c.prototype.sea=function(){var a,b,c,d,e;b=[],d=this.r,a=Math;for(c=e=0;e<=360;c=++e)b.push([a.cos(this.rad(c))*d,a.sin(this.rad(c))*d]);return b},c.prototype.world_bbox=function(){var a;a=this.r;return new br.BBox(-a,-a,a*2,a*2)};return c}(X),bD.nicolosi=Q,c=function(a){function b(a,c){var d;c==null&&(c=1e3),b.__super__.constructor.call(this,a),d=this,d.r=c,d.elevation0=d.to_elevation(d.lat0),d.azimuth0=d.to_azimuth(d.lon0)}bO(b,a),b.parameters=["lon0","lat0"],b.title="Azimuthal Projection",b.prototype.to_elevation=function(a){var b;b=this;return(a+90)/180*b.PI-b.HALFPI},b.prototype.to_azimuth=function(a){var b;b=this;return(a+180)/360*b.PI*2-b.PI},b.prototype._visible=function(a,b){var c,d,e,f,g;g=this,f=Math,e=g.to_elevation(b),c=g.to_azimuth(a),d=f.sin(e)*f.sin(g.elevation0)+f.cos(g.elevation0)*f.cos(e)*f.cos(c-g.azimuth0);return d>=0},b.prototype._truncate=function(a,b){var c,d,e,f,g;c=Math,d=this.r,e=c.atan2(b-d,a-d),f=d+d*c.cos(e),g=d+d*c.sin(e);return[f,g]},b.prototype.sea=function(){var a,b,c,d,e;b=[],d=this.r,a=Math;for(c=e=0;e<=360;c=++e)b.push([d+a.cos(this.rad(c))*d,d+a.sin(this.rad(c))*d]);return b},b.prototype.world_bbox=function(){var a;a=this.r;return new br.BBox(0,0,a*2,a*2)};return b}(V),R=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.title="Orthographic Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j;f=this,e=Math,d=f.to_elevation(b),c=f.to_azimuth(a),h=f.r*e.cos(d)*e.sin(c-f.azimuth0),j=-f.r*(e.cos(f.elevation0)*e.sin(d)-e.sin(f.elevation0)*e.cos(d)*e.cos(c-f.azimuth0)),g=f.r+h,i=f.r+j;return[g,i]};return b}(c),bD.ortho=R,C=function(a){function b(a){b.__super__.constructor.call(this,a),this.scale=Math.sqrt(2)*.5}bO(b,a),b.title="Lambert Azimuthal Equal-Area Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l;g=this.rad(b),e=this.rad(a),f=Math,h=f.sin,c=f.cos,d=f.pow(2/(1+h(this.phi0)*h(g)+c(this.phi0)*c(g)*c(e-this.lam0)),.5),d*=this.scale,j=this.r*d*c(g)*h(e-this.lam0),l=-this.r*d*(c(this.phi0)*h(g)-h(this.phi0)*c(g)*c(e-this.lam0)),i=this.r+j,k=this.r+l;return[i,k]};return b}(c),bD.laea=C,bh=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.title="Stereographic Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;h=this.rad(b),f=this.rad(a),g=Math,i=g.sin,c=g.cos,e=.5,d=2*e/(1+i(this.phi0)*i(h)+c(this.phi0)*c(h)*c(f-this.lam0)),k=this.r*d*c(h)*i(f-this.lam0),m=-this.r*d*(c(this.phi0)*i(h)-i(this.phi0)*c(h)*c(f-this.lam0)),j=this.r+k,l=this.r+m;return[j,l]};return b}(c),bD.stereo=bh,bc=function(a){function b(a){var c,d,e,f,g,h,i,j,k,l;b.__super__.constructor.call(this,{lon0:0,lat0:0}),this.dist=(j=a.dist)!=null?j:3,this.up=this.rad((k=a.up)!=null?k:0),this.tilt=this.rad((l=a.tilt)!=null?l:0),this.scale=1,f=Number.MAX_VALUE,e=Number.MAX_VALUE*-1;for(c=h=0;h<=179;c=++h)for(d=i=0;i<=360;d=++i)g=this.project(d-180,c-90),f=Math.min(g[0],f),e=Math.max(g[0],e);this.scale=this.r*2/(e-f),b.__super__.constructor.call(this,a);return}bO(b,a),b.parameters=["lon0","lat0","tilt","dist","up"],b.title="Satellite Projection",b.prototype.project=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;c==null&&(c=0),m=this.rad(b),k=this.rad(a),l=Math,p=l.sin,f=l.cos,n=this.r,o=n*(c+6371)/3671,g=p(this.phi0)*p(m)+f(this.phi0)*f(m)*f(k-this.lam0),j=(this.dist-1)/(this.dist-g),j=(this.dist-1)/(this.dist-g),j*=this.scale,t=o*j*f(m)*p(k-this.lam0),w=-o*j*(f(this.phi0)*p(m)-p(this.phi0)*f(m)*f(k-this.lam0)),i=f(this.up),r=p(this.up),h=f(this.tilt),q=p(this.tilt),e=o*(this.dist-1),d=(w*i+t*r)*p(this.tilt/e)+h,u=(t*i-w*r)*f(this.tilt/d),x=(w*i+t*r)/d,s=n+u,v=n+x;return[s,v]},b.prototype._visible=function(a,b){var c,d,e,f;e=this.to_elevation(b),c=this.to_azimuth(a),f=Math,d=f.sin(e)*f.sin(this.elevation0)+f.cos(this.elevation0)*f.cos(e)*f.cos(c-this.azimuth0);return d>=1/this.dist},b.prototype.sea=function(){var a,b,c,d,e;b=[],d=this.r,a=Math;for(c=e=0;e<=360;c=++e)b.push([d+a.cos(this.rad(c))*d,d+a.sin(this.rad(c))*d]);return b};return b}(c),bD.satellite=bc,q=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.title="Equidistant Azimuthal Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;i=this,j=i.rad(b),g=i.rad(a),h=Math,k=h.sin,d=h.cos,e=k(this.phi0)*k(j)+d(this.phi0)*d(j)*d(g-this.lam0),c=h.acos(e),f=.325*c/k(c),m=this.r*f*d(j)*k(g-this.lam0),o=-this.r*f*(d(this.phi0)*k(j)-k(this.phi0)*d(j)*d(g-this.lam0)),l=this.r+m,n=this.r+o;return[l,n]},b.prototype._visible=function(a,b){return!0};return b}(c),bD.equi=q,b=function(a){function c(a){var b;b=this,a.lat0=0,c.__super__.constructor.call(this,a),b.lam0=0}var b;bO(c,a),c.title="Aitoff Projection",c.parameters=["lon0"],b=.6366197723675814,c.prototype.project=function(a,c){var d,e,f,g,h,i,j,k;g=this,k=g.ll(a,c),a=k[0],c=k[1],a=g.clon(a),f=g.rad(a),h=g.rad(c),d=.5*f,e=Math.acos(Math.cos(h)*Math.cos(d)),e!==0?(j=1/Math.sin(e),i=2*e*Math.cos(h)*Math.sin(d)*j,j*=e*Math.sin(h)):i=j=0,g.winkel&&(i=(i+f*b)*.5,j=(j+h)*.5);return[i*1e3,j*-1e3]},c.prototype._visible=function(a,b){return!0};return c}(X),bD.aitoff=b,bo=function(a){function b(a){b.__super__.constructor.call(this,a),this.winkel=!0}bO(b,a),b.title="Winkel Tripel Projection";return b}(b),bD.winkel3=bo,n=function(a){function b(a){var c,d,e;c=this,b.__super__.constructor.call(this,a),c.lat1=(d=a.lat1)!=null?d:30,c.phi1=c.rad(c.lat1),c.lat2=(e=a.lat2)!=null?e:50,c.phi2=c.rad(c.lat2)}bO(b,a),b.title="Conic Projection",b.parameters=["lon0","lat0","lat1","lat2"],b.prototype._visible=function(a,b){var c;c=this;return b>c.minLat&&b<c.maxLat},b.prototype._truncate=function(a,b){return[a,b]},b.prototype.clon=function(a){a-=this.lon0,a<-180?a+=360:a>180&&(a-=360);return a};return b}(V),D=function(a){function b(a){var c,d,e,f,g,h,i,j,k,l,m,n,o;k=this,b.__super__.constructor.call(this,a),g=Math,o=[g.sin,g.cos,g.abs,g.log,g.tan,g.pow],l=o[0],e=o[1],c=o[2],bs=o[3],n=o[4],i=o[5],k.n=h=m=l(k.phi1),f=e(k.phi1),j=c(k.phi1-k.phi2)>=1e-10,j&&(h=bs(f/e(k.phi2))/bs(n(k.QUARTERPI+.5*k.phi2)/n(k.QUARTERPI+.5*k.phi1))),k.c=d=f*i(n(k.QUARTERPI+.5*k.phi1),h)/h,c(c(k.phi0)-k.HALFPI)<1e-10?k.rho0=0:k.rho0=d*i(n(k.QUARTERPI+.5*k.phi0),-h),k.minLat=-60,k.maxLat=85}bO(b,a),b.title="Lambert Conformal Conic Projection",b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;l=this,i=l.rad(b),e=l.rad(l.clon(a)),g=Math,q=[g.sin,g.cos,g.abs,g.log,g.tan,g.pow],m=q[0],d=q[1],c=q[2],bs=q[3],n=q[4],j=q[5],h=l.n,c(c(i)-l.HALFPI)<1e-10?k=0:k=l.c*j(n(l.QUARTERPI+.5*i),-h),f=e*h,o=1e3*k*m(f),p=1e3*(l.rho0-k*d(f));return[o,p*-1]};return b}(n),bD.lcc=D,W=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a);return b}(n),bl=function(){function a(a,b,c,d,e,f){var g;g=this,g.bbox=a,g.width=b,g.padding=d!=null?d:0,g.halign=e!=null?e:"center",g.valign=f!=null?f:"center",g.height=c,g.scale=Math.min((b-d*2)/a.width,(c-d*2)/a.height)}a.prototype.project=function(a,b){var c,d,e,f,g,h,i;b==null&&(b=a[1],a=a[0]),e=this,f=e.scale,c=e.bbox,d=e.height,g=e.width,h=e.halign==="center"?(g-c.width*f)*.5:e.halign==="left"?e.padding*f:g-(c.width-e.padding)*f,i=e.valign==="center"?(d-c.height*f)*.5:e.valign==="top"?e.padding*f:0,a=(a-c.left)*f+h,b=(b-c.top)*f+i;return[a,b]},a.prototype.projectPath=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;e=this;if(a.type==="path"){d=[],b=[99999,99999,-99999,-99999],o=a.contours;for(k=0,m=o.length;k<m;k++){g=o[k],c=[];for(l=0,n=g.length;l<n;l++)p=g[l],i=p[0],j=p[1],q=e.project(i,j),i=q[0],j=q[1],c.push([i,j]),b[0]=Math.min(b[0],i),b[1]=Math.min(b[1],j),b[2]=Math.max(b[2],i),b[3]=Math.max(b[3],j);d.push(c)}f=new br.geom.Path(a.type,d,a.closed),f._bbox=b;return f}if(a.type==="circle"){r=e.project(a.x,a.y),i=r[0],j=r[1],h=a.r*e.scale;return new br.geom.Circle(i,j,h)}},a.prototype.asBBox=function(){var a;a=this;return new br.BBox(0,0,a.width,a.height)};return a}(),bl.fromXML=function(a){var b,c,e,f,g;g=Number(a.getAttribute("w")),e=Number(a.getAttribute("h")),f=Number(a.getAttribute("padding")),c=a.getElementsByTagName("bbox")[0],b=d.fromXML(c);return new br.View(b,g,e,f)},br.View=bl,br.Kartograph.prototype.dotgrid=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X;r=this,q=(T=a.layer)!=null?T:r.layerIds[r.layerIds.length-1];if(!r.layers.hasOwnProperty(q))bB('dotgrid error: layer "'+q+'" not found');else{p=r.layers[q],c=a.data,d=a.value,e=a.key,t={};if(e!=null&&bE(c)==="array")for(B=0,F=c.length;B<F;B++)w=c[B],o=w[e],t[String(o)]=w;else for(o in c)w=c[o],t[String(o)]=w;i=(U=a.style)!=null?U:{fill:"black",stroke:"none"},y=a.size,n=(V=a.gridsize)!=null?V:15,h=(W=p.dotgrid)!=null?W:p.dotgrid={gridsize:n,grid:[]};if(h.gridsize!==n){X=h.grid;for(C=0,G=X.length;C<G;C++)m=X[C],m.shape!=null&&(m.shape.remove(),m.shape=null)}if(n>0){if(h.grid.length===0)for(z=D=0,L=r.viewport.width;0<=L?D<=L:D>=L;z=D+=n)for(A=E=0,M=r.viewport.height;0<=M?E<=M:E>=M;A=E+=n){m={x:z+(Math.random()-.5)*n*.2,y:A+(Math.random()-.5)*n*.2,pathid:!1},l=!1,N=p.pathsById;for(o in N){u=N[o];for(J=0,H=u.length;J<H;J++){s=u[J];if(s.vpath.isInside(m.x,m.y)){l=!0,v=(O=t[o])!=null?O:null,x=y(v),m.pathid=o,m.shape=p.paper.circle(m.x,m.y,1);break}}if(l)break}h.grid.push(m)}P=h.grid;for(K=0,I=P.length;K<I;K++)m=P[K],m.pathid&&(v=(Q=t[m.pathid])!=null?Q:null,x=y(v),k=(R=a.duration)!=null?R:0,f=(S=a.delay)!=null?S:0,bE(f)==="function"?g=f(v):g=f,k>0&&Raphael.svg?(b=Raphael.animation({r:x*.5},k),m.shape.animate(b.delay(g))):m.shape.attr({r:x*.5}),bE(i)==="function"?j=i(v):j=i,m.shape.attr(j))}}},bq=(bM=br.filter)!=null?bM:br.filter={},bq.__knownFilter={},bq.__patternFills=0,L.prototype.SVG=function(a,b){var c,d;typeof a=="string"&&(a=window.document.createElementNS("http://www.w3.org/2000/svg",a));if(b)for(c in b)d=b[c],a.setAttribute(c,d);return a},br.Kartograph.prototype.addFilter=function(a,b,c){var d,e,f;c==null&&(c={}),f=this,d=window.document;if(br.filter[b]!=null)e=(new br.filter[b](c)).getFilter(a);else throw"unknown filter type "+b;return f.paper.defs.appendChild(e)},L.prototype.applyFilter=function(b){var c;c=this;return a("."+c.id,c.paper.canvas).attr({filter:"url(#"+b+")"})},L.prototype.applyTexture=function(a,b,c){var d,e,f,g,h,i;b==null&&(b=!1),c==null&&(c="#000"),e=this,bq.__patternFills+=1,h=e.paths,i=[];for(f=0,g=h.length;f<g;f++)d=h[f],!b||b(d.data)?i.push(d.svgPath.attr({fill:"url("+a+")"})):i.push(d.svgPath.attr("fill",c));return i},t=function(){function a(a){this.params=a!=null?a:{}}a.prototype.getFilter=function(a){var b,c;c=this,b=c.SVG("filter",{id:a}),c.buildFilter(b);return b},a.prototype._getFilter=function(){throw"not implemented"},a.prototype.SVG=function(a,b){var c,d;typeof a=="string"&&(a=window.document.createElementNS("http://www.w3.org/2000/svg",a));if(b)for(c in b)d=b[c],a.setAttribute(c,d);return a};return a}(),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.prototype.buildFilter=function(a){var b,c,d;d=this,b=d.SVG,c=b("feGaussianBlur",{stdDeviation:d.params.size||4,result:"blur"});return a.appendChild(c)};return b}(t),bq.blur=g,v=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.prototype.buildFilter=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;g=this,c=(l=g.params.blur)!=null?l:4,i=(m=g.params.strength)!=null?m:1,d=(n=g.params.color)!=null?n:"#D1BEB0",typeof d=="string"&&(d=chroma.hex(d)),h=d.rgb,e=(o=g.params.inner)!=null?o:!1,f=(j=g.params.knockout)!=null?j:!1,b=(k=g.params.alpha)!=null?k:1,e?g.innerGlow(a,c,i,h,b,f):g.outerGlow(a,c,i,h,b,f)},b.prototype.outerGlow=function(a,b,c,d,e,f){var g,h,i,j,k,l,m;k=this,g=k.SVG,j=g("feColorMatrix",{"in":"SourceGraphic",type:"matrix",values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0   0 0 0 1 0",result:"mask"}),a.appendChild(j),c>0&&(m=g("feMorphology",{"in":"mask",radius:c,operator:"dilate",result:"mask"}),a.appendChild(m)),j=g("feColorMatrix",{"in":"mask",type:"matrix",values:"0 0 0 0 "+d[0]/255+" 0 0 0 0 "+d[1]/255+" 0 0 0 0 "+d[2]/255+"  0 0 0 1 0",result:"r0"}),a.appendChild(j),h=g("feGaussianBlur",{"in":"r0",stdDeviation:b,result:"r1"}),a.appendChild(h),i=g("feComposite",{operator:"out","in":"r1",in2:"mask",result:"comp"}),a.appendChild(i),l=g("feMerge"),f||l.appendChild(g("feMergeNode",{"in":"SourceGraphic"})),l.appendChild(g("feMergeNode",{"in":"r1"}));return a.appendChild(l)},b.prototype.innerGlow=function(a,b,c,d,e,f){var g,h,i,j,k,l,m;k=this,g=k.SVG,bs("innerglow"),j=g("feColorMatrix",{"in":"SourceGraphic",type:"matrix",values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0   0 0 0 500 0",result:"mask"}),a.appendChild(j),m=g("feMorphology",{"in":"mask",radius:c,operator:"erode",result:"r1"}),a.appendChild(m),h=g("feGaussianBlur",{"in":"r1",stdDeviation:b,result:"r2"}),a.appendChild(h),j=g("feColorMatrix",{type:"matrix","in":"r2",values:"1 0 0 0 "+d[0]/255+" 0 1 0 0 "+d[1]/255+" 0 0 1 0 "+d[2]/255+" 0 0 0 -1 1",result:"r3"}),a.appendChild(j),i=g("feComposite",{operator:"in","in":"r3",in2:"mask",result:"comp"}),a.appendChild(i),l=g("feMerge"),f||l.appendChild(g("feMergeNode",{"in":"SourceGraphic"})),l.appendChild(g("feMergeNode",{"in":"comp"}));return a.appendChild(l)};return b}(t),bq.glow=v,br.Kartograph.prototype.addGeoPath=function(a,b,c){var d,e,f;b==null&&(b=[]),c==null&&(c=""),d=this,f=d.getGeoPathStr(a,b),e=d.paper.path(f),c!==""&&e.node.setAttribute("class",c);return e},br.Kartograph.prototype.getGeoPathStr=function(a,b){var c,d,e,f,g,h,i;b==null&&(b=[]),e=this,type(b)==="string"&&(b=b.split("")),b.length===0&&b.push("M"),f="";for(d in a){g=a[d],c=(i=b[d])!=null?i:"L",h=e.lonlat2xy(g);if(isNaN(h[0])||isNaN(h[1]))continue;f+=c+h[0]+","+h[1]}return f},br.Kartograph.prototype.addGeoPolygon=function(a,b){var c,d,e;e=this,c=["M"];for(d in a)c.push("L");c.push("Z");return e.addGeoPath(a,c,b)},S=function(){function b(b){this.zoomOut=bP(this.zoomOut,this),this.zoomIn=bP(this.zoomIn,this);var c,d,e,f,g,h,i,j;f=this,f.map=b,c=b.container,d=function(b,c){var d,e,f,g;c==null&&(c=[]),e=a('<div class="'+b+'" />');for(f=0,g=c.length;f<g;f++)d=c[f],e.append(d);return e},e=function(b){return a(b.target).addClass("md")},g=function(b){return a(b.target).removeClass("md")},j=d("plus"),j.mousedown(e),j.mouseup(g),j.click(f.zoomIn),i=d("minus"),i.mousedown(e),i.mouseup(g),i.click(f.zoomOut),h=d("zoom-control",[j,i]),c.append(h)}b.prototype.zoomIn=function(a){var b;b=this,b.map.opts.zoom+=1;return b.map.resize()},b.prototype.zoomOut=function(a){var b;b=this,b.map.opts.zoom-=1,b.map.opts.zoom<1&&(b.map.opts.zoom=1);return b.map.resize()};return b}(),bd=function(){function a(a,b,c){var d,e,f,g,h=this;a==null&&(a=[0,1]),b==null&&(b=null),c==null&&(c=null),this.rangedScale=bP(this.rangedScale,this),this.scale=bP(this.scale,this),e=this,g=[];for(d in a){if(bE(c)==="function"&&c(a[d])===!1)continue;b!=null?bE(b)==="function"?f=b(a[d]):f=a[d][b]:f=a[d],isNaN(f)||g.push(f)}g=g.sort(function(a,b){return a-b}),e.values=g,e._range=[0,1],e.rangedScale.range=function(a){e._range=a;return e.rangedScale}}a.prototype.scale=function(a){return a},a.prototype.rangedScale=function(a){var b,c;b=this,a=b.scale(a),c=b._range;return a*(c[1]-c[0])+c[0]};return a}(),H=function(a){function b(){this.scale=bP(this.scale,this);return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.prototype.scale=function(a){var b,c;b=this,c=b.values;return(a-c[0])/(c[c.length-1]-c[0])};return b}(bd),I=function(a){function b(){this.scale=bP(this.scale,this);return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.prototype.scale=function(a){var b,c;b=this,c=b.values,bs=Math.log;return(bs(a)-bs(c[0]))/(bs(c[c.length-1])-bs(c[0]))};return b}(bd),bf=function(a){function b(){this.scale=bP(this.scale,this);return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.prototype.scale=function(a){var b,c;b=this,c=b.values;return Math.sqrt((a-c[0])/(c[c.length-1]-c[0]))};return b}(bd),Y=function(a){function b(){this.scale=bP(this.scale,this);return b.__super__.constructor.apply(this,arguments)}bO(b,a),b.prototype.scale=function(a){var b,c,d,e,f,g;d=this,g=d.values,c=g.length-1;for(b in g){f=g[Number(b)],e=g[Number(b)+1];if(a===f)return b/c;if(b<c&&a>f&&a<e)return b/c+(a-f)/(e-f)}};return b}(bd),br.scale={},br.scale.identity=function(a){return(new bd(domain,prop,bq)).rangedScale},br.scale.linear=function(a,b,c){return(new H(a,b,c)).rangedScale},br.scale.log=function(a,b,c){return(new I(a,b,c)).rangedScale},br.scale.sqrt=function(a,b,c){return(new bf(a,b,c)).rangedScale},br.scale.quantile=function(a,b,c){return(new Y(a,b,c)).rangedScale},bj=function(){function b(b){a=this,a.location=b.location,a.data=b.data,a.map=b.map,a.layers=b.layers,a.key=b.key,a.x=b.x,a.y=b.y}var a;a=null,b.prototype.init=function(){return a},b.prototype.overlaps=function(a){return!1},b.prototype.update=function(b){return a},b.prototype.nodes=function(){return[]},b.prototype.clear=function(){return a};return b}(),br.Symbol=bj,bk=function(){function c(a){this._initTooltips=bP(this._initTooltips,this),this._noverlap=bP(this._noverlap,this),this._kMeans=bP(this._kMeans,this);var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;b=this,m=["data","location","type","map"],k=["filter","tooltip","click","delay","sortBy","clustering","aggregate","clusteringOpts","mouseenter","mouseleave"];for(n=0,r=m.length;n<r;n++){l=m[n];if(a[l]!=null)b[l]=a[l];else throw"SymbolGroup: missing argument '"+l+"'"}for(o=0,s=k.length;o<s;o++)l=k[o],a[l]!=null&&(b[l]=a[l]);d=b.type;if(d==null)bB("could not resolve symbol type",b.type);else{v=d.props;for(p=0,t=v.length;p<t;p++)l=v[p],a[l]!=null&&(b[l]=a[l]);b.layers={mapcanvas:b.map.paper},w=d.layers;for(q=0,u=w.length;q<u;q++)h=w[q],j=c._layerid++,g="sl_"+j,h.type==="svg"?i=b.map.createSVGLayer(g):h.type==="html"&&(i=b.map.createHTMLLayer(g)),b.layers[h.id]=i;b.symbols=[];for(f in b.data)e=b.data[f],bE(b.filter)==="function"?b.filter(e,f)&&b.add(e,f):b.add(e,f);b.layout(),b.render(),b.map.addSymbolGroup(b)}}var b;b=null,c.prototype.add=function(a,c){var d,e,f,g,h,i,j,k;b=this,d=b.type,e=b._evaluate(b.location,a,c),bE(e)==="array"&&(e=new br.LonLat(e[0],e[1])),g={layers:b.layers,location:e,data:a,key:c!=null?c:b.symbols.length,map:b.map},k=d.props;for(i=0,j=k.length;i<j;i++)f=k[i],b[f]!=null&&(g[f]=b._evaluate(b[f],a,c));h=new d(g),b.symbols.push(h);return h},c.prototype.layout=function(){var a,c,d,e,f,g,h,i,j,k;j=b.symbols;for(h=0,i=j.length;h<i;h++){f=j[h],c=f.location;if(bE(c)==="string"){k=c.split("."),a=k[0],e=k[1],d=b.map.getLayerPath(a,e);if(d!=null)g=b.map.viewBC.project(d.path.centroid());else{bB("could not find layer path "+a+"."+e);continue}}else g=b.map.lonlat2xy(c);f.x=g[0],f.y=g[1]}b.clustering==="k-means"?b._kMeans():b.clustering==="noverlap"&&b._noverlap();return b},c.prototype.render=function(){var c,d,e,f,g,h,i,j,k,l,m;b=this,b.sortBy&&(f="asc",bE(b.sortBy)==="string"&&(b.sortBy=b.sortBy.split(" ",2),e=b.sortBy[0],f=(k=b.sortBy[1])!=null?k:"asc"),b.symbols=b.symbols.sort(function(a,c){var d,g,h;bE(b.sortBy)==="function"?(g=b.sortBy(a.data,a),h=b.sortBy(c.data,c)):(g=a[e],h=c[e]);if(g===h)return 0;d=f==="asc"?1:-1;return g>h?1*d:-1*d})),l=b.symbols;for(g=0,i=l.length;g<i;g++){d=l[g],d.render(),m=d.nodes();for(h=0,j=m.length;h<j;h++)c=m[h],c.symbol=d}bE(b.tooltip)==="function"&&b._initTooltips(),a.each(["click","mouseenter","mouseleave"],function(e,f){var g,h,i,j;if(bE(b[f])==="function"){i=b.symbols,j=[];for(g=0,h=i.length;g<h;g++)d=i[g],j.push(function(){var e,g,h,i,j=this;h=d.nodes(),i=[];for(e=0,g=h.length;e<g;e++)c=h[e],i.push(a(c)[f](function(c){var d;d=c.target;while(!d.symbol)d=a(d).parent().get(0);c.stopPropagation();return b[f](d.symbol.data,d.symbol,c)}));return i}.call(this));return j}});return b},c.prototype.tooltips=function(a){b=this,b.tooltips=a,b._initTooltips();return b},c.prototype.remove=function(a){var c,d,e,f,g,h,i,j,k;b=this,d=[],i=b.symbols;for(g=0,h=i.length;g<h;g++){f=i[g];if(a!=null&&!a(f.data)){d.push(f);continue}try{f.clear()}catch(l){bB("error: symbolgroup.remove")}}if(a==null){j=b.layers,k=[];for(c in j)e=j[c],c!=="mapcanvas"?k.push(e.remove()):k.push(void 0);return k}return b.symbols=d},c.prototype._evaluate=function(a,b,c){var d;return bE(a)==="function"?d=a(b,c):d=a},c.prototype._kMeans=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;b=this,(u=b.osymbols)==null&&(b.osymbols=b.symbols),a=b.type,b.clusteringOpts!=null&&(k=b.clusteringOpts.size),k==null&&(k=64),c=bR().iterations(16).size(k),v=b.osymbols;for(m=0,q=v.length;m<q;m++)j=v[m],c.add({x:j.x,y:j.y});g=c.means(),h=[];for(n=0,r=g.length;n<r;n++){f=g[n];if(f.size===0)continue;d=[],w=f.indices;for(o=0,s=w.length;o<s;o++)e=w[o],d.push(b.osymbols[e].data);d=b.aggregate(d),l={layers:b.layers,location:!1,data:d,map:b.map},x=a.props;for(p=0,t=x.length;p<t;p++)i=x[p],b[i]!=null&&(l[i]=b._evaluate(b[i],d));j=new a(l),j.x=f.x,j.y=f.y,h.push(j)}return b.symbols=h},c.prototype._noverlap=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;b=this,(S=b.osymbols)==null&&(b.osymbols=b.symbols),j=3,a=b.type;if(bQ.call(a.props,"radius")<0)bB('noverlap layout only available for symbols with property "radius"');else{A=b.osymbols.slice(),b.clusteringOpts!=null&&(D=b.clusteringOpts.tolerance,n=b.clusteringOpts.maxRatio),D==null&&(D=.05),n==null&&(n=.8);for(h=H=0,T=j-1;0<=T?H<=T:H>=T;h=0<=T?++H:--H){A.sort(function(a,b){return b.radius-a.radius}),k=A.length,o=[];for(p=I=0,U=k-3;0<=U?I<=U:I>=U;p=0<=U?++I:--I){x=A[p];if(!x)continue;u=x.radius*(1-D),l=x.x-u,s=x.x+u,B=x.y-u,c=x.y+u,i=[];for(q=J=V=p+1,Q=k-2;V<=Q?J<=Q:J>=Q;q=V<=Q?++J:--J){y=A[q];if(!y)continue;v=y.radius,m=y.x-v,t=y.x+v,C=y.y-v,d=y.y+v,v/x.radius<n&&!(s<m||t<l)&&!(c<C||d<B)&&(f=y.x-x.x,g=y.y-x.y,f*f+g*g<(u+v)*(u+v)&&i.push(q))}if(i.length>0){e=[x.data],r=x.radius*x.radius;for(K=0,L=i.length;K<L;K++)h=i[K],e.push(A[h].data),r+=A[h].radius*A[h].radius;e=b.aggregate(e),z={layers:b.layers,location:!1,data:e,map:b.map},R=a.props;for(O=0,M=R.length;O<M;O++)p=R[O],b[p]!=null&&(z[p]=b._evaluate(b[p],e));w=new a(z),E=x.radius*x.radius/r,F=x.x*E,G=x.y*E;for(P=0,N=i.length;P<N;P++)h=i[P],y=A[h],E=y.radius*y.radius/r,F+=y.x*E,G+=y.y*E,A[h]=void 0;w.x=F,w.y=G,A[p]=void 0,o.push(w)}else o.push(x)}A=o}return b.symbols=A}},c.prototype._initTooltips=function(){var c,d,e,f,g,h,i,j,k,l,m;b=this,f=b.tooltip,l=b.symbols;for(h=0,j=l.length;h<j;h++){e=l[h],c={position:{target:"mouse",viewport:a(window),adjust:{x:7,y:7}},show:{delay:20},content:{},events:{show:function(b,c){return a(".qtip").filter(function(){return this!==c.elements.tooltip.get(0)}).hide()}}},g=f(e.data,e.key),bE(g)==="string"?c.content.text=g:bE(g)==="array"&&(c.content.title=g[0],c.content.text=g[1]),m=e.nodes();for(i=0,k=m.length;i<k;i++)d=m[i],a(d).qtip(c)}},c.prototype.onResize=function(){var a,c,d,e;b=this,b.layout(),e=b.symbols;for(c=0,d=e.length;c<d;c++)a=e[c],a.update()},c.prototype.update=function(a,c,d){var e,f,g,h,i,j,k,l;b=this,a==null&&(a={}),k=b.symbols;for(g=0,i=k.length;g<i;g++){f=k[g],l=b.type.props;for(h=0,j=l.length;h<j;h++)e=l[h],a[e]!=null?f[e]=b._evaluate(a[e],f.data):b[e]!=null&&(f[e]=b._evaluate(b[e],f.data));f.update(c,d)}return b};return c}(),bk._layerid=0,br.SymbolGroup=bk,br.Kartograph.prototype.addSymbols=function(a){a.map=this;return new bk(a)},br.dorlingLayout=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;c==null&&(c=40),n=[],a.each(b.symbols,function(a,b){return n.push({i:a,x:b.path.attrs.cx,y:b.path.attrs.cy,r:b.path.attrs.r})}),n.sort(function(a,b){return b.r-a.r}),f=function(){var a,c,d;for(c=0,d=n.length;c<d;c++)a=n[c],b.symbols[a.i].path.attr({cx:a.x,cy:a.y})};for(o=r=1;1<=c?r<=c:r>=c;o=1<=c?++r:--r)for(l in n)for(m in n)if(m>l){d=n[l],e=n[m];if(d.x+d.r<e.x-e.r||d.x-d.r>e.x+e.r)continue;if(d.y+d.r<e.y-e.r||d.y-d.r>e.y+e.r)continue;i=d.x-e.x,j=d.y-e.y,h=i*i+j*j,p=d.r+e.r,q=p*p,h<q&&(g=Math.sqrt(h),k=10/g,d.x+=i*k*(1-d.r/p),d.y+=j*k*(1-d.r/p),e.x-=i*k*(1-e.r/p),e.y-=j*k*(1-e.r/p))}return f()},h=function(b){function c(a){this.nodes=bP(this.nodes,this),this.clear=bP(this.clear,this),this.update=bP(this.update,this),this.render=bP(this.render,this),this.overlaps=bP(this.overlaps,this);var b,d,e;b=this,c.__super__.constructor.call(this,a),b.radius=(d=a.radius)!=null?d:4,b.style=a.style,b.attrs=a.attrs,b.title=a.title,b["class"]=(e=a["class"])!=null?e:"bubble"}bO(c,b),c.prototype.overlaps=function(a){var b,c,d,e,f,g,h,i,j,k,l;d=this,k=[d.x,d.y,d.radius],g=k[0],i=k[1],e=k[2],l=[a.x,a.y,a.radius],h=l[0],j=l[1],f=l[2];if(g-e>h+f||g+e<h-f||i-e>j+f||i+e<j-f)return!1;b=g-h,c=i-j;return b*b+c*c>(e+f)*(e+f)?!1:!0},c.prototype.render=function(a){var b;b=this,b.path==null&&(b.path=b.layers.mapcanvas.circle(b.x,b.y,b.radius)),b.update(),b.map.applyCSS(b.path);return b},c.prototype.update=function(b,c){var d,e,f;b==null&&(b=!1),c==null&&(c="expo-out"),e=this,f=e.path,d={cx:e.x,cy:e.y,r:e.radius},e.attrs!=null&&(d=a.extend(d,e.attrs)),b?f.animate(d,b,c):f.attr(d),f.node!=null&&(e.style!=null&&f.node.setAttribute("style",e.style),e["class"]!=null&&f.node.setAttribute("class",e["class"])),e.title!=null&&f.attr("title",e.title);return e},c.prototype.clear=function(){var a;a=this,a.path.remove();return a},c.prototype.nodes=function(){var a;a=this;return[a.path.node]};return c}(bj),h.props=["radius","style","class","title","attrs"],h.layers=[],br.Bubble=h,A=function(b){function c(a){var b,d,e,f,g,h;b=this,c.__super__.constructor.call(this,a),b.icon=(e=a.icon)!=null?e:"",b.offset=(f=a.offset)!=null?f:[0,0],b.iconsize=(g=a.iconsize)!=null?g:[10,10],b["class"]=(h=a["class"])!=null?h:"",b.title=(d=a.title)!=null?d:""}bO(c,b),c.prototype.render=function(b){var c,d;d=this,c=d.map.container,d.img=a("<img />"),d.img.attr({src:d.icon,title:d.title,alt:d.title,width:d.iconsize[0],height:d.iconsize[1]}),d.img.addClass(d["class"]),d.img.css({position:"absolute","z-index":1e3,cursor:"pointer"}),d.img[0].symbol=d,c.append(d.img);return d.update()},c.prototype.update=function(){var a;a=this;return a.img.css({left:a.x+a.offset[0]+"px",top:a.y+a.offset[1]+"px"})},c.prototype.clear=function(){var a;a=this,a.img.remove();return a},c.prototype.nodes=function(){var a;a=this;return[a.img]};return c}(br.Symbol),A.props=["icon","offset","class","title","iconsize"],A.layers=[],br.Icon=A,bi=function(a){function b(a){var c,d,e,f,g;c=this,b.__super__.constructor.call(this,a),c.text=(d=a.text)!=null?d:"",c.style=(e=a.style)!=null?e:"",c["class"]=(f=a["class"])!=null?f:"",c.offset=(g=a.offset)!=null?g:[0,0]}bO(b,a),b.prototype.render=function(a){var b,c;c=this,c.lbl=b=c.layers.mapcanvas.text(c.x,c.y,c.text),c.update();return c},b.prototype.update=function(){var a;a=this,a.lbl.attr({x:a.x+a.offset[0],y:a.y+a.offset[1]}),a.lbl.node.setAttribute("style",a.style);return a.lbl.node.setAttribute("class",a["class"])},b.prototype.clear=function(){var a;a=this,a.lbl.remove();return a},b.prototype.nodes=function(){var a;a=this;return[a.lbl.node]};return b}(br.Symbol),bi.props=["text","style","class","offset"],bi.layers=[],br.Label=bi,z=function(b){function c(a){var b,d,e,f;b=this,c.__super__.constructor.call(this,a),b.text=(d=a.text)!=null?d:"",b.style=(e=a.style)!=null?e:"",b["class"]=(f=a["class"])!=null?f:""}bO(c,b),c.prototype.render=function(b){var c,d,e;e=this,c=a("<div>"+e.text+"</div>"),c.css({width:"50px",position:"absolute",left:"-25px","text-align":"center"}),e.lbl=d=a('<div class="label" />'),d.append(c),e.layers.lbl.append(d),c.css({height:c.height()+"px",top:c.height()*-0.4+"px"}),e.update();return e},c.prototype.update=function(){var a;a=this;return a.lbl.css({position:"absolute",left:a.x+"px",top:a.y+"px"})},c.prototype.clear=function(){var a;a=this,a.lbl.remove();return a},c.prototype.nodes=function(){var a;a=this;return[a.lbl[0]]};return c}(br.Symbol),z.props=["text","style","class"],z.layers=[{id:"lbl",type:"html"}],br.HtmlLabel=z,E=function(b){function c(a){this.nodes=bP(this.nodes,this),this.clear=bP(this.clear,this),this.update=bP(this.update,this),this.render=bP(this.render,this);var b,d,e;b=this,c.__super__.constructor.call(this,a),b.labelattrs=(d=a.labelattrs)!=null?d:{},b.buffer=a.buffer,b.center=(e=a.center)!=null?e:!0}bO(c,b),c.prototype.render=function(a){var b;b=this,b.title!=null&&String(b.title).trim()!==""&&(b.buffer&&(b.bufferlabel=b.layers.mapcanvas.text(b.x,b.y,b.title)),b.label=b.layers.mapcanvas.text(b.x,b.y,b.title)),c.__super__.render.call(this,a);return b},c.prototype.update=function(b,d){var e,f,g,h,i;b==null&&(b=!1),d==null&&(d="expo-out"),f=this,c.__super__.update.call(this,b,d),f.label!=null&&(g=f.map.viewport,e=a.extend({},f.labelattrs),h=f.x,i=f.y,f.center?i-=0:h>g.width*.5?(e["text-anchor"]="end",h-=f.radius+5):h<g.width*.5&&(e["text-anchor"]="start",h+=f.radius+5),e.x=h,e.y=i,f.buffer&&(f.bufferlabel.attr(e),f.bufferlabel.attr({stroke:"#fff",fill:"#fff","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":6})),f.label.attr(e),f.label.toFront());return f},c.prototype.clear=function(){var a;a=this;return c.__super__.clear.apply(this,arguments)},c.prototype.nodes=function(){var a,b;a=this,b=c.__super__.nodes.apply(this,arguments),a.label&&b.push(a.label.node),a.bufferlabel&&b.push(a.bufferlabel.node);return b};return c}(h),E.props=["radius","style","class","title","labelattrs","buffer","center","attrs"],E.layers=[],br.LabeledBubble=E,U=function(a){function c(a){var d,e,f,g,h,i,j,k,l,m;b=this,c.__super__.constructor.call(this,a),b.radius=(j=a.radius)!=null?j:4,b.styles=(k=a.styles)!=null?k:"",b.colors=(l=a.colors)!=null?l:["#3cc","#c3c","#33c","#cc3"],b.titles=(m=a.titles)!=null?m:["","","","",""],b.values=(e=a.values)!=null?e:[],b.border=(f=a.border)!=null?f:!1,b.borderWidth=(g=a.borderWidth)!=null?g:2,b["class"]=(h=a["class"])!=null?h:"piechart",(i=(d=Raphael.fn).pieChart)==null&&(d.pieChart=bp)}var b;bO(c,a),b=null,c.prototype.overlaps=function(a){var c,d,e,f,g,h,i,j,k,l;k=[b.x,b.y,b.radius],g=k[0],i=k[1],e=k[2],l=[a.x,a.y,a.radius],h=l[0],j=l[1],f=l[2];if(g-e>h+f||g+e<h-f||i-e>j+f||i+e<j-f)return!1;c=g-h,d=i-j;return c*c+d*d>(e+f)*(e+f)?!1:!0},c.prototype.render=function(a){var c;b=this,b.border!=null&&(c=b.layers.mapcanvas.circle(b.x,b.y,b.radius+b.borderWidth).attr({stroke:"none",fill:b.border})),b.chart=b.layers.mapcanvas.pieChart(b.x,b.y,b.radius,b.values,b.titles,b.colors,"none"),b.chart.push(c);return b},c.prototype.update=function(a){var c;return},c.prototype.clear=function(){var a,c,d,e;b=this,e=b.chart;for(c=0,d=e.length;c<d;c++)a=e[c],a.remove();return b},c.prototype.nodes=function(){var a,c,d,e,f;e=b.chart,f=[];for(c=0,d=e.length;c<d;c++)a=e[c],f.push(a.node);return f};return c}(bj),U.props=["radius","values","styles","class","titles","colors","border","borderWidth"],U.layers=[],br.PieChart=U,bp=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r;if(isNaN(a)||isNaN(b)||isNaN(c))return[];k=this,m=Math.PI/180,i=k.set(),n=function(a,b,c,d,e,f){var g,h,i,j;g=a+c*Math.cos(-d*m),h=a+c*Math.cos(-e*m),i=b+c*Math.sin(-d*m),j=b+c*Math.sin(-e*m);return k.path(["M",a,b,"L",g,i,"A",c,c,0,+(e-d>180),0,h,j,"z"]).attr(f)},h=-270,o=0,l=function(e){var j,k,l,m,p,q,r;r=d[e],j=360*r/o,q=h+j*.5,k=f[e],m=500,l=30,p=n(a,b,c,h,h+j,{fill:k,stroke:g,"stroke-width":1}),p.mouseover(function(){p.stop().animate({transform:"s1.1 1.1 "+a+" "+b},m,"elastic")}),p.mouseout(function(){p.stop().animate({transform:""},m,"elastic")}),h+=j,i.push(p
)};for(q=0,r=d.length;q<r;q++)p=d[q],o+=p;for(j in d)l(j);return i},drawStackedBars=function(a,b,c,d,e,f,g,h){function k(a,b,c,d,e){return i.rect(a,b,c,d).attr(e)}var i=this,j=this.set(),l=0,m=0,n=function(f){var i=e[f],n=d*i/m,o=a-c*.5,p=b+d*.5-l,q=c,r=g[f],s=500,t=30,u=k(o,p-n,q,n,{fill:r,stroke:h,"stroke-width":1});l+=n,u.mouseover(function(){u.stop().animate({transform:"s1.1 1.1 "+a+" "+b},s,"elastic")}).mouseout(function(){u.stop().animate({transform:""},s,"elastic")}),j.push(u)};for(var o=0,p=e.length;o<p;o++)m+=e[o];for(o=0;o<p;o++)n(o);return j},bg=function(a){function b(a){var c,d,e,f,g,h,i,j,k,l;c=this,b.__super__.constructor.call(this,a),c.styles=(i=a.styles)!=null?i:"",c.colors=(j=a.colors)!=null?j:[],c.titles=(k=a.titles)!=null?k:["","","","",""],c.values=(l=a.values)!=null?l:[],c.width=(e=a.width)!=null?e:17,c.height=(f=a.height)!=null?f:30,c["class"]=(g=a["class"])!=null?g:"barchart",(h=(d=Raphael.fn).drawStackedBarChart)==null&&(d.drawStackedBarChart=drawStackedBars)}bO(b,a),b.prototype.overlaps=function(a){var b,c,d,e,f,g,h,i,j,k,l;d=this,k=[d.x,d.y,d.radius],g=k[0],i=k[1],e=k[2],l=[a.x,a.y,a.radius],h=l[0],j=l[1],f=l[2];if(g-e>h+f||g+e<h-f||i-e>j+f||i+e<j-f)return!1;b=g-h,c=i-j;return b*b+c*c>(e+f)*(e+f)?!1:!0},b.prototype.render=function(a){var b,c,d,e,f,g;d=this,e=d.width,c=d.height,f=d.x,g=d.y,b=d.layers.mapcanvas.rect(f-e*.5-2,g-c*.5-2,e+4,c+4).attr({stroke:"none",fill:"#fff"}),d.chart=d.layers.mapcanvas.drawStackedBarChart(d.x,d.y,d.width,d.height,d.values,d.titles,d.colors,"none"),d.chart.push(b);return d},b.prototype.update=function(){var a,b;a=this;return},b.prototype.clear=function(){var a,b,c,d,e;a=this,e=a.chart;for(c=0,d=e.length;c<d;c++)b=e[c],b.remove();a.chart=[];return a},b.prototype.nodes=function(){var a,b,c,d,e,f;b=this,e=b.chart,f=[];for(c=0,d=e.length;c<d;c++)a=e[c],f.push(a.node);return f};return b}(br.Symbol),bg.props=["values","styles","class","titles","colors","width","height"],bg.layers=[],br.StackedBarChart=bg}).call(this);

/**
    chroma.js - color manipulation in javascript

    Copyright (c) 2011-2013, Gregor Aisch
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice, this
      list of conditions and the following disclaimer.

    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.

    * The name Gregor Aisch may not be used to endorse or promote products
      derived from this software without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
    AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
    DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
    INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
    BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
    OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
    EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

    @source: https://github.com/gka/chroma.js
*/
(function(){var Color,ColorScale,K,PITHIRD,TWOPI,X,Y,Z,brewer,chroma,colors,cos,hex2rgb,hsi2rgb,hsl2rgb,hsv2rgb,lab2lch,lab2rgb,lab_xyz,lch2lab,lch2rgb,limit,rgb2hex,rgb2hsi,rgb2hsl,rgb2hsv,rgb2lab,rgb2lch,rgb_xyz,root,type,unpack,xyz_lab,xyz_rgb,_ref,_ref1,_ref2,_ref3,_ref4,_ref5;root=typeof exports!=="undefined"&&exports!==null?exports:this;chroma=(_ref=root.chroma)!=null?_ref:root.chroma={};if(typeof module!=="undefined"&&module!==null){module.exports=chroma}Color=function(){function Color(x,y,z,m){var me,_ref1;me=this;if(!(x!=null)&&!(y!=null)&&!(z!=null)&&!(m!=null)){x=[255,0,255]}if(type(x)==="array"&&x.length===3){if(m==null){m=y}_ref1=x,x=_ref1[0],y=_ref1[1],z=_ref1[2]}if(type(x)==="string"){m="hex"}else{if(m==null){m="rgb"}}if(m==="rgb"){me._rgb=[x,y,z]}else if(m==="hsl"){me._rgb=hsl2rgb(x,y,z)}else if(m==="hsv"){me._rgb=hsv2rgb(x,y,z)}else if(m==="hex"){me._rgb=hex2rgb(x)}else if(m==="lab"){me._rgb=lab2rgb(x,y,z)}else if(m==="lch"){me._rgb=lch2rgb(x,y,z)}else if(m==="hsi"){me._rgb=hsi2rgb(x,y,z)}}Color.prototype.rgb=function(){return this._rgb};Color.prototype.hex=function(){return rgb2hex(this._rgb)};Color.prototype.toString=function(){return this.hex()};Color.prototype.hsl=function(){return rgb2hsl(this._rgb)};Color.prototype.hsv=function(){return rgb2hsv(this._rgb)};Color.prototype.lab=function(){return rgb2lab(this._rgb)};Color.prototype.lch=function(){return rgb2lch(this._rgb)};Color.prototype.hsi=function(){return rgb2hsi(this._rgb)};Color.prototype.interpolate=function(f,col,m){var dh,hue,hue0,hue1,lbv,lbv0,lbv1,me,sat,sat0,sat1,xyz0,xyz1;me=this;if(m==null){m="rgb"}if(type(col)==="string"){col=new Color(col)}if(m==="hsl"||m==="hsv"||m==="lch"||m==="hsi"){if(m==="hsl"){xyz0=me.hsl();xyz1=col.hsl()}else if(m==="hsv"){xyz0=me.hsv();xyz1=col.hsv()}else if(m==="hsi"){xyz0=me.hsi();xyz1=col.hsi()}else if(m==="lch"){xyz0=me.lch();xyz1=col.lch()}if(m.substr(0,1)==="h"){hue0=xyz0[0],sat0=xyz0[1],lbv0=xyz0[2];hue1=xyz1[0],sat1=xyz1[1],lbv1=xyz1[2]}else{lbv0=xyz0[0],sat0=xyz0[1],hue0=xyz0[2];lbv1=xyz1[0],sat1=xyz1[1],hue1=xyz1[2]}if(!isNaN(hue0)&&!isNaN(hue1)){if(hue1>hue0&&hue1-hue0>180){dh=hue1-(hue0+360)}else if(hue1<hue0&&hue0-hue1>180){dh=hue1+360-hue0}else{dh=hue1-hue0}hue=hue0+f*dh}else if(!isNaN(hue0)){hue=hue0;if(lbv1===1||lbv1===0){sat=sat0}}else if(!isNaN(hue1)){hue=hue1;if(lbv0===1||lbv0===0){sat=sat1}}else{hue=void 0}if(sat==null){sat=sat0+f*(sat1-sat0)}lbv=lbv0+f*(lbv1-lbv0);if(m.substr(0,1)==="h"){return new Color(hue,sat,lbv,m)}else{return new Color(lbv,sat,hue,m)}}else if(m==="rgb"){xyz0=me._rgb;xyz1=col._rgb;return new Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),m)}else if(m==="lab"){xyz0=me.lab();xyz1=col.lab();return new Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),m)}else{throw"color mode "+m+" is not supported"}};Color.prototype.darken=function(amount){var lch,me;if(amount==null){amount=.2}me=this;lch=me.lch();lch[2]-=amount;return chroma.lch(lch)};return Color}();hex2rgb=function(hex){var b,g,r,u;if(!hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){if(chroma.colors!=null&&chroma.colors[hex]){hex=chroma.colors[hex]}else{throw"unknown color format: "+hex}}if(hex.length===4||hex.length===7){hex=hex.substr(1)}if(hex.length===3){hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]}u=parseInt(hex,16);r=u>>16;g=u>>8&255;b=u&255;return[r,g,b]};rgb2hex=function(){var b,g,r,str,u,_ref1;_ref1=unpack(arguments),r=_ref1[0],g=_ref1[1],b=_ref1[2];u=r<<16|g<<8|b;str="000000"+u.toString(16).toUpperCase();return"#"+str.substr(str.length-6)};hsv2rgb=function(){var b,f,g,h,i,p,q,r,s,t,v,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7;_ref1=unpack(arguments),h=_ref1[0],s=_ref1[1],v=_ref1[2];v*=255;if(s===0){r=g=b=v}else{if(h===360){h=0}if(h>360){h-=360}if(h<0){h+=360}h/=60;i=Math.floor(h);f=h-i;p=v*(1-s);q=v*(1-s*f);t=v*(1-s*(1-f));switch(i){case 0:_ref2=[v,t,p],r=_ref2[0],g=_ref2[1],b=_ref2[2];break;case 1:_ref3=[q,v,p],r=_ref3[0],g=_ref3[1],b=_ref3[2];break;case 2:_ref4=[p,v,t],r=_ref4[0],g=_ref4[1],b=_ref4[2];break;case 3:_ref5=[p,q,v],r=_ref5[0],g=_ref5[1],b=_ref5[2];break;case 4:_ref6=[t,p,v],r=_ref6[0],g=_ref6[1],b=_ref6[2];break;case 5:_ref7=[v,p,q],r=_ref7[0],g=_ref7[1],b=_ref7[2]}}r=Math.round(r);g=Math.round(g);b=Math.round(b);return[r,g,b]};rgb2hsv=function(){var b,delta,g,h,max,min,r,s,v,_ref1;_ref1=unpack(arguments),r=_ref1[0],g=_ref1[1],b=_ref1[2];min=Math.min(r,g,b);max=Math.max(r,g,b);delta=max-min;v=max/255;if(max===0){h=void 0;s=0}else{s=delta/max;if(r===max){h=(g-b)/delta}if(g===max){h=2+(b-r)/delta}if(b===max){h=4+(r-g)/delta}h*=60;if(h<0){h+=360}}return[h,s,v]};hsl2rgb=function(){var b,c,g,h,i,l,r,s,t1,t2,t3,_i,_ref1,_ref2;_ref1=unpack(arguments),h=_ref1[0],s=_ref1[1],l=_ref1[2];if(s===0){r=g=b=l*255}else{t3=[0,0,0];c=[0,0,0];t2=l<.5?l*(1+s):l+s-l*s;t1=2*l-t2;h/=360;t3[0]=h+1/3;t3[1]=h;t3[2]=h-1/3;for(i=_i=0;_i<=2;i=++_i){if(t3[i]<0){t3[i]+=1}if(t3[i]>1){t3[i]-=1}if(6*t3[i]<1){c[i]=t1+(t2-t1)*6*t3[i]}else if(2*t3[i]<1){c[i]=t2}else if(3*t3[i]<2){c[i]=t1+(t2-t1)*(2/3-t3[i])*6}else{c[i]=t1}}_ref2=[Math.round(c[0]*255),Math.round(c[1]*255),Math.round(c[2]*255)],r=_ref2[0],g=_ref2[1],b=_ref2[2]}return[r,g,b]};rgb2hsl=function(r,g,b){var h,l,max,min,s,_ref1;if(r!==void 0&&r.length===3){_ref1=r,r=_ref1[0],g=_ref1[1],b=_ref1[2]}r/=255;g/=255;b/=255;min=Math.min(r,g,b);max=Math.max(r,g,b);l=(max+min)/2;if(max===min){s=0;h=void 0}else{s=l<.5?(max-min)/(max+min):(max-min)/(2-max-min)}if(r===max){h=(g-b)/(max-min)}else if(g===max){h=2+(b-r)/(max-min)}else if(b===max){h=4+(r-g)/(max-min)}h*=60;if(h<0){h+=360}return[h,s,l]};K=18;X=.95047;Y=1;Z=1.08883;lab2rgb=function(l,a,b){var g,r,x,y,z,_ref1,_ref2;if(l!==void 0&&l.length===3){_ref1=l,l=_ref1[0],a=_ref1[1],b=_ref1[2]}if(l!==void 0&&l.length===3){_ref2=l,l=_ref2[0],a=_ref2[1],b=_ref2[2]}y=(l+16)/116;x=y+a/500;z=y-b/200;x=lab_xyz(x)*X;y=lab_xyz(y)*Y;z=lab_xyz(z)*Z;r=xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z);g=xyz_rgb(-.969266*x+1.8760108*y+.041556*z);b=xyz_rgb(.0556434*x-.2040259*y+1.0572252*z);return[limit(r,0,255),limit(g,0,255),limit(b,0,255)]};rgb2lab=function(){var b,g,r,x,y,z,_ref1;_ref1=unpack(arguments),r=_ref1[0],g=_ref1[1],b=_ref1[2];r=rgb_xyz(r);g=rgb_xyz(g);b=rgb_xyz(b);x=xyz_lab((.4124564*r+.3575761*g+.1804375*b)/X);y=xyz_lab((.2126729*r+.7151522*g+.072175*b)/Y);z=xyz_lab((.0193339*r+.119192*g+.9503041*b)/Z);return[116*y-16,500*(x-y),200*(y-z)]};lch2lab=function(){var c,h,l,_ref1;_ref1=unpack(arguments),l=_ref1[0],c=_ref1[1],h=_ref1[2];h=h*Math.PI/180;return[l,Math.cos(h)*c,Math.sin(h)*c]};lch2rgb=function(l,c,h){var L,a,b,g,r,_ref1,_ref2;_ref1=lch2lab(l,c,h),L=_ref1[0],a=_ref1[1],b=_ref1[2];_ref2=lab2rgb(L,a,b),r=_ref2[0],g=_ref2[1],b=_ref2[2];return[limit(r,0,255),limit(g,0,255),limit(b,0,255)]};lab_xyz=function(x){if(x>.206893034){return x*x*x}else{return(x-4/29)/7.787037}};xyz_lab=function(x){if(x>.008856){return Math.pow(x,1/3)}else{return 7.787037*x+4/29}};xyz_rgb=function(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))};rgb_xyz=function(r){if((r/=255)<=.04045){return r/12.92}else{return Math.pow((r+.055)/1.055,2.4)}};lab2lch=function(){var a,b,c,h,l,_ref1;_ref1=unpack(arguments),l=_ref1[0],a=_ref1[1],b=_ref1[2];c=Math.sqrt(a*a+b*b);h=Math.atan2(b,a)/Math.PI*180;return[l,c,h]};rgb2lch=function(){var a,b,g,l,r,_ref1,_ref2;_ref1=unpack(arguments),r=_ref1[0],g=_ref1[1],b=_ref1[2];_ref2=rgb2lab(r,g,b),l=_ref2[0],a=_ref2[1],b=_ref2[2];return lab2lch(l,a,b)};rgb2hsi=function(){var TWOPI,b,g,h,i,min,r,s,_ref1;_ref1=unpack(arguments),r=_ref1[0],g=_ref1[1],b=_ref1[2];TWOPI=Math.PI*2;r/=255;g/=255;b/=255;min=Math.min(r,g,b);i=(r+g+b)/3;s=1-min/i;if(s===0){h=0}else{h=(r-g+(r-b))/2;h/=Math.sqrt((r-g)*(r-g)+(r-b)*(g-b));h=Math.acos(h);if(b>g){h=TWOPI-h}h/=TWOPI}return[h*360,s,i]};hsi2rgb=function(h,s,i){var b,g,r,_ref1;_ref1=unpack(arguments),h=_ref1[0],s=_ref1[1],i=_ref1[2];h/=360;if(h<1/3){b=(1-s)/3;r=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;g=1-(b+r)}else if(h<2/3){h-=1/3;r=(1-s)/3;g=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;b=1-(r+g)}else{h-=2/3;g=(1-s)/3;b=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;r=1-(g+b)}r=limit(i*r*3);g=limit(i*g*3);b=limit(i*b*3);return[r*255,g*255,b*255]};chroma.Color=Color;chroma.color=function(x,y,z,m){return new Color(x,y,z,m)};chroma.hsl=function(h,s,l){return new Color(h,s,l,"hsl")};chroma.hsv=function(h,s,v){return new Color(h,s,v,"hsv")};chroma.rgb=function(r,g,b){return new Color(r,g,b,"rgb")};chroma.hex=function(x){return new Color(x)};chroma.lab=function(l,a,b){return new Color(l,a,b,"lab")};chroma.lch=function(l,c,h){return new Color(l,c,h,"lch")};chroma.hsi=function(h,s,i){return new Color(h,s,i,"hsi")};chroma.interpolate=function(a,b,f,m){if(!(a!=null)||!(b!=null)){return"#000"}if(type(a)==="string"){a=new Color(a)}if(type(b)==="string"){b=new Color(b)}return a.interpolate(f,b,m)};root=typeof exports!=="undefined"&&exports!==null?exports:this;chroma=(_ref1=root.chroma)!=null?_ref1:root.chroma={};Color=chroma.Color;ColorScale=function(){function ColorScale(opts){var me,_ref2,_ref3;if(opts==null){opts={}}me=this;me.range(opts.colors,opts.positions);me._mode=(_ref2=opts.mode)!=null?_ref2:"rgb";me._nacol=chroma.hex((_ref3=opts.nacol)!=null?_ref3:chroma.hex("#ccc"));me.domain([0,1]);me}ColorScale.prototype.range=function(colors,positions){var c,col,me,_i,_j,_ref2,_ref3,_ref4;me=this;if(!(colors!=null)){colors=["#ddd","#222"]}if(colors!=null&&type(colors)==="string"&&((_ref2=chroma.brewer)!=null?_ref2[colors]:void 0)!=null){colors=chroma.brewer[colors].slice(0)}for(c=_i=0,_ref3=colors.length-1;0<=_ref3?_i<=_ref3:_i>=_ref3;c=0<=_ref3?++_i:--_i){col=colors[c];if(type(col)==="string"){colors[c]=new Color(col)}}me._colors=colors;if(positions!=null){me._pos=positions}else{me._pos=[];for(c=_j=0,_ref4=colors.length-1;0<=_ref4?_j<=_ref4:_j>=_ref4;c=0<=_ref4?++_j:--_j){me._pos.push(c/(colors.length-1))}}return me};ColorScale.prototype.domain=function(domain){var me;if(domain==null){domain=[]}me=this;me._domain=domain;me._min=domain[0];me._max=domain[domain.length-1];if(domain.length===2){me._numClasses=0}else{me._numClasses=domain.length-1}return me};ColorScale.prototype.get=function(value){var c,f,f0,me;me=this;if(isNaN(value)){return me._nacol}if(me._domain.length>2){c=me.getClass(value);f=c/(me._numClasses-1)}else{f=f0=(value-me._min)/(me._max-me._min);f=Math.min(1,Math.max(0,f))}return me.fColor(f)};ColorScale.prototype.fColor=function(f){var col,cols,i,me,p,_i,_ref2;me=this;cols=me._colors;for(i=_i=0,_ref2=me._pos.length-1;0<=_ref2?_i<=_ref2:_i>=_ref2;i=0<=_ref2?++_i:--_i){p=me._pos[i];if(f<=p){col=cols[i];break}if(f>=p&&i===me._pos.length-1){col=cols[i];break}if(f>p&&f<me._pos[i+1]){f=(f-p)/(me._pos[i+1]-p);col=chroma.interpolate(cols[i],cols[i+1],f,me._mode);break}}return col};ColorScale.prototype.classifyValue=function(value){var domain,i,maxc,me,minc,n,val;me=this;domain=me._domain;val=value;if(domain.length>2){n=domain.length-1;i=me.getClass(value);val=domain[i]+(domain[i+1]-domain[i])*.5;minc=domain[0];maxc=domain[n-1];val=me._min+(val-minc)/(maxc-minc)*(me._max-me._min)}return val};ColorScale.prototype.getClass=function(value){var domain,i,n,self;self=this;domain=self._domain;if(domain!=null){n=domain.length-1;i=0;while(i<n&&value>=domain[i]){i++}return i-1}return 0};ColorScale.prototype.validValue=function(value){return!isNaN(value)};return ColorScale}();chroma.ColorScale=ColorScale;chroma.scale=function(colors,positions){var colscale,f,out;colscale=new chroma.ColorScale;colscale.range(colors,positions);out=false;f=function(v){var c;c=colscale.get(v);if(out&&c[out]){return c[out]()}else{return c}};f.domain=function(domain,classes,mode){var d;if(mode==null){mode="e"}if(classes!=null){d=chroma.analyze(domain);if(classes===0){domain=[d.min,d.max]}else{domain=chroma.limits(d,mode,classes)}}colscale.domain(domain);return f};f.mode=function(_m){colscale._mode=_m;return f};f.range=function(_colors,_pos){colscale.range(_colors,_pos);return f};f.out=function(_o){out=_o;return f};return f};if((_ref2=chroma.scales)==null){chroma.scales={}}chroma.scales.cool=function(){return chroma.scale([chroma.hsl(180,1,.9),chroma.hsl(250,.7,.4)])};chroma.scales.hot=function(){return chroma.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")};chroma.analyze=function(data,key,filter){var add,k,r,val,visit,_i,_len;r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};if(!(filter!=null)){filter=function(){return true}}add=function(val){if(val!=null&&!isNaN(val)){r.values.push(val);r.sum+=val;if(val<r.min){r.min=val}if(val>r.max){r.max=val}r.count+=1}};visit=function(val,k){if(filter(val,k)){if(key!=null&&type(key)==="function"){return add(key(val))}else if(key!=null&&type(key)==="str"||type(key)==="number"){return add(val[key])}else{return add(val)}}};if(type(data)==="array"){for(_i=0,_len=data.length;_i<_len;_i++){val=data[_i];visit(val)}}else{for(k in data){val=data[k];visit(val,k)}}r.domain=[r.min,r.max];r.limits=function(mode,num){return chroma.limits(r,mode,num)};return r};chroma.limits=function(data,mode,num){var assignments,best,centroids,cluster,clusterSizes,dist,i,j,kClusters,limits,max,min,mindist,n,nb_iters,newCentroids,p,pb,pr,repeat,sum,tmpKMeansBreaks,value,values,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_ref10,_ref11,_ref12,_ref13,_ref14,_ref15,_ref16,_ref3,_ref4,_ref5,_ref6,_ref7,_ref8,_ref9,_s,_t,_u,_v;if(mode==null){mode="equal"}if(num==null){num=7}if(!(data.values!=null)){data=chroma.analyze(data)}min=data.min;max=data.max;sum=data.sum;values=data.values.sort(function(a,b){return a-b});limits=[];if(mode.substr(0,1)==="c"){limits.push(min);limits.push(max)}if(mode.substr(0,1)==="e"){limits.push(min);for(i=_i=1,_ref3=num-1;1<=_ref3?_i<=_ref3:_i>=_ref3;i=1<=_ref3?++_i:--_i){limits.push(min+i/num*(max-min))}limits.push(max)}else if(mode.substr(0,1)==="q"){limits.push(min);for(i=_j=1,_ref4=num-1;1<=_ref4?_j<=_ref4:_j>=_ref4;i=1<=_ref4?++_j:--_j){p=values.length*i/num;pb=Math.floor(p);if(pb===p){limits.push(values[pb])}else{pr=p-pb;limits.push(values[pb]*pr+values[pb+1]*(1-pr))}}limits.push(max)}else if(mode.substr(0,1)==="k"){n=values.length;assignments=new Array(n);clusterSizes=new Array(num);repeat=true;nb_iters=0;centroids=null;centroids=[];centroids.push(min);for(i=_k=1,_ref5=num-1;1<=_ref5?_k<=_ref5:_k>=_ref5;i=1<=_ref5?++_k:--_k){centroids.push(min+i/num*(max-min))}centroids.push(max);while(repeat){for(j=_l=0,_ref6=num-1;0<=_ref6?_l<=_ref6:_l>=_ref6;j=0<=_ref6?++_l:--_l){clusterSizes[j]=0}for(i=_m=0,_ref7=n-1;0<=_ref7?_m<=_ref7:_m>=_ref7;i=0<=_ref7?++_m:--_m){value=values[i];mindist=Number.MAX_VALUE;for(j=_n=0,_ref8=num-1;0<=_ref8?_n<=_ref8:_n>=_ref8;j=0<=_ref8?++_n:--_n){dist=Math.abs(centroids[j]-value);if(dist<mindist){mindist=dist;best=j}}clusterSizes[best]++;assignments[i]=best}newCentroids=new Array(num);for(j=_o=0,_ref9=num-1;0<=_ref9?_o<=_ref9:_o>=_ref9;j=0<=_ref9?++_o:--_o){newCentroids[j]=null}for(i=_p=0,_ref10=n-1;0<=_ref10?_p<=_ref10:_p>=_ref10;i=0<=_ref10?++_p:--_p){cluster=assignments[i];if(newCentroids[cluster]===null){newCentroids[cluster]=values[i]}else{newCentroids[cluster]+=values[i]}}for(j=_q=0,_ref11=num-1;0<=_ref11?_q<=_ref11:_q>=_ref11;j=0<=_ref11?++_q:--_q){newCentroids[j]*=1/clusterSizes[j]}repeat=false;for(j=_r=0,_ref12=num-1;0<=_ref12?_r<=_ref12:_r>=_ref12;j=0<=_ref12?++_r:--_r){if(newCentroids[j]!==centroids[i]){repeat=true;break}}centroids=newCentroids;nb_iters++;if(nb_iters>200){repeat=false}}kClusters={};for(j=_s=0,_ref13=num-1;0<=_ref13?_s<=_ref13:_s>=_ref13;j=0<=_ref13?++_s:--_s){kClusters[j]=[]}for(i=_t=0,_ref14=n-1;0<=_ref14?_t<=_ref14:_t>=_ref14;i=0<=_ref14?++_t:--_t){cluster=assignments[i];kClusters[cluster].push(values[i])}tmpKMeansBreaks=[];for(j=_u=0,_ref15=num-1;0<=_ref15?_u<=_ref15:_u>=_ref15;j=0<=_ref15?++_u:--_u){tmpKMeansBreaks.push(kClusters[j][0]);tmpKMeansBreaks.push(kClusters[j][kClusters[j].length-1])}tmpKMeansBreaks=tmpKMeansBreaks.sort(function(a,b){return a-b});limits.push(tmpKMeansBreaks[0]);for(i=_v=1,_ref16=tmpKMeansBreaks.length-1;_v<=_ref16;i=_v+=2){if(!isNaN(tmpKMeansBreaks[i])){limits.push(tmpKMeansBreaks[i])}}}return limits};root=typeof exports!=="undefined"&&exports!==null?exports:this;type=function(){var classToType,name,_i,_len,_ref3;classToType={};_ref3="Boolean Number String Function Array Date RegExp Undefined Null".split(" ");for(_i=0,_len=_ref3.length;_i<_len;_i++){name=_ref3[_i];classToType["[object "+name+"]"]=name.toLowerCase()}return function(obj){var strType;strType=Object.prototype.toString.call(obj);return classToType[strType]||"object"}}();if((_ref3=root.type)==null){root.type=type}Array.max=function(array){return Math.max.apply(Math,array)};Array.min=function(array){return Math.min.apply(Math,array)};limit=function(x,min,max){if(min==null){min=0}if(max==null){max=1}if(x<min){x=min}if(x>max){x=max}return x};unpack=function(args){if(args.length===3){return args}else{return args[0]}};TWOPI=Math.PI*2;PITHIRD=Math.PI/3;cos=Math.cos;root=typeof exports!=="undefined"&&exports!==null?exports:this;chroma=(_ref4=root.chroma)!=null?_ref4:root.chroma={};chroma.brewer=brewer={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]};root=typeof exports!=="undefined"&&exports!==null?exports:this;chroma=(_ref5=root.chroma)!=null?_ref5:root.chroma={};chroma.colors=colors={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6"}}).call(this);

(function(){window.UserCountryMap=window.UserCountryMap||{};var VisitorMap=window.UserCountryMap.VisitorMap=function(config,theWidget){this.config=config;this.theWidget=theWidget||false;this.run();};$.extend(VisitorMap.prototype,{run:function(){var self=this,config=self.config;function $$(selector){return $(selector,self.theWidget?self.theWidget.element:undefined);}
var mapContainer=$$('.UserCountryMap_map').get(0),map=self.map=Kartograph.map(mapContainer),main=$$('.UserCountryMap_container'),worldTotalVisits=0,width=main.width(),_=config._;config.noDataColor='#E4E2D7';self.widget=$$('.widgetUserCountryMapvisitorMap').parent();function _reportParams(module,action,countryFilter){var params=$.extend(config.reqParams,{module:'API',method:'API.getProcessedReport',apiModule:module,apiAction:action,filter_limit:-1,limit:-1});if(countryFilter){$.extend(params,{filter_column:'country',filter_sort_column:'nb_visits',filter_pattern:countryFilter});}
return params;}
function ajax(params,dataType){dataType=dataType||'json';params=$.extend({},params);var token_auth=''+params.token_auth;delete params['token_auth'];return $.ajax({url:'index.php?'+$.param(params),dataType:dataType,data:{token_auth:token_auth},type:'POST'});}
function minmax(values){values=values.sort(function(a,b){return Number(a)-Number(b);});return{min:values[0],max:values[values.length-1],median:values[Math.floor(values.length*0.5)],p33:values[Math.floor(values.length*0.33)],p66:values[Math.floor(values.length*0.66)],p90:values[Math.floor(values.length*0.9)]};}
function formatNumber(v){v=Number(v);return v>1000000?(v/1000000).toFixed(1)+'m':v>1000?(v/1000).toFixed(1)+'k':v;}
function formatValueForTooltips(data,metric,id){var val=data[metric]%1===0||Number(data[metric])!=data[metric]?data[metric]:data[metric].toFixed(1),v=_[metric].replace('%s','<b>'+val+'</b>');if(val==1&&metric=='nb_visits')v=_.one_visit;function avgTime(d){return d['sum_visit_length']/d['nb_visits'];}
if(metric.substr(0,3)=='nb_'&&metric!='nb_actions_per_visit'){var total;if(id.length==3)total=UserCountryMap.countriesByIso[id][metric];else if(id=='world')total=_worldTotal;else{total=0;$.each(UserCountryMap.countriesByIso,function(iso,country){if(UserCountryMap.ISO3toCONT[iso]==id){total+=country[metric];}});}
if(total){v+=' ('+formatPercentage(data[metric]/total)+')';}}else if(metric=='avg_time_on_site'){v+='<br/> (over '+data.nb_visits+' visits)';}
return v;}
function getColorScale(rows,metric,filter,choropleth){var colscale;function addLegendItem(val,first){var d=$('<div>'),r=$('<div>'),l=$('<div>'),metric=$$('.userCountryMapSelectMetrics').val(),v=formatNumber(Math.round(val))+(metric=='avg_time_on_site'?first?' sec':'s':'');d.css({width:17,height:17,float:'left',background:colscale(val)});l.css({'margin-left':20,'line-height':'20px','text-align':'right'}).html(v);r.css({clear:'both',height:19});r.append(d).append(l);$('.UserCountryMap-legend .content').append(r);}
var stats,values=[],id=self.lastSelected,c;$.each(rows,function(i,r){if(!$.isFunction(filter)||filter(r)){var v=quantify(r,metric);if(!isNaN(v))values.push(v);}});stats=minmax(values);if(stats.min==stats.max){colscale=function(){return chroma.hex('#CDDAEF');};if(choropleth){$('.UserCountryMap-legend .content').html('').show();addLegendItem(stats.min,true);}
return colscale;}
colscale=chroma.scale().range([choropleth?'#CDDAEF':'#385993','#385993']).domain(values,4,'c').mode('lch');if(metric=='avg_time_on_site'||metric=='nb_actions_per_visit'||metric=='bounce_rate'){if(id.length==3){c=(stats.p90-stats.min)/(stats.max-stats.min);colscale=chroma.scale(['#385993','#385993','#E87500','#E87500'],[0,c,c+0.001,1]).domain(chroma.limits(rows,'c',5,'curMetric',filter)).mode('hsl');}}
if(choropleth){$('.UserCountryMap-legend .content').html('').show();var itemExists={};$.each(chroma.limits(values,'k',3),function(i,v){if(itemExists[v])return;addLegendItem(v,i===0);itemExists[v]=true;});}else{$('.UserCountryMap-legend .content').hide();}
return colscale;}
function formatPercentage(val){if(val<0.001)return'< 0.1%';return Math.round(1000*val)/10+'%';}
function onResizeLazy(){clearTimeout(self._resizeTimer);self._resizeTimer=setTimeout(self.resize.bind(self),300);}
function activateButton(btn){$$('.UserCountryMap-view-mode-buttons a').removeClass('activeIcon');btn.addClass('activeIcon');$$('.UserCountryMap-activeItem').offset({left:btn.offset().left});}
function initUserInterface(){$$('.userCountryMapSelectCountry').off('change').change(function(){updateState($$('.userCountryMapSelectCountry').val());});function zoomOut(){var t=self.lastSelected,tgt='world';if(t.length==3&&UserCountryMap.ISO3toCONT[t]!==undefined){tgt=UserCountryMap.ISO3toCONT[t];}
updateState(tgt);}
$$('.UserCountryMap-btn-zoom').off('click').click(zoomOut);$$('.UserCountryMap_map').off('click').click(zoomOut);$(window).off('resize').resize(onResizeLazy);$$('.userCountryMapSelectMetrics').off('change').change(function(){updateState(self.lastSelected);});(function(btn){btn.off('click').click(function(){if(self.lastSelected.length==3){if(self.mode!="city"){self.mode="city";updateState(self.lastSelected);}}});})($$('.UserCountryMap-btn-city'));(function(btn){btn.off('click').click(function(){if(self.mode!="region"){$$('.UserCountryMap-view-mode-buttons a').removeClass('activeIcon');self.mode="region";updateState(self.lastSelected);}});})($$('.UserCountryMap-btn-region'));var bl=$('<div id="UserCountryMap-black"></div>');bl.hide();$$('.UserCountryMap_map').append(bl);var infobtn=$('.UserCountryMap-info-btn');infobtn.off('mouseenter').on('mouseenter',function(e){$(infobtn.data('tooltip-target')).show();}).off('mouseleave').on('mouseleave',function(e){$(infobtn.data('tooltip-target')).hide();});$('.UserCountryMap-tooltip').hide();}
function updateState(id){if(self.mode=="city"&&id.length!=3){self.mode="region";}
var metric=$$('.userCountryMapSelectMetrics').val();self.widget.dashboardWidget('setParameters',{lastMap:id,viewMode:self.mode,lastMetric:metric});$('.UserCountryMap-info-btn').hide();try{if(id.length==3){renderCountryMap(id,metric);}else{renderWorldMap(id,metric);}}catch(e){$('.UserCountryMap-info .content').html(e);$('.UserCountryMap-info').show();}
_updateUI(id,metric);self.lastSelected=id;}
function _updateUI(id,metric){if(self.mode=="city"){activateButton($$('.UserCountryMap-btn-city'));}else{activateButton($$('.UserCountryMap-btn-region'));}
var countrySelect=$$('.userCountryMapSelectCountry');countrySelect.val(id);var zoom=$$('.UserCountryMap-btn-zoom');if(id=='world')zoom.addClass('inactiveIcon');else zoom.removeClass('inactiveIcon');var flag=$$('.userCountryMapFlag'),regionBtn=$$('.UserCountryMap-btn-region');if(id.length==3){if(UserCountryMap.countriesByIso[id]){flag.css({'background-image':'url('+UserCountryMap.countriesByIso[id].flag+')','background-repeat':'no-repeat','background-position':'5px 5px'});$$('.UserCountryMap-btn-city').removeClass('inactiveIcon').show();$('span',regionBtn).html(regionBtn.data('region'));}else{$$('.UserCountryMap-btn-city').addClass('inactiveIcon');$('.map-stats').html(_.no_data);$('.map-title').html('');return;}}else{flag.css({'background':'none'});$$('.UserCountryMap-btn-city').addClass('inactiveIcon').hide();$('span',regionBtn).html(regionBtn.data('country'));}
var mapTitle=id.length==3?UserCountryMap.countriesByIso[id].name:$$('.userCountryMapSelectCountry option[value='+id+']').html(),totalVisits=0;$('.map-title').html(mapTitle);$$('.widgetUserCountryMapvisitorMap .widgetName .map-title').html(' – '+mapTitle);if(id.length==3){totalVisits=UserCountryMap.countriesByIso[id]['nb_visits'];}else if(id.length==2){$.each(UserCountryMap.countriesByIso,function(iso,country){if(UserCountryMap.ISO3toCONT[iso]==id){totalVisits+=country['nb_visits'];}});}else{totalVisits=self.config.visitsSummary['nb_visits'];}
if(id.length==3){$('.map-stats').html(formatValueForTooltips(UserCountryMap.countriesByIso[id],metric,'world'));}else{$('.map-stats').html(_.nb_visits.replace('%s','<b>'+formatNumber(totalVisits)+'</b>')+(id!='world'?' ('+
formatPercentage(totalVisits/worldTotalVisits)+')':''));}}
function renderWorldMap(target,metric){function updateColorsAndTooltips(metric){colscale=getColorScale(UserCountryMap.countryData,metric,function(r){if(target.length==2){return UserCountryMap.ISO3toCONT[r.iso]==target;}else{return true;}},true);function countryFill(data){var d=UserCountryMap.countriesByIso[data.iso];if(d===null){return self.config.noDataColor;}else{return colscale(d[metric]);}}
map.getLayer('countries').style('fill',countryFill).on('mouseenter',function(d,path,evt){if(evt.shiftKey){path.attr('fill','#f4f45b');}}).on('mouseleave',function(d,path,evt){if($.inArray(UserCountryMap.countriesByIso[d.iso].name,_rowEvolution.labels)==-1){path.attr('fill',countryFill(d));}});map.getLayer('countries').tooltips(function(data){var metric=$$('.userCountryMapSelectMetrics').val(),country=UserCountryMap.countriesByIso[data.iso];return'<h3>'+country.name+'</h3>'+
formatValueForTooltips(country,metric,target);});}
if(target==self.lastSelected){updateColorsAndTooltips(metric);return;}
_updateMap(target+'.svg',function(){map.addLayer('countries',{name:'context',filter:function(pd){return UserCountryMap.countriesByIso[pd.iso]===undefined;},tooltips:function(pd){return'<h3>'+pd.name+'</h3>'+_.no_visit;}});map.addLayer('countries',{name:'countryBG',filter:function(pd){return UserCountryMap.countriesByIso[pd.iso]!==undefined;}});map.addLayer('countries',{key:'iso',filter:function(pd){return UserCountryMap.countriesByIso[pd.iso]!==undefined;},click:function(data,path,evt){evt.stopPropagation();if(evt.shiftKey||_rowEvolution.labels.length){if(evt.altKey){path.attr('fill','#f4f45b');addMultipleRowEvolution('getCountry',UserCountryMap.countriesByIso[data.iso].name);}else{showRowEvolution('getCountry',UserCountryMap.countriesByIso[data.iso].name);updateColorsAndTooltips(metric);}
return;}
var tgt;if(self.lastSelected!='world'||UserCountryMap.countriesByIso[data.iso]===undefined){tgt=data.iso;}else{tgt=UserCountryMap.ISO3toCONT[data.iso];}
updateState(tgt);}});updateColorsAndTooltips(metric);});}
function _updateMap(svgUrl,callback){map.loadMap(config.svgBasePath+svgUrl,function(){map.clear();self.resize();callback();$('.ui-tooltip').remove();},{padding:-3});}
function indicateLoading(){$$('.UserCountryMap-black').show();$$('.UserCountryMap-black').css('opacity',0);$$('.UserCountryMap-black').animate({opacity:0.5},400);$$('.UserCountryMap .loadingPiwik').show();}
function loadingComplete(){$$('.UserCountryMap-black').hide();$$('.UserCountryMap .loadingPiwik').hide();}
function quantify(d,metric){if(!metric)metric=$$('.userCountryMapSelectMetrics').val();switch(metric){case'avg_time_on_site':return d.sum_visit_length/d.nb_visits;case'bounce_rate':return d.bounce_count/d.nb_visits;default:return d[metric];}}
function aggregate(rows,groupBy){var groups={};$.each(rows,function(i,row){var g_id=groupBy?groupBy(row):'X';g_id=g_id===true?$.isNumeric(i)&&i===Number(i)?false:i:g_id;if(g_id){if(!groups[g_id]){groups[g_id]={nb_visits:0,nb_actions:0,sum_visit_length:0,bounce_count:0};}
$.each(groups[g_id],function(metric){groups[g_id][metric]+=row[metric];});}});$.each(groups,function(g_id,group){var apv=group.nb_actions/group.nb_visits,ats=group.sum_visit_length/group.nb_visits,br=(group.bounce_count*100/group.bounce_count);group['nb_actions_per_visit']=apv;group['avg_time_on_site']=new Date(0,0,0,ats/3600,ats%3600/60,ats%60).toLocaleTimeString();group['bounce_rate']=(br%1!==0?br.toFixed(1):br)+"%";});return groupBy?groups:groups.X;}
function displayUnlocatableCount(unlocated,total){$('.unlocated-stats').html($('.unlocated-stats').data('tpl').replace('%s',unlocated).replace('%p','('+formatPercentage(unlocated/total)+')').replace('%c',UserCountryMap.countriesByIso[self.lastSelected].name));$('.UserCountryMap-info-btn').show();}
function renderCountryMap(iso){var countryMap={zoomed:false,lastRequest:false,lastResponse:false};function updateRegionColors(){indicateLoading();ajax(_reportParams('UserCountry','getRegion',UserCountryMap.countriesByIso[iso].iso2)).done(function(data){loadingComplete();var regionDict={},totalCountryVisits=UserCountryMap.countriesByIso[iso].nb_visits,unlocated=totalCountryVisits;function regionCode(region){var key=UserCountryMap.keys[iso]||'fips';return key.substr(0,4)=="fips"?region[key].substr(2):region[key];}
function regionExistsInMap(code){var key=UserCountryMap.keys[iso]||'fips',q={};q[key]=key.substr(0,4)=='fips'?UserCountryMap.countriesByIso[iso].fips+code:code;if(map.getLayer('regions').getPaths(q).length===0){return false;}
return true;}
$.each(data.reportData,function(i,row){regionDict[data.reportMetadata[i].region]=$.extend(row,data.reportMetadata[i],{curMetric:quantify(row,metric)});});var metric=$$('.userCountryMapSelectMetrics').val();if(UserCountryMap.aggregate[iso]){var aggregated=aggregate(regionDict,function(row){var id=row.region,res=false;$.each(UserCountryMap.aggregate[iso].groups,function(group,codes){if($.inArray(id,codes)>-1){res=group;}});return res;});$.each(aggregated,function(id,group){group.curMetric=quantify(group,metric);regionDict[id]=group;});}
$.each(regionDict,function(key,region){if(regionExistsInMap(key))unlocated-=region.nb_visits;});displayUnlocatableCount(unlocated,totalCountryVisits);colscale=getColorScale(regionDict,'curMetric',null,true);function regionFill(data){var code=regionCode(data);return regionDict[code]===undefined?'#fff':colscale(regionDict[code].curMetric);}
map.getLayer('regions').style('fill',regionFill).style('stroke',function(data){return regionDict[regionCode(data)]===undefined?'#bbb':'#3C6FB6';}).sort(function(data){var code=regionCode(data);return regionDict[code]===undefined?-1:regionDict[code].curMetric;}).tooltips(function(data){var metric=$$('.userCountryMapSelectMetrics').val(),region=regionDict[regionCode(data)];if(region===undefined){return'<h3>'+data.name+'</h3><p>'+_.nb_visits.replace('%s','<b>0</b>')+'</p>';}
return'<h3>'+data.name+'</h3>'+
formatValueForTooltips(region,metric,iso);}).on('click',function(d,path,evt){var region=regionDict[regionCode(d)];if(region&&region.label){if(evt.shiftKey){path.attr('fill','#f4f45b');addMultipleRowEvolution('getRegion',region.label);}else{map.getLayer('regions').style('fill',regionFill);showRowEvolution('getRegion',region.label);}}}).on('mouseenter',function(d,path,evt){var region=regionDict[regionCode(d)];if(region&&region.label){if(evt.shiftKey){path.attr('fill','#f4f45b');}}}).on('mouseleave',function(d,path,evt){var region=regionDict[regionCode(d)];if(region&&region.label){if($.inArray(region.label,_rowEvolution.labels)==-1){path.attr('fill',regionFill(d));}}}).style('cursor',function(d){return regionDict[regionCode(d)]&&regionDict[regionCode(d)].label?'pointer':'default';});$.each(regionDict,function(code,region){if(!regionExistsInMap(code)){console.warn('possible region mismatch!',code,region.nb_visits);}});});}
function updateCitySymbols(){if(map.getLayer('regions'))map.getLayer('regions').style('fill','#fff');indicateLoading();ajax(_reportParams('UserCountry','getCity',UserCountryMap.countriesByIso[iso].iso2)).done(function(data){loadingComplete();var metric=$$('.userCountryMapSelectMetrics').val(),colscale,totalCountryVisits=UserCountryMap.countriesByIso[iso].nb_visits,unlocated=totalCountryVisits,cities=[];$.each(data.reportData,function(i,row){unlocated-=row.nb_visits;cities.push($.extend(row,data.reportMetadata[i],{curMetric:quantify(row,metric)}));});displayUnlocatableCount(unlocated,totalCountryVisits);cities.sort(function(a,b){return b.curMetric-a.curMetric;});colscale=getColorScale(cities,metric);var radscale=$K.scale.linear(cities.concat({curMetric:0}),'curMetric');var area=map.container.width()*map.container.height(),sumArea=0,f={nb_visits:0.002,nb_actions:0.002,avg_time_on_site:0.02,nb_actions_per_visit:0.02,bounce_rate:0.02},maxRad;$.each(cities,function(i,city){sumArea+=isNaN(city.curMetric)?0:Math.pow(radscale(city.curMetric),2);});maxRad=Math.sqrt(area*f[metric]/sumArea);radscale=$K.scale.sqrt(cities.concat({curMetric:0}),'curMetric').range([2,maxRad+2]);var is_rate=metric.substr(0,3)!='nb_'||metric=='nb_actions_per_visit';var citySymbols=map.addSymbols({type:Kartograph.LabeledBubble,data:cities,clustering:'noverlap',clusteringOpts:{size:128,tolerance:0},title:function(d){return radscale(d.curMetric)>10?formatNumber(d.curMetric):'';},labelattrs:{fill:'#fff','font-size':11,stroke:false,cursor:'pointer'},filter:function(d){if(isNaN(d.lat)||isNaN(d.long))return false;return is_rate?d.nb_visits>5&&d.curMetric:d.curMetric;},aggregate:function(rows){var row=aggregate(rows);row.city_names=[];row.label=rows[0].label;$.each(rows,function(i,r){row.city_names=row.city_names.concat(r.city_names?r.city_names:[r.city_name]);});row.city_name=row.city_names[0]+(row.city_names.length>1?' '+_.and_n_others.replace('%s',(row.city_names.length-1)):'');row.curMetric=quantify(row,metric);return row;},sortBy:'radius desc',location:function(city){return[city.long,city.lat];},radius:function(city){return radscale(city.curMetric);},tooltip:function(city){return'<h3>'+city.city_name+'</h3>'+
formatValueForTooltips(city,metric,iso);},attrs:function(city){return{fill:colscale(city.curMetric).hex(),'fill-opacity':0.7,stroke:'#fff',cursor:'pointer'};},mouseenter:function(city,symbol,evt){symbol.path.attr({'fill-opacity':1,'stroke':'#000000','stroke-opacity':1,'stroke-width':2});if(evt.shiftKey){symbol.path.attr({fill:'#f4f45b'});if(symbol.label)symbol.label.attr({fill:'#000'});}},mouseleave:function(city,symbol){symbol.path.attr({'fill-opacity':0.7,'stroke-opacity':1,'stroke-width':1,'stroke':'#ffffff'});if($.inArray(city.label,_rowEvolution.labels)==-1){symbol.path.attr({fill:colscale(city.curMetric)});if(symbol.label)symbol.label.attr({fill:'#fff'});}},click:function(city,symbol,evt){if(evt.shiftKey){addMultipleRowEvolution('getCity',city.label);symbol.path.attr('fill','#f4f45b');if(symbol.label)symbol.label.attr('fill','#000');}else{showRowEvolution('getCity',city.label);citySymbols.update({attrs:function(city){return{fill:colscale(city.curMetric)};}});}}});});}
_updateMap(iso+'.svg',function(){map.addLayer('context',{key:'iso',filter:function(pd){return UserCountryMap.countriesByIso[pd.iso]===undefined;}});map.addLayer('context',{key:'iso',name:'context-clickable',filter:function(pd){return UserCountryMap.countriesByIso[pd.iso]!==undefined;},click:function(path,p,evt){evt.stopPropagation();updateState(path.iso);},tooltips:function(data){if(UserCountryMap.countriesByIso[data.iso]===undefined){return'no data';}
var metric=$$('.userCountryMapSelectMetrics').val(),country=UserCountryMap.countriesByIso[data.iso];return'<h3>'+country.name+'</h3>'+
formatValueForTooltips(country,metric,'world');}});function isThisCountry(d){return d.iso==iso;}
map.addLayer("context",{name:"regionBG",filter:isThisCountry});map.addLayer("context",{name:"regionBG-fill",filter:isThisCountry});map.addLayer('regions',{key:'fips',name:self.mode!="region"?"regions2":"regions",styles:{stroke:'#aaa'},click:function(d,p,evt){evt.stopPropagation();}});function filtCountryLabels(data){return data.iso!=iso&&map.getLayer('context-clickable')&&map.getLayer('context-clickable').getPath(data.iso)&&Math.abs(map.getLayer('context-clickable').getPath(data.iso).path.area())>700;}
function countryLabelPos(data){var CLP=UserCountryMap.customLabelPositions;if(CLP[iso]&&CLP[iso][data.iso])return CLP[iso][data.iso];return'context-clickable.'+data.iso;}
map.addSymbols({data:map.getLayer('context-clickable').getPathsData(),type:$K.Label,filter:filtCountryLabels,location:countryLabelPos,text:function(data){return UserCountryMap.countriesByIso[data.iso].iso2;},'class':'countryLabelBg'});map.addSymbols({data:map.getLayer('context-clickable').getPathsData(),type:$K.Label,filter:filtCountryLabels,location:countryLabelPos,text:function(data){return UserCountryMap.countriesByIso[data.iso].iso2;},'class':'countryLabel'});if(!UserCountryMap.countriesByIso[iso])return;if(self.mode=="region"){updateRegionColors();}else{updateCitySymbols();}});}
var _rowEvolution={labels:[],method:false};function addMultipleRowEvolution(method,label){if(method!=_rowEvolution.method){_rowEvolution={method:method,labels:[]};}
_rowEvolution.labels.push(label);}
function showRowEvolution(method,label,column){var box=Piwik_Popover.showLoading('Row Evolution'),multiple,oldLabels=_rowEvolution.labels.slice();multiple=method==_rowEvolution.method&&_rowEvolution.labels.length>0;if(multiple){_rowEvolution.labels.push(label);$.each(_rowEvolution.labels,function(i,l){_rowEvolution.labels[i]=l.replace(/, /g,'%2C%20');});}
var requestParams=$.extend({},{apiMethod:'UserCountry.'+method,label:multiple?_rowEvolution.labels.join(','):label.replace(/, /g,'%2C%20'),disableLink:1,module:'CoreHome',idSite:config.reqParams.idSite,period:config.reqParams.period,date:config.reqParams.date,action:multiple?'getMultiRowEvolutionPopover':'getRowEvolutionPopover',token_auth:config.reqParams.token_auth});if(column){requestParams.column=column;}
ajax(requestParams,'html').done(function(html){Piwik_Popover.setContent(html);var title=box.find('div.popover-title');if(title.size()>0){Piwik_Popover.setTitle(title.html());title.remove();}
box.find('.compare-container').hide();box.find('.rowevolution-startmulti').hide();box.find('.multirowevoltion-metric').off('change').change(function(e){_rowEvolution.labels=oldLabels;showRowEvolution(method,label,box.find('.multirowevoltion-metric').val());});});_rowEvolution.labels=[];}
ajax(_reportParams('UserCountry','getCountry')).done(function(report){var metrics=$$('.userCountryMapSelectMetrics option');var countryData=[],countrySelect=$$('.userCountryMapSelectCountry'),countriesByIso={};UserCountryMap.lastReportMetricStats={};$.each(report.reportData,function(i,data){var meta=report.reportMetadata[i],country={name:data.label,iso2:meta.code.toUpperCase(),fips:meta.code.toUpperCase(),iso:UserCountryMap.ISO2toISO3[meta.code.toUpperCase()],flag:meta.logo};if(UserCountryMap.differentFIPS[country.iso2]){country.fips=UserCountryMap.differentFIPS[country.iso2];}
$.each(metrics,function(i,metric){metric=$(metric).val();country[metric]=data[metric];});countryData.push(country);countriesByIso[country.iso]=country;worldTotalVisits+=country['nb_visits'];});_worldTotal=worldTotalVisits;countryData.sort(function(a,b){return a.name>b.name?1:-1;});UserCountryMap.countryData=countryData;UserCountryMap.countriesByIso=countriesByIso;map.loadCSS(config.mapCssPath,function(){$$('.UserCountryMap .loadingPiwik').hide();$('.mapWidgetStatus').height(0);var params=self.widget.dashboardWidget('getWidgetObject').parameters;self.mode=params&&params.viewMode?params.viewMode:'region';if(params&&params.lastMetric)$$('.userCountryMapSelectMetrics').val(params.lastMetric);updateState(params&&params.lastMap?params.lastMap:'world');$.each(countryData,function(i,country){countrySelect.append('<option value="'+country.iso+'">'+country.name+'</option>');});initUserInterface();});});function hideOverlay(e){var overlay=$('.content',$(e.target).parents('.UserCountryMap-overlay'));if(overlay.data('locked'))return;overlay.data('locked',true);overlay.fadeOut(200);$$('.UserCountryMap').mouseleave(function(){overlay.fadeIn(200);$$('.UserCountryMap').parent().off('mouseleave');setTimeout(function(){overlay.data('locked',false);},1000);});var offset=$$('.UserCountryMap').offset(),dim={x:overlay.offset().left-offset.left,y:overlay.offset().top-offset.top,w:overlay.width(),h:overlay.height()};$$('.UserCountryMap').mousemove(function(e){var mx=e.pageX-offset.left,my=e.pageY-offset.top,pad=20,outside=mx<dim.x-pad||mx>dim.x+dim.w+pad||my<dim.y-pad||my>dim.y+dim.h+pad;if(outside){$$('.UserCountryMap').parent().off('mouseleave');setTimeout(function(){overlay.fadeIn(200);setTimeout(function(){overlay.data('locked',false);},1000);},100);}});}
$('.UserCountryMap-overlay').off('mouseenter').on('mouseenter',hideOverlay);$$('.widgetUserCountryMapvisitorMap .widgetName span').remove();$$('.widgetUserCountryMapvisitorMap .widgetName').append('<span class="map-title"></span>');},resize:function(){var ratio,w,h,map=this.map,maxHeight=$(window).height()-(this.theWidget&&this.theWidget.isMaximised?150:79);ratio=map.viewAB.width/map.viewAB.height;w=map.container.width();h=w/ratio;h=Math.min(maxHeight,h);map.container.height(h-2);map.resize(w,h);if(w<355)$('.tableIcon span').hide();else $('.tableIcon span').show();},destroy:function(){this.map.clear();$(this.map.container).html('');}});}());$.extend(UserCountryMap,{ISO2toISO3:{"BD":"BGD","BE":"BEL","BF":"BFA","BG":"BGR","BA":"BIH","BB":"BRB","WF":"WLF","BL":"BLM","BM":"BMU","BN":"BRN","BO":"BOL","BH":"BHR","BI":"BDI","BJ":"BEN","BT":"BTN","JM":"JAM","BV":"BVT","BW":"BWA","WS":"WSM","BQ":"BES","BR":"BRA","BS":"BHS","JE":"JEY","BY":"BLR","BZ":"BLZ","RU":"RUS","RW":"RWA","RS":"SRB","TL":"TLS","RE":"REU","TM":"TKM","TJ":"TJK","RO":"ROU","TK":"TKL","GW":"GNB","GU":"GUM","GT":"GTM","GS":"SGS","GR":"GRC","GQ":"GNQ","GP":"GLP","JP":"JPN","GY":"GUY","GG":"GGY","GF":"GUF","GE":"GEO","GD":"GRD","GB":"GBR","GA":"GAB","SV":"SLV","GN":"GIN","GM":"GMB","GL":"GRL","GI":"GIB","GH":"GHA","OM":"OMN","TN":"TUN","JO":"JOR","HR":"HRV","HT":"HTI","HU":"HUN","HK":"HKG","HN":"HND","HM":"HMD","VE":"VEN","PR":"PRI","PS":"PSE","PW":"PLW","PT":"PRT","SJ":"SJM","PY":"PRY","IQ":"IRQ","PA":"PAN","PF":"PYF","PG":"PNG","PE":"PER","PK":"PAK","PH":"PHL","PN":"PCN","PL":"POL","PM":"SPM","ZM":"ZMB","EH":"ESH","EE":"EST","EG":"EGY","ZA":"ZAF","EC":"ECU","IT":"ITA","VN":"VNM","SB":"SLB","ET":"ETH","SO":"SOM","ZW":"ZWE","SA":"SAU","ES":"ESP","ER":"ERI","ME":"MNE","MD":"MDA","MG":"MDG","MF":"MAF","MA":"MAR","MC":"MCO","UZ":"UZB","MM":"MMR","ML":"MLI","MO":"MAC","MN":"MNG","MH":"MHL","MK":"MKD","MU":"MUS","MT":"MLT","MW":"MWI","MV":"MDV","MQ":"MTQ","MP":"MNP","MS":"MSR","MR":"MRT","IM":"IMN","UG":"UGA","TZ":"TZA","MY":"MYS","MX":"MEX","IL":"ISR","FR":"FRA","IO":"IOT","SH":"SHN","FI":"FIN","FJ":"FJI","FK":"FLK","FM":"FSM","FO":"FRO","NI":"NIC","NL":"NLD","NO":"NOR","NA":"NAM","VU":"VUT","NC":"NCL","NE":"NER","NF":"NFK","NG":"NGA","NZ":"NZL","NP":"NPL","NR":"NRU","NU":"NIU","CK":"COK","XK":"XKX","CI":"CIV","CH":"CHE","CO":"COL","CN":"CHN","CM":"CMR","CL":"CHL","CC":"CCK","CA":"CAN","CG":"COG","CF":"CAF","CD":"COD","CZ":"CZE","CY":"CYP","CX":"CXR","CS":"SCG","CR":"CRI","CW":"CUW","CV":"CPV","CU":"CUB","SZ":"SWZ","SY":"SYR","SX":"SXM","KG":"KGZ","KE":"KEN","SS":"SSD","SR":"SUR","KI":"KIR","KH":"KHM","KN":"KNA","KM":"COM","ST":"STP","SK":"SVK","KR":"KOR","SI":"SVN","KP":"PRK","KW":"KWT","SN":"SEN","SM":"SMR","SL":"SLE","SC":"SYC","KZ":"KAZ","KY":"CYM","SG":"SGP","SE":"SWE","SD":"SDN","DO":"DOM","DM":"DMA","DJ":"DJI","DK":"DNK","VG":"VGB","DE":"DEU","YE":"YEM","DZ":"DZA","US":"USA","UY":"URY","YT":"MYT","UM":"UMI","LB":"LBN","LC":"LCA","LA":"LAO","TV":"TUV","TW":"TWN","TT":"TTO","TR":"TUR","LK":"LKA","LI":"LIE","LV":"LVA","TO":"TON","LT":"LTU","LU":"LUX","LR":"LBR","LS":"LSO","TH":"THA","TF":"ATF","TG":"TGO","TD":"TCD","TC":"TCA","LY":"LBY","VA":"VAT","VC":"VCT","AE":"ARE","AD":"AND","AG":"ATG","AF":"AFG","AI":"AIA","VI":"VIR","IS":"ISL","IR":"IRN","AM":"ARM","AL":"ALB","AO":"AGO","AN":"ANT","AQ":"ATA","AS":"ASM","AR":"ARG","AU":"AUS","AT":"AUT","AW":"ABW","IN":"IND","AX":"ALA","AZ":"AZE","IE":"IRL","ID":"IDN","UA":"UKR","QA":"QAT","MZ":"MOZ","TI":"TIB"},ISO3toCONT:{"AGO":"AF","DZA":"AF","EGY":"AF","BGD":"AS","NER":"AF","LIE":"EU","NAM":"AF","BGR":"EU","BOL":"SA","GHA":"AF","CCK":"AS","PAK":"AS","CPV":"AF","JOR":"AS","LBR":"AF","LBY":"AF","MYS":"AS","DOM":"NA","PRI":"NA","SXM":"NA","PRK":"AS","PSE":"AS","TZA":"AF","BWA":"AF","KHM":"AS","UMI":"OC","NIC":"NA","TTO":"NA","ETH":"AF","PRY":"SA","HKG":"AS","SAU":"AS","LBN":"AS","SVN":"EU","BFA":"AF","CHE":"EU","MRT":"AF","HRV":"EU","CHL":"SA","CHN":"AS","KNA":"NA","SLE":"AF","JAM":"NA","SMR":"EU","GIB":"EU","DJI":"AF","GIN":"AF","FIN":"EU","URY":"SA","THA":"AS","STP":"AF","SYC":"AF","NPL":"AS","CXR":"AS","LAO":"AS","YEM":"AS","BVT":"AN","ZAF":"AF","KIR":"OC","PHL":"AS","ROU":"EU","VIR":"NA","SYR":"AS","MAC":"AS","MAF":"NA","MLT":"EU","KAZ":"AS","TCA":"NA","PYF":"OC","NIU":"OC","DMA":"NA","BEN":"AF","GUF":"SA","BEL":"EU","MSR":"NA","TGO":"AF","DEU":"EU","GUM":"OC","LKA":"AS","SSD":"AF","FLK":"SA","GBR":"EU","BES":"NA","GUY":"SA","CRI":"NA","CMR":"AF","MAR":"AF","MNP":"OC","LSO":"AF","HUN":"EU","TKM":"AS","SUR":"SA","NLD":"EU","BMU":"NA","HMD":"AN","TCD":"AF","GEO":"AS","MNE":"EU","MNG":"AS","MHL":"OC","MTQ":"NA","BLZ":"NA","NFK":"OC","MMR":"AS","AFG":"AS","BDI":"AF","VGB":"NA","BLR":"EU","BLM":"NA","GRD":"NA","TKL":"OC","GRC":"EU","RUS":"EU","GRL":"NA","SHN":"AF","AND":"EU","MOZ":"AF","TJK":"AS","XKX":"EU","HTI":"NA","MEX":"NA","ANT":"NA","ZWE":"AF","LCA":"NA","IND":"AS","LVA":"EU","BTN":"AS","VCT":"NA","VNM":"AS","NOR":"EU","CZE":"EU","ATF":"AN","ATG":"NA","FJI":"OC","IOT":"AS","HND":"NA","MUS":"AF","ATA":"AN","LUX":"EU","ISR":"AS","FSM":"OC","PER":"SA","REU":"AF","IDN":"AS","VUT":"OC","MKD":"EU","COD":"AF","COG":"AF","ISL":"EU","GLP":"NA","COK":"OC","COM":"AF","COL":"SA","NGA":"AF","TLS":"OC","TWN":"AS","PRT":"EU","MDA":"EU","GGY":"EU","MDG":"AF","ECU":"SA","SEN":"AF","NZL":"OC","MDV":"AS","ASM":"OC","SPM":"NA","CUW":"NA","FRA":"EU","LTU":"EU","RWA":"AF","ZMB":"AF","GMB":"AF","WLF":"OC","JEY":"EU","FRO":"EU","GTM":"NA","DNK":"EU","IMN":"EU","AUS":"OC","AUT":"EU","SJM":"EU","VEN":"SA","PLW":"OC","KEN":"AF","MYT":"AF","WSM":"OC","TUR":"AS","ALB":"EU","OMN":"AS","TUV":"OC","ALA":"EU","BRN":"AS","TUN":"AF","PCN":"OC","BRB":"NA","BRA":"SA","CIV":"AF","SRB":"EU","GNQ":"AF","USA":"NA","QAT":"AS","SWE":"EU","AZE":"AS","GNB":"AF","SWZ":"AF","TON":"OC","CAN":"NA","UKR":"EU","KOR":"AS","AIA":"NA","CAF":"AF","SVK":"EU","CYP":"EU","BIH":"EU","SGP":"AS","SGS":"AN","SOM":"AF","UZB":"AS","ERI":"AF","POL":"EU","KWT":"AS","SCG":"EU","GAB":"AF","CYM":"NA","VAT":"EU","EST":"EU","MWI":"AF","ESP":"EU","IRQ":"AS","SLV":"NA","MLI":"AF","IRL":"EU","IRN":"AS","ABW":"NA","PNG":"OC","PAN":"NA","SDN":"AF","SLB":"OC","ESH":"AF","MCO":"EU","ITA":"EU","JPN":"AS","KGZ":"AS","UGA":"AF","NCL":"OC","ARE":"AS","ARG":"SA","BHS":"NA","BHR":"AS","ARM":"AS","NRU":"OC","CUB":"NA","TIB":"AS"},aggregate:{GBR:{groups:{"East Midlands":["H5","D2","D3","H7","J1","H4","L4","J8","J9"],"West Midlands":["","O2","P3","F7","Q4","N1","N4","L6"],"South West":["E6","A4","B7","J4","M6","M3","D4","B2","D6","K5","C6","K4","O4","N9","P8"],"North East":["","D1","D8","F5","I5","K9","N3","J6"],"Scotland":["U4","U5","U7","V2","V4","U5","V8","W2","W4","W5","W7","T5","T6","U9","V9","W6","U1","W1","T7","U3","V1","U6","U8","V5","W9","T9","U2","U9","V3","T8","W8"],"South East":["F2","M4","I6","B9","","B6","E2","I3","P6","K2","N7","G2","K6","G5"],"North West":["","E9","C5","A8","H2","C9","P2","I2"],"Yorkshire and the Humber":["G6","J2","J3","Q5","E1","J7","",""],"Northern Ireland":["R3","S6","T3","Q8","S9","R2","R8","S1","S5","R7","Q6","S7","Q9","S3","R4","T1","T2","R9","R6","R1","S4","R5","T4","S2","Q7","S8"],"London":["H9","A1","A6","B5","B8","C4","C8","D9","E3","E7","F1","G1","G3","G4","I4","K8","L1","N8","O5","O9","P1","P5","F6","F9","G7","E8","F3","F4","H1","H6","I8","M8"],"East":["M5","A5","F8","C3","E4","N5","I9","O3","I1","K3"],"Wales":["X7","X6","Y7","Y8","X3","X4","Y3","Y9","X5","Z3","Y5","Z1","X9","Y1","Z4","X1","X8","Y2","X2","Y4","Y6","Z2"]}},SVN:{groups:{"PS":["08","54","B6"],"NO":["I7","00","13","38","91","94"],"KO":["E6","93","A4","00","A5","16","25","74","76","81","A2","C2"],"SP":["14","36","D2","01","06","07","44","46","J5","E1","84","00"],"LJ":["D4","E3","E5","G4","G7","H6","00","00","00","00","05","09","22","32","37","39","I5","61","64","68","71","72","77","C1"],"JP":["19","35","40","49","50","J9","B7"],"JS":["00","J7","L1","00","00","00","00","00","00","17","66","73","B1","B4","B8","D4"],"PD":["42","28","42","87","E9","00","00","00","18","I3","J1","K7","L3","L8","N2","00","00","00","00","00","00","00","00","00","70","00","00","26","45","55","89","98","B3","C8"],"GO":["03","04","32","52","53","62","A3","B9","D5","F1","F2","K5","00","H4","00","12","B2"],"SA":["D7","E2","F3","I9","92","L7","N3","N5","00","00","00","00","00","00","00","00","00","","11","30","08","57","62","79","83","99","A7","A8","C4","C5","C6","C7","C9"],"ZS":["E7","34","C9","C9"],"PM":["02","47","78","80","86","D1","D6","33","I2","00","00","15","59","I6","00","00","00","00","00","10","29","97","97","A1","A6"]}},FRA:{partial:true,groups:{"A5":["A5","B5"]}},POL:{partial:true,groups:{"82":["82","60"],"85":["85","47","H9"]}},CZE:{partial:true,groups:{"82":["82","70","23","20"],"88":["88","41"]}},BEL:{partial:true,groups:{"12":["12","02"]}},DNK:{partial:true,groups:{"19":["19","07"],"18":["18","15"],"20":["20","12"],"21":["21","11","04"]}}},keys:{"SVN":"region","GBR":"region","ESP":"fips-","USA":"p","CAN":"p"},customLabelPositions:{CZE:{DEU:[12.3,49]},DEU:{AUT:[13.9,48.1]},ESP:{PRT:[-8.5,39.6]},NLD:{BEL:[4.6,51,1],DEU:[6.9,51.5]},CHE:{FRA:[6.2,47.2],AUT:[9.95,47.2],ITA:[9.7,46.0],DEU:[8.14,47.83]},USA:{MEX:[-102,24],CAN:[-97,52]},BIH:{HRV:[15.3,45]}},differentFIPS:{AD:'AN',AG:'AC',AI:'AV',AQ:'AY',AS:'AQ',AT:'AU',AU:'AS',AW:'AA',AZ:'AJ',BA:'BK',BD:'BG',BF:'UV',BG:'BU',BH:'BA',BI:'BY',BJ:'BN',BL:'TB',BM:'BD',BN:'BX',BO:'BL',BS:'BF',BW:'BC',BY:'BO',BZ:'BH',CC:'CK',CD:'CG',CF:'CT',CG:'CF',CH:'SZ',CI:'IV',CK:'CW',CL:'CI',CN:'CH',CR:'CS',CW:'UC',CX:'KT',CZ:'EZ',DE:'GM',DK:'DA',DM:'DO',DO:'DR',DZ:'AG',EE:'EN',EH:'WI',ES:'SP',GA:'GB',GB:'UK',GD:'GJ',GE:'GG',GF:'FG',GG:'GK',GM:'GA',GN:'GV',GQ:'EK',GS:'SX',GU:'GQ',GW:'PU',HN:'HO',HT:'HA',IE:'EI',IL:'IS',IQ:'IZ',IS:'IC',JP:'JA',KH:'CB',KI:'KR',KM:'CN',KN:'SC',KP:'KN',KR:'KS',XK:'KV',KW:'KU',KY:'CJ',LB:'LE',LC:'ST',LI:'LS',LK:'CE',LR:'LI',LS:'LT',LT:'LH',LV:'LG',MA:'MO',MC:'MN',ME:'MJ',MF:'RN',MG:'MA',MH:'RM',MM:'BM',MN:'MG',MO:'MC',MP:'CQ',MQ:'MB',MS:'MH',MU:'MP',MW:'MI',NA:'WA',NE:'NG',NG:'NI',NI:'NU',NU:'NE',OM:'MU',PA:'PM',PF:'FP',PG:'PP',PH:'RP',PM:'SB',PN:'PC',PR:'RQ',PS:'WE',PT:'PO',PW:'PS',PY:'PA',RS:'RI',RU:'RS',SB:'BP',SC:'SE',SD:'SU',SS:'OD',SE:'SW',SG:'SN',SJ:'SV',SK:'LO',SN:'SG',SR:'NS',ST:'TP',SV:'ES',SX:'NN',SZ:'WZ',TC:'TK',TD:'CD',TF:'FS',TG:'TO',TJ:'TI',TK:'TL',TL:'TT',TM:'TX',TN:'TS',TO:'TN',TR:'TU',TT:'TD',UA:'UP',VA:'VT',VG:'VI',VI:'VQ',VN:'VM',VU:'NH',YE:'YM',YT:'MF',ZA:'SF',ZM:'ZA',ZW:'ZI',CS:'YI',AN:'NT'},cont2cont:{afr:'AF',eur:'EU',amn:'NA',ams:'SA',asi:'AS',oce:'OC',amc:'SA'}});

(function(){var RealtimeMap=window.UserCountryMap.RealtimeMap=function(config,theWidget){this.config=config;this.theWidget=theWidget||false;this.run();};$.extend(RealtimeMap.prototype,{run:function(){var debug=0;var self=this,config=self.config,_=config._,map=self.map=Kartograph.map('#RealTimeMap_map'),main=$('#RealTimeMap_container'),worldTotalVisits=0,maxVisits=config.maxVisits||100,width=main.width(),lastTimestamp=-1,lastVisits=[],visitSymbols,tokenAuth=''+config.reqParams.token_auth,oldest,isFullscreenWidget=$('.widget').parent().get(0)==document.body,now,nextReqTimer,symbolFadeInTimer=[],colorMode='default',currentMap='world',currentTheme='white',colorTheme={white:{bg:'#fff',fill:'#aa9'},black:{bg:'#000',fill:'#444440'}};self.widget=$('#widgetRealTimeMaprealtimeMap').parent();var preset=self.widget.dashboardWidget('getWidgetObject').parameters;if(preset){currentTheme=preset.colorTheme;colorMode=preset.colorMode;currentMap=preset.lastMap;}
function _reportParams(firstRun){var params=$.extend(config.reqParams,{module:'API',method:'Live.getLastVisitsDetails',filter_limit:maxVisits,showColumns:['latitude','longitude','actions','lastActionTimestamp','visitLocalTime','city','country','referrerType','referrerName','referrerTypeName','browserIcon','operatingSystemIcon','countryFlag','idVisit','actionDetails','continentCode','actions','searches','goalConversions'].join(','),minTimestamp:firstRun?-1:lastTimestamp});return params;}
function ajax(params){delete params['token_auth'];return $.ajax({url:'index.php?'+$.param(params),dataType:'json',data:{token_auth:tokenAuth},type:'POST'});}
function _updateMap(svgUrl,callback){if(svgUrl===undefined)return;map.loadMap(config.svgBasePath+svgUrl,function(){map.clear();self.resize();callback();$('.ui-tooltip').remove();},{padding:-3});}
function onResizeLazy(){clearTimeout(self._resizeTimer);self._resizeTimer=setTimeout(self.resize.bind(self),300);}
function age(r){var now=new Date().getTime()/1000;var o=(r.lastActionTimestamp-oldest)/(now-oldest);return Math.min(1,Math.max(0,o));}
function relativeTime(ds){var val=function(val){return'<b>'+Math.round(val)+'</b>';};return(ds<90?_.seconds_ago.replace('%s',val(ds)):ds<5400?_.minutes_ago.replace('%s',val(ds/60)):ds<129600?_.hours_ago.replace('%s',val(ds/3600)):_.days_ago.replace('%s',val(ds/86400)));}
function visitTooltip(r){var ds=new Date().getTime()/1000-r.lastActionTimestamp,ad=r.actionDetails,ico=function(src){return'<img src="'+src+'" alt="" class="icon" />&nbsp;';};return'<h3>'+(r.city?r.city+' / ':'')+r.country+'</h3>'+
ico(r.countryFlag)+ico(r.browserIcon)+ico(r.operatingSystemIcon)+'<br/>'+
(ad&&ad.length&&ad[ad.length-1].pageTitle?'<em>'+ad[ad.length-1].pageTitle+'</em><br/>':'')+'<div class="rel-time" data-actiontime="'+r.lastActionTimestamp+'">'+relativeTime(ds)+'</div>'+
(r.referrerType=="direct"?r.referrerTypeName:_.from+': '+r.referrerName)+'<br />'+'<small>'+_.local_time+': '+r.visitLocalTime+'</small><br />'+
(self.config.siteHasGoals&&r.goalConversions?'<small>'+_.goal_conversions.replace('%s','<b>'+r.goalConversions+'</b>')+
(r.searches>0?', '+_.searches.replace('%s',r.searches):'')+'</small><br />':'')+'<small>'+_.actions.replace('%s','<b>'+r.actions+'</b>')+
(r.searches>0?', '+_.searches.replace('%s','<b>'+r.searches+'</b>'):'')+'</small>';}
function visitRadius(r){return Math.pow(age(r),4)*(self.maxRad-self.minRad)+self.minRad;}
function visitColor(r){var col,engaged=self.config.siteHasGoals?r.goalConversions>0:r.actions>4;if(colorMode=='referrerType'){col=({website:'#F29007',direct:'#5170AE',search:'#CC3399'})[r.referrerType];}
else col=chroma.hsl(42*age(r),Math.sqrt(age(r)),(engaged?0.65:0.5)-(1-age(r))*0.45);return col;}
function visitSymbolAttrs(r){return{fill:visitColor(r).hex(),'fill-opacity':Math.pow(age(r),2)*0.8+0.2,'stroke-opacity':Math.pow(age(r),1.7)*0.8+0.2,stroke:'#fff','stroke-width':1*age(r),r:visitRadius(r)};}
function highlightVisit(r){$('#visitsLive').find('li#'+r.idVisit+' .datetime').css('background','#E4CD74');}
function unhighlightVisit(r){$('#visitsLive').find('li#'+r.idVisit+' .datetime').css({background:'#E4E2D7'});}
function animateSymbol(s){var c=map.paper.circle().attr(s.path.attrs);c.insertBefore(s.path);c.attr({fill:false});c.animate({r:c.attrs.r*3,'stroke-width':7,opacity:0},2500,'linear',function(){c.remove();});var col=s.path.attrs.fill,rad=s.path.attrs.r;s.path.show();s.path.attr({fill:'#fdb',r:0.1,opacity:1});s.path.animate({fill:col,r:rad},700,'bounce');}
function refreshVisits(firstRun){function gotNewReport(report){nextReqTimer=setTimeout(refreshVisits,config.liveRefreshAfterMs);$('.realTimeMap_overlay img').hide();$('.realTimeMap_overlay .loading_data').hide();now=new Date().getTime()/1000;if(firstRun){visitSymbols=map.addSymbols({data:[],type:Kartograph.Bubble,sortBy:function(r){return r.lastActionTimestamp;},radius:visitRadius,location:function(r){return[r.longitude,r.latitude];},attrs:visitSymbolAttrs,tooltip:visitTooltip,mouseenter:highlightVisit,mouseleave:unhighlightVisit,click:function(r,s,evt){evt.stopPropagation();var cont=UserCountryMap.cont2cont[s.data.continentCode];if(cont&&cont!=currentMap){updateMap(cont);}}});lastVisits=[];}
if(report.length){report=$.grep(report,function(r){return r.latitude!==null;});}
if(!report.length){$('.realTimeMap_overlay .showing_visits_of').hide();$('.realTimeMap_overlay .no_data').show();return;}else{$('.realTimeMap_overlay .showing_visits_of').show();$('.realTimeMap_overlay .no_data').hide();lastVisits=[].concat(report).concat(lastVisits).slice(0,maxVisits);oldest=lastVisits[lastVisits.length-1].lastActionTimestamp;var _removed=0;visitSymbols.remove(function(r){if(r.lastActionTimestamp<oldest)_removed++;return r.lastActionTimestamp<oldest;});visitSymbols.update({radius:function(d){return visitSymbolAttrs(d).r;},attrs:visitSymbolAttrs},true);var newSymbols=[];$.each(report,function(i,r){newSymbols.push(visitSymbols.add(r));});visitSymbols.layout().render();$.each(newSymbols,function(i,s){if(i>10)return false;s.path.hide();var t=setTimeout(function(){animateSymbol(s);},1000*(s.data.lastActionTimestamp-now)+config.liveRefreshAfterMs);symbolFadeInTimer.push(t);});lastTimestamp=report[0].lastActionTimestamp;var dur=lastTimestamp-oldest,d;if(dur<60)d=dur+' '+_.seconds;else if(dur<3600)d=Math.ceil(dur/60)+' '+_.minutes;else d=Math.ceil(dur/3600)+' '+_.hours;$('.realTimeMap_timeSpan').html(d);}
firstRun=false;}
if(firstRun&&lastVisits.length){gotNewReport(lastVisits.slice());}else{$('.realTimeMap_overlay img').show();ajax(_reportParams(firstRun)).done(gotNewReport);}}
function initMap(){$('#widgetRealTimeMapliveMap .loadingPiwik, #RealTimeMap .loadingPiwik').hide();map.addLayer('countries',{styles:{fill:colorTheme[currentTheme].fill,stroke:colorTheme[currentTheme].bg,'stroke-width':0.2},click:function(d,p,evt){evt.stopPropagation();if(currentMap!='world'){updateMap('world');}else{updateMap(UserCountryMap.ISO3toCONT[d.iso]);}},title:function(d){return d.name;}});var lastVisitId=-1,lastReport=[];refreshVisits(true);}
function storeSettings(){self.widget.dashboardWidget('setParameters',{lastMap:currentMap,theme:colorTheme,colorMode:colorMode});}
function updateMap(_map){clearTimeout(nextReqTimer);$.each(symbolFadeInTimer,function(i,t){clearTimeout(t);});symbolFadeInTimer=[];try{map.removeSymbols();}catch(e){}
currentMap=_map;_updateMap(currentMap+'.svg',initMap);storeSettings();}
updateMap(location.hash&&(location.hash=='#world'||location.hash.match(/^#[A-Z][A-Z]$/))?location.hash.substr(1):'world');$('#RealTimeMap_map').off('click').click(function(){if(currentMap!='world')updateMap('world');});$(window).keydown(function(evt){if(evt.shiftKey&&evt.altKey&&evt.keyCode==67){colorMode=({'default':'referrerType',referrerType:'default'})[colorMode];storeSettings();}
function switchTheme(){$('#RealTimeMap').css({background:colorTheme[currentTheme].bg});if(isFullscreenWidget){$('body').css({background:colorTheme[currentTheme].bg});$('.widget').css({'border-width':1});}
map.getLayer('countries').style('fill',colorTheme[currentTheme].fill).style('stroke',colorTheme[currentTheme].bg);storeSettings();}
if(evt.shiftKey&&evt.altKey&&evt.keyCode==66){currentTheme='black';switchTheme();}
if(evt.shiftKey&&evt.altKey&&evt.keyCode==87){currentTheme='white';switchTheme();}});$(window).resize(onResizeLazy);function getTimeInSiteTimezone(){}
setInterval(function(){$('.qtip .rel-time').each(function(i,el){el=$(el);var ds=new Date().getTime()/1000-el.data('actiontime');el.html(relativeTime(ds));});var d=new Date(),datetime=d.toTimeString().substr(0,8);$('.realTimeMap_datetime').html(datetime);},1000);},resize:function(){var ratio,w,h,map=this.map;ratio=map.viewAB.width/map.viewAB.height;w=map.container.width();h=Math.min(w/ratio,$(window).height()-30);var radScale=Math.pow((h*ratio*h)/130000,0.3);this.maxRad=10*radScale;this.minRad=4*radScale;map.container.height(h-2);map.resize(w,h);if(map.symbolGroups&&map.symbolGroups.length>0){map.symbolGroups[0].update();}
if(w<355)$('.tableIcon span').hide();else $('.tableIcon span').show();},destroy:function(){this.map.clear();$(this.map.container).html('');}});}());

(function($){$.widget('piwik.liveWidget',{options:{maxRows:10,interval:3000,maxInterval:300000,dataUrlParams:null,onUpdate:null,fadeInSpeed:'slow'},currentInterval:null,updated:false,updateInterval:null,isStarted:true,_update:function(){this.updated=false;var that=this;var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(this.options.dataUrlParams,'GET');ajaxRequest.setFormat('html');ajaxRequest.setCallback(function(r){that._parseResponse(r);if(!that.updated){that.currentInterval+=that.options.interval;}else{that.currentInterval=that.options.interval;if(that.options.onUpdate)that.options.onUpdate();}
if(that.options.maxInterval<that.currentInterval){that.currentInterval=that.options.maxInterval;}
if(that.isStarted){window.clearTimeout(that.updateInterval);if($(that.element).closest('body').length){that.updateInterval=window.setTimeout(function(){that._update()},that.currentInterval);}}});ajaxRequest.send(false);},_parseResponse:function(data){if(!data||!data.length){this.updated=false;return;}
var items=$('li',$(data));for(var i=items.length;i--;){this._parseItem(items[i]);}},_parseItem:function(item){var visitId=$(item).attr('id');if($('#'+visitId,this.element).length){if($('#'+visitId,this.element).html()!=$(item).html()){this.updated=true;}
$('#'+visitId,this.element).remove();$(this.element).prepend(item);}else{this.updated=true;$(item).hide();$(this.element).prepend(item);$(item).fadeIn(this.options.fadeInSpeed);}
$('li:gt('+(this.options.maxRows-1)+')',this.element).remove();},_create:function(){if(!this.options.dataUrlParams){console&&console.error('liveWidget error: dataUrlParams needs to be defined in settings.');return;}
this.currentInterval=this.options.interval;var self=this;this.updateInterval=window.setTimeout(function(){self._update();},this.currentInterval);},_destroy:function(){this.stop();},update:function(){this._update();},start:function(){this.isStarted=true;this.currentInterval=0;this._update();},stop:function(){this.isStarted=false;window.clearTimeout(this.updateInterval);},setInterval:function(interval){this.currentInterval=interval;}});})(jQuery);var pauseImage="plugins/Live/templates/images/pause.gif";var pauseDisabledImage="plugins/Live/templates/images/pause_disabled.gif";var playImage="plugins/Live/templates/images/play.gif";var playDisabledImage="plugins/Live/templates/images/play_disabled.gif";function onClickPause(){$('#pauseImage').attr('src',pauseImage);$('#playImage').attr('src',playDisabledImage);return $('#visitsLive').liveWidget('stop');}
function onClickPlay(){$('#playImage').attr('src',playImage);$('#pauseImage').attr('src',pauseDisabledImage);return $('#visitsLive').liveWidget('start');}

$(document).ready(function(){function toggleBlock(id,value){$('#'+id).toggle(value==1);}
function isEitherDeleteSectionEnabled(){return($('input[name=deleteEnable]:checked').val()==1)||($('input[name=deleteReportsEnable]:checked').val()==1);}
function toggleOtherDeleteSections(){var showSection=isEitherDeleteSectionEnabled();toggleBlock('deleteDataEstimateSect',showSection);toggleBlock('deleteSchedulingSettings',showSection);}
var currentRequest;function reloadDbStats(forceEstimate){if(currentRequest){currentRequest.abort();}
var isFirstLoad=$('#deleteDataEstimate').html()=='';if(!isFirstLoad&&forceEstimate!==true&&(!isEitherDeleteSectionEnabled()||$('#getPurgeEstimateLink').length>0)){return;}
$('#deleteDataEstimate').hide();var data=$('#formDeleteSettings').serializeArray();var formData={};for(var i=0;i<data.length;i++){formData[data[i].name]=data[i].value;}
if(forceEstimate===true){formData['forceEstimate']=1;}
currentRequest=new ajaxHelper();currentRequest.setLoadingElement('#deleteDataEstimateSect .loadingPiwik');currentRequest.addParams({module:'PrivacyManager',action:'getDatabaseSize'},'get');currentRequest.addParams(formData,'post');currentRequest.setCallback(function(data){currentRequest=undefined;$('#deleteDataEstimate').html(data).show();$('#deleteDataEstimateSect').height($('#deleteDataEstimateSect').height());});currentRequest.setFormat('html');currentRequest.send(false);}
$('input[name=anonymizeIPEnable]').click(function(){toggleBlock("anonymizeIPenabled",$(this).val());});$('input[name=deleteEnable]').click(function(){toggleBlock("deleteLogSettings",$(this).val());toggleOtherDeleteSections();}).change(reloadDbStats);$('input[name=deleteReportsEnable]').click(function(){toggleBlock("deleteReportsSettings",$(this).val());toggleBlock("deleteOldReportsMoreInfo",$(this).val());toggleOtherDeleteSections();}).change(reloadDbStats);$(function(){toggleBlock("deleteLogSettings",$("input[name=deleteEnable]:checked").val());toggleBlock("anonymizeIPenabled",$("input[name=anonymizeIPEnable]:checked").val());toggleBlock("deleteReportsSettings",$("input[name=deleteReportsEnable]:checked").val());toggleBlock("deleteOldReportsMoreInfo",$("input[name=deleteReportsEnable]:checked").val());toggleOtherDeleteSections();});$('#formDeleteSettings').find('input[type=text]').each(function(){$(this).change(reloadDbStats);});$('#formDeleteSettings').find('input[type=checkbox]').each(function(){$(this).click(reloadDbStats);});$('#deleteLogSettingsSubmit').click(function(e){var deletingLogs=$("input[name=deleteEnable]:checked").val()==1,deletingReports=$("input[name=deleteReportsEnable]:checked").val()==1,confirm_id;$('#confirmDeleteSettings').find('>h2').each(function(){$(this).hide();});if(deletingLogs){confirm_id=deletingReports?"deleteBothConfirm":"deleteLogsConfirm";}
else if(deletingReports){confirm_id="deleteReportsConfirm";}
if(confirm_id){$("#"+confirm_id).show();e.preventDefault();piwikHelper.modalConfirm('#confirmDeleteSettings',{yes:function(){$('#formDeleteSettings').submit();}});}
else{$('#formDeleteSettings').submit();}});$('#purgeDataNowLink').click(function(e){e.preventDefault();var link=this;var modified=false;$('#formDeleteSettings').find('input').each(function(){if(this.type==='checkbox'||this.type==='radio'){modified|=this.defaultChecked!==this.checked;}else{modified|=this.defaultValue!==this.value;}});if(modified){piwikHelper.modalConfirm('#saveSettingsBeforePurge',{yes:function(){}});return;}
piwikHelper.modalConfirm('#confirmPurgeNow',{yes:function(){$(link).hide();var ajaxRequest=new ajaxHelper();ajaxRequest.setLoadingElement('#deleteSchedulingSettings .loadingPiwik');ajaxRequest.addParams({module:'PrivacyManager',action:'executeDataPurge'},'get');ajaxRequest.setCallback(function(){$('#deleteDataEstimate').html('');reloadDbStats();$('#db-purged-message').fadeIn('slow');setTimeout(function(){$('#db-purged-message').fadeOut('slow',function(){$(link).show();});},2000);});ajaxRequest.setFormat('html');ajaxRequest.send(false);}});});$('#getPurgeEstimateLink').click(function(e){e.preventDefault();reloadDbStats(true);});reloadDbStats();});

(function($,piwik){var annotationsApi={getAnnotationManager:function(idSite,date,period,lastN,callback){var ajaxParams={module:'Annotations',action:'getAnnotationManager',idSite:idSite,date:date,period:period};if(lastN){ajaxParams.lastN=lastN;}
var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(ajaxParams,'get');ajaxRequest.setCallback(callback);ajaxRequest.setFormat('html');ajaxRequest.send(false);},addAnnotation:function(idSite,managerDate,managerPeriod,date,note,callback){var ajaxParams={module:'Annotations',action:'addAnnotation',idSite:idSite,date:date,managerDate:managerDate,managerPeriod:managerPeriod,note:note};var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(ajaxParams,'get');ajaxRequest.setCallback(callback);ajaxRequest.setFormat('html');ajaxRequest.send(false);},saveAnnotation:function(idSite,idNote,date,noteData,callback){var ajaxParams={module:'Annotations',action:'saveAnnotation',idSite:idSite,idNote:idNote,date:date};for(var key in noteData){ajaxParams[key]=noteData[key];}
var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(ajaxParams,'get');ajaxRequest.setCallback(callback);ajaxRequest.setFormat('html');ajaxRequest.send(false);},deleteAnnotation:function(idSite,idNote,managerDate,managerPeriod,callback){var ajaxParams={module:'Annotations',action:'deleteAnnotation',idSite:idSite,idNote:idNote,date:managerDate,period:managerPeriod};var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(ajaxParams,'get');ajaxRequest.setCallback(callback);ajaxRequest.setFormat('html');ajaxRequest.send(false);},getEvolutionIcons:function(idSite,date,period,lastN,callback){var ajaxParams={module:'Annotations',action:'getEvolutionIcons',idSite:idSite,date:date,period:period};if(lastN){ajaxParams.lastN=lastN;}
var ajaxRequest=new ajaxHelper();ajaxRequest.addParams(ajaxParams,'get');ajaxRequest.setFormat('html');ajaxRequest.setCallback(callback);ajaxRequest.send(false);}};var today=new Date();var getDatePickerOptions=function(annotation){var annotationDateStr=annotation.attr('data-date'),parts=annotationDateStr.split('-'),annotationDate=new Date(parts[0],parts[1]-1,parts[2]);var result=piwik.getBaseDatePickerOptions(annotationDate);var piwikMinDate=result.minDate;result.beforeShowDay=function(date){var valid=true;if(date>today||date<piwikMinDate){valid=false;}
return[valid,''];};result.onSelect=function(dateText){$('.annotation-period-edit>a',annotation).text(dateText);$('.datepicker',annotation).hide();};return result;};var toggleAnnotationMode=function(inAnnotationElement){var annotation=$(inAnnotationElement).closest('.annotation');$('.annotation-period,.annotation-period-edit,.delete-annotation,'+'.annotation-edit-mode,.annotation-view-mode',annotation).toggle();return $(inAnnotationElement).find('.annotation-value');};var createDatePicker=function(annotation){$('.datepicker',annotation).datepicker(getDatePickerOptions(annotation)).hide();};var createDatePickers=function(manager){$('.annotation-period-edit',manager).each(function(){createDatePicker($(this).parent().parent());});}
var replaceAnnotationManager=function(manager,html){var newManager=$(html);manager.html(newManager.html()).attr('data-date',newManager.attr('data-date')).attr('data-period',newManager.attr('data-period'));createDatePickers(manager);};var isAnnotationStarred=function(annotation){return!!(+$('.annotation-star',annotation).attr('data-starred')==1);};var replaceAnnotationHtml=function(annotation,html){var newHtml=$(html);annotation.html(newHtml.html()).attr('data-date',newHtml.attr('data-date'));createDatePicker(annotation);}
var bindAnnotationManagerEvents=function(manager,idSite,onAnnotationCountChange){if(!onAnnotationCountChange){onAnnotationCountChange=function(){};}
manager.on('click','.add-annotation',function(e){e.preventDefault();$('.new-annotation-row',manager).show();$(this).hide();return false;});manager.on('click','.new-annotation-cancel',function(){var newAnnotationRow=$(this).parent().parent();newAnnotationRow.hide();$('.add-annotation',newAnnotationRow.closest('.annotation-manager')).show();});manager.on('click','.new-annotation-save',function(){var addRow=$(this).parent().parent(),addNoteInput=addRow.find('.new-annotation-edit'),noteDate=addRow.find('.annotation-period-edit>a').text();if(!addNoteInput.val()){return;}
addNoteInput.attr('disabled','disabled');$(this).attr('disabled','disabled');annotationsApi.addAnnotation(idSite,manager.attr('data-date'),manager.attr('data-period'),noteDate,addNoteInput.val(),function(response){replaceAnnotationManager(manager,response);onAnnotationCountChange(noteDate,1,0);});});manager.on('keypress','.new-annotation-edit',function(e){if(e.which==13){$(this).parent().find('.new-annotation-save').click();}});manager.on('click','.annotation-enter-edit-mode',function(e){e.preventDefault();var annotationContent=toggleAnnotationMode(this);annotationContent.find('.annotation-edit').focus();return false;});manager.on('click','.annotation-cancel',function(){toggleAnnotationMode(this);});manager.on('click','.annotation-edit-mode .annotation-save',function(){var annotation=$(this).parent().parent().parent(),input=$('.annotation-edit',annotation),dateEditText=$('.annotation-period-edit>a',annotation).text();if(input[0].defaultValue==input.val()&&dateEditText==annotation.attr('data-date')){toggleAnnotationMode(this);return;}
input.attr('disabled','disabled');$(this).attr('disabled','disabled');annotationsApi.saveAnnotation(idSite,annotation.attr('data-id'),dateEditText,{note:input.val()},function(response){response=$(response);var newDate=response.attr('data-date'),isStarred=isAnnotationStarred(response),originalDate=annotation.attr('data-date');replaceAnnotationHtml(annotation,response);if(originalDate!=newDate){onAnnotationCountChange(originalDate,-1,isStarred?-1:0);onAnnotationCountChange(newDate,1,isStarred?1:0);}});});manager.on('keypress','.annotation-value input',function(e){if(e.which==13){$(this).parent().find('.annotation-save').click();}});manager.on('click','.delete-annotation',function(e){e.preventDefault();var annotation=$(this).parent().parent();$(this).attr('disabled','disabled');annotationsApi.deleteAnnotation(idSite,annotation.attr('data-id'),manager.attr('data-date'),manager.attr('data-period'),function(response){replaceAnnotationManager(manager,response);var isStarred=isAnnotationStarred(annotation);onAnnotationCountChange(annotation.attr('data-date'),-1,isStarred?-1:0);});return false;});manager.on('click','.annotation-star-changeable',function(e){var annotation=$(this).parent().parent(),newStarredVal=$(this).attr('data-starred')==0?1:0;annotationsApi.saveAnnotation(idSite,annotation.attr('data-id'),annotation.attr('data-date'),{starred:newStarredVal},function(response){replaceAnnotationHtml(annotation,response);onAnnotationCountChange(annotation.attr('data-date'),0,newStarredVal==0?-1:1);});});manager.on('click','.annotation-period-edit>a',function(e){e.preventDefault();$('.datepicker',$(this).parent()).toggle();return false;});$('body').on('mouseup',function(e){var container=$('.annotation-period-edit>.datepicker:visible').parent();if(!container.has(e.target).length){container.find('.datepicker').hide();}});};var loadingAnnotationManager=false;var showAnnotationViewer=function(domElem,idSite,date,period,lastN,callback){var addToAnnotationCount=function(date,amt,starAmt){if(date.indexOf(',')!=-1){date=date.split(',')[0];}
$('.evolution-annotations>span',domElem).each(function(){if($(this).attr('data-date')==date){var starredCount=+$(this).attr('data-starred'),annotationCount=+$(this).attr('data-count');var newStarCount=starredCount+starAmt;if(newStarCount>0){var newImg='themes/default/images/yellow_marker.png';}else{var newImg='themes/default/images/grey_marker.png';}
$(this).attr('data-starred',newStarCount).find('img').attr('src',newImg);var newCount=annotationCount+amt;$(this).attr('data-count',newCount).css('opacity',newCount>0?1:0);return false;}});};var manager=$('.annotation-manager',domElem);if(manager.length){if(manager.attr('data-date')==date&&manager.attr('data-period')==period){if(manager.is(':hidden')){manager.slideDown('slow',function(){if(callback)callback(manager)});}
else{manager.slideUp('slow',function(){if(callback)callback(manager)});}}
else{$('.annotations',manager).html('');$('.loadingPiwik',manager).show();annotationsApi.getAnnotationManager(idSite,date,period,lastN,function(response){replaceAnnotationManager(manager,response);createDatePickers(manager);if(manager.is(':hidden')){manager.slideDown('slow',function(){if(callback)callback(manager)});}
else{if(callback){callback(manager);}}});}}
else{if(loadingAnnotationManager){return;}
loadingAnnotationManager=true;var loading=$('.loadingPiwikBelow',domElem).css({display:'block'});annotationsApi.getAnnotationManager(idSite,date,period,lastN,function(response){var manager=$(response).hide();if(!manager.hasClass('annotation-manager')){return;}
createDatePickers(manager);bindAnnotationManagerEvents(manager,idSite,addToAnnotationCount);loading.css('visibility','hidden');$('.dataTableFeatures',domElem).append(manager);manager.slideDown('slow',function(){loading.hide().css('visibility','visible');loadingAnnotationManager=false;if(callback)callback(manager)});});}};var placeEvolutionIcons=function(annotations,graphElem){var canvases=$('.piwik-graph .jqplot-xaxis canvas',graphElem),noteSize=16;if(!canvases||canvases.length==0){$('span',annotations).hide();return true;}
$('span',annotations).each(function(i){var canvas=$(canvases[i]),canvasCenterX=canvas.position().left+(canvas.width()/2);$(this).css({left:canvasCenterX-noteSize/2,opacity:+$(this).attr('data-count')>0?1:0});});};piwik.annotations={showAnnotationViewer:showAnnotationViewer,placeEvolutionIcons:placeEvolutionIcons,api:annotationsApi};}(jQuery,piwik));

var MobileMessagingSettings=MobileMessagingSettings||(function(){var
delegatedManagementSelector='input[name=delegatedManagement]',apiAccountSubmitSelector='#apiAccountSubmit',addPhoneNumberSubmitSelector='#addPhoneNumberSubmit',providersSelector='#smsProviders',providerDescriptionsSelector='.providerDescription',apiKeySelector='#apiKey',countriesSelector='#countries',countryCallingCodeSelector='#countryCallingCode',newPhoneNumberSelector='#newPhoneNumber',suspiciousPhoneNumberSelector='#suspiciousPhoneNumber',validatePhoneNumberSubmitSelector='.validatePhoneNumberSubmit',formDescriptionSelector='.form-description',removePhoneNumberSubmitSelector='.removePhoneNumberSubmit',verificationCodeSelector='.verificationCode',phoneNumberSelector='.phoneNumber',deleteAcountSelector='#deleteAccount',confirmDeleteAccountSelector='#confirmDeleteAccount',accountFormSelector='#accountForm',displayAccountFormSelector='#displayAccountForm',phoneNumberActivatedSelector='#phoneNumberActivated',invalidActivationCodeMsgSelector='#invalidActivationCode',ajaxErrorsSelector='#ajaxErrorMobileMessagingSettings',invalidVerificationCodeAjaxErrorSelector='#invalidVerificationCodeAjaxError',ajaxLoadingSelector='#ajaxLoadingMobileMessagingSettings';function initUIEvents(){$(delegatedManagementSelector).change(updateDelegatedManagement);$(apiAccountSubmitSelector).click(updateApiAccount);$(deleteAcountSelector).click(confirmDeleteApiAccount);$(displayAccountFormSelector).click(displayAccountForm);$(addPhoneNumberSubmitSelector).click(addPhoneNumber);$(newPhoneNumberSelector).keyup(updateSuspiciousPhoneNumberMessage);$(validatePhoneNumberSubmitSelector).click(validatePhoneNumber);$(removePhoneNumberSubmitSelector).click(removePhoneNumber);$(countryCallingCodeSelector).keyup(updateCountry);$(countriesSelector).change(updateCountryCallingCode);updateCountryCallingCode();$(providersSelector).change(updateProviderDescription);updateProviderDescription();}
function updateCountry(){var countryCallingCode=$(countryCallingCodeSelector).val();if(countryCallingCode!=null&&countryCallingCode!=''){var countryToSelect=$(countriesSelector+' option[value='+countryCallingCode+']');if(countryToSelect.size()>0){countryToSelect.attr('selected','selected');}
else{$(countriesSelector+' option:selected').removeAttr('selected');}}}
function displayAccountForm(){$(accountFormSelector).show();}
function validatePhoneNumber(event){var phoneNumberContainer=$(event.target).parent();var verificationCodeContainer=phoneNumberContainer.find(verificationCodeSelector);var verificationCode=verificationCodeContainer.val();var phoneNumber=phoneNumberContainer.find(phoneNumberSelector).html();if(verificationCode!=null&&verificationCode!=''){var success=function(response){$(phoneNumberActivatedSelector).hide();if(!response.value){$(invalidVerificationCodeAjaxErrorSelector).html($(invalidActivationCodeMsgSelector).html()).fadeIn();}
else{$(phoneNumberActivatedSelector).show();$(verificationCodeContainer).remove();$(phoneNumberContainer).find(validatePhoneNumberSubmitSelector).remove();$(phoneNumberContainer).find(formDescriptionSelector).remove();}};var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'MobileMessaging.validatePhoneNumber'},'GET');ajaxHandler.addParams({phoneNumber:phoneNumber,verificationCode:verificationCode},'POST');ajaxHandler.setCallback(success);ajaxHandler.setLoadingElement(ajaxLoadingSelector);ajaxHandler.setErrorElement(invalidVerificationCodeAjaxErrorSelector);ajaxHandler.send(true);}}
function removePhoneNumber(event){var phoneNumberContainer=$(event.target).parent();var phoneNumber=phoneNumberContainer.find(phoneNumberSelector).html();var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'MobileMessaging.removePhoneNumber'},'GET');ajaxHandler.addParams({phoneNumber:phoneNumber},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement(ajaxLoadingSelector);ajaxHandler.setErrorElement(ajaxErrorsSelector);ajaxHandler.send(true);}
function updateSuspiciousPhoneNumberMessage(){var newPhoneNumber=$(newPhoneNumberSelector).val();if($.trim(newPhoneNumber).lastIndexOf('0',0)===0){$(suspiciousPhoneNumberSelector).show();}
else{$(suspiciousPhoneNumberSelector).hide();}}
function addPhoneNumber(){var newPhoneNumber=$(newPhoneNumberSelector).val();var countryCallingCode=$(countryCallingCodeSelector).val();var phoneNumber='+'+countryCallingCode+newPhoneNumber;if(newPhoneNumber!=null&&newPhoneNumber!=''){var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'MobileMessaging.addPhoneNumber'},'GET');ajaxHandler.addParams({phoneNumber:phoneNumber},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement(ajaxLoadingSelector);ajaxHandler.setErrorElement(ajaxErrorsSelector);ajaxHandler.send(true);}}
function updateCountryCallingCode(){$(countryCallingCodeSelector).val($(countriesSelector+' option:selected').val());}
function updateProviderDescription(){$(providerDescriptionsSelector).hide();$('#'+$(providersSelector+' option:selected').val()+providerDescriptionsSelector).show();}
function updateDelegatedManagement(){setDelegatedManagement(getDelegatedManagement());}
function confirmDeleteApiAccount(){piwikHelper.modalConfirm(confirmDeleteAccountSelector,{yes:deleteApiAccount});}
function deleteApiAccount(){var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'MobileMessaging.deleteSMSAPICredential'},'GET');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement(ajaxLoadingSelector);ajaxHandler.setErrorElement(ajaxErrorsSelector);ajaxHandler.send(true);}
function updateApiAccount(){var provider=$(providersSelector+' option:selected').val();var apiKey=$(apiKeySelector).val();if(apiKey!=''){var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'MobileMessaging.setSMSAPICredential'},'GET');ajaxHandler.addParams({provider:provider,apiKey:apiKey},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement(ajaxLoadingSelector);ajaxHandler.setErrorElement(ajaxErrorsSelector);ajaxHandler.send(true);}}
function setDelegatedManagement(delegatedManagement){var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'MobileMessaging.setDelegatedManagement'},'GET');ajaxHandler.addParams({delegatedManagement:delegatedManagement},'POST');ajaxHandler.redirectOnSuccess();ajaxHandler.setLoadingElement(ajaxLoadingSelector);ajaxHandler.setErrorElement(ajaxErrorsSelector);ajaxHandler.send(true);}
function getDelegatedManagement(){return $(delegatedManagementSelector+':checked').val();}
return{initUIEvents:function(){initUIEvents();}};}());$(document).ready(function(){MobileMessagingSettings.initUIEvents();});

function DataTable_RowActions_Overlay(dataTable){this.dataTable=dataTable;}
DataTable_RowActions_Overlay.prototype=new DataTable_RowAction;DataTable_RowActions_Overlay.prototype.onClick=function(actionA,tr,e){if(!actionA.data('overlay-manipulated')){actionA.data('overlay-manipulated',1);var link=tr.find('> td:first > a').attr('href');link=$('<textarea>').html(link).val();actionA.attr({target:'_blank',href:Overlay_Helper.getOverlayLink(this.dataTable.param.idSite,'month','today',link)});}
return true;};DataTable_RowActions_Registry.register({name:'Overlay',dataTableIcon:'plugins/Overlay/templates/overlay_icon.png',dataTableIconHover:'plugins/Overlay/templates/overlay_icon_hover.png',order:30,dataTableIconTooltip:[_pk_translate('General_OverlayRowActionTooltipTitle_js'),_pk_translate('General_OverlayRowActionTooltip_js')],createInstance:function(dataTable){return new DataTable_RowActions_Overlay(dataTable);},isAvailableOnReport:function(dataTableParams){if(!window.DataTable_RowActions_Transitions){return false;}
return DataTable_RowActions_Transitions.isPageUrlReport(dataTableParams.module,dataTableParams.action);},isAvailableOnRow:function(dataTableParams,tr){var transitions=DataTable_RowActions_Registry.getActionByName('Transitions');return transitions.isAvailableOnRow(dataTableParams,tr);}});

var Overlay_Helper={encodeFrameUrl:function(url){return encodeURIComponent(url).replace(/%/g,'$')},decodeFrameUrl:function(url){return decodeURIComponent(url.replace(/\$/g,'%'));},getOverlayLink:function(idSite,period,date,link){var url='index.php?module=Overlay&period='+period+'&date='+date+'&idSite='+idSite;if(link){url+='#l='+Overlay_Helper.encodeFrameUrl(link);}
return url;}};

(function($,window,undefined){$.fn.jScrollPane=function(settings){function JScrollPane(elem,s){var settings,jsp=this,pane,paneWidth,paneHeight,container,contentWidth,contentHeight,percentInViewH,percentInViewV,isScrollableV,isScrollableH,verticalDrag,dragMaxY,verticalDragPosition,horizontalDrag,dragMaxX,horizontalDragPosition,verticalBar,verticalTrack,scrollbarWidth,verticalTrackHeight,verticalDragHeight,arrowUp,arrowDown,horizontalBar,horizontalTrack,horizontalTrackWidth,horizontalDragWidth,arrowLeft,arrowRight,reinitialiseInterval,originalPadding,originalPaddingTotalWidth,previousContentWidth,wasAtTop=true,wasAtLeft=true,wasAtBottom=false,wasAtRight=false,originalElement=elem.clone(false,false).empty(),mwEvent=$.fn.mwheelIntent?'mwheelIntent.jsp':'mousewheel.jsp';originalPadding=elem.css('paddingTop')+' '+
elem.css('paddingRight')+' '+
elem.css('paddingBottom')+' '+
elem.css('paddingLeft');originalPaddingTotalWidth=(parseInt(elem.css('paddingLeft'),10)||0)+
(parseInt(elem.css('paddingRight'),10)||0);function initialise(s){var isMaintainingPositon,lastContentX,lastContentY,hasContainingSpaceChanged,originalScrollTop,originalScrollLeft,maintainAtBottom=false,maintainAtRight=false;settings=s;if(pane===undefined){originalScrollTop=elem.scrollTop();originalScrollLeft=elem.scrollLeft();elem.css({overflow:'hidden',padding:0});paneWidth=elem.innerWidth();paneHeight=elem.innerHeight();elem.width(paneWidth);pane=$('<div class="jspPane" />').css('padding',originalPadding).append(elem.children());container=$('<div class="jspContainer" />').css({'width':paneWidth+'px','height':paneHeight+'px'}).append(pane).appendTo(elem);}else{elem.css('width','');maintainAtBottom=settings.stickToBottom&&isCloseToBottom();maintainAtRight=settings.stickToRight&&isCloseToRight();hasContainingSpaceChanged=elem.innerWidth()+originalPaddingTotalWidth!=paneWidth||elem.outerHeight()!=paneHeight;if(hasContainingSpaceChanged){paneWidth=elem.innerWidth()+originalPaddingTotalWidth;paneHeight=elem.innerHeight();container.css({width:paneWidth+'px',height:paneHeight+'px'});}
if(!hasContainingSpaceChanged&&previousContentWidth==contentWidth&&pane.outerHeight()==contentHeight){elem.width(paneWidth);return;}
previousContentWidth=contentWidth;pane.css('width','');elem.width(paneWidth);container.find('>.jspVerticalBar,>.jspHorizontalBar').remove().end();}
pane.css('overflow','auto');if(s.contentWidth){contentWidth=s.contentWidth;}else{contentWidth=pane[0].scrollWidth;}
contentHeight=pane[0].scrollHeight;pane.css('overflow','');percentInViewH=contentWidth/paneWidth;percentInViewV=contentHeight/paneHeight;isScrollableV=percentInViewV>1;isScrollableH=percentInViewH>1;if(!(isScrollableH||isScrollableV)){elem.removeClass('jspScrollable');pane.css({top:0,width:container.width()-originalPaddingTotalWidth});removeMousewheel();removeFocusHandler();removeKeyboardNav();removeClickOnTrack();}else{elem.addClass('jspScrollable');isMaintainingPositon=settings.maintainPosition&&(verticalDragPosition||horizontalDragPosition);if(isMaintainingPositon){lastContentX=contentPositionX();lastContentY=contentPositionY();}
initialiseVerticalScroll();initialiseHorizontalScroll();resizeScrollbars();if(isMaintainingPositon){scrollToX(maintainAtRight?(contentWidth-paneWidth):lastContentX,false);scrollToY(maintainAtBottom?(contentHeight-paneHeight):lastContentY,false);}
initFocusHandler();initMousewheel();initTouch();if(settings.enableKeyboardNavigation){initKeyboardNav();}
if(settings.clickOnTrack){initClickOnTrack();}
observeHash();if(settings.hijackInternalLinks){hijackInternalLinks();}}
if(settings.autoReinitialise&&!reinitialiseInterval){reinitialiseInterval=setInterval(function(){initialise(settings);},settings.autoReinitialiseDelay);}else if(!settings.autoReinitialise&&reinitialiseInterval){clearInterval(reinitialiseInterval);}
originalScrollTop&&elem.scrollTop(0)&&scrollToY(originalScrollTop,false);originalScrollLeft&&elem.scrollLeft(0)&&scrollToX(originalScrollLeft,false);elem.trigger('jsp-initialised',[isScrollableH||isScrollableV]);}
function initialiseVerticalScroll(){if(isScrollableV){container.append($('<div class="jspVerticalBar" />').append($('<div class="jspCap jspCapTop" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragTop" />'),$('<div class="jspDragBottom" />'))),$('<div class="jspCap jspCapBottom" />')));verticalBar=container.find('>.jspVerticalBar');verticalTrack=verticalBar.find('>.jspTrack');verticalDrag=verticalTrack.find('>.jspDrag');if(settings.showArrows){arrowUp=$('<a class="jspArrow jspArrowUp" />').bind('mousedown.jsp',getArrowScroll(0,-1)).bind('click.jsp',nil);arrowDown=$('<a class="jspArrow jspArrowDown" />').bind('mousedown.jsp',getArrowScroll(0,1)).bind('click.jsp',nil);if(settings.arrowScrollOnHover){arrowUp.bind('mouseover.jsp',getArrowScroll(0,-1,arrowUp));arrowDown.bind('mouseover.jsp',getArrowScroll(0,1,arrowDown));}
appendArrows(verticalTrack,settings.verticalArrowPositions,arrowUp,arrowDown);}
verticalTrackHeight=paneHeight;container.find('>.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow').each(function(){verticalTrackHeight-=$(this).outerHeight();});verticalDrag.hover(function(){verticalDrag.addClass('jspHover');},function(){verticalDrag.removeClass('jspHover');}).bind('mousedown.jsp',function(e){$('html').bind('dragstart.jsp selectstart.jsp',nil);verticalDrag.addClass('jspActive');var startY=e.pageY-verticalDrag.position().top;$('html').bind('mousemove.jsp',function(e){positionDragY(e.pageY-startY,false);}).bind('mouseup.jsp mouseleave.jsp',cancelDrag);return false;});sizeVerticalScrollbar();}}
function sizeVerticalScrollbar(){verticalTrack.height(verticalTrackHeight+'px');verticalDragPosition=0;scrollbarWidth=settings.verticalGutter+verticalTrack.outerWidth();pane.width(paneWidth-scrollbarWidth-originalPaddingTotalWidth);try{if(verticalBar.position().left===0){pane.css('margin-left',scrollbarWidth+'px');}}catch(err){}}
function initialiseHorizontalScroll(){if(isScrollableH){container.append($('<div class="jspHorizontalBar" />').append($('<div class="jspCap jspCapLeft" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragLeft" />'),$('<div class="jspDragRight" />'))),$('<div class="jspCap jspCapRight" />')));horizontalBar=container.find('>.jspHorizontalBar');horizontalTrack=horizontalBar.find('>.jspTrack');horizontalDrag=horizontalTrack.find('>.jspDrag');if(settings.showArrows){arrowLeft=$('<a class="jspArrow jspArrowLeft" />').bind('mousedown.jsp',getArrowScroll(-1,0)).bind('click.jsp',nil);arrowRight=$('<a class="jspArrow jspArrowRight" />').bind('mousedown.jsp',getArrowScroll(1,0)).bind('click.jsp',nil);if(settings.arrowScrollOnHover){arrowLeft.bind('mouseover.jsp',getArrowScroll(-1,0,arrowLeft));arrowRight.bind('mouseover.jsp',getArrowScroll(1,0,arrowRight));}
appendArrows(horizontalTrack,settings.horizontalArrowPositions,arrowLeft,arrowRight);}
horizontalDrag.hover(function(){horizontalDrag.addClass('jspHover');},function(){horizontalDrag.removeClass('jspHover');}).bind('mousedown.jsp',function(e){$('html').bind('dragstart.jsp selectstart.jsp',nil);horizontalDrag.addClass('jspActive');var startX=e.pageX-horizontalDrag.position().left;$('html').bind('mousemove.jsp',function(e){positionDragX(e.pageX-startX,false);}).bind('mouseup.jsp mouseleave.jsp',cancelDrag);return false;});horizontalTrackWidth=container.innerWidth();sizeHorizontalScrollbar();}}
function sizeHorizontalScrollbar(){container.find('>.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow').each(function(){horizontalTrackWidth-=$(this).outerWidth();});horizontalTrack.width(horizontalTrackWidth+'px');horizontalDragPosition=0;}
function resizeScrollbars(){if(isScrollableH&&isScrollableV){var horizontalTrackHeight=horizontalTrack.outerHeight(),verticalTrackWidth=verticalTrack.outerWidth();verticalTrackHeight-=horizontalTrackHeight;$(horizontalBar).find('>.jspCap:visible,>.jspArrow').each(function(){horizontalTrackWidth+=$(this).outerWidth();});horizontalTrackWidth-=verticalTrackWidth;paneHeight-=verticalTrackWidth;paneWidth-=horizontalTrackHeight;horizontalTrack.parent().append($('<div class="jspCorner" />').css('width',horizontalTrackHeight+'px'));sizeVerticalScrollbar();sizeHorizontalScrollbar();}
if(isScrollableH){pane.width((container.outerWidth()-originalPaddingTotalWidth)+'px');}
contentHeight=pane.outerHeight();percentInViewV=contentHeight/paneHeight;if(isScrollableH){horizontalDragWidth=Math.ceil(1/percentInViewH*horizontalTrackWidth);if(horizontalDragWidth>settings.horizontalDragMaxWidth){horizontalDragWidth=settings.horizontalDragMaxWidth;}else if(horizontalDragWidth<settings.horizontalDragMinWidth){horizontalDragWidth=settings.horizontalDragMinWidth;}
horizontalDrag.width(horizontalDragWidth+'px');dragMaxX=horizontalTrackWidth-horizontalDragWidth;_positionDragX(horizontalDragPosition);}
if(isScrollableV){verticalDragHeight=Math.ceil(1/percentInViewV*verticalTrackHeight);if(verticalDragHeight>settings.verticalDragMaxHeight){verticalDragHeight=settings.verticalDragMaxHeight;}else if(verticalDragHeight<settings.verticalDragMinHeight){verticalDragHeight=settings.verticalDragMinHeight;}
verticalDrag.height(verticalDragHeight+'px');dragMaxY=verticalTrackHeight-verticalDragHeight;_positionDragY(verticalDragPosition);}}
function appendArrows(ele,p,a1,a2){var p1="before",p2="after",aTemp;if(p=="os"){p=/Mac/.test(navigator.platform)?"after":"split";}
if(p==p1){p2=p;}else if(p==p2){p1=p;aTemp=a1;a1=a2;a2=aTemp;}
ele[p1](a1)[p2](a2);}
function getArrowScroll(dirX,dirY,ele){return function(){arrowScroll(dirX,dirY,this,ele);this.blur();return false;};}
function arrowScroll(dirX,dirY,arrow,ele){arrow=$(arrow).addClass('jspActive');var eve,scrollTimeout,isFirst=true,doScroll=function(){if(dirX!==0){jsp.scrollByX(dirX*settings.arrowButtonSpeed);}
if(dirY!==0){jsp.scrollByY(dirY*settings.arrowButtonSpeed);}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.arrowRepeatFreq);isFirst=false;};doScroll();eve=ele?'mouseout.jsp':'mouseup.jsp';ele=ele||$('html');ele.bind(eve,function(){arrow.removeClass('jspActive');scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;ele.unbind(eve);});}
function initClickOnTrack(){removeClickOnTrack();if(isScrollableV){verticalTrack.bind('mousedown.jsp',function(e){if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageY-offset.top-verticalDragPosition,scrollTimeout,isFirst=true,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageY-offset.top-verticalDragHeight/2,contentDragY=paneHeight*settings.scrollPagePercent,dragY=dragMaxY*contentDragY/(contentHeight-paneHeight);if(direction<0){if(verticalDragPosition-dragY>pos){jsp.scrollByY(-contentDragY);}else{positionDragY(pos);}}else if(direction>0){if(verticalDragPosition+dragY<pos){jsp.scrollByY(contentDragY);}else{positionDragY(pos);}}else{cancelClick();return;}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq);isFirst=false;},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;$(document).unbind('mouseup.jsp',cancelClick);};doScroll();$(document).bind('mouseup.jsp',cancelClick);return false;}});}
if(isScrollableH){horizontalTrack.bind('mousedown.jsp',function(e){if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageX-offset.left-horizontalDragPosition,scrollTimeout,isFirst=true,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageX-offset.left-horizontalDragWidth/2,contentDragX=paneWidth*settings.scrollPagePercent,dragX=dragMaxX*contentDragX/(contentWidth-paneWidth);if(direction<0){if(horizontalDragPosition-dragX>pos){jsp.scrollByX(-contentDragX);}else{positionDragX(pos);}}else if(direction>0){if(horizontalDragPosition+dragX<pos){jsp.scrollByX(contentDragX);}else{positionDragX(pos);}}else{cancelClick();return;}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq);isFirst=false;},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;$(document).unbind('mouseup.jsp',cancelClick);};doScroll();$(document).bind('mouseup.jsp',cancelClick);return false;}});}}
function removeClickOnTrack(){if(horizontalTrack){horizontalTrack.unbind('mousedown.jsp');}
if(verticalTrack){verticalTrack.unbind('mousedown.jsp');}}
function cancelDrag(){$('html').unbind('dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp');if(verticalDrag){verticalDrag.removeClass('jspActive');}
if(horizontalDrag){horizontalDrag.removeClass('jspActive');}}
function positionDragY(destY,animate){if(!isScrollableV){return;}
if(destY<0){destY=0;}else if(destY>dragMaxY){destY=dragMaxY;}
if(animate===undefined){animate=settings.animateScroll;}
if(animate){jsp.animate(verticalDrag,'top',destY,_positionDragY);}else{verticalDrag.css('top',destY);_positionDragY(destY);}}
function _positionDragY(destY){if(destY===undefined){destY=verticalDrag.position().top;}
container.scrollTop(0);verticalDragPosition=destY;var isAtTop=verticalDragPosition===0,isAtBottom=verticalDragPosition==dragMaxY,percentScrolled=destY/dragMaxY,destTop=-percentScrolled*(contentHeight-paneHeight);if(wasAtTop!=isAtTop||wasAtBottom!=isAtBottom){wasAtTop=isAtTop;wasAtBottom=isAtBottom;elem.trigger('jsp-arrow-change',[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight]);}
updateVerticalArrows(isAtTop,isAtBottom);pane.css('top',destTop);elem.trigger('jsp-scroll-y',[-destTop,isAtTop,isAtBottom]).trigger('scroll');}
function positionDragX(destX,animate){if(!isScrollableH){return;}
if(destX<0){destX=0;}else if(destX>dragMaxX){destX=dragMaxX;}
if(animate===undefined){animate=settings.animateScroll;}
if(animate){jsp.animate(horizontalDrag,'left',destX,_positionDragX);}else{horizontalDrag.css('left',destX);_positionDragX(destX);}}
function _positionDragX(destX){if(destX===undefined){destX=horizontalDrag.position().left;}
container.scrollTop(0);horizontalDragPosition=destX;var isAtLeft=horizontalDragPosition===0,isAtRight=horizontalDragPosition==dragMaxX,percentScrolled=destX/dragMaxX,destLeft=-percentScrolled*(contentWidth-paneWidth);if(wasAtLeft!=isAtLeft||wasAtRight!=isAtRight){wasAtLeft=isAtLeft;wasAtRight=isAtRight;elem.trigger('jsp-arrow-change',[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight]);}
updateHorizontalArrows(isAtLeft,isAtRight);pane.css('left',destLeft);elem.trigger('jsp-scroll-x',[-destLeft,isAtLeft,isAtRight]).trigger('scroll');}
function updateVerticalArrows(isAtTop,isAtBottom){if(settings.showArrows){arrowUp[isAtTop?'addClass':'removeClass']('jspDisabled');arrowDown[isAtBottom?'addClass':'removeClass']('jspDisabled');}}
function updateHorizontalArrows(isAtLeft,isAtRight){if(settings.showArrows){arrowLeft[isAtLeft?'addClass':'removeClass']('jspDisabled');arrowRight[isAtRight?'addClass':'removeClass']('jspDisabled');}}
function scrollToY(destY,animate){var percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate);}
function scrollToX(destX,animate){var percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate);}
function scrollToElement(ele,stickToTop,animate){var e,eleHeight,eleWidth,eleTop=0,eleLeft=0,viewportTop,viewportLeft,maxVisibleEleTop,maxVisibleEleLeft,destY,destX;try{e=$(ele);}catch(err){return;}
eleHeight=e.outerHeight();eleWidth=e.outerWidth();container.scrollTop(0);container.scrollLeft(0);while(!e.is('.jspPane')){eleTop+=e.position().top;eleLeft+=e.position().left;e=e.offsetParent();if(/^body|html$/i.test(e[0].nodeName)){return;}}
viewportTop=contentPositionY();maxVisibleEleTop=viewportTop+paneHeight;if(eleTop<viewportTop||stickToTop){destY=eleTop-settings.verticalGutter;}else if(eleTop+eleHeight>maxVisibleEleTop){destY=eleTop-paneHeight+eleHeight+settings.verticalGutter;}
if(destY){scrollToY(destY,animate);}
viewportLeft=contentPositionX();maxVisibleEleLeft=viewportLeft+paneWidth;if(eleLeft<viewportLeft||stickToTop){destX=eleLeft-settings.horizontalGutter;}else if(eleLeft+eleWidth>maxVisibleEleLeft){destX=eleLeft-paneWidth+eleWidth+settings.horizontalGutter;}
if(destX){scrollToX(destX,animate);}}
function contentPositionX(){return-pane.position().left;}
function contentPositionY(){return-pane.position().top;}
function isCloseToBottom(){var scrollableHeight=contentHeight-paneHeight;return(scrollableHeight>20)&&(scrollableHeight-contentPositionY()<10);}
function isCloseToRight(){var scrollableWidth=contentWidth-paneWidth;return(scrollableWidth>20)&&(scrollableWidth-contentPositionX()<10);}
function initMousewheel(){container.unbind(mwEvent).bind(mwEvent,function(event,delta,deltaX,deltaY){var dX=horizontalDragPosition,dY=verticalDragPosition;jsp.scrollBy(deltaX*settings.mouseWheelSpeed,-deltaY*settings.mouseWheelSpeed,false);return dX==horizontalDragPosition&&dY==verticalDragPosition;});}
function removeMousewheel(){container.unbind(mwEvent);}
function nil(){return false;}
function initFocusHandler(){pane.find(':input,a').unbind('focus.jsp').bind('focus.jsp',function(e){scrollToElement(e.target,false);});}
function removeFocusHandler(){pane.find(':input,a').unbind('focus.jsp');}
function initKeyboardNav(){var keyDown,elementHasScrolled,validParents=[];isScrollableH&&validParents.push(horizontalBar[0]);isScrollableV&&validParents.push(verticalBar[0]);pane.focus(function(){elem.focus();});elem.attr('tabindex',0).unbind('keydown.jsp keypress.jsp').bind('keydown.jsp',function(e){if(e.target!==this&&!(validParents.length&&$(e.target).closest(validParents).length)){return;}
var dX=horizontalDragPosition,dY=verticalDragPosition;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:keyDown=e.keyCode;keyDownHandler();break;case 35:scrollToY(contentHeight-paneHeight);keyDown=null;break;case 36:scrollToY(0);keyDown=null;break;}
elementHasScrolled=e.keyCode==keyDown&&dX!=horizontalDragPosition||dY!=verticalDragPosition;return!elementHasScrolled;}).bind('keypress.jsp',function(e){if(e.keyCode==keyDown){keyDownHandler();}
return!elementHasScrolled;});if(settings.hideFocus){elem.css('outline','none');if('hideFocus'in container[0]){elem.attr('hideFocus',true);}}else{elem.css('outline','');if('hideFocus'in container[0]){elem.attr('hideFocus',false);}}
function keyDownHandler(){var dX=horizontalDragPosition,dY=verticalDragPosition;switch(keyDown){case 40:jsp.scrollByY(settings.keyboardSpeed,false);break;case 38:jsp.scrollByY(-settings.keyboardSpeed,false);break;case 34:case 32:jsp.scrollByY(paneHeight*settings.scrollPagePercent,false);break;case 33:jsp.scrollByY(-paneHeight*settings.scrollPagePercent,false);break;case 39:jsp.scrollByX(settings.keyboardSpeed,false);break;case 37:jsp.scrollByX(-settings.keyboardSpeed,false);break;}
elementHasScrolled=dX!=horizontalDragPosition||dY!=verticalDragPosition;return elementHasScrolled;}}
function removeKeyboardNav(){elem.attr('tabindex','-1').removeAttr('tabindex').unbind('keydown.jsp keypress.jsp');}
function observeHash(){if(location.hash&&location.hash.length>1){var e,retryInt,hash=escape(location.hash.substr(1));try{e=$('#'+hash+', a[name="'+hash+'"]');}catch(err){return;}
if(e.length&&pane.find(hash)){if(container.scrollTop()===0){retryInt=setInterval(function(){if(container.scrollTop()>0){scrollToElement(e,true);$(document).scrollTop(container.position().top);clearInterval(retryInt);}},50);}else{scrollToElement(e,true);$(document).scrollTop(container.position().top);}}}}
function hijackInternalLinks(){if($(document.body).data('jspHijack')){return;}
$(document.body).data('jspHijack',true);$(document.body).delegate('a[href*=#]','click',function(event){var href=this.href.substr(0,this.href.indexOf('#')),locationHref=location.href,hash,element,container,jsp,scrollTop,elementTop;if(location.href.indexOf('#')!==-1){locationHref=location.href.substr(0,location.href.indexOf('#'));}
if(href!==locationHref){return;}
hash=escape(this.href.substr(this.href.indexOf('#')+1));element;try{element=$('#'+hash+', a[name="'+hash+'"]');}catch(e){return;}
if(!element.length){return;}
container=element.closest('.jspScrollable');jsp=container.data('jsp');jsp.scrollToElement(element,true);if(container[0].scrollIntoView){scrollTop=$(window).scrollTop();elementTop=element.offset().top;if(elementTop<scrollTop||elementTop>scrollTop+$(window).height()){container[0].scrollIntoView();}}
event.preventDefault();});}
function initTouch(){var startX,startY,touchStartX,touchStartY,moved,moving=false;container.unbind('touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick').bind('touchstart.jsp',function(e){var touch=e.originalEvent.touches[0];startX=contentPositionX();startY=contentPositionY();touchStartX=touch.pageX;touchStartY=touch.pageY;moved=false;moving=true;}).bind('touchmove.jsp',function(ev){if(!moving){return;}
var touchPos=ev.originalEvent.touches[0],dX=horizontalDragPosition,dY=verticalDragPosition;jsp.scrollTo(startX+touchStartX-touchPos.pageX,startY+touchStartY-touchPos.pageY);moved=moved||Math.abs(touchStartX-touchPos.pageX)>5||Math.abs(touchStartY-touchPos.pageY)>5;return dX==horizontalDragPosition&&dY==verticalDragPosition;}).bind('touchend.jsp',function(e){moving=false;}).bind('click.jsp-touchclick',function(e){if(moved){moved=false;return false;}});}
function destroy(){var currentY=contentPositionY(),currentX=contentPositionX();elem.removeClass('jspScrollable').unbind('.jsp');elem.replaceWith(originalElement.append(pane.children()));originalElement.scrollTop(currentY);originalElement.scrollLeft(currentX);if(reinitialiseInterval){clearInterval(reinitialiseInterval);}}
$.extend(jsp,{reinitialise:function(s){s=$.extend({},settings,s);initialise(s);},scrollToElement:function(ele,stickToTop,animate){scrollToElement(ele,stickToTop,animate);},scrollTo:function(destX,destY,animate){scrollToX(destX,animate);scrollToY(destY,animate);},scrollToX:function(destX,animate){scrollToX(destX,animate);},scrollToY:function(destY,animate){scrollToY(destY,animate);},scrollToPercentX:function(destPercentX,animate){scrollToX(destPercentX*(contentWidth-paneWidth),animate);},scrollToPercentY:function(destPercentY,animate){scrollToY(destPercentY*(contentHeight-paneHeight),animate);},scrollBy:function(deltaX,deltaY,animate){jsp.scrollByX(deltaX,animate);jsp.scrollByY(deltaY,animate);},scrollByX:function(deltaX,animate){var destX=contentPositionX()+Math[deltaX<0?'floor':'ceil'](deltaX),percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate);},scrollByY:function(deltaY,animate){var destY=contentPositionY()+Math[deltaY<0?'floor':'ceil'](deltaY),percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate);},positionDragX:function(x,animate){positionDragX(x,animate);},positionDragY:function(y,animate){positionDragY(y,animate);},animate:function(ele,prop,value,stepCallback){var params={};params[prop]=value;ele.animate(params,{'duration':settings.animateDuration,'easing':settings.animateEase,'queue':false,'step':stepCallback});},getContentPositionX:function(){return contentPositionX();},getContentPositionY:function(){return contentPositionY();},getContentWidth:function(){return contentWidth;},getContentHeight:function(){return contentHeight;},getPercentScrolledX:function(){return contentPositionX()/(contentWidth-paneWidth);},getPercentScrolledY:function(){return contentPositionY()/(contentHeight-paneHeight);},getIsScrollableH:function(){return isScrollableH;},getIsScrollableV:function(){return isScrollableV;},getContentPane:function(){return pane;},scrollToBottom:function(animate){positionDragY(dragMaxY,animate);},hijackInternalLinks:$.noop,destroy:function(){destroy();}});initialise(s);}
settings=$.extend({},$.fn.jScrollPane.defaults,settings);$.each(['mouseWheelSpeed','arrowButtonSpeed','trackClickSpeed','keyboardSpeed'],function(){settings[this]=settings[this]||settings.speed;});return this.each(function(){var elem=$(this),jspApi=elem.data('jsp');if(jspApi){jspApi.reinitialise(settings);}else{$("script",elem).filter('[type="text/javascript"],:not([type])').remove();jspApi=new JScrollPane(elem,settings);elem.data('jsp',jspApi);}});};$.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:undefined,animateScroll:false,animateDuration:300,animateEase:'linear',hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:'split',horizontalArrowPositions:'split',enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8};})(jQuery,this);

Segmentation=(function($){var segmentation=function segmentation(config){var self=this;self.currentSegmentStr="";self.targetId="segmentEditorPanel";self.segmentAccess="read";self.availableSegments=[];for(var item in config)
{self[item]=config[item];}
self.timer="";self.searchAllowed=true;self.availableMatches=[];self.availableMatches["metric"]=[];self.availableMatches["metric"]["=="]=self.translations['General_OperationEquals'];self.availableMatches["metric"]["!="]=self.translations['General_OperationNotEquals'];self.availableMatches["metric"]["<="]=self.translations['General_OperationAtMost'];self.availableMatches["metric"][">="]=self.translations['General_OperationAtLeast'];self.availableMatches["metric"]["<"]=self.translations['General_OperationLessThan'];self.availableMatches["metric"][">"]=self.translations['General_OperationGreaterThan'];self.availableMatches["dimension"]=[];self.availableMatches["dimension"]["=="]=self.translations['General_OperationIs'];self.availableMatches["dimension"]["!="]=self.translations['General_OperationIsNot'];self.availableMatches["dimension"]["=@"]=self.translations['General_OperationContains'];self.availableMatches["dimension"]["!@"]=self.translations['General_OperationDoesNotContain'];segmentation.prototype.getSegment=function(){var self=this;if($.browser.mozilla){return self.currentSegmentStr;}
return decodeURIComponent(self.currentSegmentStr);}
var setSegment=function(segmentStr){if(!$.browser.mozilla){segmentStr=encodeURIComponent(segmentStr);}
self.currentSegmentStr=segmentStr;}
segmentation.prototype.shortenSegmentName=function(name,length){if(typeof length==="undefined")length=26;if(typeof name==="undefined")name="";var i;if(name.length>length)
{for(i=length;i>0;i--){if(name[i]===" "){break;}}
if(i==0){i=length-3;}
return name.slice(0,i)+"...";}
return name;}
var markCurrentSegment=function(){var current=self.getSegment();var segmentationTitle=$(self.content).find(".segmentationTitle");if(current!="")
{var selector='div.segmentList ul li[data-definition="'+current+'"]';var foundItems=$(selector);if(foundItems.length>0){var name=$(foundItems).first().find("span.segname").text();segmentationTitle.html("<b>"+name+"</b>");}else{segmentationTitle.html("<b>Custom Segment</b>");}}
else{$(self.content).find(".segmentationTitle").text(self.translations['SegmentEditor_DefaultAllVisits']);}}
var getAndDiv=function(){if(typeof andDiv==="undefined"){var andDiv=$("#SegmentEditor > div.segment-and").clone();}
return andDiv.clone();}
var getOrDiv=function(){if(typeof orDiv==="undefined"){var orDiv=$("#SegmentEditor > div.segment-or").clone();}
return orDiv.clone();}
var getMockedInputSet=function(){if(typeof mockedInputSet==="undefined"){var mockedInputSet=$("#SegmentEditor div.segment-row-inputs").clone();}
return mockedInputSet.clone();}
var getMockedInputRowHtml=function(){if(typeof mockedInputRow==="undefined"){var mockedInputRow='<div class="segment-row"><a class="segment-close" href="#"></a><div class="segment-row-inputs">'+getMockedInputSet().html()+'</div></div>';}
return mockedInputRow;}
var getMockedFormRow=function(){if(typeof mockedFormRow==="undefined")
{var mockedFormRow=$("#SegmentEditor div.segment-rows").clone();$(mockedFormRow).find(".segment-row").append(getMockedInputSet()).after(getAddOrBlockButtonHtml).after(getOrDiv());}
return mockedFormRow.clone();}
var getInitialStateRowsHtml=function(){if(typeof initialStateRows==="undefined"){var content=$("#SegmentEditor div.initial-state-rows").html();var initialStateRows=$(content).clone();}
return initialStateRows;}
var revokeInitialStateRows=function(){$(self.form).find(".segment-add-row").remove();$(self.form).find(".segment-and").remove();}
var appendSpecifiedRowHtml=function(metric){$(self.form).find(".segment-content > h3").after(getMockedFormRow());$(self.form).find(".segment-content").append(getAndDiv());$(self.form).find(".segment-content").append(getAddNewBlockButtonHtml());doDragDropBindings();$(self.form).find(".metricList").val(metric).trigger("change");}
var appendComplexRowHtml=function(block){var key;var newRow=getMockedFormRow();var x=$(newRow).find(".metricMatchBlock select");$(newRow).find(".metricListBlock select").val(block[0].metric);$(newRow).find(".metricMatchBlock select").val(block[0].match);$(newRow).find(".metricValueBlock input").val(block[0].value);if(block.length>1){$(newRow).find(".segment-add-or").remove();for(key=1;key<block.length;key++){var newSubRow=$(getMockedInputRowHtml()).clone();$(newSubRow).find(".metricListBlock select").val(block[key].metric);$(newSubRow).find(".metricMatchBlock select").val(block[key].match);$(newSubRow).find(".metricValueBlock input").val(block[key].value);$(newRow).append(newSubRow).append(getOrDiv());}
$(newRow).append(getAddOrBlockButtonHtml());}
$(self.form).find(".segment-content").append(newRow).append(getAndDiv());}
var applyInitialStateModification=function(){$(self.form).find(".segment-add-row").remove();$(self.form).find(".segment-content").append(getInitialStateRowsHtml());doDragDropBindings();}
var getSegmentFromId=function(id){if(self.availableSegments.length>0){for(var key in self.availableSegments)
{segment=self.availableSegments[key];if(segment.idsegment==id){return segment;}}}
return false;}
var getListHtml=function(){var html=$("#SegmentEditor > .listHtml").clone();var segment,injClass;var listHtml='<li data-idsegment="" '+
(self.currentSegmentStr==""?" class='segmentSelected' ":"")
+' data-definition=""><span class="segname">'+self.translations['SegmentEditor_DefaultAllVisits']
+' '+self.translations['General_DefaultAppended']
+'</span></li> ';if(self.availableSegments.length>0){for(var key in self.availableSegments)
{segment=self.availableSegments[key];injClass="";if(segment.definition==self.currentSegmentStr){injClass='class="segmentSelected"';}
listHtml+='<li data-idsegment="'+segment.idsegment+'" data-definition="'+(segment.definition).replace(/"/g,'&quot;')+'" '
+injClass+' title="'+segment.name+'"><span class="segname">'
+self.shortenSegmentName(segment.name)+'</span>';if(self.segmentAccess=="write"){listHtml+='<span class="editSegment">['+self.translations['General_Edit'].toLocaleLowerCase()+']</span>';}
listHtml+='</li>';}
$(html).find(".segmentList > ul").append(listHtml);if(self.segmentAccess==="write"){$(html).find(".add_new_segment").html(self.translations['SegmentEditor_AddNewSegment']);}
else{$(html).find(".add_new_segment").hide();;}}
else
{$(html).find(".segmentList > ul").append(listHtml);}
return html;}
var getFormHtml=function(){var html=$("#SegmentEditor > .segment-element").clone();var segmentsDropdown=$(html).find("#available_segments_select");var segment,newOption;newOption='<option data-idsegment="" data-definition="" title="'
+self.translations['SegmentEditor_AddNewSegment']
+'">'+self.translations['SegmentEditor_AddNewSegment']
+'</option>';segmentsDropdown.append(newOption);for(var key in self.availableSegments)
{segment=self.availableSegments[key];newOption='<option data-idsegment="'+segment.idsegment+'" data-definition="'+(segment.definition).replace(/"/g,'&quot;')+'" title="'+segment.name+'">'+self.shortenSegmentName(segment.name)+'</option>';segmentsDropdown.append(newOption);}
$(html).find(".segment-content > h3").after(getInitialStateRowsHtml()).show();return html;}
var doListBindings=function()
{self.jscroll=self.content.find(".segmentList").jScrollPane({autoReinitialise:true,showArrows:true}).data().jsp;self.content.find(".add_new_segment").unbind().on("click",function(event){event.stopPropagation();closeAllOpenLists();addForm("new");doDragDropBindings();});}
var closeAllOpenLists=function(){$(".segmentationContainer").each(function(){if($(this).hasClass("visible"))
$(this).trigger("click");});}
var findAndExplodeByMatch=function(metric){var matches=["==","!=","<=",">=","=@","!@","<",">"];var newMetric={};var minPos=metric.length;var match,index;var singleChar=false;for(var key=0;key<matches.length;key++)
{match=matches[key];index=metric.indexOf(match);if(index!=-1){if(index<minPos){minPos=index;if(match.length==1){singleChar=true;}}}}
if(minPos<metric.length){if(singleChar==true){newMetric.metric=metric.substr(0,minPos);newMetric.match=metric.substr(minPos,1);newMetric.value=metric.substr(minPos+1);}else{newMetric.metric=metric.substr(0,minPos);newMetric.match=metric.substr(minPos,2);newMetric.value=metric.substr(minPos+2);}
if(newMetric.value=='""')
{newMetric.value="";}}
newMetric.value=decodeURIComponent(newMetric.value);return newMetric;}
var parseSegmentStr=function(segmentStr)
{var blocks;blocks=segmentStr.split(";");for(var key in blocks){blocks[key]=blocks[key].split(",");for(var innerkey=0;innerkey<blocks[key].length;innerkey++){blocks[key][innerkey]=findAndExplodeByMatch(blocks[key][innerkey]);}}
return blocks;}
var openEditForm=function(segment){addForm("edit",segment);$(self.form).find(".segment-content > h3 > span").text(segment.name);$(self.form).find('#available_segments_select > option[data-idsegment="'+segment.idsegment+'"]').prop("selected",true);$(self.form).find('#available_segments a.dropList').html(self.shortenSegmentName(segment.name,16));if(segment.definition!=""){revokeInitialStateRows();var blocks=parseSegmentStr(segment.definition);for(var key in blocks){appendComplexRowHtml(blocks[key]);}
$(self.form).find(".segment-content").append(getAddNewBlockButtonHtml());}
$(self.form).find(".metricList").each(function(){$(this).trigger("change",true);});doDragDropBindings();}
var bindListEvents=function(){$(self.content).off("click").on("click",function(event){if(self.content.hasClass("visible")){if($(event.target).hasClass("jspDrag")===true)
{event.stopPropagation();}
else{self.jscroll.destroy();self.content.removeClass("visible");}}
else{closeAllOpenLists();self.content.addClass("visible");doListBindings();}});$(self.content).off("click",".editSegment").on("click",".editSegment",function(e){$(this).parents(".segmentationContainer").trigger("click");var target=$(this).parent("li");openEditFormGivenSegment(target);e.stopPropagation();e.preventDefault();});$(self.content).off("click",".segmentList li").on("click",".segmentList li",function(e){if($(e.currentTarget).hasClass("grayed")!==true){var segment={};segment.idsegment=$(this).attr("data-idsegment");segment.definition=$(this).data("definition");segment.name=$(this).attr("title");self.segmentSelectMethod(segment.definition);toggleLoadingMessage(segment.definition.length);setSegment(segment.definition);markCurrentSegment();}});};var bindChangeMetricSelectEvent=function()
{$(".segment-content").off("change","select.metricList").on("change","select.metricList",function(e,persist){if(typeof persist==="undefined"){persist=false;}
alterMatchesList(this,persist);doDragDropBindings();autoSuggestValues(this,persist);});}
var autoSuggestValues=function(select,persist){var type=$(select).find("option:selected").attr("value");if(!persist){var parents=$(select).parents('.segment-row');var loadingElement=parents.find(".segment-loading");loadingElement.show();var inputElement=parents.find(".metricValueBlock input");var segmentName=$('option:selected',select).attr('value');var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'API.getSuggestedValuesForSegment',segmentName:segmentName},'GET');ajaxHandler.setCallback(function(response){loadingElement.hide();inputElement.autocomplete({source:response,minLength:0,select:function(event,ui){event.preventDefault();$(inputElement).val(ui.item.value);}});inputElement.click(function(e){inputElement.autocomplete('search',$(inputElement).val());});});ajaxHandler.send();}}
var alterMatchesList=function(select,persist){var oldMatch;var type=$(select).find("option:selected").attr("data-type");var matchSelector=$(select).parents(".segment-input").siblings(".metricMatchBlock").find("select");if(persist===true){oldMatch=matchSelector.find("option:selected").val();}else{oldMatch="";}
if(type==="dimension"||type==="metric"){matchSelector.empty();var optionsHtml="";for(var key in self.availableMatches[type]){optionsHtml+='<option value="'+key+'">'+self.availableMatches[type][key]+'</option>';}}
matchSelector.append(optionsHtml);matchSelector.val(oldMatch);}
var getAddNewBlockButtonHtml=function()
{if(typeof addNewBlockButton==="undefined")
{var addNewBlockButton=$("#SegmentEditor > div.segment-add-row").clone();}
return addNewBlockButton.clone();}
var getAddOrBlockButtonHtml=function(){if(typeof addOrBlockButton==="undefined")
{var addOrBlockButton=$("#SegmentEditor div.segment-add-or").clone();}
return addOrBlockButton.clone();}
var placeSegmentationFormControls=function(){doDragDropBindings();$(self.form).find(".scrollable").jScrollPane({showArrows:true,autoReinitialise:true,verticalArrowPositions:'os',horizontalArrowPositions:'os'});}
function openEditFormGivenSegment(option){var segment={};segment.idsegment=option.attr("data-idsegment");var segmentExtra=getSegmentFromId(segment.idsegment);for(var item in segmentExtra)
{segment[item]=segmentExtra[item];}
segment.name=option.attr("title");segment.definition=option.data("definition");openEditForm(segment);}
var bindFormEvents=function(){$(self.form).on("click","a:not(.crowdfundingLink)",function(e){e.preventDefault();});$('#closeSegmentationForm').on("click",function(){$("#segmentList").show();self.form.remove();});$(self.form).off("click","a.editSegmentName").on("click","a.editSegmentName",function(e){var oldName=$(e.currentTarget).parents("h3").find("span").text();$(e.currentTarget).parents("h3").find("span").hide();$(e.currentTarget).hide();$(e.currentTarget).before('<input id="edit_segment_name"/>');$(e.currentTarget).siblings("#edit_segment_name").focus().val(oldName);});$(self.form).off("click",".segmentName").on("click",".segmentName",function(e){$(self.form).find("a.editSegmentName").trigger('click');});$(self.form).off("blur","input#edit_segment_name").on("blur","input#edit_segment_name",function(e){var newName=$(this).val();if(newName.trim()!=''){$(e.currentTarget).parents("h3").find("span").text(newName).show();$(self.form).find("a.editSegmentName").show();$(this).remove();}});$(self.form).on("click",'.segment-element',function(event){event.stopPropagation();event.preventDefault();});$(self.form).find("#available_segments_select").bind("change",function(e){var option=$(e.currentTarget).find('option:selected');openEditFormGivenSegment(option);});$(self.form).find(".segment-nav > div > ul > li > a").each(function(){$(this).on("click",function(e){$(e.currentTarget).siblings("ul").toggle();});});$(self.form).off("click",".custom_select_search a").on("click",".custom_select_search a",function(e){$(self.form).find("#segmentSearch").val("").trigger("keyup").val(self.translations['General_Search']);});$(self.form).find("#segmentSearch").on("focus",function(e){var search=$(e.currentTarget).val();if(search==self.translations['General_Search'])
$(e.currentTarget).val("");});$(self.form).find("#segmentSearch").on("blur",function(e){var search=$(e.currentTarget).val();if(search==""){clearSearchMetricHighlight();$(e.currentTarget).val(self.translations['General_Search']);}});$(self.form).find("#segmentSearch").on("keyup",function(e){var search=$(e.currentTarget).val();if(search.length>=2)
{clearTimeout(self.timer);self.searchAllowed=true;self.timer=setTimeout(function(){searchSegments(search);},500);}
else{self.searchAllowed=false;clearSearchMetricHighlight();}});$(self.form).on("click",".delete",function(){var segmentName=$(self.form).find(".segment-content > h3 > span").text();var segmentId=$(self.form).find("#available_segments_select option:selected").attr("data-idsegment")
var params={"idsegment":segmentId};$('#confirm').find('#name').text(segmentName);if(segmentId!=""){piwikHelper.modalConfirm('#confirm',{yes:function(){self.deleteMethod(params);}});}});$(self.form).on("click","a.close",function(e){$("#segmentList").show();self.form.unbind().remove();});$("body").on("keyup",function(e){if(e.keyCode=="27"){$("#segmentList").show();$(self.form).remove();}});bindChangeMetricSelectEvent();placeSegmentationFormControls();}
var doDragDropBindings=function(){$(self.form).find(".segment-nav div > ul > li > ul > li").sortable({cursor:'move',revert:10,revertDuration:0,snap:false,helper:'clone',appendTo:'body'});$(self.form).find(".metricListBlock").droppable({hoverClass:"hovered",drop:function(event,ui){$(this).find("select").val(ui.draggable.parent().attr("data-metric")).trigger("change");}});$(self.form).find(".segment-add-row > div").droppable({hoverClass:"hovered",drop:function(event,ui){$(this).find("a").trigger("click",[ui.draggable.parent().attr("data-metric")]);if($(this).find("a > span").length==0){revokeInitialStateRows();appendSpecifiedRowHtml([ui.draggable.parent().attr("data-metric")]);}}});$(self.form).find(".segment-add-or > div").droppable({hoverClass:"hovered",drop:function(event,ui){$(this).find("a").trigger("click",[ui.draggable.parent().attr("data-metric")]);}});}
var searchSegments=function(search){search=normalizeSearchString(search);clearSearchMetricHighlight();$(self.form).find('.segment-nav div > ul > li').hide();var curStr="";var curMetric="";$(self.form).find('.segment-nav div > ul > li').each(function(){curStr=normalizeSearchString($(this).find("a.metric_category").text())
if(curStr.indexOf(search)>-1){$(this).addClass("searchFound");$(this).find("ul").show();$(this).find("li").show();$(this).show();}});$(self.form).find(".segment-nav div > ul > li:not(.searchFound)").each(function(){var parent=this;$(this).find("li").each(function(){var curStr=normalizeSearchString($(this).text());var curMetric=normalizeSearchString($(this).attr("data-metric"));$(this).hide();if(curStr.indexOf(search)>-1||curMetric.indexOf(search)>-1){$(this).show();$(parent).find("ul").show();$(parent).addClass("searchFound").show();}});});if($(self.form).find("li.searchFound").length==0)
{$(self.form).find("div > ul").prepend('<li class="no_results"><a>'+self.translations['General_SearchNoResults']+'</a></li>').show();}
if(self.searchAllowed==false)
{clearSearchMetricHighlight();self.searchAllowed=true;}}
var clearSearchMetricHighlight=function(){$(self.form).find('.no_results').remove();$(self.form).find('.segment-nav div > ul > li').removeClass("searchFound").show();$(self.form).find('.segment-nav div > ul > li').removeClass("others").show();$(self.form).find('.segment-nav div > ul > li > ul > li').show();$(self.form).find('.segment-nav div > ul > li > ul').hide();}
var normalizeSearchString=function(search){search=search.replace(/^\s+|\s+$/g,'');search=search.toLowerCase();var from="àáäâèéëêìíïîòóöôùúüûñç·/_,:;";var to="aaaaeeeeiiiioooouuuunc------";for(var i=0,l=from.length;i<l;i++){search=search.replace(new RegExp(from.charAt(i),'g'),to.charAt(i));}
search=search.replace(/[^a-z0-9 -]/g,'').replace(/\s+/g,'_').replace(/-+/g,'-');return search;}
var bindSegmentManipulationEvents=function(){$(self.form).on("click",".segment-add-row a",function(event,data){$(self.form).find(".segment-and:last").after(getAndDiv()).after(getMockedFormRow());if(typeof data!=="undefined"){$(self.form).find(".metricList:last").val(data);}
$(self.form).find(".metricList:last").trigger('change')
doDragDropBindings();});$(self.form).on("click",".segment-add-row span",function(event,data){if(typeof data!=="undefined"){$(self.form).find(".segment-and:last").after(getAndDiv()).after(getMockedFormRow());$(self.form).find(".metricList:last").val(data).trigger('change');doDragDropBindings();}});$(self.form).on("click",".segment-add-or  a",function(event,data){$(event.currentTarget).parents(".segment-rows").find(".segment-or:last").after(getOrDiv()).after(getMockedInputRowHtml());if(typeof data!=="undefined"){$(event.currentTarget).parents(".segment-rows").find(".metricList:last").val(data);}
$(event.currentTarget).parents(".segment-rows").find(".metricList:last").trigger('change');doDragDropBindings();});$(self.form).on("click",".segment-close",function(e){var target=e.currentTarget;var rowCnt=$(target).parents(".segment-rows").find(".segment-row").length;var globalRowCnt=$(self.form).find(".segment-close").length;if(rowCnt>1){$(target).parents(".segment-row").next().remove();$(target).parents(".segment-row").remove();}
else if(rowCnt==1){$(target).parents(".segment-rows").next().remove();$(target).parents(".segment-rows").remove();if(globalRowCnt==1){applyInitialStateModification();}}});}
var addForm=function(mode,segment){$("#segmentEditorPanel").find(".segment-element:visible").unbind().remove();if(typeof self.form!=="undefined")
{self.form.unbind().remove();}
self.form=getFormHtml();$("#segmentEditorPanel").prepend(self.form);setLeftMargin('#segmentEditorPanel > .segment-element');bindFormEvents();bindSegmentManipulationEvents();if(mode=="edit"){$(self.form).find('#enable_all_users_select > option[value="'+segment.enable_all_users+'"]').prop("selected",true);$(self.form).find('#visible_to_website_select > option[value="'+segment.enable_only_idsite+'"]').prop("selected",true);$(self.form).find('#auto_archive_select > option[value="'+segment.auto_archive+'"]').prop("selected",true);}
makeDropList("#enable_all_users","#enable_all_users_select");makeDropList("#visible_to_website","#visible_to_website_select");makeDropList("#auto_archive","#auto_archive_select");makeDropList("#available_segments","#available_segments_select");$(self.form).find(".saveAndApply").bind("click",function(e){e.preventDefault();parseFormAndSave();});$(self.form).find('.segment-footer').hover(function(){$('.segmentFooterNote').fadeIn();},function(){$('.segmentFooterNote').fadeOut();});if(typeof mode!=="undefined"&&mode=="new")
{$(self.form).find(".editSegmentName").trigger('click');}
$("#segmentList").hide();}
var parseForm=function(){var segmentStr="";$(self.form).find(".segment-rows").each(function(){var subSegmentStr="";$(this).find(".segment-row").each(function(){if(subSegmentStr!=""){subSegmentStr+=",";}
$(this).find(".segment-row-inputs").each(function(){var metric=$(this).find(".metricList option:selected").val();var match=$(this).find(".metricMatchBlock > select option:selected").val();var value=$(this).find(".segment-input input").val();subSegmentStr+=metric+match+encodeURIComponent(value);});});if(segmentStr!="")
{segmentStr+=";";}
segmentStr+=subSegmentStr;});return segmentStr}
var parseFormAndSave=function(){var segmentName=$(self.form).find(".segment-content > h3 >span").text();var segmentStr=parseForm();var segmentId=$(self.form).find('#available_segments_select > option:selected').attr("data-idsegment");var user=$(self.form).find("#enable_all_users_select option:selected").val();var autoArchive=$(self.form).find("#auto_archive_select option:selected").val()||0;var params={"name":segmentName,"definition":segmentStr,"enabledAllUsers":user,"autoArchive":autoArchive,"idSite":$(self.form).find("#visible_to_website_select option:selected").val()};if(segmentId===""){self.addMethod(params);}
else{jQuery.extend(params,{"idSegment":segmentId});self.updateMethod(params);}}
var makeDropList=function(spanId,selectId){var select=$(self.form).find(selectId).hide();var dropList=$('<a class="dropList dropdown">').insertAfter(select).text(select.children(':selected').text()).autocomplete({delay:0,minLength:0,appendTo:"body",source:function(request,response){response(select.children("option").map(function(){var text=$(this).text();return{label:text,value:this.value,option:this};}));},select:function(event,ui){event.preventDefault();ui.item.option.selected=true;$('#SegmentEditor '+spanId+' option[value="'+ui.item.value+'"]').prop('selected',true);dropList.text(ui.item.label);$(self.form).find(selectId).trigger("change");}}).click(function(){$("a.dropList").autocomplete("close");if($(this).autocomplete("widget").is(":visible")){$(this).autocomplete("close");return;}
$(this).autocomplete("search","");});$('body').on('mouseup',function(e){if(!$(e.target).parents(spanId).length&&!$(e.target).is(spanId)&&!$(e.target).parents(spanId).length&&!$(e.target).parents(".ui-autocomplete").length&&!$(e.target).is(".ui-autocomplete")&&!$(e.target).parents(".ui-autocomplete").length){dropList.autocomplete().autocomplete("close");}});}
var setLeftMargin=function(selector){$(selector).css({left:Math.max($('#periodString')[0].offsetWidth)+10});}
function toggleLoadingMessage(segmentIsSet){if(segmentIsSet){$('#ajaxLoading .loadingSegment').show();}else{$('#ajaxLoading .loadingSegment').hide();}}
var initHtml=function(){if(typeof self.content!=="undefined"){self.content.unbind();}
var html=getListHtml();if(typeof self.content!=="undefined"){self.content.html($(html).html());}else{$("#"+self.targetId).append(html);self.content=$("#"+self.targetId).find(".segmentationContainer");}
setLeftMargin('.segmentationContainer');bindListEvents();markCurrentSegment();var segmentIsSet=self.getSegment().length;toggleLoadingMessage(segmentIsSet);}
initHtml();};return segmentation;})(jQuery);$(document).ready(function(){if(typeof availableSegments=="undefined"){return;}
var changeSegment=function(segmentDefinition){$('#segmentEditorPanel a.close').click();segmentDefinition=cleanupSegmentDefinition(segmentDefinition);segmentDefinition=encodeURIComponent(segmentDefinition);return broadcast.propagateNewPage('segment='+segmentDefinition,true);};var cleanupSegmentDefinition=function(definition){definition=definition.replace("'","%29");definition=definition.replace("&","%26");return definition;}
var addSegment=function(params){var ajaxHandler=new ajaxHelper();ajaxHandler.setLoadingElement();jQuery.extend(params,{"module":'API',"format":'json',"method":'SegmentEditor.add'});params.definition=cleanupSegmentDefinition(params.definition);ajaxHandler.addParams(params,'GET');ajaxHandler.useCallbackInCaseOfError();ajaxHandler.setCallback(function(response){if(response&&response.result=='error'){alert(response.message);}else{changeSegment(params.definition);}});ajaxHandler.send(true);};var updateSegment=function(params){var ajaxHandler=new ajaxHelper();ajaxHandler.setLoadingElement();jQuery.extend(params,{"module":'API',"format":'json',"method":'SegmentEditor.update'});params.definition=cleanupSegmentDefinition(params.definition);ajaxHandler.addParams(params,'GET');ajaxHandler.useCallbackInCaseOfError();ajaxHandler.setCallback(function(response){if(response&&response.result=='error'){alert(response.message);}else{changeSegment(params.definition);}});ajaxHandler.send(true);};var deleteSegment=function(params){var ajaxHandler=new ajaxHelper();ajaxHandler.addParams({module:'API',format:'json',method:'SegmentEditor.delete'},'GET');ajaxHandler.addParams({idSegment:params.idsegment},'POST');ajaxHandler.setLoadingElement();ajaxHandler.useCallbackInCaseOfError();ajaxHandler.setCallback(function(response){if(response&&response.result=='error'){alert(response.message);}else{return broadcast.propagateNewPage('segment=');}});ajaxHandler.send(true);};var segmentFromHash=broadcast.getParamValue('segment',location.hash);var segmentationFtw=new Segmentation({"targetId":"segmentList","segmentAccess":"write","availableSegments":availableSegments,"addMethod":addSegment,"updateMethod":updateSegment,"deleteMethod":deleteSegment,"segmentSelectMethod":changeSegment,"currentSegmentStr":segmentFromHash,"translations":segmentTranslations});$('body').on('mouseup',function(e){if($(e.target).parents('.segment-element').length===0&&!$(e.target).is('.segment-element')&&$(e.target).hasClass("ui-corner-all")==false&&$(e.target).hasClass("ddmetric")==false&&$(".segment-element:visible").length==1){$(".segment-element:visible").unbind().remove();$("#segmentList").show();}
if($(e.target).parents('#segmentList').length===0&&$(".segmentationContainer").hasClass("visible")){$(".segmentationContainer").trigger("click");}});});

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'];var toBind='onwheel'in document||document.documentMode>=9?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'];var lowestDelta,lowestDeltaXY;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}
$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel");},unmousewheel:function(fn){return this.unbind("mousewheel",fn);}});function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,absDeltaXY=0,fn;event=$.event.fix(orgEvent);event.type="mousewheel";if(orgEvent.wheelDelta){delta=orgEvent.wheelDelta;}
if(orgEvent.detail){delta=orgEvent.detail*-1;}
if(orgEvent.deltaY){deltaY=orgEvent.deltaY*-1;delta=deltaY;}
if(orgEvent.deltaX){deltaX=orgEvent.deltaX;delta=deltaX*-1;}
if(orgEvent.wheelDeltaY!==undefined){deltaY=orgEvent.wheelDeltaY;}
if(orgEvent.wheelDeltaX!==undefined){deltaX=orgEvent.wheelDeltaX*-1;}
absDelta=Math.abs(delta);if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;}
absDeltaXY=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDeltaXY||absDeltaXY<lowestDeltaXY){lowestDeltaXY=absDeltaXY;}
fn=delta>0?'floor':'ceil';delta=Math[fn](delta/lowestDelta);deltaX=Math[fn](deltaX/lowestDeltaXY);deltaY=Math[fn](deltaY/lowestDeltaXY);args.unshift(event,delta,deltaX,deltaY);return($.event.dispatch||$.event.handle).apply(this,args);}}));

(function($){var mwheelI={pos:[-260,-260]},minDif=3,doc=document,root=doc.documentElement,body=doc.body,longDelay,shortDelay;function unsetPos(){if(this===mwheelI.elem){mwheelI.pos=[-260,-260];mwheelI.elem=false;minDif=3;}}
$.event.special.mwheelIntent={setup:function(){var jElm=$(this).bind('mousewheel',$.event.special.mwheelIntent.handler);if(this!==doc&&this!==root&&this!==body){jElm.bind('mouseleave',unsetPos);}
jElm=null;return true;},teardown:function(){$(this).unbind('mousewheel',$.event.special.mwheelIntent.handler).unbind('mouseleave',unsetPos);return true;},handler:function(e,d){var pos=[e.clientX,e.clientY];if(this===mwheelI.elem||Math.abs(mwheelI.pos[0]-pos[0])>minDif||Math.abs(mwheelI.pos[1]-pos[1])>minDif){mwheelI.elem=this;mwheelI.pos=pos;minDif=250;clearTimeout(shortDelay);shortDelay=setTimeout(function(){minDif=10;},200);clearTimeout(longDelay);longDelay=setTimeout(function(){minDif=3;},1500);e=$.extend({},e,{type:'mwheelIntent'});return $.event.dispatch.apply(this,arguments);}}};$.fn.extend({mwheelIntent:function(fn){return fn?this.bind("mwheelIntent",fn):this.trigger("mwheelIntent");},unmwheelIntent:function(fn){return this.unbind("mwheelIntent",fn);}});$(function(){body=doc.body;$(doc).bind('mwheelIntent.mwheelIntentDefault',$.noop);});})(jQuery);